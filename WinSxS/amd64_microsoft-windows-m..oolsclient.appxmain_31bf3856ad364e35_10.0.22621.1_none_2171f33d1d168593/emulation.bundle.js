!function(e){function t(t){for(var o,a,r=t[0],l=t[1],d=t[2],u=0,g=[];u<r.length;u++){a=r[u];s[a]&&g.push(s[a][0]);s[a]=0}for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);h&&h(t);for(;g.length;)g.shift()();n.push.apply(n,d||[]);return i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],o=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(o=!1)}if(o){n.splice(t--,1);e=a(a.s=i[0])}}return e}var o={},s={14:0},n=[];function a(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};e[t].call(i.exports,i,i.exports,a);i.l=!0;return i.exports}a.m=e;a.c=o;a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})};a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};a.d(t,"a",t);return t};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t;r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var h=l;n.push([199,4]);i()}({199:function(e,t,i){"use strict";i.r(t);var o=i(70),s=i(10),n=i(6),a=i(57),r=i(2),l=i(4),d=i(47),h=i(143),u=i(85),g=i(61),p=i(45);class c extends d.a{constructor(e){super(e);this._radioButtonElement=this.rootElement;c.RadioButtons.push(this);this.rootElement.addEventListener("click",()=>this.onCheck());this.updateAriaProperties()}get check(){return this._onCheck}set check(e){this._onCheck=e}get checked(){return this._radioButtonElement.checked}set checked(e){this._radioButtonElement.checked=e;this.updateAriaProperties()}get disabled(){return this.rootElement.disabled}set disabled(e){this.rootElement.disabled=e}get groupName(){return this._radioButtonElement.name}get focusableElement(){return this._radioButtonElement}onCheck(){if(this.checked){this.rootElement.focus();this._onCheck&&this._onCheck();for(var e=0;e<c.RadioButtons.length;++e){var t=c.RadioButtons[e];t!==this&&t.groupName===this.groupName&&t.updateAriaProperties()}}this.updateAriaProperties()}updateAriaProperties(){this.rootElement.setAttribute("aria-checked",""+this.checked)}}c.RadioButtons=[];var m=i(94),_=i(12),S=i(9),v=i(46),f=i(56),E=i(13),A=i(42),y=i(81),C=i(175),b=i(27),I=i(59);var L,P,T,w,U,D,M={profileSelection:"default",categories:{resolution:[{displaySize:4,width:800,height:480},{displaySize:4.3,width:800,height:480},{displaySize:4.3,width:1280,height:720},{displaySize:4.5,width:1280,height:768},{displaySize:10.6,width:1024,height:768},{displaySize:10.6,width:1366,height:768},{displaySize:10.6,width:1920,height:1080},{displaySize:10.6,width:2560,height:1440},{displaySize:12,width:1280,height:800},{displaySize:23,width:1920,height:1080},{displaySize:27,width:2560,height:1440}],simulateGPS:{off:{latitude:null,longitude:null},on:{latitude:47.6448,longitude:-122.2985},onWithNoSignal:{latitude:null,longitude:null}}},userProfiles:[{profileName:"Profile1",browserProfile:"EmulationModesPhoneMode",userAgentString:"",orientation:"EmulationDisplayPortrait",resolution:{displaySize:10.6,width:1024,height:768},simulateGPS:{state:"on",location:{latitude:47.6097,longitude:-122.3331}}}],devices:[{type:"emulated-device",device:{"show-by-default":!0,title:"Microsoft Lumia 650",screen:{horizontal:{width:640,height:370},"device-pixel-ratio":2,vertical:{width:360,height:640}},capabilities:["touch","mobile","geolocation"],"user-agent":"Mozilla/5.0 (Windows Phone 10.0; Android 6.0.1; Microsoft; Lumia 650) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Mobile Safari/537.36 Edge/15.14900",type:"phone",modes:[]}},{type:"emulated-device",device:{"show-by-default":!0,"select-by-default":!0,title:"Microsoft Lumia 950",screen:{horizontal:{width:640,height:360},"device-pixel-ratio":4,vertical:{width:360,height:640}},capabilities:["touch","mobile","geolocation"],"user-agent":"Mozilla/5.0 (Windows Phone 10.0; Android 6.0.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Mobile Safari/537.36 Edge/15.14900",type:"phone",modes:[]}},{type:"emulated-device",device:{"show-by-default":!0,title:"Microsoft Lumia 950XL",screen:{horizontal:{width:640,height:360},"device-pixel-ratio":4,vertical:{width:360,height:640}},capabilities:["touch","mobile","geolocation"],"user-agent":"Mozilla/5.0 (Windows Phone 10.0; Android 6.0.1; Microsoft; Lumia 950XL) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Mobile Safari/537.36 Edge/15.14900",type:"phone",modes:[]}},{type:"emulated-device",device:{"show-by-default":!0,title:"Surface Book",screen:{horizontal:{width:640,height:360},"device-pixel-ratio":4,vertical:{width:360,height:640}},capabilities:["touch","geolocation"],"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36 Edge/15.14900",type:"desktop",modes:[]}},{type:"emulated-device",device:{"show-by-default":!0,title:"Surface Pro 4",screen:{horizontal:{width:640,height:360},"device-pixel-ratio":4,vertical:{width:360,height:640}},capabilities:["touch","geolocation"],"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36 Edge/15.14900",type:"desktop",modes:[]}}]};!function(e){e[e.Mode=1]="Mode";e[e.Display=2]="Display";e[e.Geolocation=4]="Geolocation";e[e.All=7]="All"}(L||(L={}));!function(e){e[e.Desktop=0]="Desktop";e[e.Phone=1]="Phone";e[e.Enterprise=2]="Enterprise";e[e.Unknown=3]="Unknown"}(P||(P={}));!function(e){e[e.BrowserMode=0]="BrowserMode";e[e.UserAgentString=1]="UserAgentString"}(T||(T={}));!function(e){e[e.Landscape=0]="Landscape";e[e.Portrait=1]="Portrait";e[e.Unknown=2]="Unknown"}(w||(w={}));!function(e){e[e.Orientation=0]="Orientation";e[e.Resolution=1]="Resolution"}(U||(U={}));!function(e){e[e.Off=0]="Off";e[e.On=1]="On";e[e.OnNoSignal=2]="OnNoSignal";e[e.Unknown=3]="Unknown"}(D||(D={}));var O=i(15),R=i(8),k=i(92),B=i(14),x=i(43);class G{constructor(e,t,i={}){this._validUAStrings=e;this._validResolutions=t;this._settings=i}get shouldPersistSettings(){return!!this._settings.shouldPersistSettings}get device(){return this._settings.device?this._settings.device:H.DEFAULT_VALUE}get browserMode(){var e=P[this._settings.browserMode];return void 0!==e&&e!==P.Unknown?e:P.Desktop}get userAgentString(){if(this._settings.userAgentString){var e=this._validUAStrings.map(e=>e.value).indexOf(this._settings.userAgentString);return e<0?H.CUSTOM_VALUE:this._validUAStrings[e].value}return H.DEFAULT_VALUE}get customUserAgentString(){return this._settings.userAgentString&&this.userAgentString===H.CUSTOM_VALUE?""+this._settings.userAgentString:""}get orientation(){var e=w[this._settings.orientation];return void 0!==e&&e!==w.Unknown?e:w.Landscape}get resolution(){if(this._settings.resolution){var e=Z.formatResolutionInfo(this._settings.resolution),t=this._validResolutions.map(e=>e.value).indexOf(e);return t<0?H.CUSTOM_VALUE:this._validResolutions[t].value}return H.DEFAULT_VALUE}get resolutionInfo(){return this._settings.resolution?{displaySize:this.validateFloatValue(this._settings.resolution.displaySize),width:this.validateIntValue(this._settings.resolution.width),height:this.validateIntValue(this._settings.resolution.height)}:{}}get geolocationState(){var e=D[this._settings.geolocationState];return void 0!==e&&e!==D.Unknown?e:D.Off}get geolocationInfo(){return this._settings.geolocation?{latitude:this.validateFloatValue(this._settings.geolocation.latitude),longitude:this.validateFloatValue(this._settings.geolocation.longitude)}:{}}validateIntValue(e){if("number"==typeof e)return e;var t=parseInt(e,10);return isNaN(t)||!isFinite(t)?void 0:t}validateFloatValue(e){if("number"==typeof e)return e;var t=parseFloat(e);return isNaN(t)||!isFinite(t)?void 0:t}}var N=i(60);class V{}V.RESET_SETTING="ResetSetting";V.CHANGE_BROWSER_PROFILE="BrowserProfileChange";V.CHANGE_USER_AGENT="UserAgentChange";V.CUSTOM_USER_AGENT="UserAgentCustom";V.CHANGE_ORIENTATION="OrientationChange";V.CHANGE_RESOLUTION="ResolutionChange";V.GPS_OFF="GPSOff";V.GPS_ON="GPSOn";V.GPS_NO_SIGNAL="GPSNoSignal";const z=new N.a("Emulation");class H extends R.b{constructor(e,t){super();this.devices=[];this.userAgentStrings=new k.a;this.mobileUserAgentStrings=[];this.customUserAgentStrings=new k.a;this.orientations=new k.a;this.resolutions=new k.a;this.mobileResolutions=[];this.propertiesResolved=new O.a;this.settingsHaveBeenModifiedChanged=new O.a;this.customResolutionFieldsNeedCommit=new O.a;this._events=e;this._config=t;this.propertiesResolved.addHandler(e=>this.onPropertiesResolved(e))}static initialize(){R.a.defineProperty(H,H.ShouldPersistSettingsProperty,!1,e=>e.onGenericPropertyChanged(null,null));R.a.defineProperty(H,H.IsAtBreakpointProperty,!1,(e,t,i)=>e.onIsAtBreakpointChanged(i));R.a.defineProperty(H,H.SettingsHaveBeenModifiedProperty,!1,e=>{e.updateResetEnabledState()});R.a.defineProperty(H,H.ResetShouldBeEnabledProperty,!1);R.a.defineProperty(H,H.AllBrowserModesProperty,[]);R.a.defineProperty(H,H.BrowserModesProperty,[]);R.a.defineProperty(H,H.BrowserModeProperty,H.BrowserModeDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onBrowserModeChanged(i)});R.a.defineProperty(H,H.AllDevicesProperty,[]);R.a.defineProperty(H,H.DeviceProperty,H.DeviceDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging=!1;e.onDeviceChanged(i)});R.a.defineProperty(H,H.UserAgentStringProperty,H.UserAgentStringDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onUserAgentStringChanged(i)});R.a.defineProperty(H,H.CustomUserAgentStringProperty,H.CustomUserAgentStringDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onCustomUserAgentStringChanged(i)});R.a.defineProperty(H,H.OrientationProperty,H.OrientationDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onDisplayPropertiesChanged(U.Orientation,i===H.OrientationDefault)});R.a.defineProperty(H,H.ResolutionProperty,H.ResolutionDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onDisplayPropertiesChanged(U.Resolution,i===H.ResolutionDefault)});R.a.defineProperty(H,H.ResolutionDisplaySizeProperty,H.ResolutionDisplaySizeDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onGenericPropertyChanged(H.ResolutionDisplaySizeDefault,i)});R.a.defineProperty(H,H.ResolutionWidthProperty,H.ResolutionWidthDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onGenericPropertyChanged(H.ResolutionWidthDefault,i)});R.a.defineProperty(H,H.ResolutionHeightProperty,H.ResolutionHeightDefault,(e,t,i)=>{e._events.areMultiplePropertiesChanging||e.onGenericPropertyChanged(H.ResolutionHeightDefault,i)});R.a.defineProperty(H,H.GeolocationStateProperty,H.GeolocationStateDefault,(e,t,i)=>e.onGenericPropertyChanged(H.GeolocationStateDefault,i));R.a.defineProperty(H,H.GpsLatitudeProperty,H.GpsLatitudeDefault,(e,t,i)=>e.onGenericPropertyChanged(H.GpsLatitudeDefault,i));R.a.defineProperty(H,H.GpsLongitudeProperty,H.GpsLongitudeDefault,(e,t,i)=>e.onGenericPropertyChanged(H.GpsLongitudeDefault,i))}load(e){var t=new G(this.userAgentStrings.map(e=>e),this.resolutions.map(e=>e),e);this.shouldPersistSettings=t.shouldPersistSettings;if(this.shouldPersistSettings){this._events.areMultiplePropertiesChanging=!0;this.browserMode=t.browserMode;this.userAgentString=t.userAgentString;this.customUserAgentString=t.customUserAgentString;this.orientation=t.orientation;this.resolution=t.resolution;var i=t.resolutionInfo;this.resolutionDisplaySize=i.displaySize;this.resolutionWidth=i.width;this.resolutionHeight=i.height;this.geolocationState=t.geolocationState;if(this.geolocationState===D.Off){var o=this._config?this._config.categories.simulateGPS.off:{};this.gpsLatitude=o.latitude;this.gpsLongitude=o.longitude}else{var s=t.geolocationInfo;this.gpsLatitude=s.latitude;this.gpsLongitude=s.longitude}this.device=t.device;this.updateDirtyFlag();this._events.areMultiplePropertiesChanging=!1;this._events.onFlushPendingRefreshes()}this.loadDevices()}save(){var e={};e.shouldPersistSettings=this.shouldPersistSettings;e.device=this.device;e.browserMode=P[this.browserMode];e.orientation=w[this.orientation];e.userAgentString=this.userAgentString!==H.CUSTOM_VALUE?this.userAgentString:this.customUserAgentString;if(this.resolution===H.DEFAULT_VALUE)e.resolution=null;else{e.resolution={};var t=this.resolutions.map(e=>e.value).indexOf(this.resolution);if(t>=0&&this.resolution!==H.CUSTOM_VALUE){var i=this.resolutions.getItem(t).info;e.resolution.displaySize=i.displaySize;e.resolution.width=i.width;e.resolution.height=i.height}else{e.resolution.displaySize=this.resolutionDisplaySize;e.resolution.width=this.resolutionWidth;e.resolution.height=this.resolutionHeight}}e.geolocationState=D[this.geolocationState];e.geolocation={};e.geolocation.latitude=this.gpsLatitude;e.geolocation.longitude=this.gpsLongitude;return e}reset(e){e||(this.device=H.DeviceDefault);this.browserMode=H.BrowserModeDefault;this.userAgentString=H.UserAgentStringDefault;this.customUserAgentString=H.CustomUserAgentStringDefault;this.orientation=H.OrientationDefault;this.resolution=H.ResolutionDefault;this.resolutionDisplaySize=H.ResolutionDisplaySizeDefault;this.resolutionWidth=H.ResolutionWidthDefault;this.resolutionHeight=H.ResolutionHeightDefault;this.geolocationState=H.GeolocationStateDefault;this.gpsLatitude=H.GpsLatitudeDefault;this.gpsLongitude=H.GpsLongitudeDefault;this.settingsHaveBeenModified=!1}onIsAtBreakpointChanged(e){this._events.onIsAtBreakpointChanged(e);this.updateResetEnabledState()}updateResetEnabledState(){this.resetShouldBeEnabled=this.settingsHaveBeenModified&&!this.isAtBreakpoint;this.settingsHaveBeenModifiedChanged.invoke(this.settingsHaveBeenModified)}updateEmulationState(){this.userAgentString===H.UserAgentStringDefault?this._events.onUserAgentStringChanged(this.userAgentString):this._events.onCustomUserAgentStringChanged(this.customUserAgentString);if(this.resolution===H.DEFAULT_VALUE)this._events.onResolutionSetToDefault();else if(this.resolution!==H.CUSTOM_VALUE){let e=this.getResolutionInfo(this.resolution);this._events.onEmulationStateChanged(this.browserMode,e.width,e.height,this.orientation)}else this._events.onEmulationStateChanged(this.browserMode,this.resolutionWidth,this.resolutionHeight,this.orientation);this.propertiesResolved.invoke(!0)}onDeviceChanged(e){if(e!==H.DEFAULT_VALUE){if(e!==H.CUSTOM_VALUE&&!this._events.areMultiplePropertiesChanging){this._events.areMultiplePropertiesChanging=!0;for(var t,i=0;i<this._config.devices.length;++i)if(this._config.devices[i].device.title===e){t=this._config.devices[i].device;break}if(t){this.browserMode=t.type.toLowerCase()===P[P.Phone].toLowerCase()?P.Phone:P.Desktop;this.userAgentString=H.CUSTOM_VALUE;this.customUserAgentString=t["user-agent"];this.browserMode===P.Phone?this.orientation=w.Portrait:this.orientation=w.Landscape;var o=t.screen.horizontal.width,s=t.screen.horizontal.height,n=t.screen["device-pixel-ratio"],a=o*n+H.RESOLUTION_SEPARATOR+s*n,r=!1;for(i=0;i<this.resolutions.length;++i)if(this.resolutions.getItem(i).text===a){this.resolution=a;r=!0;break}if(!r){this.resolutionWidth=o;this.resolutionHeight=s;this.resolution=H.CUSTOM_VALUE}t.capabilities.indexOf("geolocation")>-1&&(this.geolocationState=D.On)}this._events.areMultiplePropertiesChanging=!1;this.updateEmulationState()}}else{this._events.isResetInProgress=!0;this.reset(!0);this._events.isResetInProgress=!1;this.updateEmulationState()}}onBrowserModeChanged(e){z.logExecuteCommand(V.CHANGE_BROWSER_PROFILE,r.c.Ui);this._events.onBrowserModeChanged(e);if(!this._events.areMultiplePropertiesChanging){this._events.areMultiplePropertiesChanging=!0;var t=!0,i=this.userAgentString;this.userAgentString===H.CUSTOM_VALUE&&(t=!1);t&&(this.userAgentString=i);this.selectDefaultDevice(P[e].toLowerCase());this._events.onRefreshNeeded();this._events.areMultiplePropertiesChanging=!1;this.propertiesResolved.invoke(!0)}}onUserAgentStringChanged(e){z.logExecuteCommand(V.CHANGE_USER_AGENT,r.c.Ui);this._events.onUserAgentStringChanged(e);if(!this._events.areMultiplePropertiesChanging){var t=!0;this._events.areMultiplePropertiesChanging=!0;this._events.isResetInProgress||(this.device=H.CUSTOM_VALUE);if(e===H.CUSTOM_VALUE)t=!1;else if(this.mobileUserAgentStrings.indexOf(e)<0){this.browserMode=P.Desktop;this.orientation=w.Landscape;this.resolution=H.DEFAULT_VALUE}else{this.browserMode=P.Phone;this.orientation=w.Portrait;this.mobileResolutions.length>0&&(this.resolution=this.mobileResolutions[this.mobileResolutions.length-1])}t&&this._events.onRefreshNeeded();this._events.areMultiplePropertiesChanging=!1;this.propertiesResolved.invoke(this.userAgentString!==H.UserAgentStringDefault)}}onCustomUserAgentStringChanged(e){z.logExecuteCommand(V.CUSTOM_USER_AGENT,r.c.Ui);if(""!==e){this._events.onCustomUserAgentStringChanged(e).then(e=>{this.customUserAgentStrings.resetItems(e.map(e=>({text:e.value,date:e.name})).sort((e,t)=>t.date.localeCompare(e.date)))});this._events.areMultiplePropertiesChanging||(this.device=H.CUSTOM_VALUE)}this.propertiesResolved.invoke(this.customUserAgentString!==H.CustomUserAgentStringDefault)}getResolutionInfo(e){for(var t=0;t<this.resolutions.length;++t)if(this.resolutions.getItem(t).text===e)return this.resolutions.getItem(t).info;throw new Error("Resolution is set to an unknown value")}selectDefaultDevice(e){this._events.areMultiplePropertiesChanging=!1;e===P[P.Desktop].toLowerCase()&&(this.device=H.DEFAULT_VALUE);for(var t=0;this._config&&t<this._config.devices.length;t++)if(this._config.devices[t].device["select-by-default"]&&this._config.devices[t].device.type.toLowerCase()===e){this.device=this._config.devices[t].device.title;break}}onDisplayPropertiesChanged(e,t){if(e===U.Orientation)z.logExecuteCommand(V.CHANGE_ORIENTATION,r.c.Ui);else if(e===U.Resolution){this._events.areMultiplePropertiesChanging||(this.device=H.CUSTOM_VALUE);z.logExecuteCommand(V.CHANGE_RESOLUTION,r.c.Ui)}this.resolution===H.DEFAULT_VALUE?e===U.Resolution&&this.updateEmulationState():this.resolution!==H.CUSTOM_VALUE?this.updateEmulationState():this.customResolutionFieldsNeedCommit.invoke();this.propertiesResolved.invoke(!t)}onGenericPropertyChanged(e,t){if(!this._events.areMultiplePropertiesChanging){var i=!(e===t||(void 0===e||null===e)&&(void 0===t||null===t));this.propertiesResolved.invoke(i)}}onPropertiesResolved(e){e?this.settingsHaveBeenModified=!0:this.updateDirtyFlag()}updateDirtyFlag(){this.settingsHaveBeenModified=this.browserMode!==H.BrowserModeDefault||this.userAgentString!==H.UserAgentStringDefault||this.customUserAgentString!==H.CustomUserAgentStringDefault||this.orientation!==H.OrientationDefault||this.resolution!==H.ResolutionDefault||this.resolutionDisplaySize!==H.ResolutionDisplaySizeDefault||this.resolutionWidth!==H.ResolutionWidthDefault||this.resolutionHeight!==H.ResolutionHeightDefault||this.geolocationState!==H.GeolocationStateDefault||this.gpsLatitude!==H.GpsLatitudeDefault||this.gpsLongitude!==H.GpsLongitudeDefault||this.device!==H.DeviceDefault}loadDevices(e){var t,i=null;if("string"==typeof e)i=Promise.resolve(e);else{var o="";i=Object(x.a)().openFileAsHostFile(H.DEVICE_SETTINGS_FILE,{access:B.a.read,encoding:"UTF-8",mode:B.c.openOrCreate,persistence:B.d.permanent,type:B.f.text}).then(e=>(t=e).read()).then(e=>{o=e;return t.close()}).then(()=>o,e=>{e||(e={message:""});return Promise.reject(e)})}return i.then(e=>{var t;try{var i=JSON.parse(e),o=Date.parse(i.Time),s=(new Date).getTime();(!o||s-o>=864e5)&&this._events.downloadUrl(H.EMULATION_DEVICES_URL,!0);let n=i.Devices;t="string"==typeof n?JSON.parse(i.Devices):n}catch(e){t=M.devices;this._events.downloadUrl(H.EMULATION_DEVICES_URL,!0)}this._config.devices=t;this.devices.push({value:H.DEFAULT_VALUE,text:_.a.loadString("EmulationDefault")});for(var n=!1,a=0;a<t.length;++a){this.devices.push({value:t[a].device.title,text:t[a].device.title});this.shouldPersistSettings&&t[a].device.title===this.device&&(n=!0)}this.devices.push({value:H.CUSTOM_VALUE,text:_.a.loadString("EmulationCustom")});if(!n){this._events.areMultiplePropertiesChanging=!1;this.device=H.DEFAULT_VALUE}return Promise.resolve(JSON.stringify(t))})}saveDevices(e,t,i){var o=t||(new Date).toUTCString(),s=JSON.stringify({Time:o,Devices:e}),n=null;if(i)n=Promise.resolve(s);else{var a;n=Object(x.a)().openFileAsHostFile(H.DEVICE_SETTINGS_FILE,{access:B.a.write,encoding:"UTF-8",mode:B.c.createNew,persistence:B.d.permanent,type:B.f.text}).then(e=>(a=e).writeAllText(s)).then(()=>a.close()).then(()=>Promise.resolve(s),e=>{e||(e={message:""});return Promise.reject(e)})}return n.then(e=>Promise.resolve(e))}}H.DEFAULT_VALUE="";H.CUSTOM_VALUE="?";H.RESOLUTION_SEPARATOR=" x ";H.MAX_VIEWPORT_DISPLAY_SIZE=60;H.MAX_VIEWPORT_WIDTH_IN_PX=3820;H.MAX_VIEWPORT_HEIGHT_IN_PX=2160;H.MIN_LATITUDE=-90;H.MAX_LATITUDE=90;H.MIN_LONGITUDE=-180;H.MAX_LONGITUDE=180;H.EMULATION_DEVICES_URL="https://go.microsoft.com/fwlink/?LinkID=798232";H.ShouldPersistSettingsProperty="shouldPersistSettings";H.IsAtBreakpointProperty="isAtBreakpoint";H.SettingsHaveBeenModifiedProperty="settingsHaveBeenModified";H.ResetShouldBeEnabledProperty="resetShouldBeEnabled";H.AllBrowserModesProperty="allBrowserModes";H.BrowserModesProperty="browserModes";H.BrowserModeProperty="browserMode";H.AllDevicesProperty="devices";H.DeviceProperty="device";H.UserAgentStringProperty="userAgentString";H.CustomUserAgentStringProperty="customUserAgentString";H.OrientationProperty="orientation";H.ResolutionProperty="resolution";H.ResolutionDisplaySizeProperty="resolutionDisplaySize";H.ResolutionWidthProperty="resolutionWidth";H.ResolutionHeightProperty="resolutionHeight";H.GeolocationStateProperty="geolocationState";H.GpsLatitudeProperty="gpsLatitude";H.GpsLongitudeProperty="gpsLongitude";H.BrowserModeDefault=P.Desktop;H.UserAgentStringDefault=H.DEFAULT_VALUE;H.CustomUserAgentStringDefault="";H.OrientationDefault=w.Landscape;H.ResolutionDefault=H.DEFAULT_VALUE;H.ResolutionDisplaySizeDefault=null;H.ResolutionWidthDefault=null;H.ResolutionHeightDefault=null;H.GeolocationStateDefault=D.Off;H.GpsLatitudeDefault=null;H.GpsLongitudeDefault=null;H.DeviceDefault=H.DEFAULT_VALUE;H.DEVICE_SETTINGS_FILE="devices.json";H.initialize();var W=i(5);class F{constructor(e){this._emulationWindow=e;Object(s.g)().listen("notificationFromRemote|ms:emulation",e=>{const{event:t,params:i}=e;this.jsonRpcNotificationReceive(t,i)});W.b.addEventListener("attach",()=>this.onAttach());W.b.addEventListener("detach",()=>this.onDetach());W.b.isAttached&&this.onAttach()}get isConnected(){return!!this._rpc}jsonRpcMethodCall(e,t){return this.rpcCall(e,t)}jsonRpcNotificationReceive(e,t){switch(e){case"emulationHandshake":l.a.isTrue(t&&0!==t.length);this._emulationWindow.onHandshake(t[0]);break;case"Devices":l.a.isTrue(t&&0!==t.length);this._emulationWindow.saveDevices(t[0])}}onAttach(){this._emulationWindow.onAttach();window.setImmediate(()=>{W.b.notifyOnToolActivated(n.c.emulation);b.loadScripts(F.SCRIPTS,F.PORT_NAME);W.b.addEventListener("break",()=>this._emulationWindow.onBreak());W.b.addEventListener("run",()=>this._emulationWindow.onRun())})}rpcCall(e,t){return b.callRemote(F.PORT_NAME,e,t)}get shouldPerformRefreshes(){return!this._isAtBreakpoint}awaitRunningPromises(){if(this._runningPromises&&this._runningPromises.length>0){var e=this._runningPromises;this._runningPromises=[];return Promise.all(e)}return Promise.resolve({})}setPromise(e,t){this.areMultiplePropertiesChanging&&this._runningPromises||(this._runningPromises=[]);e.__debugname=t;this._runningPromises.push(e)}clearPromises(){this._runningPromises=[]}onIsAtBreakpointChanged(e){this._isAtBreakpoint=e}onBrowserModeChanged(e){if(this.eventsShouldFire){this.needsRefresh=!1;this.setPromise(this.rpcCall("setBrowserMode",[this.getStringFromBrowserMode(e)]),"onBrowserModeChanged")}}onUserAgentStringChanged(e){if(this.eventsShouldFire){this.needsRefresh=!0;var t=null;t=e===H.DEFAULT_VALUE?this.rpcCall("setUserAgentStringToDefault",[!1]):e!==H.CUSTOM_VALUE?this.rpcCall("setCurrentUserAgentString",[e,!1]):Promise.resolve();this.setPromise(t,"onUserAgentStringChanged")}}onCustomUserAgentStringChanged(e){this.needsRefresh=!this.shouldPerformRefreshes;l.a.isFalse(""===e,"Expected a non-empty custom UA string");var t=this.rpcCall("storeAndSetCustomUserAgentString",[e,this.shouldPerformRefreshes]);this.setPromise(t,"onCustomUserAgentStringChanged");return t}onRefreshNeeded(){this.needsRefresh=!1;this.eventsShouldFire&&this.shouldPerformRefreshes&&this.setPromise(this.rpcCall("refresh",[]),"onRefreshNeeded")}onFlushPendingRefreshes(){this.needsRefresh&&this.onRefreshNeeded()}onResolutionSetToDefault(){this.setPromise(this.rpcCall("resetViewportSizeToDefault",[]),"onResolutionSetToDefault")}onEmulationStateChanged(e,t,i,o){this.setPromise(this.rpcCall("setEmulationState",[this.getStringFromBrowserMode(e),t,i,this.getStringFromOrienation(o)]),"onEmulationStateChanged")}downloadUrl(e){this.setPromise(this.rpcCall("downloadUrl",[e,!0]),"downloadUrl")}onDetach(){this._emulationWindow.onDetach();this._rpc=null}getStringFromOrienation(e){if(e===w.Landscape)return"landscape";if(e===w.Portrait)return"portrait";throw new Error("Got unknown orientation value")}getStringFromBrowserMode(e){if(e===P.Desktop)return"Desktop";if(e===P.Phone)return"Mobile";if(e===P.Enterprise)return"Enterprise";throw new Error("Got unknown browser mode value")}}F.SCRIPTS=["../emulation/remote/emulationRemote.bundle.js"];F.PORT_NAME="emulationPort";var j=i(58),K=i(20);class X extends j.a{constructor(e,t,i,o){super(o);e.appendChild(this.rootElement);this._validationCallback=t;this._useLocaleString=i;this._textbox=this.findElement("validatedTextbox");this._errorIcon=this.findElement("validationErrorIcon");this._errorHelper=this.findElement("validationErrorHelper");this._textbox.setAttribute("aria-describedby",this._errorHelper.id);this._textbox.addEventListener("change",()=>this.onChange());this._textbox.addEventListener("keydown",e=>this.onKeydown(e));this._textbox.addEventListener("blur",()=>this.onBlur());this.clearValidationStatus(1)}get disabled(){return this._textbox.disabled}set disabled(e){this._textbox.disabled=e}set text(e){this._textbox.value=e}get text(){return this._textbox.value}get validationStatus(){return this._validationStatus.status}get validatedValue(){return this._validationStatus.validatedValue}set textCommitted(e){this._textCommitted=e}get textCommitted(){return this._textCommitted}set valueCommitted(e){this._valueCommitted=e}get valueCommitted(){return this._valueCommitted}set validationFailed(e){this._validationFailed=e}get validationFailed(){return this._validationFailed}get focusableElement(){return this._textbox}getValidationInfo(){return this._validationStatus}commitEdits(){this.validateAndCommit()}tryValidate(){this.validateAndCommit(!1);return 1===this.validationStatus}onChange(){this.validateAndCommit()}onKeydown(e){if(13===e.keyCode){this.validateAndCommit();e.preventDefault()}else this.clearValidationStatus()}onBlur(){0===this.validationStatus&&this.validateAndCommit()}clearValidationStatus(e=0){this._validationStatus={status:e,tooltip:""};this._errorIcon.style.display="none";this._errorHelper.innerText=""}validateAndCommit(e=!0){try{this._validationStatus=this._validationCallback(this._textbox.value)}catch(e){this._validationStatus={status:2,tooltip:""}}if(1===this._validationStatus.status){this._errorIcon.style.display="none";this._errorHelper.innerText="";if(this._useLocaleString){var t=this.validatedValue?this.validatedValue.toLocaleString(v.a.Language,{maximumFractionDigits:20}):"";this.validatedValue&&t!==this.text&&(this.text=t)}else this.validatedValue&&this.validatedValue.toString()!==this.text&&(this.text=this.validatedValue.toString());if(e){this.textCommitted&&this.textCommitted(this.text);this.valueCommitted&&this.valueCommitted(this.validatedValue)}}else{this._errorIcon.onmouseover=(()=>{K.c({content:this._validationStatus.tooltip});return!0});this._errorIcon.style.display="inline";this._errorHelper.innerText=this._validationStatus.tooltip;this.validationFailed&&this.validationFailed()}}}const J=Object(y.b)();class Z{constructor(){this._rpcWrapper=new F(this);this._isInitialized=!1}static getBrowserModeFromString(e){if("Desktop"===e)return P.Desktop;if("Mobile"===e)return P.Phone;if("Enterprise"===e)return P.Enterprise;throw new Error("Got unexpected browser mode string: "+e)}static handshakeBrowserModeInfo(e,t){e._model.browserMode=Z.getBrowserModeFromString(t);e._model.browserModes=e._model.allBrowserModes.slice(0,2)}static handshakeUserAgentStringInfo(e,t,i){var o=!1;if(0===i.filter(e=>"custom"!==e.category).length){for(var s=0;s<Z.EMULATION_UA_FALLBACK_STRINGS.length;s++)if(Z.EMULATION_UA_FALLBACK_STRINGS[s].name===Z.EDGE_DEFAULT_UA_STRING){Z.EMULATION_UA_FALLBACK_STRINGS.splice(s,1);break}i=i.concat(Z.EMULATION_UA_FALLBACK_STRINGS);o=!0}for(s=0;s<i.length;s++)if(i[s].name===Z.EDGE_DEFAULT_UA_STRING){i.splice(s,1);t.name===Z.EDGE_DEFAULT_UA_STRING&&(t.category="default");break}var n=Z.buildUserAgentStringItemsList(e,t,i),a=o&&!n&&"unknown"===t.category;Z.setupUserAgentStringModel(e,t,a)}static buildUserAgentStringItemsList(e,t,i){e._model.userAgentStrings.clear();e._model.userAgentStrings.push({value:H.DEFAULT_VALUE,text:Z.EDGE_DEFAULT_UA_STRING+" ("+e.loadLocalizedString("EmulationDefault")+")"});e._model.customUserAgentStrings.clear();e._model.mobileUserAgentStrings=[];for(var o=[],s=!1,n=0;n<i.length;++n){var a=i[n];if("custom"===a.category)o.push({text:a.value,date:a.name});else{t.value===i[n].value&&(s=!0);e._model.userAgentStrings.push({value:a.value,text:a.name});(a.value.indexOf(Z.IEMOBILE_UA_VALUE_SUBSTRING)>=0||a.name.toLowerCase().indexOf(Z.PHONE_UA_NAME_SUBSTRING)>=0||a.name.toLowerCase().indexOf(Z.MOBILE_UA_NAME_SUBSTRING)>=0)&&e._model.mobileUserAgentStrings.push(a.value)}}e._model.userAgentStrings.push({value:H.CUSTOM_VALUE,text:e.loadLocalizedString("EmulationCustom")});e._model.customUserAgentStrings.resetItems(o.sort((e,t)=>t.date.localeCompare(e.date)));return s}static setupUserAgentStringModel(e,t,i){var o=e._model.userAgentString===H.CUSTOM_VALUE;if("custom"===t.category){e._model.userAgentString=H.CUSTOM_VALUE;e._model.customUserAgentString=t.value}else if(!o)if("default"===t.category||i){e._model.userAgentString=H.DEFAULT_VALUE;e._model.customUserAgentString=""}else{e._model.userAgentString=t.value;e._model.customUserAgentString=""}}static formatResolutionInfo(e){return e.width+" x "+e.height}static initializeToolWindow(){document.addEventListener("mousedown",function(){Object(a.a)(document.body).removeClass("showFocus")},!0);Object(a.a)(document).bind("contextmenu",function(){return!1});Object(a.a)(document).bind("keydown",function(e){if(116===e.keyCode||121===e.keyCode&&e.shiftKey){e.preventDefault();e.stopPropagation()}else 9===e.keyCode&&Object(a.a)(document.body).addClass("showFocus")});Object(a.a)(".BPT-ToolbarButton").bind("mousedown",function(e){var t=Object(a.a)(this);t.hasClass("BPT-ToolbarButton-StateDisabled")?e.stopImmediatePropagation():t.addClass("BPT-ToolbarButton-MouseDown")});Object(a.a)(".BPT-ToolbarButton").bind("mouseup",function(){Object(a.a)(this).removeClass("BPT-ToolbarButton-MouseDown")});Object(a.a)(".BPT-ToolbarButton").bind("mouseleave",function(){Object(a.a)(this).removeClass("BPT-ToolbarButton-MouseDown BPT-ToolbarButton-MouseHover")});Object(a.a)(".BPT-ToolbarButton").bind("mouseenter",function(e){var t=Object(a.a)(this);if(t.hasClass("BPT-ToolbarButton-StateDisabled")){e.preventDefault();e.stopImmediatePropagation()}else t.addClass("BPT-ToolbarButton-MouseHover")});Object(a.a)(".BPT-ToolbarButton").bind("click keydown",function(e){if("click"===e.type||13===e.keyCode||32===e.keyCode){var t=Object(a.a)(this);if(t.hasClass("BPT-ToolbarButton-StateDisabled")){e.preventDefault();e.stopImmediatePropagation()}else{var i=t.get(0);document.activeElement!==i&&i.focus()}}});Object(a.a)(".BPT-ToolbarToggleButton").bind("click keydown",function(e){if("click"===e.type||13===e.keyCode||32===e.keyCode){var t=Object(a.a)(this);if(t.hasClass("BPT-ToolbarButton-StateDisabled")){e.preventDefault();e.stopImmediatePropagation()}else{var i=t.get(0);document.activeElement!==i&&i.focus();if(t.hasClass("BPT-ToolbarToggleButton-StateOn")){t.removeClass("BPT-ToolbarToggleButton-StateOn");t.attr("aria-pressed",!1)}else{t.addClass("BPT-ToolbarToggleButton-StateOn");t.attr("aria-pressed",!0)}}}});Object(a.a)(".BPT-TabCycle-Horizontal, .BPT-TabCycle-Vertical").children(".BPT-TabCycle-Item").bind("keydown",function(e){if(Object(a.a)(this).parent().hasClass("BPT-TabCycle-Horizontal")&&(37===e.keyCode||39===e.keyCode)||Object(a.a)(this).parent().hasClass("BPT-TabCycle-Vertical")&&(38===e.keyCode||40===e.keyCode)){var t=Object(a.a)(this),i=37===e.keyCode||38===e.keyCode?t.prev(".BPT-TabCycle-Item").first():t.next(".BPT-TabCycle-Item").first();if(i.length>0){i.attr("tabindex","1");i.focus();t.removeAttr("tabindex")}}});Object(a.a)(".BPT-TabCycle-Horizontal, .BPT-TabCycle-Vertical").children(".BPT-TabCycle-Item").bind("mousedown",function(){var e=Object(a.a)(this).siblings(".BPT-TabCycle-Item").matchAttr("tabindex","1"),t=Object(a.a)(this);if(t.length>0){t.attr("tabindex","1");t.trigger("focus");e.removeAttr("tabindex")}})}onInit(){if(!this._isInitialized){z.logPerformance({id:S.b.Emulation_Window_Create_Start});this._handshakeCallbacks=[];this._config=M;this.initializeModel();this._toolbar=new u.a("Common.defaultToolbarTemplate");this._modeSection=new h.a("Emulation.emulationModeControls");this._modeSection.model=this._model;document.getElementById("modeSection").appendChild(this._modeSection.rootElement);this._displayBasicSection=new h.a("Emulation.emulationBasicDisplayControls");this._displayBasicSection.model=this._model;document.getElementById("displayBasicSubSection").appendChild(this._displayBasicSection.rootElement);this._toolbar.title=this.loadLocalizedString("EmulationToolLabelText");this._toolbar.model=this._model;this._toolbar.panelTemplateId="Emulation.emulationButtonPanel";document.getElementById("toolbar").appendChild(this._toolbar.rootElement);this._customDisplaySizeContainer=new d.a(document.getElementById("customDisplaySizeSection"));this._displaySizeInput=new X(document.getElementById("displaySizeControlRoot"),e=>this.validateDisplaySize(e),!0,"validatedTextboxTemplate");this._displayWidthInput=new X(document.getElementById("displayWidthControlRoot"),e=>this.validateDisplayDimension(e,H.MAX_VIEWPORT_WIDTH_IN_PX,"EmulationLargeResolutionWidthError"),!1,"validatedTextboxTemplate");this._displayHeightInput=new X(document.getElementById("displayHeightControlRoot"),e=>this.validateDisplayDimension(e,H.MAX_VIEWPORT_HEIGHT_IN_PX,"EmulationLargeResolutionHeightError"),!1,"validatedTextboxTemplate");this._geolocationOffButton=new c(document.getElementById("gpsOff"));this._geolocationOnButton=new c(document.getElementById("gpsOn"));this._geolocationOnNoSignalButton=new c(document.getElementById("gpsOnNoSignal"));this._gpsLatitudeInput=new X(document.getElementById("latitudeControlRoot"),e=>this.validateCoordinate(e,H.MIN_LATITUDE,H.MAX_LATITUDE,"EmulationLatitudeError"),!0,"validatedTextboxTemplate");this._gpsLongitudeInput=new X(document.getElementById("longitudeControlRoot"),e=>this.validateCoordinate(e,H.MIN_LONGITUDE,H.MAX_LONGITUDE,"EmulationLongitudeError"),!0,"validatedTextboxTemplate");this.initializeView();this._isInitialHandshake=!0;this._model.isAtBreakpoint=!1;Z.initializeToolWindow();this._model.loadDevices().then(()=>{this._model.device=H.DEFAULT_VALUE;this._deviceSection=new h.a("Emulation.emulationDeviceControls");this._deviceSection.model=this._model;document.getElementById("deviceSection").appendChild(this._deviceSection.rootElement)});this._toolbar.addClickHandlerToButton("resetButton",()=>{z.logExecuteCommand(V.RESET_SETTING,r.c.Ui);this.resetAllEmulationSettings()});this._modeSection.addClickHandlerToButton("deleteUaStringButton",()=>this.onRemoveCustomUserAgentString());this._displaySizeInput.valueCommitted=(()=>this.onCustomDisplayFieldsCommitted());this._displayWidthInput.valueCommitted=(()=>this.onCustomDisplayFieldsCommitted());this._displayWidthInput.validationFailed=(()=>this.onDisplayDimensionValidationFailure());this._displayHeightInput.valueCommitted=(()=>this.onCustomDisplayFieldsCommitted());this._displayHeightInput.validationFailed=(()=>this.onDisplayDimensionValidationFailure());this._geolocationOffButton.check=(()=>this.onGeolocationStateChanged(D.Off));this._geolocationOnButton.check=(()=>this.onGeolocationStateChanged(D.On));this._geolocationOnNoSignalButton.check=(()=>this.onGeolocationStateChanged(D.OnNoSignal));this._gpsLatitudeInput.valueCommitted=(e=>this.onLatitudeCommitted(e));this._gpsLongitudeInput.valueCommitted=(e=>this.onLongitudeCommitted(e));this._model.customResolutionFieldsNeedCommit.addHandler(()=>this.onCustomDisplayFieldsCommitted());document.addEventListener("keydown",e=>{if(e.ctrlKey&&e.shiftKey&&!e.altKey&&76===e.keyCode){z.logExecuteCommand(V.RESET_SETTING,r.c.KeyboardShortcut);this.resetAllEmulationSettings();e.preventDefault()}});document.getElementById("customDisplayInchesInfo").parentNode.removeChild(document.getElementById("customDisplayInchesInfo"));this._model.propertyChanged.addHandler(e=>{e!==H.OrientationProperty&&e!==H.ResolutionProperty||this.updateView()});p.a.registerNavigationFrames([p.a.makeNavigationFrameFromCallback(document.body,()=>this._toolbar.getActiveElement())]);p.a.registerFocusHandlers(n.c.emulation);this._model.propertiesResolved.addHandler(()=>{this._allowSavingSettings&&this.saveEmulationSettings()});this._model.settingsHaveBeenModifiedChanged.addHandler(()=>this.onSettingsHaveBeenModifiedChanged());z.logPerformance({id:S.b.Emulation_Window_Create_Stop})}}onDetach(){if(this._isInitialized){this._allowSavingSettings=!1;this._model.isAtBreakpoint=!1;this.fireHandshakeCallbacks();this._model.reset()}}onAttach(){this._isInitialHandshake=!0;this._isInitialized||window.setImmediate(()=>{this.onInit();this._isInitialized=!0})}onBreak(){this._model&&(this._model.isAtBreakpoint=!0)}onRun(){this._model&&(this._model.isAtBreakpoint=!1)}rpcCall(e,t){return this._rpcWrapper.jsonRpcMethodCall(e,t)}onHandshake(e){this._allowSavingSettings=!1;var t=!1;if(this._isInitialHandshake){this._isInitialHandshake=!1;t=!0}else{this._displaySizeInput.commitEdits();this._displayWidthInput.commitEdits();this._displayHeightInput.commitEdits();this._gpsLatitudeInput.commitEdits();this._gpsLongitudeInput.commitEdits()}Z.handshakeBrowserModeInfo(this,e.currentBrowserMode);Z.handshakeUserAgentStringInfo(this,e.currentUserAgentString,e.allUserAgentStrings);(t?this.readEmulationSettings():Promise.resolve({})).then(()=>{this.updateView()});this._allowSavingSettings=!0;window.requestAnimationFrame(()=>{I.markToolReady(n.c.emulation);b.startPreload(n.c.emulation);A.b()&&Object(m.g)(()=>{},{Reliability:{isAlive:()=>Promise.resolve()}})});window.setImmediate(()=>{Object(E.A)(n.c.emulation)});this.fireHandshakeCallbacks()}awaitRefreshHandshake(){return new Promise(e=>{this._handshakeCallbacks.push(e)})}getInvariantNumberString(e){var t=v.a.NumberFormat;t&&t.numberDecimalSeparator||(t={currencyDecimalDigits:"",currencyDecimalSeparator:"",currencyGroupSeparator:"",currencyGroupSizes:void 0,currencyNegativePattern:"",currencyPositivePattern:"",currencySymbol:"",nanSymbol:"",negativeInfinitySymbol:"",negativeSign:"",numberDecimalDigits:"",numberDecimalSeparator:".",numberGroupSeparator:"",numberGroupSizes:void 0,numberNegativePattern:"",percentDecimalDigits:"",percentDecimalSeparator:"",percentGroupSeparator:"",percentGroupSizes:void 0,percentNegativePattern:"",percentPositivePattern:"",percentSymbol:"",perMilleSymbol:"",positiveInfinitySymbol:"",positiveSign:""});return e.replace(t.numberDecimalSeparator,".")}getCustomResolutionDisplaySize(){return this._displaySizeInput.text}setCustomResolutionDisplaySize(e){this._displaySizeInput.text=e;this._displaySizeInput.tryValidate();return this.onCustomDisplayFieldsCommitted()}setGpsState(e,t){var i;i=e?t?D.On:D.OnNoSignal:t?D.Unknown:D.Off;return this.onGeolocationStateChanged(i)}getGpsState(){if(this._model.geolocationState===D.Off)return{enabled:!1,hasSignal:!1};if(this._model.geolocationState===D.On)return{enabled:!0,hasSignal:!0};if(this._model.geolocationState===D.OnNoSignal)return{enabled:!0,hasSignal:!1};throw new Error("Gps is set to an unknown state")}setGpsPosition(e,t){null!==e&&void 0!==e&&(this._model.gpsLatitude=e);null!==t&&void 0!==t&&(this._model.gpsLongitude=t);this.updateView();return this.commitGpsCoordinates()}getGpsPosition(){return{latitude:this._model.gpsLatitude,longitude:this._model.gpsLongitude}}getIEGpsPosition(){return this.rpcCall("getGpsPosition",[])}getDisplaySizeValidationInfo(){return this._displaySizeInput.getValidationInfo()}getDisplayWidthValidationInfo(){return this._displayWidthInput.getValidationInfo()}getDisplayHeightValidationInfo(){return this._displayHeightInput.getValidationInfo()}getGpsLatitudeValidationInfo(){return this._gpsLatitudeInput.getValidationInfo()}getGpsLongitudeValidationInfo(){return this._gpsLongitudeInput.getValidationInfo()}loadLocalizedString(e,...t){return t&&t.length>0?_.a.loadString(e,t):_.a.loadString(e)}resetAllEmulationSettings(){this._model.reset();this.updateView(L.Display|L.Geolocation);this.rpcCall("resetAllSettings",[])}setBrowserMode(e){for(var t,i=!1,o=0;o<this._model.browserModes.length;++o)if(this._model.browserModes[o].text===e){t=this._model.browserModes[o].value;i=!0}if(!i)throw new Error("Unknown browser mode value");this._model.browserMode=t;this._rpcWrapper.awaitRunningPromises()}setDevice(e){this._model.device=e;this._rpcWrapper.awaitRunningPromises()}getDevice(){return this._model.device}getDevices(){return this._model.loadDevices()}saveDevices(e,t,i){return this._model.saveDevices(e,t,i)}getBrowserMode(){return this._model.browserModes[this._model.browserMode].text}getIEBrowserMode(){return this.rpcCall("getBrowserMode",[]).then(e=>{var t=Z.getBrowserModeFromString(e);return this._model.browserModes[t].text})}setUserAgentString(e){e=this.sanitizeString(e);for(var t,i=!1,o=0;o<this._model.userAgentStrings.length;++o){var s=this._model.userAgentStrings.getItem(o);if(s.text===e){t=s.value;i=!0}}e===Z.EDGE_DEFAULT_UA_STRING&&(i=!0);if(!i)throw new Error("Unknown user agent string value");var n=this._model.userAgentString!==t;this._model.userAgentString=t;return n?this._rpcWrapper.awaitRunningPromises().then(()=>{this.fireHandshakeCallbacks()}):Promise.resolve(this.fireHandshakeCallbacks())}getUserAgentString(){return this.getUADisplayStringFromUAString(this._model.userAgentString)}getIEUserAgentString(){return this.rpcCall("getCurrentUserAgentString",[]).then(e=>this.getUADisplayStringFromUAString(e))}getAllIEUserAgentStrings(){return this.rpcCall("getAllUserAgentStrings",[]).then(e=>e)}setCustomUserAgentString(e){this._model.customUserAgentString=e;return this._rpcWrapper.awaitRunningPromises().then(()=>{this.fireHandshakeCallbacks()})}deleteCustomUserAgentString(e){this._model.customUserAgentString=e;return this._rpcWrapper.awaitRunningPromises().then(()=>{this.onRemoveCustomUserAgentString()})}getCustomUserAgentString(){return this._model.customUserAgentString}setOrientation(e){for(var t=w.Unknown,i=0;i<this._model.orientations.length;++i)if(0===this._model.orientations.getItem(i).text.localeCompare(e)){t=this._model.orientations.getItem(i).value;break}var o=this._model.orientation!==t;this._model.orientation=t;if(o)return this._rpcWrapper.awaitRunningPromises()}getOrientation(){for(var e=0;e<this._model.orientations.length;++e)if(this._model.orientation===this._model.orientations.getItem(e).value)return this._model.orientations.getItem(e).text;return"unknown"}getIEOrientation(){return this.rpcCall("getOrientation",[]).then(e=>e)}getResolutionList(){return this._config.categories.resolution.map(e=>({displayString:Z.formatResolutionInfo(e),width:e.width,height:e.height}))}setResolution(e){for(var t,i=0;i<this._model.resolutions.length;++i)0===this._model.resolutions.getItem(i).text.localeCompare(e)&&(t=this._model.resolutions.getItem(i).value);var o=this._model.resolution!==t;this._model.resolution=t;return o?this._rpcWrapper.awaitRunningPromises():Promise.resolve()}getResolution(){for(var e,t=0;t<this._model.resolutions.length;++t)0===this._model.resolutions.getItem(t).value.localeCompare(this._model.resolution)&&(e=this._model.resolutions.getItem(t).text);return e}getIEResolution(){return this.rpcCall("getResolution",[]).then(e=>e)}getCustomResolutionWidth(){return this._displayWidthInput.text}getCustomResolutionHeight(){return this._displayHeightInput.text}setCustomResolutionWidth(e){this._displayWidthInput.text=e;this._displayWidthInput.tryValidate();return this.onCustomDisplayFieldsCommitted()}setCustomResolutionHeight(e){this._displayHeightInput.text=e;this._displayHeightInput.tryValidate();return this.onCustomDisplayFieldsCommitted()}initializeModel(){this._rpcWrapper.eventsShouldFire=!1;this._model=new H(this._rpcWrapper,this._config);this._model.allBrowserModes=[];this._model.allBrowserModes[P.Desktop]={value:P.Desktop,text:this.loadLocalizedString("EmulationModesDesktopMode")};this._model.allBrowserModes[P.Phone]={value:P.Phone,text:this.loadLocalizedString("EmulationModesPhoneMode")};this._model.orientation=w.Landscape;var e=[];e[w.Landscape]={value:w.Landscape,text:this.loadLocalizedString("EmulationOrientationLandscape")};e[w.Portrait]={value:w.Portrait,text:this.loadLocalizedString("EmulationOrientationPortrait")};this._model.orientations.resetItems(e);this._model.resolution=H.DEFAULT_VALUE;this._model.resolutions.clear();this._model.geolocationState=D.Off;this._model.gpsLatitude=this._config.categories.simulateGPS.off.latitude;this._model.gpsLongitude=this._config.categories.simulateGPS.off.longitude;this._model.isAtBreakpoint=f.b();this._rpcWrapper.eventsShouldFire=!0}initializeView(){this._localizedControlInfo=[{controlId:"displayLabel",stringId:"EmulationDisplaySection"},{controlId:"enterCustomResolutionLabel",stringId:"EmulationCustomResolution"},{controlId:"customDisplaySizeLabel",stringId:"EmulationDisplaySize",labeledElement:this._displaySizeInput.focusableElement},{controlId:"displaySizeInchesLabel",stringId:"EmulationInches"},{controlId:"customDisplayWidthLabel",stringId:"EmulationWidth",labeledElement:this._displayWidthInput.focusableElement},{controlId:"widthPixelsLabel",stringId:"EmulationPixels"},{controlId:"customDisplayHeightLabel",stringId:"EmulationHeight",labeledElement:this._displayHeightInput.focusableElement},{controlId:"heightPixelsLabel",stringId:"EmulationPixels"},{controlId:"geoLabel",stringId:"EmulationGeoLocationSection"},{controlId:"gpsLabel",stringId:"EmulationSimulateGPS"},{controlId:"gpsOffLabel",stringId:"EmulationGPSOff",labeledElement:this._geolocationOffButton.focusableElement,describerElementId:"gpsLabel"},{controlId:"gpsOnLabel",stringId:"EmulationGPSOn",labeledElement:this._geolocationOnButton.focusableElement,describerElementId:"gpsLabel"},{controlId:"gpsOnNoSignalLabel",stringId:"EmulationGPSOnNoSignal",labeledElement:this._geolocationOnNoSignalButton.focusableElement,describerElementId:"gpsLabel"},{controlId:"latitudeLabel",stringId:"EmulationLatitude",labeledElement:this._gpsLatitudeInput.focusableElement},{controlId:"longitudeLabel",stringId:"EmulationLongitude",labeledElement:this._gpsLongitudeInput.focusableElement}];this.localizeAllLabels();this.updateView();Object(g.a)()}localizeAllLabels(){for(var e=0;e<this._localizedControlInfo.length;++e){var t=this._localizedControlInfo[e];this.localizeControl(t.controlId,t.stringId,t.labeledElement,t.describerElementId)}var i=[];this._model.mobileResolutions=[];for(e=0;e<this._config.categories.resolution.length;++e){var o=this._config.categories.resolution[e],s=Z.formatResolutionInfo(o);i.push({text:s,value:s,info:o});this._model.mobileResolutions.push(s)}var n={},a=[];for(e=0;e<i.length;++e)n[i[e].text]=i[e];for(var r in n)a.push(n[r]);(i=a.sort(function(e,t){return e.info.width-t.info.width})).splice(0,0,{value:H.DEFAULT_VALUE,text:this.loadLocalizedString("EmulationDefault")});i.push({value:H.CUSTOM_VALUE,text:this.loadLocalizedString("EmulationCustom")});this._model.resolutions.resetItems(i)}localizeControl(e,t,i,o){var s=this.loadLocalizedString(t);""!==e&&(document.getElementById(e).innerText=s);void 0!==i&&(""!==e?i.setAttribute("aria-labelledby",e):i.setAttribute("aria-label",s));void 0!==o&&i.setAttribute("aria-describedby",o)}onRemoveCustomUserAgentString(){var e=this._model.customUserAgentString;this._model.customUserAgentString="";return this._rpcWrapper.awaitRunningPromises().then(()=>this.rpcCall("removeCustomUserAgentString",[e,this._rpcWrapper.shouldPerformRefreshes]).then(e=>{this._model.customUserAgentStrings.resetItems(e.map(e=>({text:e.value,date:e.name})));this.updateView()}))}displayWidthHasValidValue(){return 1===this._displayWidthInput.validationStatus&&""!==this._displayWidthInput.text}displayHeightHasValidValue(){return 1===this._displayHeightInput.validationStatus&&""!==this._displayHeightInput.text}displayWidthAndHeightHaveValidValues(){return!(!this.displayWidthHasValidValue()||!this.displayHeightHasValidValue())}validateDisplaySize(e){if(""===e)return{status:1,tooltip:""};var t=this.getInvariantNumberString(e),i=parseFloat(t);return isNaN(i)?{status:2,tooltip:this.loadLocalizedString("EmulationNonNumericValueError")}:i>H.MAX_VIEWPORT_DISPLAY_SIZE?{status:2,tooltip:this.loadLocalizedString("EmulationLargeDisplaySizeError",H.MAX_VIEWPORT_DISPLAY_SIZE)}:i>0?this.displayWidthAndHeightHaveValidValues()?{status:1,tooltip:"",validatedValue:i}:{status:2,tooltip:this.loadLocalizedString("EmulationNoResolutionError")}:{status:2,tooltip:this.loadLocalizedString("EmulationResolutionLessThanZeroError")}}validateDisplayDimension(e,t,i){if(""===e)return{status:1,tooltip:""};var o=parseInt(e,10);return isNaN(o)?{status:2,tooltip:this.loadLocalizedString("EmulationInvalidValueResolutionError")}:o>t?{status:2,tooltip:this.loadLocalizedString(i,t)}:o>0?{status:1,tooltip:"",validatedValue:o}:{status:2,tooltip:this.loadLocalizedString("EmulationResolutionLessThanZeroError")}}onDisplayDimensionValidationFailure(){this._displaySizeInput.tryValidate()}onCustomDisplayFieldsCommitted(){1==this._displayWidthInput.validationStatus&&void 0!==this._displayWidthInput.validatedValue&&(this._model.resolutionWidth=this._displayWidthInput.validatedValue);1==this._displayHeightInput.validationStatus&&void 0!==this._displayHeightInput.validatedValue&&(this._model.resolutionHeight=this._displayHeightInput.validatedValue);this._model.updateEmulationState();return Promise.resolve()}onGeolocationStateChanged(e){this._model.geolocationState=e;var t=this._config.categories.simulateGPS.off;if(e===D.Off){z.logExecuteCommand(V.GPS_OFF,r.c.Ui);t=this._config.categories.simulateGPS.off}else if(e===D.On){z.logExecuteCommand(V.GPS_ON,r.c.Ui);t=this._config.categories.simulateGPS.on}else if(e===D.OnNoSignal){z.logExecuteCommand(V.GPS_NO_SIGNAL,r.c.Ui);t=this._config.categories.simulateGPS.onWithNoSignal}else l.a.fail("Geolocation is set to an invalid state");return this.setGpsCoordinates(t.latitude,t.longitude)}validateCoordinate(e,t,i,o){if(""===e)return{status:1,tooltip:""};var s=this.getInvariantNumberString(e),n=parseFloat(s);return isNaN(n)?{status:2,tooltip:this.loadLocalizedString("EmulationNonNumericValueError")}:n>=t&&n<=i?{status:1,tooltip:"",validatedValue:n}:{status:2,tooltip:this.loadLocalizedString(o)}}onLatitudeCommitted(e){this._model.gpsLatitude=e;this.commitGpsCoordinates()}onLongitudeCommitted(e){this._model.gpsLongitude=e;this.commitGpsCoordinates()}commitGpsCoordinates(){if(this._model.geolocationState===D.Off)return this.rpcCall("clearGpsSettings",[]);var e=this._model.geolocationState===D.On;return 1!==this._gpsLatitudeInput.validationStatus||1!==this._gpsLongitudeInput.validationStatus?this.rpcCall("setGpsHasSignal",[e]):void 0!==this._model.gpsLatitude&&null!==this._model.gpsLatitude?void 0!==this._model.gpsLongitude&&null!==this._model.gpsLongitude?this.rpcCall("setGpsPosition",[this._model.gpsLatitude,this._model.gpsLongitude,e]):this.rpcCall("setGpsLatitude",[this._model.gpsLatitude,e]):void 0!==this._model.gpsLongitude&&null!==this._model.gpsLongitude?this.rpcCall("setGpsLongitude",[this._model.gpsLongitude,e]):Promise.resolve(null)}setGpsCoordinates(e,t){this._model.gpsLatitude=e;this._model.gpsLongitude=t;this.updateView();return this.commitGpsCoordinates()}updateView(e=L.All){if((e&L.Display)===L.Display)if(this._model.resolution===H.CUSTOM_VALUE){this._customDisplaySizeContainer.rootElement.style.display="block";this._displayWidthInput.text=this._model.resolutionWidth?this._model.resolutionWidth.toString():"";this._displayHeightInput.text=this._model.resolutionHeight?this._model.resolutionHeight.toString():""}else{this._customDisplaySizeContainer.rootElement.style.display="none";this._displaySizeInput.text="";this._displayWidthInput.text="";this._displayHeightInput.text=""}if((e&L.Geolocation)===L.Geolocation){if(this._model.geolocationState===D.Off){this._gpsLatitudeInput.disabled=!0;this._gpsLongitudeInput.disabled=!0;this._geolocationOffButton.checked=!0}else{this._gpsLatitudeInput.disabled=!1;this._gpsLongitudeInput.disabled=!1;this._model.geolocationState===D.On?this._geolocationOnButton.checked=!0:this._geolocationOnNoSignalButton.checked=!0}this._gpsLatitudeInput.text=null!==this._model.gpsLatitude&&void 0!==this._model.gpsLatitude?this._model.gpsLatitude.toString():"";this._gpsLatitudeInput.tryValidate()&&(this._model.gpsLatitude=this._gpsLatitudeInput.validatedValue);this._gpsLongitudeInput.text=null!==this._model.gpsLongitude&&void 0!==this._model.gpsLongitude?this._model.gpsLongitude.toString():"";this._gpsLongitudeInput.tryValidate()&&(this._model.gpsLongitude=this._gpsLongitudeInput.validatedValue)}}fireHandshakeCallbacks(){var e=this._handshakeCallbacks;this._handshakeCallbacks=[];for(var t=0;t<e.length;++t)e[t]()}saveEmulationSettings(){J.saveSettings(Z.EMULATION_SETTINGS_FILE,this._model.save())}loadEmulationSettings(){return new Promise(e=>{J.getSettings(Z.EMULATION_SETTINGS_FILE).then(t=>{e(t)},()=>{e({})})})}readEmulationSettings(){this._allowSavingSettings=!1;return this.loadEmulationSettings().then(e=>{this._model.load(e);if(this._model.resolution===H.CUSTOM_VALUE){var t=[];if(this._model.resolutionDisplaySize){this._displaySizeInput.text=""+this._model.resolutionDisplaySize;t.push(()=>this._displaySizeInput.tryValidate())}if(this._model.resolutionWidth){this._displayWidthInput.text=""+this._model.resolutionWidth;t.push(()=>this._displayWidthInput.tryValidate())}if(this._model.resolutionHeight){this._displayHeightInput.text=""+this._model.resolutionHeight;t.push(()=>this._displayHeightInput.tryValidate())}t.forEach(e=>e())}this.commitGpsCoordinates();this.updateView();this._allowSavingSettings=!0})}getUADisplayStringFromUAString(e){e=this.sanitizeString(e);for(var t=0;t<this._model.userAgentStrings.length;++t){var i=this._model.userAgentStrings.getItem(t);if(i.value===e)return i.text}for(t=0;t<this._model.customUserAgentStrings.length;++t){var o=this._model.customUserAgentStrings.getItem(t);if(o.text===e)return o.text}return this._model.userAgentStrings.getItem(0).text}sanitizeString(e){var t=e.indexOf("\0");return t>=0?e.substr(0,t):e}onSettingsHaveBeenModifiedChanged(){C.b(this._model.settingsHaveBeenModified,"")}}Z.EMULATION_MODE_EDGE="Edge";Z.EMULATION_UA_FALLBACK_STRINGS=[{category:"desktop",name:"Microsoft Edge",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36 Edge/15.14900"},{category:"non-desktop",name:"Microsoft Edge - Windows 10 Mobile",value:"Mozilla/5.0 (Windows Phone 10.0; Android 6.0.1; Nokia; Lumia 520) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Mobile Safari/537.36 Edge/15.14900"},{category:"non-desktop",name:"Microsoft Edge - Xbox One",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; Xbox; Xbox One) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36 Edge/15.14900"},{category:"desktop",name:"Internet Explorer 11",value:"Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko"},{category:"desktop",name:"Internet Explorer 10",value:"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)"},{category:"desktop",name:"Internet Explorer 9",value:"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)"},{category:"desktop",name:"Internet Explorer 8",value:"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)"},{category:"non-desktop",name:"Internet Explorer 11 - Windows Phone 8.1 Update",value:"Mozilla/5.0 (Mobile; Windows Phone 8.1; Android 4.0; ARM; Trident/7.0; Touch; rv:11.0; IEMobile/11.0; NOKIA; Lumia 520) like iPhone OS 7_0_3 Mac OS X AppleWebKit/537 (KHTML, like Gecko) Mobile Safari/537"},{category:"non-desktop",name:"Internet Explorer 10 - Windows Phone 8",value:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch)"},{category:"non-desktop",name:"Internet Explorer - Xbox 360",value:"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0; Xbox)"},{category:"other",name:"Google Chrome",value:"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36"},{category:"other",name:"Mozilla Firefox",value:"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:45.0) Gecko/20100101 Firefox/45.0"},{category:"other",name:"Opera",value:"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.75 Safari/537.36 OPR/36.0.2130.32"},{category:"other",name:"Apple Safari (iPad)",value:"Mozilla/5.0 (iPad; CPU OS 9_2_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13D15 Safari/601.1"},{category:"other",name:"Bing Bot",value:"Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)"}];Z.IEMOBILE_UA_VALUE_SUBSTRING="IEMobile";Z.PHONE_UA_NAME_SUBSTRING="phone";Z.MOBILE_UA_NAME_SUBSTRING="mobile";Z.EDGE_DEFAULT_UA_STRING="Microsoft Edge";Z.EMULATION_SETTINGS_FILE="../emulation/EmulationSettings.json";var Y=i(84),q=i(34);class Q{static initialize(){Q.ToStringFromBrowserMode=Q.browserModeToString();Q.ToUserAgentStringDisplaySetting=Q.userAgentStringToDisplaySetting();Q.ToStringFromOrientation=Q.orientationToString()}static browserModeToString(){return{convertTo:e=>""+e,convertFrom:e=>parseInt(e,10)}}static userAgentStringToDisplaySetting(){return{convertTo:e=>e===H.CUSTOM_VALUE?"block":"none",convertFrom:null}}static orientationToString(){return{convertTo:e=>""+e,convertFrom:e=>parseInt(e,10)}}}Q.initialize();function $(){Object(Y.a)();Object(q.a)("F12.Tools.Emulation.Converters",{ToStringFromBrowserMode:Q.ToStringFromBrowserMode,ToStringFromOrientation:Q.ToStringFromOrientation,ToUserAgentStringDisplaySetting:Q.ToUserAgentStringDisplaySetting})}$();document.addEventListener("DOMContentLoaded",async()=>{await Object(o.a)();window.addEventListener("load",()=>{Object(s.g)().call("ms:host","postPendingMessageToPlugin",[n.c.emulation]);new Z})})}});
