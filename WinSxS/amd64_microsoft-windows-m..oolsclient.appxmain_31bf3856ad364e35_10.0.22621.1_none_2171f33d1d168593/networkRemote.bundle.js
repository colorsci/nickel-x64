!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};e[i].call(a.exports,a,a.exports,r);a.l=!0;return a.exports}r.m=e;r.c=t;r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})};r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";r(r.s=11)}([function(e,t,r){"use strict";class i{static escapeRegExp(e){return String.prototype.replace.call(e,i.ESCAPE_USER_INPUT_REGEX,"\\$&")}static escapeRegExpWithWildCard(e){return String.prototype.replace.call(e,i.ESCAPE_USER_INPUT_REGEX,function(e){return"*"===e?".*":"\\"+e})}static wrapInQuotes(e){return'"'+String.prototype.replace.call(e,/\\"/g,'"')+'"'}static unescapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&gt;/g,">"),/&lt;/g,"<"),/&apos;/g,"'"),/&quot;/g,'"'),/&amp;/g,"&")}static escapeHtmlAndPreserveWhitespace(e){var t=[e],r=(e=String.prototype.replace.call(e,/(\r\n|\n\r|\r|\n)/g,"\r\n")).split("\r\n");if(r.length>0){t=[];for(var a=0;a<r.length;a++){var n=r[a];n="<pre>"+(n=i.escapeHtml(n))+"</pre>";t.push(n)}}return t}static escapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&/g,"&amp;"),/"/g,"&quot;"),/'/g,"&apos;"),/</g,"&lt;"),/>/g,"&gt;")}static replaceSpacesWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/ /g," ")}static replaceLineBreaksWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/[\r\n]/g," ")}}i.ESCAPE_USER_INPUT_REGEX=/([.+?^=!:${}()|\[\]\/\\])|(\*)/g;r.d(t,"a",function(){return a});r.d(t,"e",function(){return n});r.d(t,"d",function(){return o});r.d(t,"c",function(){return l});r.d(t,"b",function(){return c});var a;!function(e){e[e.Frame=0]="Frame";e[e.ExtensionContext=1]="ExtensionContext"}(a||(a={}));class n{static addListener(e,t,r,i){i?e.addEventListener(t,r,i):e.addEventListener(t,r)}static addSafeListener(e,t,r,i,a,s){var o=n.createSafeFunction(e,i,s);n.addListener(t,r,o,a);return o}static removeListener(e,t,r,i){i?e.removeEventListener(t,r,i):e.removeEventListener(t,r)}static getDefaultView(e){return e?void 0!==e.defaultView?e.defaultView:e.parentWindow:null}static isCrossSiteWindow(e,t){try{e.Object.getOwnPropertyNames(t)}catch(e){return!0}return!1}static getValidWindow(e,t,r){try{if(dom.isWindow(t)){let i=t;if(n.isCrossSiteWindow(e,t)){let a=dom.getCrossSiteWindow(e,t,r);a&&(i=a.document.defaultView)}if(i.document)return{isValid:!0,window:i.document.defaultView}}}catch(e){}return{isValid:!1,window:null}}static getValidContentWindow(e,t){try{return n.getValidWindow(e,t.contentWindow)}catch(e){return{isValid:!1}}}static originForWindow(e){return e&&e.location&&e.location.protocol&&e.location.host?i.escapeHtml(e.location.protocol+"//"+e.location.host):null}static createSafeFunction(e,t,r){return n.executeScript("(func) => { return (...args) => func(...args) }",e,!0)(browser.createSafeFunction(e,t,r))}static safeAsyncCall(e,t){let r,i;const a=new Promise((e,t)=>{r=e;i=t});let n=this.createSafeFunction(e,e=>{r(e)}),s=this.createSafeFunction(e,e=>{i(e)});t.then(n,s);return a}static executeScript(e,t,r){return diagnosticsScript.debugEval.bind(t)(e,r)}static getWindowIterator(e){return new s([e],e=>{for(var t=[],r=0;r<e.frames.length;r++){var i=n.getValidWindow(e,e.frames[r]);i.isValid&&t.push(i.window)}return t})}static getStyleSheetIterator(e,t){var r=[e];if(!t)for(var i=0;i<e.imports.length;i++)r.push(e.imports[i]);return new s(r,e=>{if(!t||!e.imports)return null;for(var r=[],i=0;i<e.imports.length;i++)r.push(e.imports[i]);return r})}static refreshBrowser(){try{browser.refresh()}catch(e){}}}class s{constructor(e,t){this._q=e;this._moreItems=t}hasNext(){return this._q.length>0}next(){if(!this.hasNext())return null;var e=this._q.pop(),t=this._moreItems(e);t&&(this._q=this._q.concat(t));return e}}class o{static propertyEvaluationFunction(e,t){var r,i;if(e.location.protocol.indexOf("http")>=0){r=o.HttpObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));i=o.HttpPropertyIgnorelist[r]}else if(e.location.protocol.indexOf("ms-appx")>=0){r=o.FileObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));i=o.FilePropertyIgnorelist[r]}return i?(e,t)=>{if(!(i.lastIndexOf(t)>=0))try{return e[t]}catch(e){return e.toString()}}:(e,t)=>e[t]}}o.HttpObjectWatchList=["[object Window]"];o.HttpPropertyIgnorelist=[["indexedDB","msIndexedDB"]];o.FileObjectWatchList=["[object Window]"];o.FilePropertyIgnorelist=[["clipboardData"]];class l{constructor(e){this._global=e;this._name=e.location.hostname+e.location.pathname}get name(){return this._name}get type(){return a.Frame}get global(){return this._global}set global(e){this._global=e}executeScript(e,t){return n.executeScript(e,browser.unwrapMirror(this._global),t)}createSafeFunction(e){return n.createSafeFunction(browser.unwrapMirror(this._global),e,!0)}addSafeListener(e,t,r,i){return n.addSafeListener(browser.unwrapMirror(this._global),e,t,r,i,!0)}}class c{constructor(e){this._extensionContext=e;let t=this._extensionContext.name;const r=t.lastIndexOf("_");r>=0&&(t=t.substr(0,r));this._name=t}get name(){return this._name}get type(){return a.ExtensionContext}get global(){return this._extensionContext.global}get extensionContext(){return this._extensionContext}executeScript(e,t){return n.executeScript(e,browser.unwrapMirror(this._extensionContext.global),t)}createSafeFunction(e){return this._extensionContext.createSafeFunction(browser.unwrapMirror(this.global),e)}addSafeListener(e,t,r,i){var a=this.createSafeFunction(r);n.addListener(e,t,a,i);return a}}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});class i{static isTrue(e,t){if(!e){t=t?"Internal error. "+t:"Internal error. Unexpectedly false.";i.fail(t)}}static isFalse(e,t){if(e){t=t?"Internal error. "+t:"Internal error. Unexpectedly true.";i.fail(t)}}static isNull(e,t){if(null!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not null.";t+=" '"+e+"'";i.fail(t)}}static isUndefined(e,t){0;if(void 0!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not undefined.";t+=" '"+e+"'";i.fail(t)}}static hasValue(e,t){if(null===e||void 0===e){t=t?"Internal error. "+t:"Internal error. Unexpectedly "+(null===e?"null":"undefined")+".";i.fail(t)}}static areEqual(e,t,r){e!==t&&i.fail(`Error: ${r}, Unexpectedly not equal- Actual: '${e}', Expected: '${t}'`)}static areNotEqual(e,t,r){e===t&&i.fail(`Error: ${r}, Identical input passed to areNotEqual: '${e}'`)}static failDebugOnly(e){i.fail(e)}static fail(e){var t=new Error((e||"Assert failed.")+"\n");try{throw t}catch(e){e.stack&&(e.description=e.stack);throw e}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r(1);class a{constructor(e,t,r,i,a){this._ourIdentifier=e;this._nextId=0;this._promiseTable={};this._jsonRpcMethodReceive=t;this._jsonRpcNotificationReceive=r;this._postMessage=i;Date.now||(Date.now=function(){return+new Date});a(e=>{this.onMessage(e)})}jsonRpcMethodCall(e,t,r,a,n){r||i.a.failDebugOnly("Trying to insert a promise into the queue without a completed function: The front end will have no way of knowing this promise completed");var o=this._ourIdentifier+"|"+this._nextId;this._nextId++;this._promiseTable[o]={completed:r,error:a};var l=JSON.stringify({id:o,method:e,params:t});if(s.RandomDelay){s.queueData(()=>{this._postMessage(l,n)},l);return!0}return this._postMessage(l,n)}jsonRpcNotification(e,t,r){var i=this._ourIdentifier+"|NULL",a=JSON.stringify({id:i,method:e,params:t});s.RandomDelay?s.queueData(()=>{this._postMessage(a,r)},a):this._postMessage(a,r)}onMessage(e){var t=JSON.parse(e.data),r=t.id.split("|");i.a.areEqual(r.length,2);"NULL"===r[1]?r[0]!==this._ourIdentifier&&this._jsonRpcNotificationReceive(t.method,t.params,t.id):r[0]!==this._ourIdentifier||t.method?s.RandomDelay?s.queueData(()=>{this.handleCall(t)},e.data):this.handleCall(t):s.RandomDelay?s.queueData(()=>{this.handleReply(t)},e.data):this.handleReply(t)}handleReply(e){if(this._promiseTable[e.id]&&this._promiseTable[e.id].completed){if(e.error){i.a.isUndefined(e.data,"Can't have both data and error");this._promiseTable[e.id].error(e.error)}else this._promiseTable[e.id].completed(e.data);delete this._promiseTable[e.id]}else i.a.failDebugOnly("Can't complete a promise that does not exist in the promise table. Probably a dup reply msg.")}handleCall(e){this._jsonRpcMethodReceive(e.method,e.params,(t,r)=>{var i;i=r?JSON.stringify({id:e.id,error:r}):JSON.stringify({id:e.id,data:t});this._postMessage(i)},e.id)}}class n{constructor(e,t){this.callback=e;this.message=t}}class s{static enableDelay(e,t){s.RandomDelay=!0;s.CalculateDelayTime=e;s.DelayedMessage=t}static disableDelay(){s.RandomDelay=!1;if(s.RandomDelayTimeout){clearTimeout(s.RandomDelayTimeout);s.RandomDelayTimeout=null;s.clearQueue()}}static queueData(e,t){var r=new n(e,t);s.DelayedQueue.push(r);if(!s.RandomDelayTimeout){var i=s.CalculateDelayTime(t);s.RandomDelayTimeout=setTimeout(s.fireRandomly,i)}}static fireRandomly(){var e=s.DelayedQueue.shift();s.DelayedMessage(e.message);e.callback();if(s.DelayedQueue.length>0){var t=s.CalculateDelayTime(s.DelayedQueue[0].message);s.RandomDelayTimeout=setTimeout(s.fireRandomly,t)}else s.RandomDelayTimeout=null}static clearQueue(){for(var e=0;e<s.DelayedQueue.length;e++){var t=s.DelayedQueue[e];s.DelayedMessage(t.message);t.callback()}s.DelayedQueue=[]}}s.RandomDelay=!1;s.DelayedQueue=[]},function(e,t,r){"use strict";r.r(t);r.d(t,"default",function(){return a});var i;class a{constructor(e){this._messageHandlers=[];this._pendingMessages=[];this._pendingMessagesMap={};this._portId=0;this._uid=0;this.childrenElementLimit=200;this.onDetachCallback=null;this.port=null;this.portReady=!1;this._messageHandlers=e}static getDefaultView(e){return e?void 0!==e.defaultView?e.defaultView:e.parentWindow:null}getUid(){return"uid"+(this._uid++).toString(36)}initialize(e,t,r){this.onDetachCallback=r;browser.addEventListener("documentComplete",this.onDocumentComplete.bind(this));toolUI.addEventListener("detach",this.onDetach.bind(this));toolUI.addEventListener("breakpointhit",this.onBreak.bind(this));++this._portId;this.port=toolUI.createPort(e+this._portId);if(this.port){this.port.addEventListener("message",this.processMessages.bind(this));toolUI.connect(this.port);t()}this._handshakeCallback=t}initializeScriptEngines(e){if(e&&e.frames)for(var t=0;t<e.frames.length;t++){var r=e.frames[t];if(dom.isWindow(r)){var i=dom.getCrossSiteWindow(e,r);this.initializeScriptEngines(i)}}}postAllMessages(){for(var e in this._pendingMessagesMap)this._pendingMessages.push(this._pendingMessagesMap[e]);if(this._pendingMessages.length>0){var t=JSON.stringify(this._pendingMessages);this._pendingMessages=[];this._pendingMessagesMap={};try{this.port.postMessage(t)}catch(e){return}}}processMessages(e){if("InitializeDocument"!==e.data)for(var t=e=>(t,r)=>{this.postObject({uid:e,args:[t]},r)},r=JSON.parse(e.data),i=0;i<r.length;++i){var a=r[i];if(this._messageHandlers[a.command]){for(var n=a.args,s=0;s<n.length;++s)n[s]&&"callback"===n[s].type&&(n[s]=t(n[s].uid));var o=this._messageHandlers[a.command].apply(this,n);this.postObject({uid:a.uid,args:void 0!==o?[o]:void 0})}}else this._handshakeCallback()}onBreak(){this.postAllMessages()}onDetach(){this._uid=0;this._pendingMessages=[];this._pendingMessagesMap={};this.onDetachCallback&&this.onDetachCallback()}onDocumentComplete(e){if(i){var t=null;if(e)try{e.browserOrWindow&&(e=e.browserOrWindow);e.document?t=e.document:e.Document&&(t=e.Document);var r=a.getDefaultView(t);if(!t||r[i])return;Common.RemoteHelpers.executeScript("",r,!0)}catch(e){}}}postObject(e,t,r=!0){t?this._pendingMessagesMap[t]=e:this._pendingMessages.push(e);this.postAllMessages()}}a.JMCScriptUrl="\\r\\n//# sourceURL=browsertools://browsertools.performance.js";a.InitializeDocumentTries=0;a.InitializeDocumentMaxTries=15},,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"__BROWSERTOOLS_RemoteCode",function(){return l});var i,a,n=r(2),s=r(0),o=r(3);!function(e){e[e.NavigationOccurred=1300]="NavigationOccurred"}(a||(a={}));class l{constructor(){i="__BROWSERTOOLS_NETWORK_TOOL_ADDED"}initialize(){this._port=toolUI.createPort("networkPort");toolUI.connect(this._port);this._rpc=new n.a("NETWORK_REMOTE_9",(e,t,r)=>this.jsonRpcMethodReceive(e,t,r),(e,t)=>this.jsonRpcNotificationReceive(e,t),e=>{this._port.postMessage(e)},e=>{this._port.addEventListener("message",t=>{e(t)})});browser.addEventListener("beforeScriptExecute",this.onBeforeScriptExecute.bind(this));browser.addEventListener("consoleMessage",this.onConsoleMessage.bind(this));toolUI.addEventListener("detach",()=>this.onDetach);this.initializePage()}refreshPage(){browser.refresh();return!0}notify(e,t){this._rpc.jsonRpcNotification(e,t)}jsonRpcMethodReceive(e,t,r){let i;(i=t?this[e].apply(this,t):this[e].apply(this)).then&&"function"==typeof i.then?i.then(r).catch(e=>{r(void 0,e)}):r(i,void 0)}jsonRpcNotificationReceive(e,t){}addRemotePageFunctions(e){e[i]=browser.createSafeFunction(e,()=>{})}initializePage(){try{this.hasServiceWorkerRegistrations();const e=o.default.getDefaultView(browser.document);this.addRemotePageFunctions(e);o.default.InitializeDocumentTries=0;this.notify("RemoteCodeInitialized",[]);const t=()=>{setTimeout(this.fireLoadTimings.bind(this),0)},r=browser.createSafeFunction(e,t.bind(this));e.addEventListener("load",r)}catch(e){this.onDocumentNotReady()}}fireLoadTimings(){const e=o.default.getDefaultView(browser.document).performance.timing,t=e.navigationStart,r=e.loadEventEnd-t,i=e.domContentLoadedEventEnd-t;this.notify("DOMContentLoaded",[i]);this.notify("LoadEvent",[r])}onBeforeScriptExecute(e){let t=e;e&&e.browserOrWindow&&(t=e.browserOrWindow);let r=null;try{r=o.default.getDefaultView(t.document)}catch(e){return}r===o.default.getDefaultView(browser.document)&&this.initializePage()}onConsoleMessage(e){"HTML"===e.source&&e.messageId===a.NavigationOccurred&&this.notify("FrameNavigated",[])}onDetach(){try{const e=o.default.getDefaultView(browser.document);e[i]&&delete e[i]}catch(e){}}onDocumentNotReady(){if(o.default.InitializeDocumentTries<o.default.InitializeDocumentMaxTries){++o.default.InitializeDocumentTries;this.notify("DocumentNotYetReady",[])}else this.notify("OnScriptError",["Document Timed Out: Remote.js"])}setCacheDisabled(e){try{resources.alwaysRefreshFromServer=e;return!0}catch(e){}return!1}canClearBrowserCache(){return!(!resources||!resources.clearBrowserCache)}clearBrowserCache(){try{resources.clearBrowserCache();return!0}catch(e){}return!1}clearBrowserCacheForDomain(){try{resources.clearBrowserCacheForDomain()}catch(e){}return!0}canClearBrowserCookies(){return!!(resources&&resources.cookies&&resources.cookies.clearAllCookies)}clearAllCookies(){try{resources.cookies.clearAllCookies();return!0}catch(e){}return!1}clearAllCookiesForDomain(){try{resources.cookies.clearAllCookiesForDomain()}catch(e){}return!0}async bypassServiceWorkers(e){browser.getServiceWorkerForOrigin().bypassForNetwork=e}async hasServiceWorkerRegistrations(){const e=s.e.getDefaultView(browser.document),t=[e];for(;t.length>0;){const r=t.pop();if(this.areServiceWorkersEnabled(e)){if((await s.e.safeAsyncCall(e,e.navigator.serviceWorker.getRegistrations())).length>0){this.notify("hasServiceWorkers",[!0]);return}}for(let e=0;e<r.frames.length;e++){const i=s.e.getValidWindow(r,r.frames[e]);i.isValid&&t.push(i.window)}}this.notify("hasServiceWorkers",[!1])}areServiceWorkersEnabled(e){return!!e&&!!e.navigator.serviceWorker&&e.isSecureContext}}(new l).initialize()}]);
