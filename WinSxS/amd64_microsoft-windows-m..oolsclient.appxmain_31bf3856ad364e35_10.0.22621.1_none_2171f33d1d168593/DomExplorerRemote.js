var domexplorer,Dom,remoteHelpers,F12;!function(e){!function(e){"use strict";class t{static isWhitespace(e){return 3===e.nodeType&&!t.NON_WHITESPACE.test(e.nodeValue)}static isSelfClosingTag(e,i){return!i&&t.VOID_TAG[e.toLowerCase()]}}t.VOID_TAG={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};t.NON_WHITESPACE=/\S/;e.RemoteStatic=t}(e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{static getCssClassesUsedInCurrentDocument(e){var i=[];t.collectSelectors(e.styleSheets,i);var r={};t.extractClassNamesFromSelectorText(i,r);t.extractClassNamesFromClassAttributes(e,r);return t.createArrayFromClassSet(r)}static collectSelectors(e,i){for(var r=0;r<e.length;r++){var o=e[r];o.imports&&o.imports.length&&t.collectSelectors(o.imports,i);try{for(var s=0;s<o.rules.length;s++){var n=o.rules[s];i.push(n.selectorText)}}catch(e){Common.RemoteHelpers.encounteredException(e)}}}static createArrayFromClassSet(e){var t=[];for(var i in e)"BPT-DomExplorer-Ignore"!==i&&t.push(i);t.sort();return t}static extractClassNamesFromSelectorText(e,i){for(var r,o=0;o<e.length;o++){var s=e[o];if(s)for(var n=String.prototype.split.call(s,/([~+>,]|\s)+/),l=0;l<n.length;l++)for(var a=n[l],d=a.indexOf(".");-1!==d;){var p=t.findEndOfClass(a,d);if(-1===p){""!==(r=a.substring(d+1))&&(i[r]=!0);d=-1}else{(r=a.substring(d+1,p+1))&&(i[r]=!0);d=a.indexOf(".",d+1)}}}}static extractClassNamesFromClassAttributes(e,t){for(var i=e.querySelectorAll("[class]"),r=0;r<i.length;r++){var o=i.item(r),s=o.classList;if(s)for(var n=0;n<s.length;n++){t[s.item(n)]=!0}else{var l=o.className;if(l){var a=Common.RemoteHelpers.getDefaultView(browser.document);if(a&&a.SVGAnimatedString&&l instanceof a.SVGAnimatedString){var d=l;l=d.baseVal;d.baseVal!==d.animVal&&(l+=" "+d.animVal)}if(l&&l.split)for(var p=String.prototype.split.call(l,/\s+/),u=0;u<p.length;u++)t[l=p[u]]=!0}}}}static findEndOfClass(e,t){var i=e.substring(t+1),r=String.prototype.search.call(i,/[.#\[:>~)]/);return-1===r?-1:r+t}}e.CssInformationExtractor=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict"}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e){this._dom=e;this._mapUidToNode={};this._nextAvailableUid=1}unmapNode(e){delete this._mapUidToNode[e]}getOrAssignUid(e,t){if(e){var i=this.getUid(e);if("#root"===i)return i;if(i&&this.getNode(i))return i;for(var r in this._mapUidToNode)if(this._mapUidToNode[r]===e)return r;if(!t){i=i||"dm5_"+this._nextAvailableUid++;this._mapUidToNode[i]=e;return i}}}getNode(e){if("#root"===e)return browser.document;var t=this._dom.getElementByUniqueId(e);return t||this._mapUidToNode[e]}getUid(e){return e?e===browser.document?"#root":e.uniqueID:null}}e.NodeMap5=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e){this._dom=e;this._mapUidToNode=new Map;this._mapNodeToUid=new WeakMap;this._nextAvailableUid=1}unmapNode(e){var t=this._mapUidToNode.get(e);if(t){this._mapNodeToUid.delete(t);this._mapUidToNode.delete(e)}}getOrAssignUid(e,t){if(e){var i=this.getUid(e);if("#root"===i)return i;if(i&&this.getNode(i))return i;if(this._mapNodeToUid.has(e))return this._mapNodeToUid.get(e);if(!t){i=i||"dm11_"+this._nextAvailableUid++;this._mapUidToNode.set(i,e);this._mapNodeToUid.set(e,i);return i}}}getNode(e){if("#root"===e)return browser.document;var t=this._dom.getElementByUniqueId(e);if(t)return this.isNodeAccessible(t)?t:null;if(!(t=this._mapUidToNode.get(e)))return null;if(!this.isNodeAccessible(t)){this._mapUidToNode.delete(e);return null}return t}getUid(e){return e?e===browser.document?"#root":e.nodeType===e.ELEMENT_NODE&&browser.getUniqueID?browser.getUniqueID(e):e.uniqueID:null}isNodeAccessible(e){var t=null;try{e.nodeName;t=typeof e}catch(e){return!1}return"object"===t}}e.NodeMap11=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(t){class i{constructor(){this.clearManager()}clearManager(){this._isFreshlyModifiedUid={};this._queuedMutations={};this._subtreeModifiedQueue=[]}processMutation(e,t,i){var r=this.getDocumentUid(e.targetUid),o=!1;if(t)switch(e.type){case"DOMNodeInserted":case"DOMNodeRemoved":var s=e.parentUid;if(!this._isFreshlyModifiedUid[s]){var n=this._queuedMutations[s];if(!n){n=[];this._queuedMutations[s]=n;-1===(a=this._subtreeModifiedQueue.indexOf(s))&&this._subtreeModifiedQueue.push(s)}var l=e;l.parentsChildCount=i.parentNode.childNodes.length;n.push(l)}this._isFreshlyModifiedUid[e.targetUid]=!0;o=!0;break;case"DOMSubtreeModified":var a=this._subtreeModifiedQueue.indexOf(e.targetUid);this.flushQueuedSubtreeMutations(e.targetUid,r)&&this.assertDebugOnly(-1!==a,"Flushed a subtree that is not in the queue");if(-1!==a){this.fireTreeModified(r,[e]);this._subtreeModifiedQueue.splice(a,1)}o=!0}o||this.fireTreeModified(r,[e])}flushQueuedMutations(){this._subtreeModifiedQueue.forEach(e=>{var t=this.getDocumentUid(e);this.flushQueuedSubtreeMutations(e,t)})}flushQueuedSubtreeMutations(e,t){var i=this._queuedMutations[e];if(i&&i.length>0){var r=this.sortMutationQueue(i);this.fireTreeModified(t,r);delete this._queuedMutations[e];this._isFreshlyModifiedUid={};return!0}return!1}fireTreeModified(t,i){t&&e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("AddDocumentModifiedListener",[i])}getDocumentUid(t){var i=e.RemoteDom.getDomTree().nodeMap,r=i.getNode(t);return r?i.getOrAssignUid(r.ownerDocument):null}sortMutationQueue(e){if(0!==e.length){var t=[],i=[],r=e[0].type,o=e[0].parentsChildCount;e.forEach(e=>{if(e.type!==r||e.parentsChildCount!==o){this.sortMutationPartition(t);i=i.concat(t);r=e.type;o=e.parentsChildCount;t=[]}delete e.parentsChildCount;t.push(e)});this.sortMutationPartition(t);return i=i.concat(t)}}sortMutationPartition(e){if(0!==e.length){var t=e[0].type;"DOMNodeInserted"===t?e.sort((e,t)=>e.targetChildIndex-t.targetChildIndex):"DOMNodeRemoved"===t&&e.sort((e,t)=>t.targetChildIndex-e.targetChildIndex)}}assertDebugOnly(t,i){!t&&e&&e.Tools.Utility.Assert.failDebugOnly(i)}}t.MutationManager=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e){this._diagOmStyles=e}static constructDoctypeString(e){var t="<!DOCTYPE html>";e&&(t="<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">");return t}computeHtmlForAncestorsAndDescendants(e){var i=this.copyElementPlusAncestors(e),r=t.constructDoctypeString(e.ownerDocument.doctype),o=this.constructHtmlTagString(e),s=this.findElementsToSearchForStyles(e),n=this.makeElementToStyleRulesMap(s),l=this.putRulesInTheRightOrder(n),a=r+"\r\n"+o+"\r\n<head>\r\n<title></title>\r\n<style>\r\n";a+=this.getTextForRules(l);a+="</style>\r\n</head>\r\n";a+=i.outerHTML;return a+="\r\n</html>\r\n"}copyElementPlusAncestors(e){var t=[],i=e.parentElement;if("BODY"!==e.tagName)for(;i;){t.push(i);(i=i.parentElement)&&!i.parentElement&&(i=null)}for(var r=null,o=null,s=t.length-1;s>=0;s--){var n=this.copyElementWithAttributes(t[s]);r?r.appendChild(n):o=n;r=n}var l=this.copyElementWithAttributes(e);l.innerHTML=e.innerHTML;if(r){r.appendChild(l);return o}return l}findElementsToSearchForStyles(e){for(var t=[],i=e;i;){t.push(i);i=i.parentElement}for(var r=[e];r.length>0;){var o=r.pop().children;if(o)for(var s=0;s<o.length;s++){r.push(o[s]);t.push(o[s])}}return t}getTextForRules(e){var t="";e.forEach(e=>{if(e.parentRule&&e.parentRule){var i=e.parentRule;if(i.media&&i.media.mediaText)t+="/* @media "+i.media.mediaText+" */\r\n";else if(e.parentStyleSheet){var r=e.parentStyleSheet.owningElement;"LINK"===r.tagName&&r.media&&(t+="/* media "+r.media+"*/\r\n")}}t+=e.selectorText;t+=" {\r\n";for(var o=e.style,s=styles.getParsedPropertyList(o),n=0;n<s.length;n++)try{var l=s[n],a=l.propertyName,d=l.value,p=l.important;if(a){t+="\t"+a+": ";d&&(t+=d);p&&(t+=" !important");t+=";\r\n"}}catch(e){Common.RemoteHelpers.encounteredException(e)}t+="}\r\n"});return t}makeElementToStyleRulesMap(e){for(var t=[],i=0;i<e.length;i++){var r=e[i],o=this.getStyleRules(r);o.length>0&&t.push({element:r,styleRules:o})}return t}getStyleRules(e){let t=[];this._diagOmStyles.calculateTracedStyles(e);try{var i=this._diagOmStyles.getTracedStyles(e).getAllAppliedStyles()}catch(e){return t}for(let e=i.elementStyles.length-1;e>=0;e--){const r=i.elementStyles[e].parentRule;r&&t.push(r)}return t}copyElementWithAttributes(e){for(var t=e.ownerDocument.createElement(e.tagName),i=0;i<e.attributes.length;i++)t.setAttribute(e.attributes[i].name,e.attributes[i].value);return t}constructHtmlTagString(e){var t=e.ownerDocument.documentElement,i="<html>";if(t&&t.attributes){i="<html";for(var r=0;r<t.attributes.length;r++)i+=" "+t.attributes[r].name+'="'+t.attributes[r].value+'"';i+=">"}return i}putRulesInTheRightOrder(e){for(var t=[],i=0;i<e.length;i++)for(var r=e[i],o=null,s=0;s<r.styleRules.length;s++){var n=r.styleRules[s],l=t.indexOf(n);if(l<0)t.push(n);else if(o){var a=t.indexOf(o);if(a>l){t.splice(a,1);t.splice(l,0,o)}}o=n}return t}}e.RemoteElementCopier=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){!function(e){var t=Common.RemoteHelpers;class i{constructor(e){this._browser=e}get browser(){return this._browser}initialize(){this._loaded=!1;this._callbacks={};if("loading"!==this._browser.document.readyState)this._loaded=!0;else{var e=t.getDefaultView(this._browser.document);try{this._onLoadListener=t.addSafeListener(e,this._browser.document,"DOMContentLoaded",this.onload.bind(this))}catch(e){}}}cleanUp(){this._onLoadListener&&t.removeListener(this._browser.document,"DOMContentLoaded",this._onLoadListener);this._callbacks={}}onload(){if(this._loaded)throw new Error("DOM loaded multiple times.");this._loaded=!0;this.fireEvent("loaded",null)}fireEvent(e,t){if(this._callbacks[e])for(var i=0,r=this._callbacks[e].length;i<r;i++)this._callbacks[e][i](t)}attachEvent(e,t){this._callbacks[e]||(this._callbacks[e]=[]);this._callbacks[e].push(t)}addEventListener(e,t){switch(e){case"loaded":this._loaded&&t();this.attachEvent(e,t);break;default:throw new Error("Invalid event listener type.")}}removeEventListener(e,t){if(this._callbacks&&this._callbacks[e]){var i=this._callbacks[e].lastIndexOf(t);-1!==i&&this._callbacks[e].splice(i,1)}}}e.RemoteDomService=i}(e.Remote||(e.Remote={}))}(domexplorer||(domexplorer={}));!function(e){"use strict";let t;!function(e){let t;!function(e){e[e.InlineStyle=0]="InlineStyle";e[e.MatchedRule=1]="MatchedRule";e[e.PseudoElement=2]="PseudoElement";e[e.AtRule=3]="AtRule";e[e.Unspecified=4]="Unspecified"}(t=e.RuleType||(e.RuleType={}));class i{constructor(e,i,r,o,s=!1,n=!0){this.atRuleCache=o;this.wasCreatedInSession=s;this.hasEditableSelector=n;this.properties=[];this.parent=null;this.grayedStyleUid=null;this.isGrayedStyle=!1;this.ruleType=t.Unspecified;const l=r.rule;this.uid=r.uid;this.pseudoElementType=i;this.isInlined=e.style===r.style;this.declarationLocation=r.source;this.ruleType=t.MatchedRule;l&&l.parentStyleSheet&&(this.styleHref=l.parentStyleSheet.href);if(l){this.selector=this.computeSelector(l);const e=o.lookup(l);if(e){this.parent=e.parentText;this.isGrayedStyle=!0;this.grayedStyleText=e.parentText;this.grayedStyleUid=e.parentUid}s||(this.originalSelector=this.selector);this.ruleType=t.AtRule}if(i){this.grayedStyleText=i;this.isGrayedStyle=!0;this.ruleType=t.PseudoElement}}get hasChanged(){if(!this.properties.length||this.wasCreatedInSession&&this.isDeleted)return!1;if(!this.wasCreatedInSession&&!this.isInlined&&this.selector!==this.originalSelector)return!0;for(var e=0;e<this.properties.length;e++)if(this.properties[e].hasChanged)return!0;return!1}setIsInheritedAndTarget(t,i,r){this.isInherited=t;this.target=new e.AppliedStyleTarget(this.isInherited?i.getOrAssignUid(r):this.uid,r)}addProperty(e,t){this.properties.splice(t,0,e)}removeProperty(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t]===e){this.properties.splice(t,1);return}}clearProperties(){this.properties=[]}forEachProperty(e){for(var t=0;t<this.properties.length;t++)e(this.properties[t])}computeSelector(e){switch(e.type){case e.STYLE_RULE:return e.selectorText;case e.KEYFRAME_RULE:return e.keyText;default:return null}}}e.AppliedStyleRule=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this.uid=e;this.description=t.tagName.toLowerCase();var i=t.getAttribute("id");if(i)this.description+="#"+i;else{var r=t.className;r&&"string"==typeof r&&r.trim().length>0&&(this.description+="."+r.trim().split(" ")[0])}}}e.AppliedStyleTarget=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(t,i,r=!1){this.current=t;this.status=i;this.wasCreatedInSession=r;this.longhand=[];this.isApplied=!0;this.uid=Common.RemoteHelpers.getUid();if(!r){this.original=new e.AppliedPropertyValue(t.name,t.value,t.isImportant,t.isEnabled);this._isSettingOriginalLonghands=!0}}get hasChanged(){var t=this.original,i=this.current;if(this.wasCreatedInSession&&(this.status!==e.DiagnosticProperty.VALID_STATUS||this.current.isEnabled))return!0;if(!this.wasCreatedInSession&&this.isDeleted)return!0;if(t&&(t.name!==i.name||t.value!==i.value||t.isImportant!==i.isImportant||t.isEnabled!==i.isEnabled))return!0;if(this.longhand.length&&(!this.originalLonghand||this.originalLonghand.length===this.longhand.length))for(var r=0;r<this.longhand.length;r++){var o=this.longhand[r];t=this.originalLonghand?this.originalLonghand[r]:null;i=o.current;if(t&&(t.name!==i.name||t.value!==i.value||t.isImportant!==i.isImportant||t.isEnabled!==i.isEnabled))return!0;if(!t&&!i.isEnabled)return!0}return!1}addLonghandProperty(t,i){this.longhand.splice(i,0,t);if(this._isSettingOriginalLonghands){this.originalLonghand||(this.originalLonghand=[]);var r=t.current;this.originalLonghand.push(new e.AppliedPropertyValue(r.name,r.value,r.isImportant,r.isEnabled))}}clearLonghandProperties(){this.longhand=[];this._isSettingOriginalLonghands=!1}}e.AppliedStyleProperty=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t,i;!function(e){e[e.Before=0]="Before";e[e.After=1]="After";e[e.FirstLetter=2]="FirstLetter";e[e.FirstLine=3]="FirstLine";e[e.Selection=4]="Selection"}(t||(t={}));!function(e){class i{constructor(e,t,i,r){this.matchedRules=e;this.pseudoElements=t;this.atRules=i;this.inlineStyles=r}insertRule(t){switch(t.appliedRule.ruleType){case e.RuleType.InlineStyle:this.inlineStyles.push(t);break;case e.RuleType.PseudoElement:this.pseudoElements.push(t);break;case e.RuleType.AtRule:this.atRules.push(t);break;case e.RuleType.MatchedRule:this.matchedRules.push(t);break;default:throw new Error("Unknown rule type was passed through insert rule of the mapped style cache")}}flatten(){return(new Array).concat(this.inlineStyles,this.matchedRules,this.atRules.sort(i.compareUIDs),this.pseudoElements.sort(i.comparePseudoElements))}static comparePseudoElements(e,t){if(!e.appliedRule.grayedStyleText||!t.appliedRule.grayedStyleText)return 0;let r=i.convertPseudoElementStringToEnum(e.appliedRule.grayedStyleText),o=i.convertPseudoElementStringToEnum(t.appliedRule.grayedStyleText);return r.valueOf()-o.valueOf()}static convertPseudoElementStringToEnum(e){switch(e){case"::after":return t.After;case"::before":return t.Before;case"::first-letter":return t.FirstLetter;case"::first-line":return t.FirstLine;case"::selection":return t.Selection}}static compareUIDs(e,t){return e.appliedRule.grayedStyleUid&&t.appliedRule.grayedStyleUid?e.appliedRule.grayedStyleUid.localeCompare(t.appliedRule.grayedStyleUid):0}}e.MappedStyleRuleCache=i}(i=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){!function(t){e.Remote.RemoteDomService;class i{constructor(e,t){this._remoteDomService=e;this._diagnostics=t;this._onLoadCallback=this.onLoad.bind(this);this._onTimeoutCallback=this.onTimeout.bind(this);this._stepNodesCallback=this.stepNodes.bind(this);this._stepStylesCallback=this.stepStyles.bind(this)}startPalette(){this._running&&this.stopPalette();this._remoteDomService.initialize();this._colors=[];this._running=!0;this._diagnostics.setTimeout(this._onTimeoutCallback,1e4);this._remoteDomService.addEventListener("loaded",this._onLoadCallback)}stopPalette(){this._remoteDomService.removeEventListener("loaded",this._onLoadCallback);this._diagnostics.clearTimeout(this._onTimeoutCallback);this.clearImmediate(this._stepNodesCallback);this.clearImmediate(this._stepStylesCallback);this._running=!1;this._remoteDomService.cleanUp()}submitPalette(){F12.Tools.Utility.Assert.isTrue(this._running);if(this._nodesCounted&&this._stylesCounted){this.stopPalette();F12.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("RunPaletteCollection",[this._colors])}}onTimeout(){F12.Tools.Utility.Assert.isTrue(this._running);this._nodesCounted=!0;this._stylesCounted=!0;this.submitPalette()}onLoad(){F12.Tools.Utility.Assert.isTrue(this._running);this._nodes=[];this._rules=[];this._sheets=[];this._nodesCounted=!1;this._stylesCounted=!1;try{var e=this._remoteDomService.browser.document;this._nodes.push(e.body);for(var t=0,i=e.styleSheets.length;t<i;t++)this._sheets.push(e.styleSheets[t]);this.setImmediate(this._stepNodesCallback);this.setImmediate(this._stepStylesCallback)}catch(e){this.stopPalette()}}stepNodes(){F12.Tools.Utility.Assert.isTrue(this._running);try{for(var e=0;e<i.MAX_STEP_COUNT&&this._nodes.length>0&&this._running;e++){var t=this._nodes.pop(),r=this.getColors(t);this._colors=this._colors.concat(r);if(t.childNodes)for(var o=0,s=t.childNodes.length;o<s;o++)this._nodes.push(t.childNodes[o])}if(this._nodes.length>0)this.setImmediate(this._stepNodesCallback);else{this._nodesCounted=!0;this.submitPalette()}}catch(e){this.stopPalette()}}stepStyles(){F12.Tools.Utility.Assert.isTrue(this._running);try{if(0===this._rules.length){if(0===this._sheets.length)return;var e=this._sheets.pop();if(void 0!==e&&void 0!==e.rules)for(var t=0,r=e.rules.length;t<r;t++)this._rules.push(e.rules[t]);if(e.imports)for(t=0,r=e.imports.length;t<r;t++)this._sheets.push(e.imports[t])}for(t=0;t<i.MAX_STEP_COUNT&&this._rules.length>0;t++){var o=this._rules.pop(),s=this.getColors(o);this._colors=this._colors.concat(s)}if(this._sheets.length>0||this._rules.length>0)this.setImmediate(this._stepStylesCallback);else{this._stylesCounted=!0;this.submitPalette()}}catch(e){this.stopPalette()}}getColors(e){var t,r=[];if(e&&e.style)for(var o=0,s=i.COLOR_PROPERTIES.length;o<s;o++){t=i.COLOR_PROPERTIES[o];var n=e.style[t];n&&r.push(n)}return r}setImmediate(e){this._diagnostics.setTimeout(e,0)}clearImmediate(e){this._diagnostics.clearTimeout(e)}}i.MAX_STEP_COUNT=25;i.COLOR_PROPERTIES=["backgroundColor","borderBottomColor","borderColor","borderLeftColor","borderRightColor","borderTopColor","color","columnRuleColor","floodColor","lightingColor","outlineColor","scrollbar3dLightColor","scrollbarArrowColor","scrollbarBaseColor","scrollbarShadowColor","scrollbarDarkShadowColor","scrollbarFaceColor","scrollbarHighlightColor","scrollbarTrackColor","stopColor"];t.RemoteColorPicker=i}(e.Remote||(e.Remote={}))}(domexplorer||(domexplorer={}));!function(e){"use strict";let t;!function(e){class t{constructor(){this._mappedProperties=[]}get propertyNames(){var e="";this._mappedProperties.forEach(t=>{e+="."+t.appliedProperty.current.name});return e}get isEmpty(){return!this._mappedProperties.length}get hasAppliedProperties(){for(var e=0;e<this._mappedProperties.length;e++)if(this._mappedProperties[e].appliedProperty.isApplied)return!0;return!1}get length(){return this._mappedProperties.length}addProperty(e,t=-1){if(t<0||t>=this._mappedProperties.length){this._mappedProperties.push(e);this._mappedProperties.length;t=this._mappedProperties.length}else this._mappedProperties.splice(t,0,e);this.addAppliedProperty(e.appliedProperty,t)}addAppliedProperty(e,t){}removeProperty(e){for(var t=0;t<this._mappedProperties.length;t++){var i=this._mappedProperties[t];if(i===e){this._mappedProperties.splice(t,1);this.removeAppliedProperty(i.appliedProperty)}}}removeAppliedProperty(e){}forEachProperty(e){for(var t=0;t<this._mappedProperties.length;t++)if(e(this._mappedProperties[t],t))return t;return-1}clearProperties(){this._mappedProperties=[];this.clearAppliedProperties()}clearAppliedProperties(){}lookupMappedProperty(e){for(var t=0;t<this._mappedProperties.length;t++){var i=e(this._mappedProperties[t]);if(i)return i}}lookupMappedPropertyPosition(e){for(var t=0;t<this._mappedProperties.length;t++)if(e===this._mappedProperties[t])return t;return-1}}e.MappedStylePropertyCollection=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t extends e.MappedStylePropertyCollection{constructor(e,t,i,r){super();this.appliedProperty=e;this.mappedRule=t;this.diagProperty=i;this._owner=r}setEnabled(e){this.forEachProperty(t=>{t.setEnabled(e);return!1});this.diagProperty.enabled=e;this.appliedProperty.current.isEnabled=e;this._owner&&e&&(this._owner.appliedProperty.current.isEnabled=!0)}setValue(e,t,i){var r=this.appliedProperty.current,o=r.value,s=r.isImportant,n=()=>{r.value=e;r.isImportant=t},l=()=>{r.value=o;r.isImportant=s},a=this.mappedRule.commitChanges(n,l,this.mappedRule.lookupMappedPropertyPosition(this));if(a){this.diagProperty.enabled=!this.diagProperty.isEmptyInvalid&&i&&this.diagProperty.isValid;r.isEnabled=this.diagProperty.enabled}return a}setName(e,t){var i=this.appliedProperty.current,r=i.name,o=()=>{i.name=e},s=()=>{i.name=r},n=this.mappedRule.commitChanges(o,s,this.mappedRule.lookupMappedPropertyPosition(this));if(n){this.mappedRule.setAppliedState(this);t&&this.resetLonghandEnabledStates(t)}return n}setAll(e,t,i,r,o){var s=this.appliedProperty.current,n=(s.name,s.value),l=s.isImportant,a=()=>{s.name=e;s.value=t;s.isImportant=i},d=()=>{s.value=n;s.isImportant=l},p=this.mappedRule.commitChanges(a,d,this.mappedRule.lookupMappedPropertyPosition(this));if(p){this.diagProperty.enabled=r;s.isEnabled=this.diagProperty.enabled;this.mappedRule.setAppliedState(this);o&&this.resetLonghandEnabledStates(o)}return p}addAppliedProperty(e,t){this.appliedProperty.addLonghandProperty(e,t)}clearAppliedProperties(){this.appliedProperty.clearLonghandProperties()}getLonghandEnabledStates(){var e,t=this.appliedProperty.longhand;if(t){e=[];t.forEach(t=>{e.push(t.current.isEnabled)})}return e}resetLonghandEnabledStates(e){var t=this.diagProperty.longhands;if(t&&e&&t.length===e.length)for(var i=this.appliedProperty.longhand,r=0;r<t.length;r++){t[r].enabled=e[r];i[r].current.isEnabled=t[r].enabled}}}e.MappedStyleProperty=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(){this._properties={}}add(e,t){this._properties[e]=t}remove(e){delete this._properties[e]}lookupByUid(e){return this._properties[e]}clear(){this._properties={}}forEach(e){for(var t in this._properties)e(this._properties[t])}}e.StylePropertyMap=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(){this._rules={}}add(e,t){this._rules[e]=t}remove(e){delete this._rules[e]}lookupByUid(e){return this._rules[e]}clear(){this._rules={}}}e.StyleRuleMap=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t extends e.MappedStylePropertyCollection{constructor(e,t,i,r){super();this._styleUtilities=e;this.appliedRule=t;this.cachedStyle=i;this.element=r}get cssText(){let e="";this.forEachProperty(i=>{const r=i.appliedProperty.current,o=t.preparePropertyName(r.name),s=t.preparePropertyValue(`${r.value||"''"}${r.isImportant?"!important":""}`);e+=`${o}:${s};`});return e}static prepareSelector(e){return e}static preparePropertyName(e){return e.replace(/([^\w-])/g,"\\$1")}static preparePropertyValue(e){return e}addAppliedProperty(e,t){this.appliedRule.addProperty(e,t)}removeAppliedProperty(e){this.appliedRule.removeProperty(e)}clearAppliedProperties(){this.appliedRule.clearProperties()}lookupActiveMappedProperty(e){return this.lookupMappedProperty(t=>t.diagProperty.enabled&&t.diagProperty.activeInBlock&&t.appliedProperty.current.name===e?t:t.lookupMappedProperty(t=>{if(t.diagProperty.enabled&&t.diagProperty.activeInBlock&&t.appliedProperty.current.name===e)return t}))}setAppliedState(e){e.appliedProperty.isApplied=this._styleUtilities.getAppliedState(e)}propertyAdd(t,i,r,o,s,n,l){var a;if(s){(a=s.appliedProperty).current.name=t;a.current.value=i;a.current.isImportant=r;a.current.isEnabled=o;s.diagProperty=null;s.mappedRule=this}else{a=new e.AppliedStyleProperty(new e.AppliedPropertyValue(t,i,r,o),e.DiagnosticProperty.VALID_STATUS,!0);s=new e.MappedStyleProperty(a,this,null)}var d=n?this.lookupMappedProperty(e=>{if(e.appliedProperty.uid===n)return e}):null,p=d?this.lookupMappedPropertyPosition(d):this.length,u=()=>{this.addProperty(s,p)},h=()=>{this.removeProperty(s)};if(this.commitChanges(u,h,p)){this._styleUtilities.mapProperty(s);this.setAppliedState(s);l&&s.resetLonghandEnabledStates(l);return s}}propertyHardRemove(e){var t=this.lookupMappedPropertyPosition(e),i=()=>{this.removeProperty(e)},r=()=>{this.addProperty(e,t)};if(this.commitChanges(i,r)){this._styleUtilities.unmapProperty(e);return!0}return!1}remove(){var e=[],t=()=>{this.forEachProperty(t=>{e.push(t.isDeleted);t.isDeleted=!0})},i=()=>{var t=0;this.forEachProperty(i=>{i.isDeleted=e[t++]})},r=this.commitChanges(t,i);if(r){this.appliedRule.isDeleted=!0;this.forEachProperty(e=>{e.appliedProperty.isDeleted=!0})}return r?e:null}unremove(e,t,i){if(e.length!==this.length||t.length!==this.length||i.length!==this.length)return!1;var r,o=()=>{r=0;this.forEachProperty(t=>{t.isDeleted=!!e&&e[r++]})},s=()=>{this.forEachProperty(e=>{e.isDeleted=!0})},n=this.commitChanges(o,s);if(n){this.appliedRule.isDeleted=!1;if(t){r=0;this.forEachProperty(e=>{e.appliedProperty.isDeleted=e.isDeleted;e.diagProperty.enabled=t[r];e.appliedProperty.current.isEnabled=e.diagProperty.enabled;e.resetLonghandEnabledStates(i[r]);r++})}}return n}propertyRemove(e){e.diagProperty.enabled=!1;e.isDeleted=!0;e.appliedProperty.isDeleted=!0;this.refresh(!1);return!0}propertyUnremove(e,t,i){e.isDeleted=!1;e.appliedProperty.isDeleted=!1;e.diagProperty.enabled=t;e.appliedProperty.current.isEnabled=e.diagProperty.enabled;i&&e.resetLonghandEnabledStates(i);this.refresh(!1);return!0}removeAllProperties(){var e=[];this.forEachProperty(t=>{e.push(t);return!1});var t=()=>{this.clearProperties()},i=()=>{e.forEach(e=>{this.addProperty(e);return!1})};return this.commitChanges(t,i)}movePropertiesFromRule(e){var t=[],i=[],r=()=>{e.forEachProperty(e=>{t.push(e);i.push(e.getLonghandEnabledStates());this.addProperty(e);e.mappedRule=this;e.forEachProperty(e=>{e.mappedRule=this})})},o=()=>{e.forEachProperty(t=>{this.removeProperty(t);t.mappedRule=e;t.forEachProperty(t=>{t.mappedRule=e})})};if(this.commitChanges(r,o)&&e.removeAllProperties()){t.forEach((e,t)=>{e.resetLonghandEnabledStates(i[t])});return!0}return!1}reconcileProperty(t,i,r,o){var s=i.appliedProperty;i.diagProperty=r;var n=!1;try{var l=s.current,a=l.isEnabled;if(o&&i.isDeleted){l.isEnabled=!0;i.isDeleted=!1;t&&(s.isDeleted=!1)}if(r.isValid){s.status!==e.DiagnosticProperty.VALID_STATUS?r.enabled=!0:l.isEnabled||(r.enabled=!1);l.isEnabled=r.enabled}else l.isEnabled=!1;a===l.isEnabled&&i.isDeleted===s.isDeleted||(n=!0);if(t){if(l.name!==r.propertyName||l.value!==r.value||s.status!==r.status||l.isImportant!==r.important){n=!0;l.name=r.propertyName;""===l.value&&"''"===r.value||(l.value=r.value);s.status=r.status;l.isImportant=r.important;if(o){s.wasCreatedInSession=!1;s.original=new e.AppliedPropertyValue(l.name,l.value,l.isImportant,l.isEnabled)}}var d=[],p=i.propertyNames;if(p.length&&p===r.longhandNames)i.forEachProperty((t,i)=>{var o=r.longhands[i],s=t.appliedProperty;t.diagProperty=r.longhands[i];s.current.value=o.value;s.current.isImportant=o.important;s.current.isEnabled=o.enabled;d.push(new e.AppliedPropertyValue(o.propertyName,o.value,o.important,o.enabled))});else{i.forEachProperty(e=>{this._styleUtilities.unmapProperty(e);return!1});i.clearProperties();s.longhand=[];if(r.isShorthand)for(var u=0;u<r.longhands.length;u++){var h=r.longhands[u];try{var m=new e.AppliedStyleProperty(new e.AppliedPropertyValue(h.propertyName,h.value,h.important,h.enabled),h.status),c=new e.MappedStyleProperty(m,this,h,i);i.addProperty(c);d.push(new e.AppliedPropertyValue(h.propertyName,h.value,h.important,h.enabled));this._styleUtilities.mapProperty(c)}catch(e){Common.RemoteHelpers.encounteredException(e)}}o&&(s.originalLonghand=d)}}else i.forEachProperty((e,t)=>{e.diagProperty=r.longhands[t];return!1})}catch(e){Common.RemoteHelpers.encounteredException(e)}return n}commitChanges(e,t,i=-1){var r=this.length;e();var o=this.length,s=r>o;if(!this.cachedStyle.update(this.cssText)){t();return!1}var n=this.cachedStyle.propertyList,l=n.length===o;if(!l){t();this.cachedStyle.update(this.cssText);n=this.cachedStyle.propertyList}this.forEachProperty((e,t)=>{var r=n[t];e.isDeleted&&(r.enabled=!1);var o=l&&!s&&(i<0||t===i);this.reconcileProperty(o,e,r,!1)});this._lastCssText=this.cachedStyle.style.cssText;return l}refresh(e){var t=[];if(this.cachedStyle.style&&this._lastCssText!==this.cachedStyle.style.cssText){var i=[];this.forEachProperty((e,t)=>{i.push(e);return!1});this.cachedStyle.propertyList.forEach(r=>{for(var o=0;o<i.length;o++){if((s=i[o]).diagProperty.propertyName===r.propertyName){i.splice(o,1);this.reconcileProperty(!0,s,r,e)&&t.push({event:"updateProperty",uid:s.appliedProperty.uid,obj:s.appliedProperty,isDynamic:e});return}}var s;if(s=this._styleUtilities.processPropertyFromAppliedStyle(this,this,this.cachedStyle,r,null,!e)){this.addProperty(s);this._styleUtilities.mapProperty(s);s.appliedProperty.isApplied=this._styleUtilities.getAppliedState(s);t.push({event:"addProperty",uid:s.mappedRule.appliedRule.uid,obj:s.appliedProperty,isDynamic:e})}});i.forEach(i=>{this.removeProperty(i);this._styleUtilities.unmapProperty(i);t.push({event:"removeProperty",uid:i.appliedProperty.uid,isDynamic:e})});this._lastCssText=this.cachedStyle.style.cssText}return t}}e.MappedStyleRule=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i,r=!1){this.isParsed=t;this._cachedStyle=i;this._ignoreInvalidEmptyProperties=e.value.indexOf("--")>-1||r;this.update(e);this.isEmptyInvalid&&(this.enabled=!1)}get longhandNames(){var e="";this.isShorthand&&this.longhands.forEach(t=>{e+="."+t.propertyName});return e}get activeInBlock(){return this._diagProperty.activeInBlock}get enabled(){return this._diagProperty.enabled}set enabled(e){if(this._diagProperty.enabled!==e){var t=this._cachedStyle.allowMutations;this._cachedStyle.allowMutations=!1;this._diagProperty.enabled=e;this._cachedStyle.allowMutations=t}}get important(){return this._diagProperty.important}set important(e){this._diagProperty.important=e}get isShorthand(){return this.isValid&&this._diagProperty.longhands.length>0}get propertyName(){return this._diagProperty.propertyName}get value(){return this._diagProperty.value}get status(){return this.isEmptyInvalid?"InvalidValue":this._diagProperty.status}get isValid(){return this.status===t.VALID_STATUS}get isEmptyInvalid(){return!this._ignoreInvalidEmptyProperties&&(0===this._diagProperty.value.length&&t.InvalidEmptyProperties.indexOf(this._diagProperty.propertyName)>=0)}update(e){this._diagProperty&&this.isParsed&&(this._diagProperty.enabled=!1);this._diagProperty=e;this.longhands=[];if(e.longhands&&e.longhands.length)for(var i=0;i<e.longhands.length;i++)try{var r=e.longhands[i];r.status&&this.longhands.push(new t(r,!1,this._cachedStyle,this._ignoreInvalidEmptyProperties))}catch(e){Common.RemoteHelpers.encounteredException(e)}}}t.VALID_STATUS="Valid";t.UNRECOGNIZED_STATUS="UnrecognizedProperty";t.INVALID_VALUE_STATUS="InvalidValue";t.InvalidEmptyProperties=["background","background-image","background-attachment","background-repeat","background-position-x","background-position-y","background-size","background-origin","background-clip","background-color","border-image","content","font-family","quotes"];e.DiagnosticProperty=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this.style=e;this.rule=t;this._ownerDocument=i;this.allowMutations=!0;this.uid=Common.RemoteHelpers.getUid();if(this.rule)try{var r=styles.getSourceLocation(this.style);r&&r.fileURI&&(this.source={uri:r.fileURI,line:r.line,column:r.column})}catch(e){Common.RemoteHelpers.encounteredException(e)}}get propertyList(){this.refresh(!1);return this._propertyList}isValid(){try{if(this.rule&&this.rule.type!=this.rule.STYLE_RULE)return!0}catch(e){return!1}try{if(this._ownerDocument)return!!Common.RemoteHelpers.getRuleForStyleObjectByDocument(this.style,this._ownerDocument)}catch(e){Common.RemoteHelpers.encounteredException(e)}return!1}update(e){try{this.allowMutations=!1;this.style.cssText=e;this.refresh(!0);this.allowMutations=!0;return!0}catch(e){this.allowMutations=!0;return!1}}refresh(e){if(this.style&&(e||!this._propertyList||this._lastCssText!==this.style.cssText)){for(var t=styles.getParsedPropertyList(this.style),i=[],r=0;r<t.length;r++)this.addProperty(t[r],!0,i);var o=styles.getDynamicPropertyList(this.style);for(r=0;r<o.length;r++){for(var s=o[r],n=!1,l=i.length-1;!n&&l>=0;l--){var a=i[l];try{if(a.propertyName===s.propertyName){a.update(s);a.isParsed=!1;n=!0}}catch(e){Common.RemoteHelpers.encounteredException(e)}}n||this.addProperty(s,!1,i)}this._propertyList=i;this._lastCssText=this.style.cssText}}addProperty(t,i,r){var o;try{o=new e.DiagnosticProperty(t,i,this)}catch(e){Common.RemoteHelpers.encounteredException(e)}o&&r.push(o)}}e.CachedStyle=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(){this._cache=new Map}lookup(t,i){let r=this._cache.get(t);if(void 0===r){r=new e.CachedStyle(t,t.parentRule,i.ownerDocument);this._cache.set(t,r)}return r}clear(){this._cache.clear()}forEach(e){return this._cache.forEach(e)}}e.RemoteStyleCache=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this.parentText=e;this.parentUid=t}}e.RemoteAtRuleCacheEntry=t;class i{constructor(){this._cache=new Map;this._mediaCache=new Map}lookup(e){let i=void 0;const r=e.parentRule;if(void 0!==r&&void 0===(i=this._cache.get(r))){const o=this.computeParentAtRule(e),s=Common.RemoteHelpers.getUid();i=new t(o,s);this._cache.set(r,i)}return i}computeParentAtRule(e){if(e.parentRule&&e.parentRule.type)switch(e.parentRule.type){case e.SUPPORTS_RULE:return`@supports ${e.parentRule.conditionText}`;case e.KEYFRAMES_RULE:return`@keyframes ${e.parentRule.name}`;case e.MEDIA_RULE:return`@media ${e.parentRule.media.mediaText}`}}clear(){this._cache.clear()}}e.RemoteAtRuleCache=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(t){class i{constructor(e,i){this._domUtilities=e;this._nodeMap=i;this._propertyMap=new t.StylePropertyMap;this._ruleMap=new t.StyleRuleMap;this._currentKeyframes=[];this._currentRules=[];this._forcedPseudoStyling={};this._newRuleStyleSheets={};this._dummyTracedStyles={getAppliedProperties:()=>[],getAppliedStyles:e=>[],getAllAppliedStyles:e=>{},getInheritanceChain:e=>[],isInheritable:e=>!1};this.styleProperties=["margin-top","margin-right","margin-left","margin-bottom","padding-top","padding-right","padding-left","padding-bottom","border-top-width","border-right-width","border-left-width","border-bottom-width","width","height","left","top"];this.elementProperties=["clientHeight","clientWidth","clientTop","clientLeft","offsetLeft","offsetTop"];this._styleCache=new t.RemoteStyleCache;this._atRuleCache=new t.RemoteAtRuleCache}static clone(e){if(!e)return;const t={};for(const r in e){const o=e[r];Array.isArray(o)?t[r]=o.map(e=>i.clone(e)):t[r]="object"!=typeof o?o:i.clone(o)}return t}getComputedStyle(e){var t=e.ownerDocument,i=Common.RemoteHelpers.getDefaultView(t);return Common.RemoteHelpers.getComputedStyle(i,e)}standardizeLayoutUnits(e){if(void 0!==e&&null!==e){var t=String.prototype.match.call(e.toString(),/^(-?[0-9]+(?:\.[0-9]*)?)\s*([a-z]*)$/);if(t&&t.length>1)if(0===t[1])e="0";else{var i=t[1].indexOf(".");i>-1&&t[1].length-i>3&&(e=""+parseFloat(t[1]).toFixed(2)+t[2]);t[2]||(e+="px")}return e}}stylechange(t){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("AttachMediaQueryEvents",[t])}styleAttrModified(e){try{for(var t=0;t<this._currentRules.length;t++){var i=this._currentRules[t];if(i.cachedStyle.style===e.style){if(i.cachedStyle.allowMutations){var r=i.refresh(e!==this.editingElement);r.length&&this.stylechange(r)}break}}}catch(e){}}refreshCurrentRules(e){this._currentElement=e;this._currentRules=this.getCurrentRules();for(var t=[],i=0;i<this._currentRules.length;i++){var r=this._currentRules[i].appliedRule;r.wasCreatedInSession&&r.isDeleted||t.push(r)}return t}getChangedRules(){var e=[];this._styleCache.forEach(t=>{if(t){var i=t.isValid(),r=this.lookupMappedRule(t.uid);r&&r.appliedRule.hasChanged&&(r.appliedRule.isInlined||i)&&e.push(r.appliedRule)}});return e}lookupMappedRule(e){return this._ruleMap.lookupByUid(e)}lookupMappedProperty(e){return this._propertyMap.lookupByUid(e)}mapRule(e){this._ruleMap.add(e.appliedRule.uid,e);e.forEachProperty(e=>{this.mapProperty(e);e.forEachProperty(e=>{this.mapProperty(e);return!1});return!1})}unmapRule(e){this._ruleMap.remove(e.appliedRule.uid);e.forEachProperty(e=>{this.unmapProperty(e);e.forEachProperty(e=>{this.unmapProperty(e);return!1});return!1})}mapProperty(e){this._propertyMap.add(e.appliedProperty.uid,e)}unmapProperty(e){this._propertyMap.remove(e.appliedProperty.uid)}addNewRule(e,t,i){var r=this.addRule(e,t,i);r&&this.mapRule(r);return r}getRulePosition(e){for(var t=this._currentRules.length,i=0;i<this._currentRules.length;i++)if(this._currentRules[i].appliedRule.uid===e.appliedRule.uid){t=i;break}return t}getRuleByPosition(e){if(e>=0&&e<this._currentRules.length)return this._currentRules[e]}getCurrentRules(){styles.calculateTracedStyles(this._currentElement);let i,r=new t.MappedStyleRuleCache([],[],[],[]),o=new Map;this._tracedStyles=this.getSafeTracedStyles(this._currentElement);var s;this._tracedStyles.getInheritanceChain().forEach(e=>{let t=e!==this._currentElement,s=this.getSafeTracedStyles(e),n={elementStyles:[],pseudoElements:[]};s&&(n=s.getAllAppliedStyles());n.elementStyles.forEach(s=>{if(!o.get(s)){o.set(s,!0);try{s===e.style&&e===this._currentElement&&(i=!0);r.insertRule(this.processRuleFromAppliedStyle(e,"",this._styleCache.lookup(s,e),t))}catch(e){}}});for(let s=0;s<n.pseudoElements.length;s++){let l=n.pseudoElements[s].type;n.pseudoElements[s].styles.forEach(s=>{if(!o.get(s))try{s===e.style&&e===this._currentElement&&(i=!0);r.insertRule(this.processRuleFromAppliedStyle(e,l,this._styleCache.lookup(s,e),t))}catch(e){}})}});if(!i){let t=this._styleCache.lookup(this._currentElement.style,this._currentElement);(s=this.processRuleFromAppliedStyle(this._currentElement,"",t,!1)).appliedRule.ruleType=e.RemoteDom.RuleType.InlineStyle;r.insertRule(s)}this._currentKeyframes=styles.getKeyframes(this._currentElement);for(let e of this._currentKeyframes){const t=e.cssRules;for(let e=0;e<t.length;++e){const i=t[e].style,o=this._styleCache.lookup(i,this._currentElement),s=this.processRuleFromAppliedStyle(this._currentElement,"",o,!1,!1,!1);r.insertRule(s)}}let n={},l=[];r.flatten().forEach(e=>{this.determineAppliedAndWinningState(e,n);(e.appliedRule.isInlined&&!e.appliedRule.isInherited||e.hasAppliedProperties)&&l.push(e)});return l}getAppliedState(e){return!e.mappedRule.appliedRule.isInherited||e.diagProperty.status===t.DiagnosticProperty.UNRECOGNIZED_STATUS||this._tracedStyles.isInheritable(e.diagProperty.propertyName)}processPropertyFromAppliedStyle(e,i,r,o,s,n=!1){var l=o.propertyName,a=o.enabled&&o.isValid,d=new t.AppliedStyleProperty(new t.AppliedPropertyValue(l,o.value,o.important,a),o.status,n),p=new t.MappedStyleProperty(d,i,o,s);o.isShorthand&&this.processPropertyListFromAppliedStyle(p,i,r,o.longhands,p);return p}getWinningProperties(e,t){let i=[];const r=this.calculateWinningStyles(e,t);for(var o=0;o<this._currentRules.length;o++){var s=this._currentRules[o];if(r.indexOf(s.cachedStyle.uid)>=0){var n=s.lookupActiveMappedProperty(t);n&&i.push(n)}}return i}copyElementWithStyle(t){return new e.RemoteDom.RemoteElementCopier(styles).computeHtmlForAncestorsAndDescendants(t)}getElementForStyle(e){var t=this.lookupMappedRule(e);if(t&&t.appliedRule.isInlined)return t.element}clearCache(e){this._styleCache.clear();this._atRuleCache.clear();this._ruleMap.clear();this._propertyMap.clear();this.clearForcedPseudoStyling(e);this._newRuleStyleSheets={}}setPseudoStyling(e,t,i){var r=this._forcedPseudoStyling[t];r||(r=this._forcedPseudoStyling[t]=[]);if(i)r.push(e);else{r.indexOf(e)>=0&&r.splice(r.indexOf(e),1)}switch(t.toLowerCase()){case"active":emulation.setActiveStyling(e,i);break;case"focus":emulation.setFocusStyling(e,i);break;case"hover":emulation.setHoverStyling(e,i);break;case"visited":emulation.setVisitedStyling(e,i);break;case"link":emulation.setLinkStyling(e,i)}}getPseudoStyling(e){return{active:this.isPseudoStateActive(e,"active"),focus:this.isPseudoStateActive(e,"focus"),hover:this.isPseudoStateActive(e,"hover"),visited:this.isPseudoStateActive(e,"visited")}}isPseudoStateActive(e,t){let i=this._forcedPseudoStyling[t];return!!i&&i.indexOf(e)>=0}addCurrentRule(e,t){this._currentRules.splice(t,0,e)}replaceCurrentRule(e,t){for(var i=0;i<this._currentRules.length;i++)if(this._currentRules[i]===t){this._currentRules[i]=e;break}}clearForcedPseudoStyling(e){if(e)for(let e of i.PseudoStates){let t=this._forcedPseudoStyling[e];t&&t.forEach(t=>{this.setPseudoStyling(t,e,!1)})}this._forcedPseudoStyling={}}findStyleSheetByTitle(e,t){for(var i=0;i<t.styleSheets.length;i++){var r=t.styleSheets[i];if(r.title===e)return r}}addRule(e,i,r){var o;try{var s,n,l,a,d;if(r&&(n=r.cachedStyle.rule)){s=n.parentStyleSheet;var p=n.parentRule;p&&p.media&&(l=p.media.mediaText)}s||(s=this.createStyleSheetForNewRule());let g="";if(s.insertRule){var u=t.MappedStyleRule.prepareSelector(e)+" { }";l&&(u="@media "+l+" { "+u+" }");a=s.cssRules.length;s.insertRule(u,a);d=l?s.cssRules[a].cssRules[0]:s.cssRules[a];if(!r&&e.indexOf("::")>-1){d.style.cursor="inherit";styles.calculateTracedStyles(this._currentElement);let t=this.getSafeTracedStyles(this._currentElement);if(t){let i=t.getAllAppliedStyles();for(let t=0;t<i.pseudoElements.length;t++)if(e.indexOf(i.pseudoElements[t].type)>-1){g=i.pseudoElements[t].type;break}}d.style.cursor=""}}else{a=s.rules.length;s.addRule(e,"cursor: inherit;",a);(d=s.rules[a]).style.cssText=""}styles.calculateTracedStyles(this._currentElement);var h=this.getSafeTracedStyles(this._currentElement),m=!r||r.appliedRule.wasCreatedInSession,c=r?r.appliedRule.pseudoElementType:g;o=this.processRuleFromAppliedStyle(this._currentElement,c,this._styleCache.lookup(d.style,this._currentElement),!1,m);this.determineAppliedAndWinningState(o,h);if(r){this.replaceCurrentRule(o,r);var y=r.appliedRule;o.appliedRule.styleHref=y.styleHref;o.appliedRule.declarationLocation=y.declarationLocation;o.appliedRule.isInherited=y.isInherited}else this.addCurrentRule(o,i)}catch(e){}return o}createStyleSheetForNewRule(){var e=this._currentElement.ownerDocument,t=this._nodeMap.getUid(e.body);if(!this._newRuleStyleSheets[t]){var i=e.createElement("style");e.getElementsByTagName("head")[0].appendChild(i);i.title="__BROWSERTOOLS_DOMEXPLORER_DYNAMIC_STYLES";this._newRuleStyleSheets[t]=this.findStyleSheetByTitle(i.title,e);i.title=""}return this._newRuleStyleSheets[t]}determineAppliedAndWinningState(e,t){let i=e.appliedRule.pseudoElementType;e.forEachProperty(e=>{var r=this.getAppliedState(e);e.appliedProperty.isApplied=r;e.appliedProperty.isWinning=r&&this.getWinningState(i,e,t);return!1})}getWinningState(e,t,i){var r=t.diagProperty;try{var o=t.mappedRule.cachedStyle.uid;if(t.isEmpty)return r.activeInBlock&&r.enabled&&r.isValid&&this.calculateWinningStyles(e,r.propertyName,i).indexOf(o)>=0;var s=0;r.activeInBlock&&t.forEachProperty(t=>{t.appliedProperty.isWinning=this.getWinningState(e,t,i);t.appliedProperty.isWinning&&s++;return!1});return s>0}catch(e){Common.RemoteHelpers.encounteredException(e)}return!1}processRuleFromAppliedStyle(e,i,r,o,s=!1,n=!0){let l=this.lookupMappedRule(r.uid),a=l&&l.appliedRule&&l.appliedRule.ruleType===t.RuleType.PseudoElement&&l.appliedRule.grayedStyleText!==i;if(!l||a){let o=new t.AppliedStyleRule(e,i,r,this._atRuleCache,s,n),a=new t.MappedStyleRule(this,o,r,e);this.processPropertyListFromAppliedStyle(a,a,r,r.propertyList);this.mapRule(a);l=a}l.refresh(!s);l.appliedRule.setIsInheritedAndTarget(o,this._nodeMap,e);return l}processPropertyListFromAppliedStyle(e,t,i,r,o){if(r)for(var s=0;s<r.length;s++){var n=r[s];try{var l=this.processPropertyFromAppliedStyle(e,t,i,n,o);l&&e.addProperty(l)}catch(e){Common.RemoteHelpers.encounteredException(e)}}}checkPropertyListForWinningProperty(e,t){if(t)for(var i=0;i<t.length;i++){var r=t[i];try{if(r.enabled&&r.activeInBlock)if(r.longhands&&r.longhands.length)for(var o=0;o<r.longhands.length;o++)try{var s=r.longhands[o];if(s.activeInBlock&&s.enabled&&s.propertyName===e)return s}catch(e){Common.RemoteHelpers.encounteredException(e)}else if(r.propertyName===e)return r}catch(e){Common.RemoteHelpers.encounteredException(e)}}}checkInheritanceChainForWinningStyle(e,t){if(!this._currentElement)return{uid:void 0,property:void 0};styles.calculateTracedStyles(this._currentElement);const i=this.getSafeTracedStyles(this._currentElement);try{const r=i.getInheritanceChain(t);for(let i=0;i<r.length;i++){const o=r[i],s=this.getSafeTracedStyles(o);let n={elementStyles:[],pseudoElements:[]};s&&(n=s.getAllAppliedStyles(t));if(""===e)for(let e=0;e<n.elementStyles.length;e++){const i=this._styleCache.lookup(n.elementStyles[e],o),r=this.checkPropertyListForWinningProperty(t,i.propertyList);if(r)return{uid:i.uid,property:r}}else for(let i=0;i<n.pseudoElements.length;i++){const r=n.pseudoElements[i];if(e===r.type)for(let e=0;e<r.styles.length;e++){const i=this._styleCache.lookup(r.styles[e],o),s=this.checkPropertyListForWinningProperty(t,i.propertyList);if(s)return{uid:i.uid,property:s}}}}}catch(e){Common.RemoteHelpers.encounteredException(e)}return{uid:void 0,property:void 0}}calculateWinningStyles(e,t,i){const r=e+":"+t;if(i&&i.hasOwnProperty(r))return i[r];const o=this.checkInheritanceChainForWinningStyle(e,t);let s=[];if(this.winningStyleWouldBeatKeyframeStyle(o.property))s.push(o.uid);else{const e=this.getWinningKeyframeStyleUid(t);e.length>0?s=s.concat(e):s.push(o.uid)}i&&(i[r]=s);return s}winningStyleWouldBeatKeyframeStyle(e){return e&&(e.important||"transition"===e.propertyName)}getWinningKeyframeStyleUid(e){let t=[];this._currentKeyframes.map(i=>{const r=i.cssRules;for(let i=0;i<r.length;++i){const o=r[i].style;let s=this._styleCache.lookup(o,this._currentElement);this.checkPropertyListForWinningProperty(e,s.propertyList)&&t.push(s.uid)}});return t}getSafeTracedStyles(e){try{if(e)return styles.getTracedStyles(e)}catch(e){Common.RemoteHelpers.encounteredException(e)}return this._dummyTracedStyles}}i.PseudoStates=["active","focus","hover","visited"];t.StyleUtilities=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this._element=e;this._beforeElement=t;this._htmlText=i;this.type="AddElement"}static createElements(t,i,r="div"){var o=t.createElement(r),s=Common.RemoteHelpers.getDefaultView(t);s.WinJS?s.WinJS.Utilities.setInnerHTMLUnsafe(o,i):o.innerHTML=i;for(var n=[],l=0;l<o.childNodes.length;l++){var a=o.childNodes.item(l);e.RemoteStatic.isWhitespace(a)||n.push(a)}return n}description(){return this.type}performUndo(){for(var e=0;e<this._newElements.length;e++)this._element.removeChild(this._newElements[e]);return!0}performEdit(){this._newElements||(this._newElements=t.createElements(this._element.ownerDocument,this._htmlText,this._element.tagName));for(var e=0;e<this._newElements.length;e++)this._beforeElement?this._element.insertBefore(this._newElements[e],this._beforeElement):this._element.appendChild(this._newElements[e]);return!0}}e.AddElement=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this._element=e;this._beforeElement=t;this._htmlText=i;this.type="AddElementWithNewTag";this._childrenNodesFromOldElement=this._beforeElement.childNodes}description(){return this.type}performUndo(){this._newElement?this._element.insertBefore(this._beforeElement,this._newElement):this._element.appendChild(this._beforeElement);for(;this._childrenNodesFromNewElement.length>0;)this._beforeElement.appendChild(this._childrenNodesFromNewElement.item(0));this._element.removeChild(this._newElement);return!0}performEdit(){if(!this._newElement){let t=e.AddElement.createElements(this._element.ownerDocument,this._htmlText,this._element.tagName);if(1!=t.length||!t[0])return!1;this._newElement=t[0]}this._beforeElement?this._element.insertBefore(this._newElement,this._beforeElement):this._element.appendChild(this._newElement);for(;this._childrenNodesFromOldElement.length>0;)this._newElement.appendChild(this._childrenNodesFromOldElement.item(0));this._childrenNodesFromNewElement=this._newElement.childNodes;return!0}}e.addElementWithNewTag=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){!function(t){"use strict";class i{constructor(e,t){this.type="HideElement";this._element=e;this.uid=t}description(){return this.type}performUndo(){if(this._element){this._element.classList.toggle(t.HIDEELEMENT_CLASS);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("ToggleElementGlyph",[this.uid]);return!0}}performEdit(){if(this._element){this._element.classList.toggle(t.HIDEELEMENT_CLASS);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("ToggleElementGlyph",[this.uid]);return!0}}}t.HideElement=i}(e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this._element=e;this._isStyle=t;this.type="DeleteElement"}description(){return this.type}performUndo(){if(this._isStyle){this._element.innerHTML=this._oldStyle;return!0}this._nextSibling?this._oldParent.insertBefore(this._element,this._nextSibling):this._oldParent.appendChild(this._element);return!0}performEdit(){if(this._isStyle){this._oldStyle=this._element.innerHTML;this._element.innerHTML="";return!0}this._nextSibling=this._element.nextElementSibling?this._element.nextElementSibling:this._element.nextSibling;this._oldParent=this._element.parentNode;this._element.parentNode.removeChild(this._element);return!0}}e.DeleteElement=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(t){class i{constructor(e,t,i,r,o){this._styleUtilities=e;this._element=i;this._name=r;this._newValue=o;this._htmlTreeHelpers=t;this.type="EditAttribute";if("value"===this._name&&t.hasSpecialValueAttribute(this._element)){this._valueElement=this._element;this._oldValue=this._valueElement.value}else this._oldValue=this._element.getAttribute(this._name)}description(){return this.type}performUndo(){"style"===this._name&&(this._styleUtilities.editingElement=this._element);if(this._valueElement)this._valueElement.value=this._oldValue;else if(this._oldValue)this._element.setAttribute(this._name,this._oldValue);else{"style"===this._name&&this._element.setAttribute(this._name,"color:inherit");this._element.removeAttribute(this._name)}this._styleUtilities.editingElement=null;return!0}performEdit(){var i=!0;"style"===this._name&&(this._styleUtilities.editingElement=this._element);if(this._valueElement){this._valueElement.value=this._newValue;t.domUtilities.getMutationManager().processMutation({type:"DOMAttrModified",targetUid:e.RemoteDom.getDomTree().nodeMap.getOrAssignUid(this._element),newValue:this._newValue,attrChange:1,attrName:this._name},!1)}else try{this._element.setAttribute(this._name,this._newValue)}catch(e){i=!1}this._styleUtilities.editingElement=null;return i}}t.EditAttribute=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i,r,o,s){this._styleUtilities=e;this._mappedRule=t;this._newName=i;this._newValue=r;this._newIsImportant=o;this._beforeUid=s;this.type="EditStylePropertyAdd"}description(){return this.type}performEdit(e){this._mappedProperty=this._mappedRule.propertyAdd(this._newName,this._newValue,this._newIsImportant,!0,this._mappedProperty,this._beforeUid);if(this._mappedProperty){var t=this._mappedProperty.appliedProperty;e?this._styleUtilities.stylechange([{event:"addProperty",uid:this._mappedRule.appliedRule.uid,obj:t,beforeUid:this._beforeUid}]):t.isApplied=!0;this.result=t;return!0}return!1}performUndo(){this._mappedRule.propertyHardRemove(this._mappedProperty);this._styleUtilities.stylechange([{event:"removeProperty",uid:this._mappedProperty.appliedProperty.uid}]);return!0}}e.EditStylePropertyAdd=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this._styleUtilities=e;this._mappedProperty=t;this._newValue=i;this._oldValue=this._mappedProperty.appliedProperty.current.isEnabled;this.type="EditStylePropertyEnable"}description(){return this.type}performUndo(){if(this._newValue!==this._oldValue){this._mappedProperty.setEnabled(this._oldValue);var e=this._mappedProperty.appliedProperty;this._styleUtilities.stylechange([{event:"updateProperty",uid:e.uid,obj:e}]);return!0}return!1}performEdit(e){if(this._newValue!==this._oldValue){this._mappedProperty.setEnabled(this._newValue);if(e){var t=this._mappedProperty.appliedProperty;this._styleUtilities.stylechange([{event:"updateProperty",uid:t.uid,obj:t}])}return!0}return!1}}e.EditStylePropertyEnable=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this._styleUtilities=e;this._mappedProperty=t;this._newName=i;this.type="EditStylePropertyName";var r=this._mappedProperty.appliedProperty;this._oldName=r.current.name;this._oldEnabledLonghands=this._mappedProperty.getLonghandEnabledStates()}description(){return this.type+" "+this._oldName+"="+this._newName+" chainingid="+this.chainingUid}performUndo(){this._mappedProperty.setName(this._oldName,this._oldEnabledLonghands);var e=this._mappedProperty.appliedProperty;this._styleUtilities.stylechange([{event:"updateProperty",uid:e.uid,obj:e}]);return!0}performEdit(e){var t=this._mappedProperty.setName(this._newName);if(t){this.result=this._mappedProperty.appliedProperty;if(e){var i=this._mappedProperty.appliedProperty;this._styleUtilities.stylechange([{event:"updateProperty",uid:i.uid,obj:i}])}}return t}}e.EditStylePropertyName=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this._styleUtilities=e;this._mappedProperty=t;this.type="EditStylePropertyRemove";this._mappedRule=this._mappedProperty.mappedRule;var i=this._mappedProperty.appliedProperty,r=i.current;this._oldName=r.name;this._oldValue=r.value;this._oldIsImportant=r.isImportant;this._oldEnabled=r.isEnabled;this._isHardDelete=i.wasCreatedInSession;this._oldEnabledLonghands=this._mappedProperty.getLonghandEnabledStates()}description(){return this.type+" "+this._oldName+" chainingid="+this.chainingUid}performUndo(){var e=this._mappedProperty.appliedProperty;if(this._isHardDelete){this._mappedRule.propertyAdd(this._oldName,this._oldValue,this._oldIsImportant,this._oldEnabled,this._mappedProperty,this._oldBeforeUid,this._oldEnabledLonghands);this._styleUtilities.stylechange([{event:"addProperty",uid:this._mappedRule.appliedRule.uid,obj:e,beforeUid:this._oldBeforeUid}])}else{this._mappedRule.propertyUnremove(this._mappedProperty,this._oldEnabled,this._oldEnabledLonghands);this._styleUtilities.stylechange([{event:"updateProperty",uid:e.uid,obj:e}])}return!0}performEdit(e){if(this._isHardDelete&&!e){var t=!1;this._mappedRule.forEachProperty(e=>{if(t){this._oldBeforeUid=e.appliedProperty.uid;return!0}e===this._mappedProperty&&(t=!0)})}var i=this._isHardDelete?this._mappedRule.propertyHardRemove(this._mappedProperty):this._mappedRule.propertyRemove(this._mappedProperty);if(i){this.result=this._isHardDelete?null:this._mappedProperty.appliedProperty;if(e){var r=this._mappedProperty.appliedProperty;this._isHardDelete?this._styleUtilities.stylechange([{event:"removeProperty",uid:r.uid}]):this._styleUtilities.stylechange([{event:"updateProperty",uid:r.uid,obj:r}])}}return i}}e.EditStylePropertyRemove=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i,r){this._styleUtilities=e;this._mappedProperty=t;this._newValue=i;this._newIsImportant=r;this.type="EditStylePropertyValue";var o=this._mappedProperty.appliedProperty.current;this._oldValue=o.value;this._oldIsImportant=o.isImportant;this._oldIsEnabled=o.isEnabled;try{this._oldIsInvalid=!this._mappedProperty.diagProperty.isValid}catch(e){Common.RemoteHelpers.encounteredException(e);this._oldIsInvalid=!0}}getOldValue(){return{value:this._oldValue,isImportant:this._oldIsImportant,isEnabled:this._oldIsEnabled,isInvalid:this._oldIsInvalid}}setOldValue(e){this._oldValue=e.value;this._oldIsImportant=e.isImportant;this._oldIsEnabled=e.isEnabled;this._oldIsInvalid=e.isInvalid}hasValueChanged(){return this._oldValue!==this._newValue||this._oldIsImportant!==this._newIsImportant}description(){return this.type+" "+this._mappedProperty.appliedProperty.current.name+"="+this._newValue+" oldValue ="+this._oldValue+" chainingid="+this.chainingUid}performUndo(){this._mappedProperty.setValue(this._oldValue,this._oldIsImportant,this._oldIsEnabled);var e=this._mappedProperty.appliedProperty;this._styleUtilities.stylechange([{event:"updateProperty",uid:e.uid,obj:e}]);return!0}performEdit(e){var t=this._mappedProperty.setValue(this._newValue,this._newIsImportant,e?this._newIsEnabled:this._oldIsEnabled||this._oldIsInvalid);if(t){var i=this._mappedProperty.appliedProperty;this._newIsEnabled=i.current.isEnabled;this.result=i;e&&this._styleUtilities.stylechange([{event:"updateProperty",uid:i.uid,obj:i}])}return t}}e.EditStylePropertyValue=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i,r,o,s){this._styleUtilities=e;this._selector=t;this._newName=i;this._newValue=r;this._newIsImportant=o;this._newPosition=s;this.type="EditStyleRuleAdd"}description(){return this.type}performEdit(e){e||(this._mappedRule=this._styleUtilities.addNewRule(this._selector,this._newPosition));if(this._mappedRule){this._mappedProperty=this._mappedRule.propertyAdd(this._newName,this._newValue,this._newIsImportant,!0,this._mappedProperty);if(e){var t=this._mappedRule.appliedRule,i=this._styleUtilities.getRuleByPosition(this._styleUtilities.getRulePosition(this._mappedRule)+1),r=i?i.appliedRule.uid:null;this._styleUtilities.stylechange([{event:"addRule",uid:t.uid,obj:t,beforeUid:r}])}this.result=this._mappedRule.appliedRule;return!0}return!1}performUndo(){this._mappedRule.removeAllProperties();this._styleUtilities.stylechange([{event:"removeRule",uid:this._mappedRule.appliedRule.uid}]);return!0}}e.EditStyleRuleAdd=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this._styleUtilities=e;this._mappedRule=t;this._oldDeleteStates=[];this._oldEnabledStates=[];this._oldEnabledLonghands=[];this.type="EditStyleRuleRemove";this._mappedRule.forEachProperty(e=>{this._oldEnabledStates.push(e.appliedProperty.current.isEnabled);this._oldEnabledLonghands.push(e.getLonghandEnabledStates())})}description(){return this.type}performEdit(e){this._oldDeleteStates=this._mappedRule.remove();if(this._oldDeleteStates){var t=this._mappedRule.appliedRule;this.result=t.wasCreatedInSession?null:t;e&&(t.wasCreatedInSession?this._styleUtilities.stylechange([{event:"removeRule",uid:t.uid}]):this._styleUtilities.stylechange([{event:"updateRule",uid:t.uid,obj:t}]));return!0}this.result=null;return!1}performUndo(){var e=this._mappedRule.unremove(this._oldDeleteStates,this._oldEnabledStates,this._oldEnabledLonghands),t=this._mappedRule.appliedRule;if(t.wasCreatedInSession){var i=this._styleUtilities.getRuleByPosition(this._styleUtilities.getRulePosition(this._mappedRule)+1),r=i?i.appliedRule.uid:null;this._styleUtilities.stylechange([{event:"addRule",uid:t.uid,obj:t,beforeUid:r}])}else this._styleUtilities.stylechange([{event:"updateRule",uid:t.uid,obj:t}]);return e}}e.EditStyleRuleRemove=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this._styleUtilities=e;this._oldMappedRule=t;this._newSelector=i;this.type="EditStyleRuleSelector";this._oldSelector=this._oldMappedRule.appliedRule.selector;this._oldOriginalSelector=this._oldMappedRule.appliedRule.originalSelector;this._oldProperties=[];this._oldMappedRule.forEachProperty(e=>{this._oldProperties.push(e);return!1})}description(){return this.type}performEdit(e){if(!e){var t=this._styleUtilities.getRulePosition(this._oldMappedRule);this._newMappedRule=this._styleUtilities.addNewRule(this._newSelector,t,this._oldMappedRule);this._newMappedRule.appliedRule.originalSelector=this._oldOriginalSelector}if(this._newMappedRule&&this._newMappedRule.movePropertiesFromRule(this._oldMappedRule)){e&&this._styleUtilities.stylechange([{event:"updateRule",uid:this._oldMappedRule.appliedRule.uid,obj:this._newMappedRule.appliedRule}]);this.result=this._newMappedRule.appliedRule;return!0}return!1}performUndo(){if(this._oldMappedRule.movePropertiesFromRule(this._newMappedRule)){this._styleUtilities.replaceCurrentRule(this._oldMappedRule,this._newMappedRule);this._styleUtilities.stylechange([{event:"updateRule",uid:this._newMappedRule.appliedRule.uid,obj:this._oldMappedRule.appliedRule}]);return!0}return!1}}e.EditStyleRuleSelector=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this._node=e;this._newValue=t;this.type="EditText";this._oldValue=Common.RemoteHelpers.getTextContent(this._node);this._textNodeCase="#text"===this._node.nodeName;this._parentNode=this._node.parentNode}description(){return this.type}performUndo(){if(this._textNodeCase){this._parentNode.ownerDocument;this._parentNode.replaceChild(this._node,this._newTextNode)}else Common.RemoteHelpers.setTextContent(this._node,this._oldValue);return!0}performEdit(){if(this._textNodeCase){var e=this._node.ownerDocument;this._newTextNode||(this._newTextNode=e.createTextNode(this._newValue));this._parentNode.replaceChild(this._newTextNode,this._node)}else Common.RemoteHelpers.setTextContent(this._node,this._newValue);return!0}}e.EditText=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i,r){this.name=e;this.value=t;this.isImportant=i;this.isEnabled=r}}e.AppliedPropertyValue=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i,r){this._styleUtilities=e;this._name=r;this.type="RemoveAttribute";this._element=i;if("value"===this._name&&t.hasSpecialValueAttribute(this._element)){this._oldValue=this._element.value;this._valueSpecialCase=!0}else{this._oldValue=this._element.getAttribute(this._name);this._valueSpecialCase=!1}}description(){return this.type}performUndo(){"style"===this._name&&(this._styleUtilities.editingElement=this._element);this._valueSpecialCase?this._element.value=this._oldValue:this._element.setAttribute(this._name,this._oldValue);this._styleUtilities.editingElement=null;return!0}performEdit(){"style"===this._name&&(this._styleUtilities.editingElement=this._element);if(this._valueSpecialCase)this._element.value="";else{"style"===this._name&&this._element.setAttribute(this._name,"color:inherit");this._element.removeAttribute(this._name)}this._styleUtilities.editingElement=null;return!0}}e.RemoveAttribute=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t,i){this._moveThisNode=e;this._byThisNode=t;this._reparentAction=i;this.type="reparent";this._originalParent=this._moveThisNode.parentNode;this._originalNextSibling=this._moveThisNode.nextSibling}description(){return this.type}performEdit(){if(!(this._moveThisNode&&this._moveThisNode.parentNode&&this._byThisNode&&this._byThisNode.parentNode))return!1;if(!this._moveThisNode.ownerDocument||!this._byThisNode.ownerDocument||this._moveThisNode.ownerDocument!==this._byThisNode.ownerDocument)return!1;switch(this._reparentAction){case t.REPARENT_ACTION.BeforeSibling:this.removeIfTextNode(this._moveThisNode);this._byThisNode.parentNode.insertBefore(this._moveThisNode,this._byThisNode);break;case t.REPARENT_ACTION.AfterSibling:this.removeIfTextNode(this._moveThisNode);this._byThisNode.parentNode.insertBefore(this._moveThisNode,this._byThisNode.nextSibling);break;case t.REPARENT_ACTION.FirstChild:this.removeIfTextNode(this._moveThisNode);this._byThisNode.insertBefore(this._moveThisNode,this._byThisNode.firstChild);break;case t.REPARENT_ACTION.LastChild:this.removeIfTextNode(this._moveThisNode);this._byThisNode.appendChild(this._moveThisNode);default:return!1}return!0}performUndo(){if(!this._moveThisNode||!this._moveThisNode.parentNode||!this._originalParent)return!1;if(!this._moveThisNode.ownerDocument||!this._originalParent.ownerDocument||this._moveThisNode.ownerDocument!==this._originalParent.ownerDocument)return!1;if(this._originalNextSibling&&(!this._originalNextSibling.parentNode||!this._originalNextSibling.ownerDocument||this._moveThisNode.ownerDocument!==this._originalNextSibling.ownerDocument))return!1;this.removeIfTextNode(this._moveThisNode);this._originalNextSibling?this._originalParent.insertBefore(this._moveThisNode,this._originalNextSibling):this._originalParent.appendChild(this._moveThisNode);return!0}removeIfTextNode(e){e.nodeType===e.TEXT_NODE&&e.parentNode&&e.parentNode.removeChild(e)}}t.REPARENT_ACTION={Unknown:"",BeforeSibling:"before sibling",AfterSibling:"after sibling",FirstChild:"first child",LastChild:"last child",NoDropHere:"no drop here"};e.ReparentEdit=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this._element=e;this._htmlText=t;this.type="ReplaceElement";this._parentElement=e.parentElement||e.parentNode;this._nextSibling=this._element.nextElementSibling||this._element.nextSibling}description(){return this.type}performUndo(){this._parentElement.insertBefore(this._element,this._newElements[0]);for(var e=0;e<this._newElements.length;e++)this._parentElement.removeChild(this._newElements[e]);return!0}performEdit(){this._newElements||(this._newElements=e.AddElement.createElements(this._parentElement.ownerDocument,this._htmlText,this._parentElement.tagName));for(var t=this._parentElement.ownerDocument.createDocumentFragment(),i=0;i<this._newElements.length;i++)t.appendChild(this._newElements[i]);this._parentElement.insertBefore(t,this._element);this._parentElement.removeChild(this._element);return!0}}e.ReplaceElement=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(e,t){this._styleUtilities=e;this._mappedProperty=t;this.type="RevertProperty";var i=this._mappedProperty.appliedProperty,r=i.current;this._oldName=r.name;this._oldValue=r.value;this._oldIsImportant=r.isImportant;this._oldIsEnabled=r.isEnabled;this._oldEnabledLonghands=this._mappedProperty.getLonghandEnabledStates();if(i.originalLonghand){this._newEnabledLonghands=[];i.originalLonghand.forEach(e=>{this._newEnabledLonghands.push(e.isEnabled)})}try{this._oldIsInvalid=!this._mappedProperty.diagProperty.isValid}catch(e){Common.RemoteHelpers.encounteredException(e);this._oldIsInvalid=!0}}description(){return this.type+" chainingid="+this.chainingUid}performUndo(){this._mappedProperty.setAll(this._oldName,this._oldValue,this._oldIsImportant,this._oldIsEnabled,this._oldEnabledLonghands);this._oldIsDeleted&&this._mappedProperty.mappedRule.propertyRemove(this._mappedProperty);var e=this._mappedProperty.appliedProperty;this._styleUtilities.stylechange([{event:"updateProperty",uid:e.uid,obj:e}]);return!0}performEdit(e){var t=!0;this._oldIsDeleted=this._mappedProperty.isDeleted;this._oldIsDeleted&&(t=this._mappedProperty.mappedRule.propertyUnremove(this._mappedProperty,!0,this._newEnabledLonghands));if(t){var i=this._mappedProperty.appliedProperty.original;if(t=!!i&&this._mappedProperty.setAll(i.name,i.value,i.isImportant,i.isEnabled,this._newEnabledLonghands)){var r=this._mappedProperty.appliedProperty;this.result=r;e&&this._styleUtilities.stylechange([{event:"updateProperty",uid:r.uid,obj:r}])}}return t}}e.RevertProperty=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{constructor(t,i){this._styleUtilities=t;this._mappedRule=i;this._propertyEdits=[];this.type="RevertRule";this._mappedRule.forEachProperty(t=>{var i=t.appliedProperty.wasCreatedInSession?new e.EditStylePropertyRemove(this._styleUtilities,t):new e.RevertProperty(this._styleUtilities,t);this._propertyEdits.push(i)})}description(){return this.type+" chainingid="+this.chainingUid}performUndo(){var e=!0;this._propertyEdits.forEach(t=>{var i=t.performUndo();e=e||i;return!i});e&&this._editSelector&&this._editSelector.performUndo();var t=this._mappedRule.appliedRule;e&&this._wasDeleted&&(t.isDeleted=!0);this.result=t;this._styleUtilities.stylechange([{event:"updateRule",uid:t.uid,obj:t}]);return e}performEdit(t){var i=!0;this._propertyEdits.forEach(e=>{var r=e.performEdit(t);i=i||r;return!r});if(i){var r=this._mappedRule.appliedRule;if(r.selector!==r.originalSelector){this._editSelector||(this._editSelector=new e.EditStyleRuleSelector(this._styleUtilities,this._mappedRule,r.originalSelector));if(this._editSelector.performEdit(t)){this._newMappedRule=this._editSelector._newMappedRule;this._newMappedRule&&((r=this._newMappedRule.appliedRule).originalSelector=r.selector)}}this._wasDeleted=r.isDeleted;r.isDeleted=!1;this.result=r;t&&this._styleUtilities.stylechange([{event:"updateRule",uid:r.uid,obj:r}])}return i}}e.RevertRule=t}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(t){class i{constructor(e,t){this._document=e;this._nodeMap=t}get nodeMap(){return this._nodeMap}set nodeMap(e){throw new Error("Cannot set the nodeMap")}copyElementWithStyle(e,t){var i=this.getNodeByUid(e);if(i&&htmlTreeHelpers.isElementAccessible(i))for(var r=i;r;){if("BODY"===r.tagName)return t.copyElementWithStyle(i);r=r.parentElement}}getHTMLString(e,t,i){var r=!1;if("style"===e.substr(0,5)){e=e.substr(5);r=!0}var o=this.getNodeByUid(e);if(!o||!o.parentNode)return"";if(r&&"STYLE"===o.nodeName)return o.sheet?o.sheet.cssText:Common.RemoteHelpers.getLeafTextContent(o);var s,n=o;if(!n.tagName){if(n.nodeType===n.DOCUMENT_TYPE_NODE)return Common.RemoteHelpers.getDocumentTypeNodeText(n);if(n.text)return n.text;var l=Common.RemoteHelpers.getLeafTextContent(n);return l||void 0}if(i&&0!==i.length){s=n.cloneNode(!0);this.removeAttributesFromElementAndDescendants(s,i)}else s=n;return t?dom.getElementInnerHTML(s):dom.getElementOuterHTML(s)}reparent(t,i,r,o){var s=this.getNodeByUid(t);if(!s||!s.parentNode)return!1;var n=this.getNodeByUid(i);if(!n||!n.parentNode)return!1;var l=new e.RemoteDom.ReparentEdit(s,n,r);return o.performEdit(l)}hideElement(t,i){let r=this.getNodeByUid(t);if(r){let o=new e.RemoteDom.HideElement(r,t);return i.performEdit(o)}}deleteElement(t,i){var r=!1;if("style"===t.substr(0,5)){t=t.substr(5);r=!0}var o=this.getNodeByUid(t);if(!o||!o.parentNode)return!1;var s=new e.RemoteDom.DeleteElement(o,r);return i.performEdit(s)}getDomNodeDetails(e,i){var r=this.getNodeByUid(e);if(!r){return{uid:e,tag:"",attributes:null,childCount:-1,childIndex:-1,parentUid:null}}for(var o=this.getFirstChild(r),s=0;o;){t.RemoteStatic.isWhitespace(o)||s++;o=o.nextSibling}var n=this.getAttributesDetails(r);return{uid:e,tag:this.getTagName(r),attributes:n,childCount:s,childIndex:i||this.getChildIndex(r),parentUid:this.getUidOfNode(this.getParentNode(r)),textPreview:Common.RemoteHelpers.getLeafTextContentPreviewText(r)}}getChildren(e){if(this.isFrame(e)){var t=e,i=Common.RemoteHelpers.getDefaultView(t.ownerDocument),r=Common.RemoteHelpers.getValidContentWindow(i,t);if(!r.isValid)return null;e=r.window.document}return e.childNodes}getChildIndex(e){if(e.parentNode)for(var i=this.getParentNode(e),r=0,o=0;o<i.childNodes.length;o++){var s=i.childNodes[o];if(s===e)return r;t.RemoteStatic.isWhitespace(s)||r++}return-1}getChildUidsByIndex(e,i){var r=this.getNodeByUid(e);if(!r)return[];for(var o=[],s=0,n=i[s],l=this.getFirstChild(r),a=0;l;){if(!t.RemoteStatic.isWhitespace(l)){if(a===n){o.push(this.getUidOfNode(l));if(++s>=i.length)break;n=i[s]}a++}l=l.nextSibling}return o}getAttributesDetails(e){if(e){var t=void 0;if(e.attributes){t=[];for(var i=e.attributes,r=0;r<i.length;r++){var o=i[r];t.push({name:o.name,value:o.value})}}else 3===e.nodeType?t=[{name:"textContent",value:e.nodeValue}]:4===e.nodeType?t=[{name:"textContent",value:e.nodeValue}]:8===e.nodeType?t=[{name:"textContent",value:e.nodeValue}]:10===e.nodeType&&(t=[{name:"textContent",value:e.nodeName}]);return t}}getTagName(e){switch(e.nodeType){case 3:return"#text";case 8:return"#comment";case 10:return"#doctype"}return e.nodeName}getFirstChild(e){if(this.isFrame(e)){var t=e,i=Common.RemoteHelpers.getDefaultView(t.ownerDocument),r=Common.RemoteHelpers.getValidContentWindow(i,t);return r.isValid?r.window.document.firstChild:null}return e.firstChild}isFrame(e){return e.nodeType===e.ELEMENT_NODE&&Common.RemoteHelpers.isFrameElement(e)}getNodeByUid(e){var t=this._document;"#root"!==e&&(t=this._nodeMap.getNode(e));return htmlTreeHelpers.isElementAccessible(t)?t:null}getParentNode(e){return e.parentNode}getUidOfNode(e){return e===this._document?"#root":this._nodeMap.getOrAssignUid(e)}removeAttributesFromElement(e,t){e.attributes.length>0&&t.forEach(t=>{e.removeAttribute(t)})}removeAttributesFromElementAndDescendants(e,t){if(t&&0!==t.length)for(var i=[e];i.length>0;){var r=i.pop();this.removeAttributesFromElement(r,t);for(var o=r.childNodes.length,s=0;s<o;++s){var n=r.childNodes[s];n.nodeType===n.ELEMENT_NODE&&i.push(n)}}}}t.DomTree=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(t){class i{constructor(){this.onStructureChanged=(e=>{this.handleStructureChanged()});this.onMutationPropertyChanged=(t=>{if("Name"!==t.propertyName)return;let i=diagnostics.accessibility.getAccessibilityNodeById(t.accessibilityId);var r={structureChangeType:3,nodeId:t.accessibilityId,newName:i.getPropertyValue(t.propertyName)};e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("RegisterAccessibilityStructureChangedListener",[r])});this.onAxPropertyChanged=(e=>{this.onPropertyChanged(e.accessibilityId)});this.rootNode=null;this.currentDisplayedNodeId=null;this.pendingTimeout=!1;this.onStructureChangeThrottleLimit=1e3}getRootNodeId(){return diagnostics.accessibility.rootNode?diagnostics.accessibility.rootNode.accessibilityId:null}getNodeById(e){let t=diagnostics.accessibility.getAccessibilityNodeById(e);e===this.getRootNodeId()&&(this.rootNode=this.deepCopyTree(t));return this.makeSerializableAccessibilityNode(t)}getAccessibilityProperties(e){const t=diagnostics.accessibility.getAccessibilityNodeById(e);if(!t)return[{displayName:"",name:"",value:""}];this.currentDisplayedNodeId=e;return this.getPropertiesForNode(t)}getChildrenOfAccessibilityNode(e){let t=[],i=diagnostics.accessibility.getAccessibilityNodeById(e);if(i){let e=i.firstChild;for(;e;){t.push(this.makeSerializableAccessibilityNode(e));e=e.nextSibling}}return t}registerAccessibilityMutationListener(){diagnostics.accessibility.addEventListener("structureChanged",this.onStructureChanged);diagnostics.accessibility.addEventListener("propertyChanged",this.onMutationPropertyChanged)}unregisterAccessibilityMutationListener(){diagnostics.accessibility.removeEventListener("structureChanged",this.onStructureChanged);diagnostics.accessibility.removeEventListener("propertyChanged",this.onMutationPropertyChanged)}registerAccessibilityPropertyChangedListener(){diagnostics.accessibility.addEventListener("propertyChanged",this.onAxPropertyChanged)}getAccessibilityNodeIdByDomElementId(e){let t,i;if(e&&(t=diagnostics.dom.getElementByUniqueId(e))&&(i=diagnostics.accessibility.getAccessibilityNodeForElement(t))){let e=i.firstChild;for(;e;)e=e.nextSibling;return i.accessibilityId}return null}getDomNodeIdByAccessibilityId(e){let i=diagnostics.accessibility.getAccessibilityNodeById(e),r=diagnostics.accessibility.getElementForAccessibilityNode(i);return r?t.getNodeMap().getOrAssignUid(r):"#root"}handleStructureChanged(){if(!this.pendingTimeout){diagnostics.setTimeout(()=>{this.notifyBatchStructureChangedEvents()},this.onStructureChangeThrottleLimit);this.pendingTimeout=!0}}onPropertyChanged(t){if(t!==this.currentDisplayedNodeId)return;let i=diagnostics.accessibility.getAccessibilityNodeById(t);if(!i)return;let r={nodeId:t,properties:this.getPropertiesForNode(i)};e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("RegisterAccessibilityPropertyChangedListener",[r])}notifyBatchStructureChangedEvents(){let t=diagnostics.accessibility.getAccessibilityNodeById(this.getRootNodeId()),i=[];this.pendingTimeout=!1;this.diffTrees(t,this.rootNode,i);if(i.length){this.rootNode=this.deepCopyTree(t);for(let t=0;t<i.length;t++){var r={structureChangeType:2,nodeId:i[t]};e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("RegisterAccessibilityStructureChangedListener",[r])}}}diffTrees(t,i,r){if(!t||!i)return;if(t.accessibilityId!==i.accessibilityId)return;let o=t.firstChild,s=i.firstChild;for(;o&&s;){if(o.accessibilityId!==s.accessibilityId){r.push(t.accessibilityId);return}if(o.role!==s.role||o.name!==s.name){e.Tools.Utility.Assert.areEqual(o.accessibilityId,s.accessibilityId);this.onPropertyChanged(o.accessibilityId);r.push(t.accessibilityId);return}o=o.nextSibling;s=s.nextSibling}if(null===o&&null===s){o=t.firstChild;s=i.firstChild;for(;o&&s;){this.diffTrees(o,s,r);o=o.nextSibling;s=s.nextSibling}}else r.push(t.accessibilityId)}getPropertiesForNode(e){return e.getProperties().map(t=>{let i=e.getPropertyValue(t);return{name:t,value:this.getDisplayedValue(t,i),displayName:t}})}deepCopyTree(e){if(!e)return null;return{accessibilityId:e.accessibilityId,role:e.role,name:e.name,nextSibling:this.deepCopyTree(e.nextSibling),firstChild:this.deepCopyTree(e.firstChild)}}getDisplayedValue(e,t){if(null==t)return t;switch(e){case"ControlType":return this.mapControlTypeToString(t);case"LabeledBy":return diagnostics.accessibility.getElementForAccessibilityNode(t).id;default:return t}}mapControlTypeToString(e){switch(e){case 50040:return"AppBar";case 5e4:return"Button";case 50001:return"Calendar";case 50002:return"CheckBox";case 50003:return"ComboBox";case 50025:return"Custom";case 50028:return"DataGrid";case 50029:return"DataItem";case 50030:return"Document";case 50004:return"Edit";case 50026:return"Group";case 50034:return"Header";case 50035:return"HeaderItem";case 50005:return"HyperLink";case 50006:return"Image";case 50008:return"List";case 50007:return"ListItem";case 50010:return"MenuBar";case 50009:return"Menu";case 50011:return"MenuItem";case 50033:return"Pane";case 50012:return"ProgressBar";case 50013:return"RadioButton";case 50014:return"ScrollBar";case 50039:return"SemanticZoom";case 50038:return"Separator";case 50015:return"Slider";case 50016:return"Spinner";case 50031:return"SplitButton";case 50017:return"StatusBar";case 50018:return"Tab";case 50019:return"TabItem";case 50036:return"Table";case 50020:return"Text";case 50027:return"Thumb";case 50037:return"TitleBar";case 50021:return"ToolBar";case 50022:return"ToolTip";case 50023:return"Tree";case 50024:return"TreeItem";case 50032:return"Window";default:return""+e}}makeSerializableAccessibilityNode(e){if(!e)return null;let t={};t.id=e.accessibilityId;t.name=e.name;t.role=e.role;t.parentId=e.parent?e.parent.accessibilityId:null;t.previousSiblingId=e.previousSibling?e.previousSibling.accessibilityId:null;t.nextSiblingId=e.nextSibling?e.nextSibling.accessibilityId:null;t.firstChildId=e.firstChild?e.firstChild.accessibilityId:null;t.lastChildId=e.lastChild?e.lastChild.accessibilityId:null;return t}}t.RemoteAccessibilityTree=i}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(t){var i=new domexplorer.Remote.RemoteDomService(browser),r=new domexplorer.Remote.RemoteColorPicker(i,diagnostics),o=Common.RemoteHelpers;let s;!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE";e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE";e[e.TEXT_NODE=3]="TEXT_NODE";e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE";e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE";e[e.ENTITY_NODE=6]="ENTITY_NODE";e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE";e[e.COMMENT_NODE=8]="COMMENT_NODE";e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE";e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE";e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE";e[e.NOTATION_NODE=12]="NOTATION_NODE"}(s||(s={}));t.HIDEELEMENT_CLASS="__BROWSERTOOLS_HIDEELEMENT";const n=new Set;function l(i){if(!e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode._hideClassCreated){const i=`var css = document.createElement('style');css.type = 'text/css';css.id = 'hide-element'; css.innerHTML = '.${t.HIDEELEMENT_CLASS} { visibility: hidden !important; }';document.head.appendChild(css);`;Common.RemoteHelpers.executeScript(i,Common.RemoteHelpers.getDefaultView(browser.document),!0);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode._hideClassCreated=!0}return t.getDomTree().hideElement(i,e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack)}class a{static createNodeStringEntry(e){var t;if(Common.HtmlTreeHelpers.isEmptyTextElement(e))return null;var i={};if(e.nodeType===s.DOCUMENT_NODE||e.nodeType===s.DOCUMENT_FRAGMENT_NODE){i.tag="#document";i.text=null}else{var r=e;if(r.tagName){var n=null;t=(""+r.tagName).toLowerCase();var l=[];if(e.attributes)for(var a=0,d=e.attributes.length;a<d;a++){var p=e.attributes[a];p&&l.push({name:""+p.name,value:""+p.value})}i.tag=t;i.text=n;i.attributes=l}else if(e.nodeType){var u="";if(e.nodeType===s.DOCUMENT_TYPE_NODE){t="#doctype";u=o.getDocumentTypeNodeText(e)}else if(e.nodeType===s.COMMENT_NODE){t="#comment";u=o.getLeafTextContent(e)}else if(e.nodeType===s.TEXT_NODE){t="#text";u=(u=o.getLeafTextContent(e)||"").trim()}i.tag=t;i.text=u}else{i.tag=null;i.text=null}}return i}}class d{constructor(){this._editStack=null;this._handlerSafeKeyDown=null;this._handlerSafeUnload=null;this._hostId=null;this._mediaQueryLists=null;this._safeMqlListener=null;this._scriptExecutionSupported=!1;this._hideClassCreated=!1;this._storedElements={}}get storedElements(){return this._storedElements}set storedElements(e){this._storedElements=e}get editStack(){this._editStack||(this._editStack=new Common.EditStack(this._rpc));return this._editStack}set editStack(e){throw new Error("Cannot set the editStack")}get hostId(){return this._hostId}set hostId(e){this._hostId=e}get mediaQueryLists(){return this._mediaQueryLists}set mediaQueryLists(e){this._mediaQueryLists=e}get safeMqlListener(){return this._safeMqlListener}set safeMqlListener(e){this._safeMqlListener=e}get scriptExecutionSupported(){return this._scriptExecutionSupported}set scriptExecutionSupported(e){throw new Error("Cannot set the scriptExecutionSupported")}get unloadSafe(){return this._handlerSafeUnload}set unloadSafe(e){this._handlerSafeUnload=e}getUidOrNull(e){return e&&""+t.getNodeMap().getUid(e)||null}onSubtreeModified(e){if(e&&e.target){var i=e.target,r={};if(!(d.isTextAreaNode(i.parentElement)||d.isTextAreaNode(i)&&"DOMSubtreeModified"===e.type)){r.type=e.type;var o=null,s=!0;switch(e.type){case"DOMCharacterDataModified":r.targetUid=this.getNodeUid(i,!1);var n=this.getNodeUid(i.parentNode,!1);if(!r.targetUid&&n){r.type="DOMNodeRefresh";r.targetUid=n;s=!1}else if(r.targetUid&&t.domUtilities.isWhitespaceOnlyTextNode(i)&&n){r.type="DOMNodeRemoved";r.parentHasNoChildren=!this.nodeHasChildren(i.parentNode,i);r.parentUid=n;r.targetChildIndex=t.getDomTree().getChildIndex(i);s=!1}else{r.newValue=e.newValue;r.prevValue=e.prevValue;r.parentTextPreview=Common.RemoteHelpers.getLeafTextContentPreviewText(i.parentNode)}break;case"DOMAttrModified":case"DOMAttributeNameChanged":r.attrName=e.attrName;r.newValue=e.newValue||i.getAttribute(r.attrName);r.prevValue=e.prevValue;if(r.newValue||r.prevValue||""===r.newValue){r.targetUid=this.getNodeUid(i,!1);r.attrChange=e.attrChange;"style"===e.attrName&&(o=i)}break;case"DOMNodeInserted":if(!t.domUtilities.isWhitespaceOnlyTextNode(i)){r.targetUid=this.getNodeUid(i,!0);r.parentUid=this.getNodeUid(i.parentNode,!0);r.targetChildIndex=this.findChildIndex(i.parentNode,i)}if(this.isDuplicateTextNodeInsertion(r,i)){this._lastMutation=r;return}break;case"DOMNodeRemoved":if(!t.domUtilities.isWhitespaceOnlyTextNode(i)){r.targetUid=this.getNodeUid(i,!0);r.parentHasNoChildren=!this.nodeHasChildren(i.parentNode,i);r.parentUid=this.getNodeUid(i.parentNode,!0);r.targetChildIndex=t.getDomTree().getChildIndex(i)}break;case"DOMSubtreeModified":r.targetUid=this.getNodeUid(i,!1);r.textPreview=Common.RemoteHelpers.getLeafTextContentPreviewText(i);break;default:return}if(r.targetUid){t.domUtilities.getMutationManager().processMutation(r,s,s?i:null);o&&m.styleAttrModified(o);"DOMNodeRemoved"===r.type&&this.unmapChildrenNodes(i)}"DOMSubtreeModified"!==r.type&&(this._lastMutation=r)}}}jsonRpcMethodReceive(t,i,r){var o,s,n=e.RemoteDom.domUtilities[t]?e.RemoteDom.domUtilities[t]:e.RemoteDom.searchUtilities[t]?e.RemoteDom.searchUtilities[t]:e.RemoteDom.dom$messageHandlers[t];s=n===e.RemoteDom.domUtilities[t]?e.RemoteDom.domUtilities:n===e.RemoteDom.searchUtilities[t]?e.RemoteDom.searchUtilities:e.RemoteDom.dom$messageHandlers;(o=i?n.apply(s,i):n.apply(s))?r(o,void 0):r()}jsonRpcNotificationReceive(e,t){}notify(t,i){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode._rpc.jsonRpcNotification(t,i)}initialize(){this._port=toolUI.createPort("domExplorerPort");toolUI.connect(this._port);this._rpc=new e.Tools.RPC.JsonRPCEndpoint("DOMEXPLORER_REMOTE_2",(e,t,i)=>this.jsonRpcMethodReceive(e,t,i),(e,t)=>this.jsonRpcNotificationReceive(e,t),e=>{this._port.postMessage(e)},e=>{this._port.addEventListener("message",t=>{e(t)})});if("undefined"!=typeof browser){this._handlerBeforeScriptExecute||(this._handlerBeforeScriptExecute=(e=>this.onBeforeScriptExecute(e)));this._handlerInspectElement||(this._handlerInspectElement=(e=>t.dom$messageHandlers.inspectElement(e.target)));o.addListener(browser,"beforeScriptExecute",this._handlerBeforeScriptExecute);o.addListener(browser,"inspectElement",this._handlerInspectElement)}this._handlerInitializePage||(this._handlerInitializePage=(()=>this.onInitializePage()));this._handlerDetach||(this._handlerDetach=(()=>this.onDetach()));this.onInitializePage();o.addListener(toolUI,"detach",this._handlerDetach)}forceInitializePage(){this.onInitializePage()}forceNavigationReset(){this.onBeforeScriptExecute(o.getDefaultView(browser.document))}static isTextAreaNode(e){return e&&e.tagName&&"textarea"===e.tagName.toLowerCase()}isDuplicateTextNodeInsertion(e,t){return!!e&&!!this._lastMutation&&"DOMNodeInserted"===e.type&&"DOMNodeInserted"===this._lastMutation.type&&e.targetUid===this._lastMutation.targetUid&&!!t&&t.nodeType===t.TEXT_NODE&&e.parentUid===this._lastMutation.parentUid&&e.targetChildIndex===this._lastMutation.targetChildIndex}nodeHasChildren(e,i){for(var r=e.firstChild;r;){if(r!==i&&!t.domUtilities.isWhitespaceOnlyTextNode(r))return!0;r=r.nextSibling}return!1}onInitializePage(){this._hideClassCreated=!1;n.clear();o.initializeHtmlTreeHelpers();try{var e=o.getDefaultView(browser.document);Common.RemoteHelpers.executeScript("",e,!0);this._scriptExecutionSupported=!0}catch(e){this._scriptExecutionSupported=!1}try{e=o.getDefaultView(browser.document);this.addRemotePageFunctions(e);var t={contextInfo:e.location.href};this.notify("RefreshTree",[t])}catch(e){return}}onDetach(){n.forEach(l);t.dom$messageHandlers.cancelSelectElementByClick();this._editStack=null;m.clearCache(!0);t.domUtilities.reset();o.removeListener(browser,"beforeScriptExecute",this._handlerBeforeScriptExecute);o.removeListener(browser,"inspectElement",this._handlerInspectElement);try{this.detachMediaQueryEvents();var e=o.getDefaultView(browser.document);e.__BROWSERTOOLS_DOMEXPLORER_ADDED&&(e.__BROWSERTOOLS_DOMEXPLORER_ADDED=null);if(this._handlerSafeKeyDown){o.removeListener(browser.document,"keydown",this._handlerSafeKeyDown,!0);this._handlerSafeKeyDown=null}if(this.unloadSafe){o.removeListener(e,"unload",this.unloadSafe,!0);this.unloadSafe=null}}catch(e){}}detachMediaQueryEvents(){if(this.safeMqlListener&&this._mediaQueryLists)for(;this._mediaQueryLists.length>0;){this._mediaQueryLists.pop().removeListener(this.safeMqlListener)}}onBeforeScriptExecute(e){e&&e.browserOrWindow&&(e=e.browserOrWindow);var i=null;try{i=o.getDefaultView(e.document)}catch(e){return}t.domUtilities.removeHighlight();if(i===o.getDefaultView(browser.document)){const e=o.addSafeListener(i,browser.document,"DOMContentLoaded",()=>{this.forceInitializePage();o.removeListener(browser.document,"DOMContentLoaded",e)})}else t.domUtilities.reloadFrame(i)}addRemotePageFunctions(e){if(this.scriptExecutionSupported){this._handlerSafeKeyDown||(this._handlerSafeKeyDown=o.addSafeListener(e,browser.document,"keydown",e=>this.onKeyDown(e),!0));const i=browser.unwrapMirror(e);i.console.select=o.createSafeFunction(i,e=>t.dom$messageHandlers.selectElementFromConsole(browser.getMirror(e)),!0);i.__BROWSERTOOLS_DOMEXPLORER_ADDED=!0}}onKeyDown(e){if(123===e.keyCode&&"vs"===this.hostId)return o.eventHandled(e);if(66===e.keyCode&&e.ctrlKey&&!e.shiftKey&&!e.altKey){if(!t.domUtilities.isSelectingElement){this.notify("StartSelectElementByClickCallback",[]);return o.eventHandled(e)}if(t.domUtilities.isSelectingElement){this.notify("StopSelectElementByClickCallback",[]);return o.eventHandled(e)}}}getNodeUid(e,i){return i?t.getNodeMap().getOrAssignUid(e):t.getNodeMap().getOrAssignUid(e,!0)}unmapChildrenNodes(e){if(!e)return;let i=this.getNodeUid(e,!1);i&&t.getNodeMap().unmapNode(i);for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];this.unmapChildrenNodes(o)}}findChildIndex(e,i){for(var r=e.childNodes,o=r.length,s=0,n=0;n<o;n++){if(r[n]===i)return s;t.domUtilities.isWhitespaceOnlyTextNode(r[n])||s++}}}d.LARGEST_CONSOLE_$X_VAR=4;t.RemoteDomExplorer=d;t.domUtilities={isSelectingElement:!1,selectElementLastSelected:null,selectElementClickCallback:!1,mutationManager:null,currentHoverItemUid:null,mediaStyleChangeCallback:null,currentEventProxy:null,attachedDomModifiedDocs:[],handlerSafeMutations:[],eventsToRegisterFor:["DOMAttrModified","DOMAttributeNameChanged","DOMCharacterDataModified","DOMNodeInserted","DOMNodeRemoved","DOMSubtreeModified"],getMutationManager:function(){t.domUtilities.mutationManager||(t.domUtilities.mutationManager=new e.RemoteDom.MutationManager);return t.domUtilities.mutationManager},getRemoteEvent:function(e){let i=new Dom.Events.RemoteEventModel;i.DisplayName=t.domUtilities.getRemoteEventName(e);return i},applyHandlers:function(i,r,o){let s,n=()=>{const r=t.dom$messageHandlers.collectEvents(i,o);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("EventListenerModification",[r])},l=()=>{const r=t.dom$messageHandlers.collectEvents(i,o);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("EventListenerModification",[r])};s=t.domUtilities.isWindow(r)?"Window":t.getDomTree().nodeMap.getUid(r);t.domUtilities.currentEventProxy=t.domUtilities.retrieveEventHelper(r);if(t.domUtilities.currentEventProxy){t.domUtilities.currentEventProxyFunctions||(t.domUtilities.currentEventProxyFunctions=[]);t.domUtilities.currentEventProxyEvents||(t.domUtilities.currentEventProxyEvents={});let e={uid:s,addCallback:n,removeCallback:l};t.domUtilities.currentEventProxyFunctions.push(e);t.domUtilities.currentEventProxy.addEventListener("listenerAdded",e.addCallback);t.domUtilities.currentEventProxy.addEventListener("listenerRemoved",e.removeCallback);t.domUtilities.currentEventProxyEvents[s]=t.domUtilities.currentEventProxy}},currentEventProxyFunctions:[],currentEventProxyEvents:{},removeAllCurrentEventProxyListeners:function(){if(t.domUtilities.currentEventProxyFunctions){for(var e=0;e<t.domUtilities.currentEventProxyFunctions.length;e++){let i=t.domUtilities.currentEventProxyFunctions[e];t.domUtilities.currentEventProxy=t.domUtilities.currentEventProxyEvents[i.uid];if(t.domUtilities.currentEventProxy&&i&&i.addCallback){t.domUtilities.currentEventProxy.removeEventListener("listenerAdded",i.addCallback);t.domUtilities.currentEventProxy.removeEventListener("listenerRemoved",i.removeCallback)}}t.domUtilities.currentEventProxyFunctions=[];t.domUtilities.currentEventProxyEvents={}}},getRemoteEventName:function(e){let i="";if(dom.isWindow(e))i="Window";else if(t.domUtilities.isDocument(e))i="Document";else if(t.domUtilities.isElement(e)){e.tagName&&(i+=e.tagName.toLocaleLowerCase());e.id&&(i+="#"+e.id.toLocaleLowerCase());e.className&&(i+="."+e.className.toLocaleLowerCase())}return i},isDocument:function(e){return"[object HTMLDocument]"===Object.prototype.toString.call(e)},isWindow:function(e){return dom.isWindow(e)},isElement:function(e){return!t.domUtilities.isWindow(e)&&e.nodeType===s.ELEMENT_NODE},retrieveEventParent:function(e){return t.domUtilities.isDocument(e)?o.getDefaultView(browser.document):dom.isWindow(e)?null:e.parentNode},retrieveEventHelper:function(e){if(t.domUtilities.isElement(e)||t.domUtilities.isDocument(e)||t.domUtilities.isWindow(e))return dom.getElementEventHelper(e);throw new Error("Can't retrieve event helper for an object that is not a Element, Document or Window")},reset:function(){t.resetNodeMap();t.resetDomTree();Common.RemoteHelpers.uid=0;t.domUtilities.removeHighlight();t.domUtilities.isSelectingElement=!1;t.domUtilities.selectElementLastSelected=null;t.domUtilities.selectElementClickCallback=!1;for(var i=0;i<t.domUtilities.handlerSafeMutations.length;i++){var r=t.domUtilities.handlerSafeMutations[i];try{o.removeListener(r.source,r.event,r.safeListener,!0)}catch(e){}}t.domUtilities.handlerSafeMutations=[];t.domUtilities.attachedDomModifiedDocs=[];t.domUtilities.getMutationManager().clearManager();if(t.domUtilities.currentEventProxy){t.domUtilities.removeAllCurrentEventProxyListeners();t.domUtilities.currentEventProxy=null}var s=o.getDefaultView(browser.document);for(i=0;i<=d.LARGEST_CONSOLE_$X_VAR;i++)try{void 0!==s["$"+i]&&s["$"+i]===e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements["$"+i]&&(s["$"+i]=void 0)}catch(e){}e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements={}},basicHighlightColor:{margin:"rgba(250, 212, 107, 0.75)",border:"rgba(120, 181, 51, 0.75)",padding:"rgba(247, 163, 135, 0.75)",content:"rgba(168, 221, 246, 0.75)"},selectElementColor:{margin:"rgba(250, 212, 107, 0.50)",border:"rgba(120, 181, 51, 0.50)",padding:"rgba(247, 163, 135, 0.50)",content:"rgba(168, 221, 246, 0.50)"},hoverElementColor:{margin:"rgba(250, 212, 107, 0.50)",border:"rgba(120, 181, 51, 0.50)",padding:"rgba(247, 163, 135, 0.50)",content:"rgba(168, 221, 246, 0.50)"},highlightElement:function(e,t){if(!e||!e.tagName||!t)return!1;if("undefined"!=typeof browser&&"function"==typeof browser.highlightElement)try{browser.highlightElement(e,t.margin,t.border,t.padding,t.content);return!0}catch(e){o.encounteredException(e)}return!1},removeHighlight:function(){if("undefined"!=typeof browser&&"function"==typeof browser.highlightElement)try{browser.highlightElement(null,"","","","")}catch(e){o.encounteredException(e)}},selectElementInLiveDomEnable:function(){if(t.domUtilities.isSelectingElement&&"undefined"!=typeof browser&&void 0!==browser.elementSelectionEventsEnabled){browser.elementSelectionEventsEnabled=!0;browser.addEventListener("selectElement",t.domUtilities.selectElementHandler);browser.addEventListener("hoverElement",t.domUtilities.hoverElementHandler)}},selectElementInLiveDomDisable:function(){if(t.domUtilities.isSelectingElement&&"undefined"!=typeof browser&&void 0!==browser.elementSelectionEventsEnabled){browser.elementSelectionEventsEnabled=!1;browser.removeEventListener("selectElement",t.domUtilities.selectElementHandler);browser.removeEventListener("hoverElement",t.domUtilities.hoverElementHandler)}},selectElementHandler:function(i){i.target&&t.domUtilities.highlightElement(i.target,t.domUtilities.selectElementColor);t.domUtilities.selectElementLastSelected=i.target;t.domUtilities.selectElementClickCallback&&e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("SelectElementByClick",[])},hoverElementHandler:function(e){e.target&&t.domUtilities.highlightElement(e.target,t.domUtilities.hoverElementColor)},getElementAtCoords:function(e,i,r){var s,n=s=>{if("string"!=typeof s.className||-1===s.className.indexOf("win-appbarclickeater")){if(!o.isFrameElement(s))return s;var n=s,l=t.domUtilities.getClientRect(s),a=o.getDefaultView(s.ownerDocument),d=o.getValidContentWindow(a,n);if(d.isValid){var p=o.getPageOffset(e);return t.domUtilities.getElementAtCoords(d.window.document,i-l.left+p.x,r-l.top+p.y)}}return!1};if("function"==typeof e.msElementsFromPoint){for(var l=e.msElementsFromPoint(i,r),a=0;a<l.length;a++)if("boolean"!=typeof(s=n(l[a]))){var d=o.getDefaultView(e);if("hidden"!==o.getComputedStyle(d,s).visibility)return s}}else{var p=e.elementFromPoint(i,r);if(p){if("boolean"!=typeof(s=n(p)))return s;var u=p.style.visibility;p.style.visibility="hidden";var h=t.domUtilities.getElementAtCoords(e,i,r);p.style.visibility=u;return h}}return null},getClientRect:function(e){if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect();if(void 0!==t.top&&void 0!==t.left&&void 0!==t.width&&void 0!==t.height){var i=o.getPageOffset(e.ownerDocument);return{left:t.left+i.x,top:t.top+i.y,width:t.width,height:t.height}}}for(var r=0,s=0,n=e;n&&n!==browser.document.body&&n!==browser.document;){r+=n.offsetTop;s+=n.offsetLeft;n=n.offsetParent}return{left:s,top:r,width:e.offsetWidth,height:e.offsetHeight}},reloadFrame:function(i){if(browser&&i&&browser.document&&i.document){var r=t.dom$messageHandlers.getIFrameChain(browser.document,i.document);if(r.length>0){var o=r[0],s=null;try{e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.getUidOrNull(o)}catch(t){if(-2146828218==(4294967295&t.number)){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.forceInitializePage();return}throw t}if(!s){var n=o.parentNode;s=null;e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.getUidOrNull(n);if(s)for(var l=t.getNodeMap().getOrAssignUid(n.ownerDocument),a=0;a<t.domUtilities.attachedDomModifiedDocs.length;a++)if(t.domUtilities.attachedDomModifiedDocs[a].docUid===l){var d={type:"DOMNodeInserted",target:o};e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("AddDocumentModifiedListener",[d]);break}}}}else e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.forceInitializePage()},getRootElementOfNode:function(e){if(e&&e.parentNode){for(var t=e.parentNode;t.parentNode;)t=t.parentNode;return t}return e},isWhitespaceOnlyTextNode:function(e){function t(e){var t=o.getLeafTextContent(e);if("string"==typeof t)return!(t.length>0)||!/\S/.test(t)}return null!==e&&e.nodeType===s.TEXT_NODE&&t(e)},getSubsequentNonTextNodeSibling:function(e,i){if(e){for(var r=1===i?e.nextSibling:e.previousSibling;t.domUtilities.isWhitespaceOnlyTextNode(r);)r=1===i?r.nextSibling:r.previousSibling;return r}return null},lastElementInsideIframe:function(e){var i,r=o.getDefaultView(e.ownerDocument),s=o.getValidContentWindow(r,e);if(!s.isValid)return null;var n=s.window.document;do{i=n;n=t.searchUtilities.getSubsequentNonWhiteSpacedChild(n,-1)}while(n);return o.isFrameElement(i)?t.domUtilities.lastElementInsideIframe(i):i},getSubsequentElementAfterIframe:function(e,i,r){if(e)for(var s=e.querySelectorAll("iframe, frame"),n=0,l=s.length;n<l;n++)if(i===s[n]){var a=t.domUtilities.getSubsequentNonTextNodeSibling(i,r);if(-1===r)return a?o.isFrameElement(a)?t.domUtilities.lastElementInsideIframe(a):a.childNodes&&a.childNodes.length>0&&t.searchUtilities.getSubsequentNonWhiteSpacedChild(a,r)?t.searchUtilities.getDeepestRightChild(a):a:i.parentNode;if(a)return a;for(var d=i;d.parentNode;){var p=t.domUtilities.getSubsequentNonTextNodeSibling(d.parentNode,1);if(p)return p;d=d.parentNode}}return null},isIframeElement:e=>o.isFrameElement(e),findParentChainForElement:function(i){var r=[],n=!1;try{for(var l=null,a=0;i;){r.splice(0,0,i);if(i.parentNode)i=i.parentNode;else{if(o.getDefaultView(i)===o.getDefaultView(browser.document))break;l||(l=t.dom$messageHandlers.getIFrameChain(browser.document,t.domUtilities.getRootElementOfNode(i)));if(!l)break;i=l[a];a++}}r.splice(0,1);for(var d=t.getNodeMap(),p=[],u=0;u<r.length;u++){var h=r[u],m=d.getOrAssignUid(h);if(m){var c=d.getNode(m);c&&c===h&&c.nodeType!==s.DOCUMENT_NODE&&p.push(m)}}}catch(e){if(-2146828218!=(4294967295&e.number))throw e;n=!0}n&&e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.forceInitializePage();return p}};t.searchUtilities={previousDFSElement:null,iframeStack:null,skipTraversal:!1,querySelectorResults:[],getSubsequentNonWhiteSpacedChild:function(e,i){if(e&&e.childNodes&&e.childNodes.length>0){if(1===e.childNodes.length){var r=e.childNodes[0];if("STYLE"===e.tagName&&e.styleSheet)return r}if(1===i){for(var o=0;o<e.childNodes.length;o++)if(!t.domUtilities.isWhitespaceOnlyTextNode(e.childNodes[o]))return e.childNodes[o]}else for(o=e.childNodes.length-1;o>=0;o--)if(!t.domUtilities.isWhitespaceOnlyTextNode(e.childNodes[o]))return e.childNodes[o]}return null},getDeepestRightChild:function(e){for(var i=e;i;){e=i;i=t.searchUtilities.getSubsequentNonWhiteSpacedChild(e,-1)}if(o.isFrameElement(e)){var r=t.domUtilities.lastElementInsideIframe(e);t.searchUtilities.initializeIframeStack(r,-1);return r}return e},obtainNextDFSElement:function(e,i){if(e){if(o.isFrameElement(e)){var r=e,s=o.getDefaultView(e.ownerDocument),n=o.getValidContentWindow(s,r);if(n.isValid){t.searchUtilities.iframeStack.push(t.domUtilities.getSubsequentElementAfterIframe(t.domUtilities.getRootElementOfNode(e),e,1));return n.window.document}}var l=t.searchUtilities.getSubsequentNonWhiteSpacedChild(e,1);if(i&&l)return l;var a=t.domUtilities.getSubsequentNonTextNodeSibling(e,1);if(a)return a;for(;e.parentNode;){var d=t.domUtilities.getSubsequentNonTextNodeSibling(e.parentNode,1);if(d)return d;e=e.parentNode}}return null},obtainPreviousDFSElement:function(e,i){function r(e){t.searchUtilities.previousDFSElement=e;var i=t.domUtilities.getSubsequentNonTextNodeSibling(e,-1);if(i){var r=t.searchUtilities.getDeepestRightChild(i);return r||e.parentNode}return e.parentNode}if(o.isFrameElement(e)){t.searchUtilities.previousDFSElement=e;var s=t.domUtilities.getSubsequentElementAfterIframe(t.domUtilities.getRootElementOfNode(e),e,-1);t.searchUtilities.initializeIframeStack(s,-1);return s}var n=t.searchUtilities.getSubsequentNonWhiteSpacedChild(e,1);if(!i||!n)return r(e);if(t.searchUtilities.previousDFSElement===n)return r(e);if(!n||!o.isFrameElement(n))return t.searchUtilities.getDeepestRightChild(e);var l=o.getDefaultView(n.ownerDocument),a=o.getValidContentWindow(l,n);return a.isValid&&t.searchUtilities.previousDFSElement===a.window.document?r(e):void 0},initializeIframeStack:function(e,i){var r=t.dom$messageHandlers.getIFrameChain(browser.document,t.domUtilities.getRootElementOfNode(e));t.searchUtilities.iframeStack=[];t.searchUtilities.iframeStack.push(browser.document);if(r&&r.length>0)for(var s=r.length;s>0;s--){var n=browser.document;if(s!==r.length){var l=o.getDefaultView(r[s].ownerDocument),a=o.getValidContentWindow(l,r[s]);a.isValid&&(n=a.window.document)}1===i?t.searchUtilities.iframeStack.push(t.domUtilities.getSubsequentElementAfterIframe(n,r[s-1],1)):t.searchUtilities.iframeStack.push(r[s-1])}e.parentNode&&e!==browser.document.documentElement&&e.children&&e.children.length>0&&(t.searchUtilities.previousDFSElement=e.children[0])},listContainsElement:function(e,t){if(e&&e.length>0)for(var i=0;i<e.length;i++)if(t===e[i])return i;return-1},obtainSubsequentDFSElement:function(e,i,r){var o=!(e===r&&e!==browser.document&&-1===i);return 1===i?t.searchUtilities.obtainNextDFSElement(e,o):t.searchUtilities.obtainPreviousDFSElement(e,o)},popOutOfIframe:function(){var e=t.searchUtilities.iframeStack.pop();if(0===t.searchUtilities.iframeStack.length){t.searchUtilities.iframeStack.push(browser.document);t.searchUtilities.previousDFSElement=null}return e},queryFrameUsingQuerySelector:function(e,i,r){for(var s=browser.document.__unitTest?browser.document:e.ownerDocument||e,n=0;n<t.searchUtilities.querySelectorResults.length;n++)if(t.searchUtilities.querySelectorResults[n].doc===s)return t.searchUtilities.querySelectorResults[n].result;var l=[];if(t.searchUtilities.textContainsAnySearchTextCaseInsensitively(i,r))return l;try{if(s.querySelectorAll){var a=s.querySelectorAll(i);if(a&&a.length>0)for(var d=0;d<a.length;d++)l.push(a[d]);t.searchUtilities.querySelectorResults.push({doc:s,result:l})}}catch(e){o.encounteredException(e)}return l},createStringForElement:function(e,t){var i=e?e.parentNode:null;if(!e.tagName&&i&&"STYLE"===i.tagName)return i.sheet?i.sheet.cssText:o.getTextContent(i);var r=a.createNodeStringEntry(e);if(r){if("#comment"===r.tag)return r.text?"\x3c!-- "+r.text+" --\x3e":null;if("#document"===r.tag||"#doctype"===r.tag||"#script"===r.tag||"#text"===r.tag)return r.text||null;if(r.tag){var s="<"+r.tag;if(r.attributes)for(var n=0,l=r.attributes.length;n<l;n++){var d=r.attributes[n];s+=" "+d.name+'="'+d.value+'"'}return s+="></"+r.tag+">"}}return null},getSearchResult:function(e,i,r,s,n){t.searchUtilities.querySelectorResults=[];t.searchUtilities.initializeIframeStack(e,r);var l,a=e,d=!1;if(n&&n.length>0){var p="(?:"+n.join("|")+")";p="(?:\\s"+p+"\\s*=\\s*([\"']).*?\\1)|(?:"+p+"\\s*=\\s*([\"']).*?\\2\\s)";l=new RegExp(p,"gi")}if(1===r){var u=o.getLeafTextContentPreview(a);u&&u.isComplete&&u.text.length&&(a=t.searchUtilities.obtainSubsequentDFSElement(a,r,e))}for(var h=!1;!d;){if(s)s=!1;else{h=!0;a=t.searchUtilities.obtainSubsequentDFSElement(a,r,e)}if(a){var m=t.searchUtilities.queryFrameUsingQuerySelector(a,i,n);if(m&&-1!==t.searchUtilities.listContainsElement(m,a))return a;var c=t.searchUtilities.createStringForElement(a,t.getNodeMap());if(c){l&&(c=c.replace(l,""));if(-1!==c.toLowerCase().indexOf(i.toLowerCase()))return a}}a===e&&h&&(d=!0);for(;!a;){a=t.searchUtilities.popOutOfIframe();s=!0}}return null},textContainsAnySearchTextCaseInsensitively:function(e,t){if(t&&t.length>0){var i=e.toLowerCase();for(var r in t){var o=t[r];if(-1!==i.indexOf(o.toLowerCase()))return!0}}return!1}};t.dom$messageHandlers={initializeHost:function(t){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.hostId=t},startSingleEdit:function(){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.startSingleEdit()},endSingleEdit:function(){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.endSingleEdit()},enableEditChaining:function(){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.enableChaining()},disableEditChaining:function(){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.disableChaining()},undoLastEdit:function(){return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.undo()},performNextEdit:function(){return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performNextEdit()},somethingToUndo:function(){return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.somethingToUndo()},somethingToDo:function(){return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.somethingToDo()},getRootElement:function(){t.domUtilities.reset();return"object"==typeof browser.document?"#root":null},editAttribute:function(i,r,o){var s=t.getNodeMap().getNode(i);if(s){var n=new e.RemoteDom.EditAttribute(m,htmlTreeHelpers,s,r,o);return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(n)}},removeAttribute:function(i,r){var o=t.getNodeMap().getNode(i);if(o){var s=new e.RemoteDom.RemoveAttribute(m,htmlTreeHelpers,o,r);return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(s)}},editText:function(i,r){var s=t.getDomTree().nodeMap.getNode(i);if(s){if(o.getLeafTextContent(s)!==r){var n=new e.RemoteDom.EditText(s,r);return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(n)}return!1}},hoverItem:function(e){var i=t.getDomTree().nodeMap.getNode(e);if(!i){t.domUtilities.currentHoverItemUid=null;t.domUtilities.removeHighlight();return!1}t.domUtilities.currentHoverItemUid=e;return t.domUtilities.highlightElement(i,t.domUtilities.basicHighlightColor)},hideHoverItem:function(){t.domUtilities.removeHighlight()},attachMediaQueryEvents:function(){var t=o.getDefaultView(browser.document);if(t&&e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.scriptExecutionSupported){e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.safeMqlListener=o.createSafeFunction(t,e=>{m.stylechange()});e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.mediaQueryLists=[];for(var i=browser.document.styleSheets.length,r=0;r<i;r++){var s=browser.document.styleSheets[r];if(s.media)try{var n=t.matchMedia(s.media.mediaText);n.addListener(e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.safeMqlListener);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.mediaQueryLists.push(n)}catch(e){o.encounteredException(e)}var l=s;try{for(var a=l.cssRules.length,d=0;d<a;d++){var p=s.cssRules[d];if(p.type===t.CSSRule.MEDIA_RULE||p.type===t.CSSRule.IMPORT_RULE){var u=p;(n=t.matchMedia(u.media.mediaText)).addListener(e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.safeMqlListener);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.mediaQueryLists.push(n)}}}catch(e){o.encounteredException(e)}}}},selectElementByClick:function(){if(!t.domUtilities.isSelectingElement&&browser.document.body){t.domUtilities.isSelectingElement=!0;t.domUtilities.selectElementInLiveDomEnable();t.domUtilities.selectElementClickCallback=!0}},cancelSelectElementByClick:function(){if(t.domUtilities.isSelectingElement){t.domUtilities.removeHighlight();t.domUtilities.selectElementInLiveDomDisable();t.domUtilities.isSelectingElement=!1;t.domUtilities.selectElementClickCallback=!1}},getIFrameChain:function(e,i){for(var r=e.querySelectorAll("iframe, frame"),s=0,n=r.length;s<n;s++){var l=r[s],a=o.getDefaultView(e),d=o.getValidContentWindow(a,l);if(d.isValid){if(d.window.document===i)return[r[s]];var p=t.dom$messageHandlers.getIFrameChain(d.window.document,i);if(p&&p.length>0){p.push(r[s]);return p}}}return[]},getParentChainForSelectedElement:function(){return t.domUtilities.findParentChainForElement(t.domUtilities.selectElementLastSelected)},getParentChainForElement:function(e){var i=t.getDomTree().nodeMap.getNode(e);return t.domUtilities.findParentChainForElement(i)},getSelectedElement:function(){return t.getDomTree().nodeMap.getOrAssignUid(t.domUtilities.selectElementLastSelected)},inspectElement:function(e){if(!e||!htmlTreeHelpers.isElementAccessible(e))return!1;t.dom$messageHandlers.selectElementFromConsole(e);return!0},inspectElementById:function(e){try{var i=dom.getElementByUniqueId(e);return t.dom$messageHandlers.inspectElement(i)}catch(e){return!1}},findTerm:function(e,i,r,o){var s=t.getDomTree().nodeMap;t.searchUtilities.previousDFSElement=null;t.searchUtilities.iframeStack=null;var n,l=!1,a=null,d=null;e&&(d=e.match(/^(style|script)/));if(d)if(n=s.getNode(e.replace(d[0],"")))if(1===r){a=t.searchUtilities.obtainNextDFSElement(n,!1);l=!0;if(!a){t.searchUtilities.initializeIframeStack(n,1);if(t.searchUtilities.iframeStack&&t.searchUtilities.iframeStack.length){a=t.searchUtilities.iframeStack[t.searchUtilities.iframeStack.length-1];t.searchUtilities.iframeStack=null}else a=browser.document}}else a=n;else a=browser.document;else a=(n=e&&s.getNode(e))||browser.document;var p=t.searchUtilities.getSearchResult(a,i,r,l,o);return p?t.domUtilities.findParentChainForElement(p):[]},getRenderedFonts:function(e){const i=t.getDomTree().nodeMap.getNode(e);if(i)return styles.getRenderedFonts(i).map(e=>t.StyleUtilities.clone(e))},getComputedBox:function(e){var i=t.getDomTree().nodeMap.getNode(e);if(i&&i.nodeType!==s.TEXT_NODE){var r,n={offsetTop:0,offsetLeft:0,clientWidth:0,clientHeight:0},l=o.getDefaultView(browser.document),a=o.getComputedStyle(l,i),d=m.styleProperties;for(r=0;r<d.length;r++)n[d[r]]=a[d[r]];var p=m.elementProperties;for(r=0;r<p.length;r++)n[p[r]]=i[p[r]];if(void 0===n.offsetTop&&void 0===n.offsetLeft&&i&&i.getBoundingClientRect){var u=i.getBoundingClientRect();if(void 0!==u.top&&void 0!==u.left&&void 0!==u.width&&void 0!==u.height){var h=browser.document.body,c=browser.document.documentElement,y=l.pageYOffset||c.scrollTop||h.scrollTop,g=l.pageXOffset||c.scrollLeft||h.scrollLeft,f=c.clientTop||h.clientTop||0,E=c.clientLeft||h.clientLeft||0;n.offsetTop=Math.round(u.top+y-f);n.offsetLeft=Math.round(u.left+g-E);n.clientWidth=u.width;n.clientHeight=u.height}}for(var _ in n)n[_]&&(n[_]=m.standardizeLayoutUnits(n[_]));return n}},getComputedBoxValueByElement:function(e,t){var i,r,s=m.styleProperties;for(r=0;r<s.length;r++)if(s[r]===t){var n=o.getDefaultView(browser.document);i=o.getComputedStyle(n,e)[t];break}var l=m.elementProperties;for(r=0;r<l.length;r++)if(l[r]===t){i=e[t];break}return m.standardizeLayoutUnits(i)},getWinningProperties:function(e,t){return m.getWinningProperties(e,t).map(e=>e.appliedProperty.uid)},getRootAccessibilityNodeId:function(){return t.getAccessibilityTree().getRootNodeId()},getAccessibilityNodeById:function(e){return t.getAccessibilityTree().getNodeById(e)},getAccessibilityProperties:function(e){return t.getAccessibilityTree().getAccessibilityProperties(e)},getChildrenOfAccessibilityNode:function(e){return t.getAccessibilityTree().getChildrenOfAccessibilityNode(e)},registerAccessibilityStructureChangedListener:function(){return t.getAccessibilityTree().registerAccessibilityMutationListener()},unregisterAccessibilityStructureChangedListener:function(){return t.getAccessibilityTree().unregisterAccessibilityMutationListener()},registerAccessibilityPropertyChangedListener:function(){return t.getAccessibilityTree().registerAccessibilityPropertyChangedListener()},getAccessibilityNodeIdByDomElementId:function(e){return t.getAccessibilityTree().getAccessibilityNodeIdByDomElementId(e)},getDomNodeIdByAccessibilityId:function(e){return t.getAccessibilityTree().getDomNodeIdByAccessibilityId(e)},getCssClassesUsedInCurrentDocument:function(i){var r=browser.document;if(i){var o=t.getDomTree().nodeMap.getNode(i);if(!o)return[];try{o.ownerDocument&&(r=o.ownerDocument)}catch(e){return[]}}return e.RemoteDom.CssInformationExtractor.getCssClassesUsedInCurrentDocument(r)},getLoadDocumentData:function(){var e=!0,t=browser.document.documentElement,i=t&&t.outerHTML?t.outerHTML.length:0,r=0,o=0,s=0,n=0,l=0;if(e&&t){var a=browser.document.createTreeWalker(t,1,null,!1),d=[],p=[];do{if(d.length>0){var u=d.pop();a.currentNode=u;var h=u.tagName;"IFRAME"===h?s++:"SCRIPT"===h&&u.hasAttribute("src")?n++:"LINK"===h&&u.hasAttribute("rel")&&"STYLESHEET"===u.rel.toUpperCase()&&l++}if(a.firstChild()){p.push(a.currentNode);for(;a.nextSibling();)p.push(a.currentNode)}if(0===d.length){o++;r+=p.length;d=p;p=[]}}while(d.length>0)}return{serializedLength:i,nodeCount:r,nestedLevel:o,iframeCount:s,scriptFileCount:n,stylesheetLinkCount:l}},getComputedStyles:function(e){var i=t.getDomTree().nodeMap.getNode(e);if(i){i&&i.nodeType===s.TEXT_NODE&&(i=i.parentNode);return[m.getComputedStyle(i)]}},arrayContains:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},clearStyleCache:function(){m.clearCache(!1);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.reset()},getBulkChildNodesDetails:function(e){t.domUtilities.getMutationManager().flushQueuedMutations();return e.map(e=>{var i={parentUid:e.parentUid,childNodesDetails:[]};t.getDomTree().getChildUidsByIndex(e.parentUid,e.childIndexes).forEach((r,o)=>{var s=e.childIndexes[o],n=t.getDomTree().getDomNodeDetails(r,s);n.parentUid=e.parentUid;i.childNodesDetails.push(n)});e.childUids.forEach(r=>{var o=t.getDomTree().getDomNodeDetails(r);o.parentUid=e.parentUid;i.childNodesDetails.push(o)});return i})},getParentChainForStyle:function(e){var i=m.getElementForStyle(e);if(i)return t.domUtilities.findParentChainForElement(i)},getStyles:function(e){var i=t.getDomTree().nodeMap.getNode(e);if(i){i&&i.nodeType===s.TEXT_NODE&&(i=i.parentNode);return m.refreshCurrentRules(i)}},getChangedStyles:function(){return m.getChangedRules()},editStylePropertyEnable:function(t,i){var r=m.lookupMappedProperty(t);if(r){var o=new e.RemoteDom.EditStylePropertyEnable(m,r,i);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(o)}},addElement:function(i,r,o){var s=t.getDomTree().nodeMap.getNode(i);if(!s)return!1;var n=null;if(r&&!(n=t.getDomTree().nodeMap.getNode(r)))return!1;var l=new e.RemoteDom.AddElement(s,n,o);return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(l)},addElementWithNewTag:function(i,r,o){let s,n=t.getDomTree().nodeMap.getNode(i);if(!n)return!1;if(!r)return!1;if(!(s=t.getDomTree().nodeMap.getNode(r)))return!1;let l=new e.RemoteDom.addElementWithNewTag(n,s,o);return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(l)},replaceElement:function(i,r){var o=t.getDomTree().nodeMap.getNode(i);if(!o||!htmlTreeHelpers.isElementAccessible(o))return!1;var s=new e.RemoteDom.ReplaceElement(o,r);return e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(s)},editStylePropertyValue:function(t,i,r){var o=m.lookupMappedProperty(t);if(o){var s=new e.RemoteDom.EditStylePropertyValue(m,o,i,r);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(s);return s.result}},editStylePropertyName:function(t,i){var r=m.lookupMappedProperty(t);if(r){var o=new e.RemoteDom.EditStylePropertyName(m,r,i);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(o);return o.result}},revertProperty:function(t,i){var r=m.lookupMappedProperty(t);if(r){var o=new e.RemoteDom.RevertProperty(m,r);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(o);return o.result}},removeStyleProperty:function(t){var i=m.lookupMappedProperty(t);if(i){var r=new e.RemoteDom.EditStylePropertyRemove(m,i);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(r);return r.result}},clearCurrentEventProxy:function(){t.domUtilities.removeAllCurrentEventProxyListeners();t.domUtilities.currentEventProxy=null},collectEvents:function(e,i){let r=t.getDomTree().nodeMap.getNode(e);return t.dom$messageHandlers.collectEventsWithReference(e,r,i)},collectEventsWithReference:function(e,i,r){if(i){t.domUtilities.removeAllCurrentEventProxyListeners();switch(+r){case Dom.Enums.EventRetrieveType.EVENT:return t.dom$messageHandlers.collectGroupedByEventEvents(e,i);case Dom.Enums.EventRetrieveType.ELEMENT:return t.dom$messageHandlers.collectGroupedByElementEvents(e,i);case Dom.Enums.EventRetrieveType.NONE:default:return t.dom$messageHandlers.collectNonGroupedEvents(e,i)}}},collectNonGroupedEvents:function(e,i){const r="eventName";t.domUtilities.applyHandlers(e,i,Dom.Enums.EventRetrieveType.NONE);const o={},s=[];t.domUtilities.currentEventProxy=t.domUtilities.retrieveEventHelper(i);if(!t.domUtilities.currentEventProxy)throw new Error("IElementEventHelper has a null or undefined value while retrieving events.");let n=t.domUtilities.currentEventProxy.getEventHandlers(),l=t.domUtilities.getRemoteEventName(i);if(!n)throw new Error("IElementEventListener has a null or undefined value while retrieving events.");for(let e=0;e<n.length;e++){if(!n[e].hasOwnProperty(r))throw new Error("IElementEventListener does not have eventName property.");{const t=n[e].eventName.toLocaleLowerCase();o[t]||(o[t]=[]);n[e].eventName=l;o[t].push(n[e])}}for(let e in o){const t=new Dom.Events.RemoteEventModel;t.DisplayName=e;t.RemoteAssociatedEvents=o[e].sort(Dom.Events.EventsUtilities.Instance.CompareRemoteEventHandlers);s.push(t)}s.sort(Dom.Events.EventsUtilities.Instance.CompareRemoteEventModel);return s},collectGroupedByElementEvents:function(e,i){let r=[];for(;i;){t.domUtilities.applyHandlers(e,i,Dom.Enums.EventRetrieveType.ELEMENT);t.domUtilities.currentEventProxy=t.domUtilities.retrieveEventHelper(i);if(!t.domUtilities.currentEventProxy)throw new Error("IElementEventHelper has a null or undefined value while retrieving events.");let o=t.domUtilities.getRemoteEvent(i);o.RemoteAssociatedEvents=t.domUtilities.currentEventProxy.getEventHandlers().map(e=>{e.eventName=e.eventName.toLocaleLowerCase();return e});r.push(o);i=t.domUtilities.retrieveEventParent(i)}return r},collectGroupedByEventEvents:function(e,i){const r="eventName",o={},s=[];for(;i;){t.domUtilities.applyHandlers(e,i,Dom.Enums.EventRetrieveType.EVENT);t.domUtilities.currentEventProxy=t.domUtilities.retrieveEventHelper(i);if(!t.domUtilities.currentEventProxy)throw new Error("IElementEventHelper has a null or undefined value while retrieving events.");let s=t.domUtilities.currentEventProxy.getEventHandlers(),n=t.domUtilities.getRemoteEventName(i);if(!s)throw new Error("IElementEventListener has a null or undefined value while retrieving events.");for(let e=0;e<s.length;e++){if(!s[e].hasOwnProperty(r))throw new Error("IElementEventListener does not have eventName property.");{let t=s[e].eventName.toLocaleLowerCase();o[t]||(o[t]=[]);s[e].eventName=n;o[t].push(s[e])}}i=t.domUtilities.retrieveEventParent(i)}for(let e in o){let t=new Dom.Events.RemoteEventModel;t.DisplayName=e;t.RemoteAssociatedEvents=o[e].sort(Dom.Events.EventsUtilities.Instance.CompareRemoteEventHandlers);s.push(t)}s.sort(Dom.Events.EventsUtilities.Instance.CompareRemoteEventModel);return s},allowProcessToTakeForeground:function(){try{external.allowProcessToTakeForeground()}catch(e){}},takeForeground:function(){try{external.takeForeground();return!0}catch(e){return!1}},runPaletteCollection:function(){r.startPalette()},abortPaletteCollection:function(){r.stopPalette()},editStyleRuleAdd:function(t,i,r,o,s){var n=new e.RemoteDom.EditStyleRuleAdd(m,t,i,r,o,s);e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(n);return n.result},editStyleRuleRemove:function(t){var i=m.lookupMappedRule(t);if(i){var r=new e.RemoteDom.EditStyleRuleRemove(m,i);if(e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(r))return r.result}},revertRule:function(t){var i=m.lookupMappedRule(t);if(i){var r=new e.RemoteDom.RevertRule(m,i);if(e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(r))return r.result}},editStylePropertyAdd:function(t,i,r,o,s){var n=m.lookupMappedRule(t);if(n){var l=new e.RemoteDom.EditStylePropertyAdd(m,n,i,r,o,s);if(e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(l))return l.result}},editStyleRuleSelector:function(t,i){var r=m.lookupMappedRule(t);if(r){var o=new e.RemoteDom.EditStyleRuleSelector(m,r,i);if(e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack.performEdit(o))return o.result}},storeElementForConsole:function(i){var r=t.getNodeMap().getNode(i);if(r)try{if(r.ownerDocument===browser.document){for(var s=d.LARGEST_CONSOLE_$X_VAR+1;s>0;s--)e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements["$"+s]=e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements["$"+(s-1)];e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements.$0=r;var n=o.getDefaultView(browser.document);for(s=0;s<=d.LARGEST_CONSOLE_$X_VAR;s++)void 0!==n["$"+s]&&n["$"+s]!==e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements["$"+(s+1)]||(n["$"+s]=e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.storedElements["$"+s])}}catch(e){return}},selectElementFromConsole:function(i){if(i&&i.ownerDocument){var r=o.getDefaultView(i.ownerDocument);if(r&&o.isElement(r,i)){t.domUtilities.selectElementLastSelected=i;e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.notify("ExpandToRemoteSelectedElementCallback",[]);return}}o.getDefaultView(browser.document).console.error("$$ConsoleSelectError$$")},reparentNode:function(i,r,o){return t.getDomTree().reparent(i,r,o,e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack)},copyElementWithStyle:function(e){return t.getDomTree().copyElementWithStyle(e,m)},getHTMLString:function(e,i,r){return t.getDomTree().getHTMLString(e,i,r)},log:[],getDomNodeDetails:function(e){t.domUtilities.getMutationManager().flushQueuedMutations();return t.getDomTree().getDomNodeDetails(e)},getDomNodesDetails:function(e){t.domUtilities.getMutationManager().flushQueuedMutations();for(var i=[],r=0;r<e.length;r++)i.push(t.getDomTree().getDomNodeDetails(e[r]));return i},setPseudoStyling:function(e,i,r){var o=t.getNodeMap().getNode(e);o&&m.setPseudoStyling(o,i,r)},hideElement:function(e){const t=l(e);t&&(n.has(e)?n.delete(e):n.add(e));return t},deleteElement:function(i){return t.getDomTree().deleteElement(i,e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.editStack)},scrollElementIntoView:function(e){let i=t.getNodeMap().getNode(e);i&&i.scrollIntoView()},getOriginURL:function(){let e=o.getDefaultView(browser.document);return Common.RemoteHelpers.originForWindow(e)},getPseudoStyling:function(e){var i=t.getNodeMap().getNode(e);if(i)return m.getPseudoStyling(i)},querySelector:function(e,i){var r=t.getNodeMap().getNode(e);if(r){var o=r.querySelector(i);return o?t.getNodeMap().getOrAssignUid(o):void 0}},addDocumentModifiedListener:function(i){var r;if("#root"===i)r=browser.document;else{var s=t.getNodeMap().getNode(i);if(!s)return;if(o.isFrameElement(s)){var n=s,l=o.getDefaultView(n.ownerDocument),a=o.getValidContentWindow(l,n);a.isValid&&(r=a.window.document)}else r=s.ownerDocument}if(r){for(var d=t.getNodeMap().getOrAssignUid(r),p=0;p<t.domUtilities.attachedDomModifiedDocs.length;p++)if(t.domUtilities.attachedDomModifiedDocs[p].docUid===d)return;var u=o.getDefaultView(r);try{for(p=0;p<t.domUtilities.eventsToRegisterFor.length;p++){var h=t.domUtilities.eventsToRegisterFor[p],m=o.addSafeListener(u,r,h,t=>{e.Tools.DomExplorer.DomExplorerRemoteApp.remoteCode.onSubtreeModified(t)},!0);t.domUtilities.handlerSafeMutations.push({source:r,safeListener:m,event:h})}}catch(e){}t.domUtilities.attachedDomModifiedDocs.push({docUid:d})}}};t.getNodeMap=function(){p||(p=new t.NodeMap11(dom));return p};t.getDomTree=function(){u||(u=new t.DomTree(browser.document,t.getNodeMap()));return u};t.resetNodeMap=function(){p=null};t.getAccessibilityTree=function(){h||(h=new t.RemoteAccessibilityTree);return h};t.resetDomTree=function(){u=null};var p=null,u=null,h=null,m=new t.StyleUtilities(e.RemoteDom.domUtilities,t.getNodeMap())}(t=e.RemoteDom||(e.RemoteDom={}))}(F12||(F12={}));!function(e){!function(e){"use strict";let t;!function(e){e[e.NONE=0]="NONE";e[e.EVENT=1]="EVENT";e[e.ELEMENT=2]="ELEMENT"}(t=e.EventRetrieveType||(e.EventRetrieveType={}))}(e.Enums||(e.Enums={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(){this._displayName="";this._translatedAssociatedEvents=[];this._expanded=!1}get DisplayName(){return this._displayName?this._displayName:""}set DisplayName(e){this._displayName=e}get RemoteAssociatedEvents(){return this._remoteAssociatedEvents}set RemoteAssociatedEvents(e){this._remoteAssociatedEvents=e}get TranslatedAssociatedEvents(){return this._translatedAssociatedEvents}set TranslatedAssociatedEvents(e){this._translatedAssociatedEvents=e}get expanded(){return this._expanded}set expanded(e){this._expanded=e}get hasChildren(){return!!this.TranslatedAssociatedEvents&&this.TranslatedAssociatedEvents.length>0}}e.RemoteEventModel=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(){this._groupName="";this._eventHandlers=[];this._expanded=!0}get EventHandlers(){return this._eventHandlers}set EventHandlers(e){this._eventHandlers=e}get GroupName(){return this._groupName}set GroupName(e){this._groupName=e}get hasChildren(){return!!this.EventHandlers&&this.EventHandlers.length>0}get expanded(){return this._expanded}set expanded(e){this._expanded=e}}e.EventHandlerGroup=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(){}static get Instance(){t._instance||(t._instance=new t);return t._instance}CompareRemoteEventHandlers(e,t){if(e&&t)return e.functionName.toLocaleLowerCase()<t.functionName?-1:e.functionName.toLocaleLowerCase()>t.functionName.toLocaleLowerCase()?1:0}CompareRemoteEventModel(e,t){if(e&&t)return e.DisplayName.toLocaleLowerCase()<t.DisplayName.toLocaleLowerCase()?-1:e.DisplayName.toLocaleLowerCase()>t.DisplayName.toLocaleLowerCase()?1:0}}t._instance=new t;e.EventsUtilities=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){"use strict";let t;!function(t){let i;!function(t){class i{static main(){i.messageHandlers=e.RemoteDom.dom$messageHandlers;remoteHelpers=new Common.RemoteHelpers(i.messageHandlers);i.remoteCode=new e.RemoteDom.RemoteDomExplorer;i.remoteCode.initialize()}}t.DomExplorerRemoteApp=i}(i=t.DomExplorer||(t.DomExplorer={}))}(t=e.Tools||(e.Tools={}))}(F12||(F12={}));F12.Tools.DomExplorer.DomExplorerRemoteApp.main();
