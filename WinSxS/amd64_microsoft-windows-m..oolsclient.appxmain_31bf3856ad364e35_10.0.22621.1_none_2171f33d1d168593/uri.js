var Common;!function(e){"use strict";class t{constructor(...e){if(e.length>=2&&e[0]instanceof t){var r,s=e[0];if(e[1]instanceof t)r=e[1];else{if(null===e[1]||void 0===e[1])throw new TypeError("Missing required argument: uri.");r=new t(String(e[1]),0)}t.mergeCore(s,r,this)}else{if(!(e.length>=1&&null!==e[0]&&void 0!==e[0]))throw new TypeError("Argument not optional.");var n=String(e[0]),i=1;if(e.length>=2){if("number"!=typeof e[1])throw new TypeError("Invalid argument: kind.");i=e[1]}t.parseCore(n,i,this)}}get isRooted(){return this.isAbsolute||/^\//.test(this.pathname)}get isAbsolute(){return(this._scheme!==t.UriSchemeFile||"string"!=typeof this._pathname||!/^[\\/]?\.{1,2}([\\/]|$)/.test(this._pathname))&&!!this._scheme}get isFile(){return this._scheme===t.UriSchemeFile}get isUnc(){return this.isFile&&!!(4&this._components)}get isDosPath(){return this.isFile&&!this._hostname&&/^\/?[a-z][:|]/i.test(this._pathname)}get hasDefaultPort(){if(this.isAbsolute){if("number"!=typeof this._port)return!0;if(this._scheme===t.UriSchemeHttp&&80===this._port)return!0;if(this._scheme===t.UriSchemeHttps&&443===this._port)return!0}return!1}get raw(){return this._raw}get origin(){return this.getComponentsCore(13,1)}get authority(){return this.getComponentsCore(516,1)}get protocol(){return this.getComponentsCore(1025,1)}get scheme(){return this.getComponentsCore(1,1)}get userinfo(){return this.getComponentsCore(2,1)}get host(){return this.getComponentsCore(516,1)}get hostname(){return this.getComponentsCore(4,1)}get pathname(){return this.getComponentsCore(112,1)}get pathnameAndSearch(){return this.getComponentsCore(240,1)}get search(){return this.getComponentsCore(1152,1)}get hash(){return this.getComponentsCore(1280,1)}get port(){return"number"==typeof this._port?this._port:this._scheme===t.UriSchemeHttp?t.DEFAULT_PORT_HTTP:this._scheme===t.UriSchemeHttps?t.DEFAULT_PORT_HTTPS:void 0}get absoluteUri(){return this.getComponentsCore(511,1)}get absolutePath(){var e=this.getComponentsCore(1136,1);this.isDosPath&&(e=e.substr(1));return e}get localPath(){if(this.isUnc||this.isDosPath){var e=this.getComponentsCore(1136,1);e=e.replace(t.PATH_DELIMITER,t.DOS_PATH_DELIMITER);if(this.isUnc)return t.UNC_ROOT+this.hostname+e;if(this.isDosPath)return e.substr(1)}return""}get segments(){var e=this.getComponentsCore(1136,1);return e.length>1?(e=e.substr(1)).split(t.PATH_DELIMITER):[]}static parse(e,r=1){return new t(e,r)}static tryParse(e,r=1){if(null===e||void 0===e)throw new TypeError("Missing required argument: text.");return t.parseCore(e,r,void 0)}static tryMerge(e,r){if(null===e||void 0===e)throw new TypeError("Missing required argument: baseUri.");if(null===r||void 0===r)throw new TypeError("Missing required argument: uri.");return t.mergeCore(e,r,void 0)}static create(r){r||(r={});var s,n,i,o,a,h,u,p=!1,f=0;"boolean"==typeof r.keepDelimiter&&(p=r.keepDelimiter);if("string"==typeof r.scheme){s=e.ToolWindowHelpers.tryDecodeURIComponent(r.scheme.toLowerCase());f|=1;s!==t.UriSchemeHttp&&s!==t.UriSchemeHttps||(f|=512)}if("string"==typeof r.userinfo){n=r.userinfo.toLowerCase();f|=2}if("string"==typeof r.hostname){i=r.hostname.toLowerCase();f|=4}if("number"==typeof r.port){if(r instanceof t){o=r._port}else{if(r.port<0)throw new RangeError("Invalid port.");o=r.port}"number"==typeof o&&(f|=520)}if(r.pathname){a=r.pathname;f|=112}if(r.search){h=r.search;!p&&h.length>0&&h.charAt(0)===t.SEARCH_DELIMITER&&(h=h.substr(1));f|=128}if(r.hash){u=r.hash;!p&&u.length>0&&u.charAt(0)===t.HASH_DELIMITER&&(u=u.substr(1));f|=256}var m=Object.create(t.prototype);m._scheme=s;m._userinfo=n;m._hostname=i;m._port=o;m._pathname=a;m._search=h;m._hash=u;m._components=f;m=new t(m.toString());if("string"==typeof r.uri){var c=new t(r.uri);m=new t(c,m)}return m}static equals(e,r,s=!1){if(e===r)return!0;if(null===e)return null===r;if(null===r)return!1;if(void 0===e)return void 0===r;if(void 0===r)return!1;var n,i;n="string"==typeof e?new t(e,0):e;i="string"==typeof r?new t(r,0):r;return!!t.stringEquals(n.toString(),i.toString(),s)||!!(n._scheme===i._scheme&&n._userinfo===i._userinfo&&n._hostname===i._hostname&&n.port===i.port&&t.stringEquals(n._pathname,i._pathname,s)&&t.stringEquals(n._search,i._search,s)&&t.stringEquals(n._hash,i._hash,s))}static compare(e,r,s=511,n=1,i=!1){if("number"!=typeof s)throw new TypeError("Invalid argument: partsToCompare.");if("number"!=typeof n)throw new TypeError("Invalid argument: compareFormat.");if(0!=(-4&n))throw new RangeError("Argument out of range: compareFormat.");return e===r?0:null===e||void 0===e?null===r||void 0===r?0:-1:null===r||void 0===r?1:e.isAbsolute&&r.isAbsolute?t.compareStrings(e.getComponentsCore(s,n),r.getComponentsCore(s,n),i):e.isAbsolute?1:r.isAbsolute?-1:t.compareStrings(e.raw,r.raw,i)}static getCurrent(){return"undefined"!=typeof self?new t(self.location.href):new t(".")}getComponents(e,r){if("number"!=typeof e||"number"!=typeof r)throw new TypeError("Invalid argument: components.");if("number"!=typeof r)throw new TypeError("Invalid argument: format.");if(0!=(-4&r))throw new RangeError("Argument out of range: format.");e=t.adjustComponents(e);return this.getComponentsCore(e,r)}toString(){this._toString||(this._toString=this.getComponentsCore(511,3));return this._toString}toJSON(){return this.toString()}isSameOrigin(e){if(null===e||void 0===e)throw new TypeError("Missing required argument: uri.");var r=e instanceof t?e:new t(String(e));return this.isAbsolute?this.getComponentsCore(13,1)===r.getComponentsCore(13,1):!r.isAbsolute}isBaseOf(e){if(null===e||void 0===e)throw new TypeError("Missing required argument: uri.");var r=this.getComponentsCore(255,3),s=this.getComponentsCore(255,3),n=r.split(t.PATH_DELIMITER),i=s.split(t.PATH_DELIMITER);if(n.length>i.length)return!1;for(var o=0;o<n.length;o++)if(!t.compareStrings(n[o],i[o],this.isDosPath||this.isUnc||e.isDosPath||e.isUnc))return!1;return!0}makeRelative(e){if(null===e||void 0===e)throw new TypeError("Missing required argument: uri.");if(!this.isAbsolute||!e.isAbsolute)throw new URIError("URI not absolute.");if(!this.isSameOrigin(e))return e;var r=e.absolutePath,s=t.computePathDifference(this.absolutePath,r,this.isDosPath||this.isUnc),n=/[:\\/?#]/.exec(s);!n||":"!==n[0]||e.isDosPath&&s===r||(s="./"+s);var i=s+e.getComponentsCore(384,1);return new t(i,2)}equals(e,r){return t.equals(this,e,r)}static stringEquals(e,t,r){if(r&&"string"==typeof e&&"string"==typeof t){e=e.toLowerCase();t=t.toLowerCase()}return e===t}static compareStrings(e,t,r){if(r&&"string"==typeof e&&"string"==typeof t){e=e.toLowerCase();t=t.toLowerCase()}return e>t?1:e<t?-1:0}static compareNumbers(e,t){return e<t?-1:e>t?1:0}static formatUserinfo(r,s){switch(s){case 1:r=t.escape(r,"?#","%");break;case 2:r=e.ToolWindowHelpers.tryDecodeURIComponent(r);break;case 3:r=t.unescape(r,"@/\\","safe")}return r}static formatPath(r,s){switch(s){case 1:r=t.escape(r,"?#","%");break;case 2:r=e.ToolWindowHelpers.tryDecodeURIComponent(r);break;case 3:r=t.unescape(r,"?#","safe")}return r}static formatSearch(e,r){switch(r){case 1:e=t.escape(e,"#","%");break;case 2:e=t.unescape(e,"#","all");break;case 3:e=t.unescape(e,"#","safe")}return e}static formatHash(e,r){switch(r){case 1:e=t.escape(e,"","%");break;case 2:e=t.unescape(e,"#","all");break;case 3:e=t.unescape(e,"#","safe")}return e}static escape(t,r,s){if(!t)return t;for(var n=[],i=0,o="",a=0;a<t.length;a++){var h=t.charAt(a);r.indexOf(h)>-1?o="forced":s.indexOf(h)>-1&&(o="reserved");if(""!==o){i<a&&n.push(e.ToolWindowHelpers.tryEncodeURI(t.substring(i,a)));i=a+1;if("forced"===o)n.push(e.ToolWindowHelpers.tryEncodeURIComponent(h));else if("reserved"===o)if("%"===h){if(a+3<=t.length){var u=t.substr(a,3);if(/^%[a-f\d]{2}$/i.test(u)){n.push(u);o="";a+=2;i+=2;continue}}n.push(e.ToolWindowHelpers.tryEncodeURIComponent("%"))}else n.push(h);o=""}}i<a&&n.push(e.ToolWindowHelpers.tryEncodeURI(t.substring(i,a)));return n.join("")}static unescape(t,r,s){if(!t)return t;var n,i=[],o=0,a=t=>{i.push(e.ToolWindowHelpers.tryEncodeURIComponent(t))},h=(e,t)=>{i.push(e);o=(n+=t)+1},u=()=>{o<n&&i.push(t.substring(o,n));o=n+1};for(n=0;n<t.length;n++){var p=t.charAt(n),f=1;if("%"===p){if(n+3<=t.length){var m=t.substr(n,3);p="";try{if(/^%[a-f\d]{2}$/i.test(m)){var c=parseInt("0x"+m.substr(1));if(c<128){f=2;p=decodeURIComponent(m)}else if(c<224&&n+6<=t.length){m=t.substr(n,6);if(/^(%[a-f\d]{2}){2}$/i.test(m)){f=5;p=decodeURIComponent(m)}}else if(c<240&&n+9<=t.length){m=t.substr(n,9);if(/^(%[a-f\d]{2}){3}$/i.test(m)){f=8;p=decodeURIComponent(m)}}else if(c<245&&n+12<=t.length){m=t.substr(n,12);if(/^(%[a-f\d]{2}){4}$/i.test(m)){f=11;p=decodeURIComponent(m)}}}}catch(e){u();h(m,f)}if("all"===s){if(1!==p.length)continue;u();h(p,f)}else{if(1!==p.length)continue;if("%"===p||r.indexOf(p)>-1)n+=2;else if(/^[;/?:@&=+$#%\\\x00-\x17]$/.test(p))n+=2;else{u();h(p,f)}}}}else{if("all"===s)continue;if(r.indexOf(p)>-1){u();a(p)}}}u();return i.join("")}static parseCore(e,r,s,n){var i,o,a,h,u,p,f,m,c,l=0,E=e;p=e=e.trim();if(2!==r){t.DosPath.test(e)&&(e="file:///"+e);var _=t.UriParser.exec(e);if(_){i=_[t.SCHEME_INDEX];o=_[t.USERINFO_INDEX];a=_[t.HOSTNAME_INDEX];h=_[t.PORT_INDEX];p=_[t.PATHNAME_INDEX];f=!!_[t.SCHEMESEGMENT_INDEX];m=_[t.SEARCH_INDEX];c=_[t.HASH_INDEX];r=1}else{if(1===r){if(s)throw new URIError;return}r=2}if(!i&&f){if(s)throw new URIError;return}(i||a)&&p&&(p=p.replace(/\\/g,t.PATH_DELIMITER));if(i&&i.toLowerCase()===t.UriSchemeFile)if(/^\.{1,2}$/.test(a)&&/^([\\/]|$)/.test(p)||/^[a-z]$/i.test(a)&&/^:[\\/]/.test(p)){p=a+p;a=void 0}else if(!a)if(/^[\\/]\.{1,2}/.test(p))p=p.substr(1);else if(/^[\\/]{2,}/.test(p)){var g=(p=p.replace(/^[\\/]{2,}/,"")).indexOf(t.PATH_DELIMITER);if(g>-1){a=p.substr(0,g);p=p.substr(g)}else{a=p;p=""}}}if("string"==typeof i){i=i.toLowerCase();l|=1;i!==t.UriSchemeHttp&&i!==t.UriSchemeHttps||(l|=512)}"string"==typeof o&&(l|=2);if("string"==typeof a){a=a.toLowerCase();l|=4}if("string"==typeof h){u=parseInt(h);l|=520}"string"==typeof p&&2!==r&&(p=t.normalizePath(p));p&&(l|=112);"string"==typeof m&&(l|=128);"string"==typeof c&&(l|=256);s||(s=Object.create(t.prototype));s._scheme=i;s._userinfo=o;s._hostname=a;s._port=u;s._pathname=t.escape(p,"","%");s._search=m;s._hash=c;s._raw=E;s._components=l;return s}static mergeCore(e,r,s,n){if(!s&&r.isAbsolute)return r;var i,o,a,h,u,p,f,m=0;if(r._scheme){i=r._scheme;o=r._userinfo;a=r._hostname;h=r._port;u=t.normalizePath(r._pathname);p=r._search}else{if(r._hostname){o=r._userinfo;a=r._hostname;h=r._port;u=t.normalizePath(r._pathname);p=r._search}else{if(r._pathname){if(r._pathname.charAt(0)===t.PATH_DELIMITER)u=t.normalizePath(r._pathname);else{u=t.mergePath(e._pathname,r._pathname);u=t.normalizePath(u)}p=r._search}else{u=e._pathname;p=r._search?r._search:e._search}o=e._userinfo;a=e._hostname;h=e._port}i=e._scheme}f=r._hash;if("string"==typeof i){m|=1;i!==t.UriSchemeHttp&&i!==t.UriSchemeHttps||(m|=512)}"string"==typeof o&&(m|=2);"string"==typeof a&&(m|=4);"number"==typeof h&&(m|=520);u&&(m|=112);"string"==typeof p&&(m|=128);"string"==typeof f&&(m|=256);s||(s=Object.create(t.prototype));s._scheme=i;s._userinfo=o;s._hostname=a;s._port=h;s._pathname=u;s._search=p;s._hash=f;s._components=m;s._raw=s.toString();return s}static mergePath(e,r){var s=-1;e&&(s=e.lastIndexOf(t.PATH_DELIMITER));return s>=0?e.substr(0,s+1)+r:r}static normalizePath(e){var r=(e=(e=e.replace(/^\s+|\s+$/g,"")).replace(/\\+|\/+/g,t.PATH_DELIMITER)).split(/\//g),s=""===r[0];s&&r.shift();for(var n=0;n<r.length;){switch(r[n]){case t.CURRENT_DIRECTORY_TOKEN:if(0!==n||s){r.splice(n,1);n===r.length&&r.push("");continue}break;case t.PARENT_DIRECTORY_TOKEN:if(0===n&&s){r.splice(n,1);continue}if(n>=1&&r[n-1]!==t.CURRENT_DIRECTORY_TOKEN&&r[n-1]!==t.PARENT_DIRECTORY_TOKEN){r.splice(--n,2);n===r.length&&r.push("");continue}}n++}s&&r.unshift("");return e=r.join(t.PATH_DELIMITER)}static computePathDifference(e,r,s){var n,i=-1;for(n=0;n<e.length&&n<r.length&&0===t.compareStrings(e.charAt(n),r.charAt(n),s);n++)e.charAt(n)===t.PATH_DELIMITER&&(i=n);if(0===n)return r;if(n===e.length&&n===r.length)return"";for(var o=[];n<e.length;n++)e.charAt(n)===t.PATH_DELIMITER&&o.push(t.PARENT_DIRECTORY_TOKEN,t.PATH_DELIMITER);return 0===o.length&&r.length-1===i?t.CURRENT_DIRECTORY_TOKEN+t.PATH_DELIMITER:o.join("")+r.substr(i+1)}static adjustComponents(e){512&e&&(e|=8);2&e&&2!=(-1025&e)&&(e|=4);8&e&&8!=(-1537&e)&&(e|=4);13&e&&(256&e?e|=240:128&e?e|=112:64&e?e|=48:32&e&&(e|=16));80==(112&e)&&(e|=32);return e}getComponentsCore(e,r){var s=[],n=!1,i=e&this._components;if(1&i){s.push(this._scheme);n=this._scheme===t.UriSchemeFile;1!==e&&s.push(t.PROTOCOL_DELIMITER)}(1025&e&&526&i||n)&&s.push(t.SCHEME_DELIMITER);if(526&i){if(2&i){s.push(t.formatUserinfo(this._userinfo,r));2!==e&&s.push(t.USERINFO_DELIMITER)}4&i&&s.push(this._hostname);if(520&i){s.push(t.PORT_DELIMITER);s.push(this.port.toString())}}112&e&&s.push(this.getCanonicalPath(e,r));if(128&i){128!==e&&s.push(t.SEARCH_DELIMITER);s.push(t.formatSearch(this._search,r))}if(256&i){256!==e&&s.push(t.HASH_DELIMITER);s.push(t.formatHash(this._hash,r))}return s.join("")}getCanonicalPath(e,r){var s=this._pathname,n=!1;1024&e?n=!0:this.isAbsolute&&(this.isFile?n=!0:116==(116&this._components)&&(n=!0));if(!(112&this._components)||0===s.length)return 16&e&&n?t.PATH_DELIMITER:"";if(16&e){var i=s.charAt(0)!==t.PATH_DELIMITER;n&&i&&(s=t.PATH_DELIMITER+s)}var o=112&e;if(112===o)return t.formatPath(s,r);var a,h=s.lastIndexOf(t.PATH_DELIMITER);if(16&o){var u;h===s.length-1?u=t.formatPath(s,r):h>-1&&(u=t.formatPath(s.substr(0,h+1),r));if(16===o)return u;a||(a=[]);a.push(u)}var p=96&o;if(p&&h<s.length-1){var f;f=h>-1?s.substr(h+1):s;if(96===p){f=t.formatPath(f,r);if(96===o)return f;a||(a=[]);a.push(f)}else{var m,c=f.lastIndexOf(t.EXTENSION_DELIMITER);if(32!==p){return 0===c?t.formatPath(f,r):c>0?t.formatPath(f.substr(c),r):""}m=-1===c?t.formatPath(f,r):c>0?t.formatPath(f.substr(0,c),r):"";if(32===o)return m;a||(a=[]);a.push(m)}}return a?a.join(""):""}}t.UriParser=/^(?:([a-z][a-z0-9+.\-]*)[:|])?(?:[\\/]{2}(?:((?:[\w\-._~!$&'()*+,;=:]|%[a-f0-9]{2})*)@)?(\[[^\[\]]+\]|[\w\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\.\-_]*)(?:\:(\d+))?|(?![\\/]{2}))(([^/\\?#]*:)?[^?#]*?)(?:\?([^#]*?))?(?:#(.*?))?$/i;t.DosPath=/^([a-z]\:|[\\/]{2,}[^\\/@:?#]+)[\\/]/i;t.SCHEME_INDEX=1;t.USERINFO_INDEX=2;t.HOSTNAME_INDEX=3;t.PORT_INDEX=4;t.PATHNAME_INDEX=5;t.SCHEMESEGMENT_INDEX=6;t.SEARCH_INDEX=7;t.HASH_INDEX=8;t.SCHEME_DELIMITER="//";t.PATH_DELIMITER="/";t.DOS_PATH_DELIMITER="\\";t.UNC_ROOT="\\\\";t.USERINFO_DELIMITER="@";t.SEARCH_DELIMITER="?";t.HASH_DELIMITER="#";t.CURRENT_DIRECTORY_TOKEN=".";t.PARENT_DIRECTORY_TOKEN="..";t.PROTOCOL_DELIMITER=":";t.PORT_DELIMITER=":";t.EXTENSION_DELIMITER=".";t.DEFAULT_PORT_HTTP=80;t.DEFAULT_PORT_HTTPS=443;t.SchemeDelimiter="://";t.UriSchemeHttp="http";t.UriSchemeHttps="https";t.UriSchemeFile="file";t.UriSchemeData="data";e.Uri=t}(Common||(Common={}));
