!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=!0;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})};r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";r(r.s=4)}([function(e,t,r){"use strict";class n{static escapeRegExp(e){return String.prototype.replace.call(e,n.ESCAPE_USER_INPUT_REGEX,"\\$&")}static escapeRegExpWithWildCard(e){return String.prototype.replace.call(e,n.ESCAPE_USER_INPUT_REGEX,function(e){return"*"===e?".*":"\\"+e})}static wrapInQuotes(e){return'"'+String.prototype.replace.call(e,/\\"/g,'"')+'"'}static unescapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&gt;/g,">"),/&lt;/g,"<"),/&apos;/g,"'"),/&quot;/g,'"'),/&amp;/g,"&")}static escapeHtmlAndPreserveWhitespace(e){var t=[e],r=(e=String.prototype.replace.call(e,/(\r\n|\n\r|\r|\n)/g,"\r\n")).split("\r\n");if(r.length>0){t=[];for(var i=0;i<r.length;i++){var a=r[i];a="<pre>"+(a=n.escapeHtml(a))+"</pre>";t.push(a)}}return t}static escapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&/g,"&amp;"),/"/g,"&quot;"),/'/g,"&apos;"),/</g,"&lt;"),/>/g,"&gt;")}static replaceSpacesWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/ /g," ")}static replaceLineBreaksWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/[\r\n]/g," ")}}n.ESCAPE_USER_INPUT_REGEX=/([.+?^=!:${}()|\[\]\/\\])|(\*)/g;r.d(t,"a",function(){return i});r.d(t,"e",function(){return a});r.d(t,"d",function(){return s});r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});var i;!function(e){e[e.Frame=0]="Frame";e[e.ExtensionContext=1]="ExtensionContext"}(i||(i={}));class a{static addListener(e,t,r,n){n?e.addEventListener(t,r,n):e.addEventListener(t,r)}static addSafeListener(e,t,r,n,i,o){var s=a.createSafeFunction(e,n,o);a.addListener(t,r,s,i);return s}static removeListener(e,t,r,n){n?e.removeEventListener(t,r,n):e.removeEventListener(t,r)}static getDefaultView(e){return e?void 0!==e.defaultView?e.defaultView:e.parentWindow:null}static isCrossSiteWindow(e,t){try{e.Object.getOwnPropertyNames(t)}catch(e){return!0}return!1}static getValidWindow(e,t,r){try{if(dom.isWindow(t)){let n=t;if(a.isCrossSiteWindow(e,t)){let i=dom.getCrossSiteWindow(e,t,r);i&&(n=i.document.defaultView)}if(n.document)return{isValid:!0,window:n.document.defaultView}}}catch(e){}return{isValid:!1,window:null}}static getValidContentWindow(e,t){try{return a.getValidWindow(e,t.contentWindow)}catch(e){return{isValid:!1}}}static originForWindow(e){return e&&e.location&&e.location.protocol&&e.location.host?n.escapeHtml(e.location.protocol+"//"+e.location.host):null}static createSafeFunction(e,t,r){return a.executeScript("(func) => { return (...args) => func(...args) }",e,!0)(browser.createSafeFunction(e,t,r))}static safeAsyncCall(e,t){let r,n;const i=new Promise((e,t)=>{r=e;n=t});let a=this.createSafeFunction(e,e=>{r(e)}),o=this.createSafeFunction(e,e=>{n(e)});t.then(a,o);return i}static executeScript(e,t,r){return diagnosticsScript.debugEval.bind(t)(e,r)}static getWindowIterator(e){return new o([e],e=>{for(var t=[],r=0;r<e.frames.length;r++){var n=a.getValidWindow(e,e.frames[r]);n.isValid&&t.push(n.window)}return t})}static getStyleSheetIterator(e,t){var r=[e];if(!t)for(var n=0;n<e.imports.length;n++)r.push(e.imports[n]);return new o(r,e=>{if(!t||!e.imports)return null;for(var r=[],n=0;n<e.imports.length;n++)r.push(e.imports[n]);return r})}static refreshBrowser(){try{browser.refresh()}catch(e){}}}class o{constructor(e,t){this._q=e;this._moreItems=t}hasNext(){return this._q.length>0}next(){if(!this.hasNext())return null;var e=this._q.pop(),t=this._moreItems(e);t&&(this._q=this._q.concat(t));return e}}class s{static propertyEvaluationFunction(e,t){var r,n;if(e.location.protocol.indexOf("http")>=0){r=s.HttpObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=s.HttpPropertyIgnorelist[r]}else if(e.location.protocol.indexOf("ms-appx")>=0){r=s.FileObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=s.FilePropertyIgnorelist[r]}return n?(e,t)=>{if(!(n.lastIndexOf(t)>=0))try{return e[t]}catch(e){return e.toString()}}:(e,t)=>e[t]}}s.HttpObjectWatchList=["[object Window]"];s.HttpPropertyIgnorelist=[["indexedDB","msIndexedDB"]];s.FileObjectWatchList=["[object Window]"];s.FilePropertyIgnorelist=[["clipboardData"]];class l{constructor(e){this._global=e;this._name=e.location.hostname+e.location.pathname}get name(){return this._name}get type(){return i.Frame}get global(){return this._global}set global(e){this._global=e}executeScript(e,t){return a.executeScript(e,browser.unwrapMirror(this._global),t)}createSafeFunction(e){return a.createSafeFunction(browser.unwrapMirror(this._global),e,!0)}addSafeListener(e,t,r,n){return a.addSafeListener(browser.unwrapMirror(this._global),e,t,r,n,!0)}}class u{constructor(e){this._extensionContext=e;let t=this._extensionContext.name;const r=t.lastIndexOf("_");r>=0&&(t=t.substr(0,r));this._name=t}get name(){return this._name}get type(){return i.ExtensionContext}get global(){return this._extensionContext.global}get extensionContext(){return this._extensionContext}executeScript(e,t){return a.executeScript(e,browser.unwrapMirror(this._extensionContext.global),t)}createSafeFunction(e){return this._extensionContext.createSafeFunction(browser.unwrapMirror(this.global),e)}addSafeListener(e,t,r,n){var i=this.createSafeFunction(r);a.addListener(e,t,i,n);return i}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});class n{static isTrue(e,t){if(!e){t=t?"Internal error. "+t:"Internal error. Unexpectedly false.";n.fail(t)}}static isFalse(e,t){if(e){t=t?"Internal error. "+t:"Internal error. Unexpectedly true.";n.fail(t)}}static isNull(e,t){if(null!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not null.";t+=" '"+e+"'";n.fail(t)}}static isUndefined(e,t){0;if(void 0!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not undefined.";t+=" '"+e+"'";n.fail(t)}}static hasValue(e,t){if(null===e||void 0===e){t=t?"Internal error. "+t:"Internal error. Unexpectedly "+(null===e?"null":"undefined")+".";n.fail(t)}}static areEqual(e,t,r){e!==t&&n.fail(`Error: ${r}, Unexpectedly not equal- Actual: '${e}', Expected: '${t}'`)}static areNotEqual(e,t,r){e===t&&n.fail(`Error: ${r}, Identical input passed to areNotEqual: '${e}'`)}static failDebugOnly(e){n.fail(e)}static fail(e){var t=new Error((e||"Assert failed.")+"\n");try{throw t}catch(e){e.stack&&(e.description=e.stack);throw e}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(1);class i{constructor(e,t,r,n,i){this._ourIdentifier=e;this._nextId=0;this._promiseTable={};this._jsonRpcMethodReceive=t;this._jsonRpcNotificationReceive=r;this._postMessage=n;Date.now||(Date.now=function(){return+new Date});i(e=>{this.onMessage(e)})}jsonRpcMethodCall(e,t,r,i,a){r||n.a.failDebugOnly("Trying to insert a promise into the queue without a completed function: The front end will have no way of knowing this promise completed");var s=this._ourIdentifier+"|"+this._nextId;this._nextId++;this._promiseTable[s]={completed:r,error:i};var l=JSON.stringify({id:s,method:e,params:t});if(o.RandomDelay){o.queueData(()=>{this._postMessage(l,a)},l);return!0}return this._postMessage(l,a)}jsonRpcNotification(e,t,r){var n=this._ourIdentifier+"|NULL",i=JSON.stringify({id:n,method:e,params:t});o.RandomDelay?o.queueData(()=>{this._postMessage(i,r)},i):this._postMessage(i,r)}onMessage(e){var t=JSON.parse(e.data),r=t.id.split("|");n.a.areEqual(r.length,2);"NULL"===r[1]?r[0]!==this._ourIdentifier&&this._jsonRpcNotificationReceive(t.method,t.params,t.id):r[0]!==this._ourIdentifier||t.method?o.RandomDelay?o.queueData(()=>{this.handleCall(t)},e.data):this.handleCall(t):o.RandomDelay?o.queueData(()=>{this.handleReply(t)},e.data):this.handleReply(t)}handleReply(e){if(this._promiseTable[e.id]&&this._promiseTable[e.id].completed){if(e.error){n.a.isUndefined(e.data,"Can't have both data and error");this._promiseTable[e.id].error(e.error)}else this._promiseTable[e.id].completed(e.data);delete this._promiseTable[e.id]}else n.a.failDebugOnly("Can't complete a promise that does not exist in the promise table. Probably a dup reply msg.")}handleCall(e){this._jsonRpcMethodReceive(e.method,e.params,(t,r)=>{var n;n=r?JSON.stringify({id:e.id,error:r}):JSON.stringify({id:e.id,data:t});this._postMessage(n)},e.id)}}class a{constructor(e,t){this.callback=e;this.message=t}}class o{static enableDelay(e,t){o.RandomDelay=!0;o.CalculateDelayTime=e;o.DelayedMessage=t}static disableDelay(){o.RandomDelay=!1;if(o.RandomDelayTimeout){clearTimeout(o.RandomDelayTimeout);o.RandomDelayTimeout=null;o.clearQueue()}}static queueData(e,t){var r=new a(e,t);o.DelayedQueue.push(r);if(!o.RandomDelayTimeout){var n=o.CalculateDelayTime(t);o.RandomDelayTimeout=setTimeout(o.fireRandomly,n)}}static fireRandomly(){var e=o.DelayedQueue.shift();o.DelayedMessage(e.message);e.callback();if(o.DelayedQueue.length>0){var t=o.CalculateDelayTime(o.DelayedQueue[0].message);o.RandomDelayTimeout=setTimeout(o.fireRandomly,t)}else o.RandomDelayTimeout=null}static clearQueue(){for(var e=0;e<o.DelayedQueue.length;e++){var t=o.DelayedQueue[e];o.DelayedMessage(t.message);t.callback()}o.DelayedQueue=[]}}o.RandomDelay=!1;o.DelayedQueue=[]},,function(e,t,r){"use strict";r.r(t);var n=r(2),i=r(0);class a{initialize(){this._port=toolUI.createPort("emulationPort");toolUI.connect(this._port);this._rpc=new n.a("EMULATION_REMOTE_4",(e,t,r)=>this.jsonRpcMethodReceive(e,t,r),(e,t)=>this.jsonRpcNotificationReceive(e,t),e=>{this._port.postMessage(e)},e=>{this._port.addEventListener("message",t=>{e(t)})});try{"undefined"!=typeof browser&&browser.addEventListener("beforeScriptExecute",e=>this.onBeforeScriptExecute(e))}catch(e){}this._browserModeIsDirty=!1;this._userAgentStringIsDirty=!1;i.e.addListener(toolUI,"detach",this.onDetach.bind(this));this.initializePage()}notify(e,t){this._rpc.jsonRpcNotification(e,t)}jsonRpcMethodReceive(e,t,r){var n;(n=t?this[e].apply(this,t):this[e].apply(this))?r(n,void 0):r()}jsonRpcNotificationReceive(e,t){}initializePage(){try{var e=i.e.getDefaultView(browser.document);this.addRemotePageFunctions(e);var t={};t.currentBrowserMode=this.getBrowserMode();t.allUserAgentStrings=this.getAllUserAgentStrings();t.currentUrl=e.location.href;var r=this.getCurrentUserAgentString();if(t.allUserAgentStrings.filter(e=>"custom"!==e.category).length>0){for(var n=0;n<t.allUserAgentStrings.length;++n)if(0===r.localeCompare(t.allUserAgentStrings[n].value)){t.currentUserAgentString=t.allUserAgentStrings[n];break}t.currentUserAgentString||(t.currentUserAgentString={category:"default",name:"",value:""})}else t.currentUserAgentString={category:"unknown",name:"unknown",value:r};try{this.notify("emulationHandshake",[t])}catch(e){return}}catch(e){}}onBeforeScriptExecute(e){}addRemotePageFunctions(e){e.__BROWSERTOOLS_EMULATIONTOOLS_ADDED=browser.createSafeFunction(e,()=>{})}onDetach(){try{var e=i.e.getDefaultView(browser.document);e.__BROWSERTOOLS_EMULATIONTOOLS_ADDED&&delete e.__BROWSERTOOLS_EMULATIONTOOLS_ADDED}catch(e){}this.resetAllSettings()}resetAllSettings(){emulation.viewport.restoreOriginalSettings();emulation.geoLocation.clearAll();this._userAgentStringIsDirty&&emulation.userAgentStringManager.setCurrentToDefault();var e=this._userAgentStringIsDirty&&!this._browserModeIsDirty;this._userAgentStringIsDirty=!1;if(this._browserModeIsDirty){this._browserModeIsDirty=!1;emulation.setBrowserMode("default")}else e&&this.safeRefresh()}getBrowserMode(){return browser.browserMode}setBrowserMode(e){this._browserModeIsDirty=!0;emulation.setBrowserMode(e)}getAllUserAgentStrings(){try{return emulation.userAgentStringManager.all}catch(e){return[]}}setCurrentUserAgentString(e,t){this._userAgentStringIsDirty=!0;emulation.userAgentStringManager.current=e;t&&this.safeRefresh()}getCurrentUserAgentString(){return emulation.userAgentStringManager.current}setUserAgentStringToDefault(e){this._userAgentStringIsDirty=!1;emulation.userAgentStringManager.setCurrentToDefault();e&&this.safeRefresh()}storeAndSetCustomUserAgentString(e,t){var r=this.getCustomUserAgentStrings();r=r.sort((e,t)=>e.name.localeCompare(t.name));for(var n=-1,i=0;i<r.length;++i)if(r[i].value===e){n=i;break}if(n>=0){var a=r.splice(n,1);emulation.userAgentStringManager.removeCustom(a[0].name)}var o={name:""+Date.now(),category:"custom",value:e};r.push(o);emulation.userAgentStringManager.addCustom(o.name,o.value);r=r.reverse();for(i=10;i<r.length;++i)emulation.userAgentStringManager.removeCustom(r[i].name);this.setCurrentUserAgentString(e,t);return this.getCustomUserAgentStrings()}removeCustomUserAgentString(e){for(var t=this.getCustomUserAgentStrings(),r=0;r<t.length;++r)if(t[r].value===e){emulation.userAgentStringManager.removeCustom(t[r].name);break}return this.getCustomUserAgentStrings()}getCustomUserAgentStrings(){return this.getAllUserAgentStrings().filter((e,t,r)=>"custom"===e.category)}setViewportSize(e,t,r){emulation.viewport.setDimensions(null,t,r)}setEmulationState(e,t,r,n){this.setBrowserMode(e);this.setViewportSize(null,t,r);this.setOrientation(n)}setViewportWidth(e){emulation.viewport.widthInPx=e}setViewportHeight(e){emulation.viewport.heightInPx=e}resetViewportSizeToDefault(){emulation.viewport.restoreOriginalSettings()}setViewportWidthAndHeight(e,t,r){this.resetViewportSizeToDefault();this.setViewportWidth(e);this.setViewportHeight(t);this.setOrientation(r)}getOrientation(){return emulation.viewport.orientation}setOrientation(e){emulation.viewport.orientation=e}getResolution(){return{width:emulation.viewport.widthInPx,height:emulation.viewport.heightInPx}}setGpsLatitude(e){emulation.geoLocation.latitude=e}setGpsLongitude(e){emulation.geoLocation.longitude=e}setGpsPosition(e,t){var r=6.275,n=2,i=2,a=0,o=0;emulation.geoLocation.setPosition(e,t,r,n,i,a,o)}setGpsHasSignal(e){emulation.geoLocation.hasSignal=e}getGpsPosition(){return{latitude:emulation.geoLocation.latitude,longitude:emulation.geoLocation.longitude}}clearGpsSettings(){emulation.geoLocation.clearAll()}safeRefresh(){try{browser.refresh()}catch(e){}}refresh(){this.safeRefresh()}downloadUrl(e,t){try{var r=new XMLHttpRequest;if(t){r.onreadystatechange=(()=>{4===r.readyState&&this.onXHRComplete(!0,r,e,null)});r.open("GET",e,!0);r.send(null)}else{r.open("GET",e,!1);r.send(null);this.onXHRComplete(!0,r,e,null)}}catch(t){this.onXHRComplete(!1,r,e,t.message)}return!0}onXHRComplete(e,t,r,n,i=null){if(e&&200===t.status){var a="unknown"!=typeof t.responseText?t.responseText:"",o=JSON.parse(a);this.notify("Devices",[o])}}}(new a).initialize()}]);
