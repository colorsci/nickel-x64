!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};e[o].call(n.exports,n,n.exports,r);n.l=!0;return n.exports}r.m=e;r.c=t;r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})};r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";r(r.s=10)}([function(e,t,r){"use strict";class o{static escapeRegExp(e){return String.prototype.replace.call(e,o.ESCAPE_USER_INPUT_REGEX,"\\$&")}static escapeRegExpWithWildCard(e){return String.prototype.replace.call(e,o.ESCAPE_USER_INPUT_REGEX,function(e){return"*"===e?".*":"\\"+e})}static wrapInQuotes(e){return'"'+String.prototype.replace.call(e,/\\"/g,'"')+'"'}static unescapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&gt;/g,">"),/&lt;/g,"<"),/&apos;/g,"'"),/&quot;/g,'"'),/&amp;/g,"&")}static escapeHtmlAndPreserveWhitespace(e){var t=[e],r=(e=String.prototype.replace.call(e,/(\r\n|\n\r|\r|\n)/g,"\r\n")).split("\r\n");if(r.length>0){t=[];for(var n=0;n<r.length;n++){var a=r[n];a="<pre>"+(a=o.escapeHtml(a))+"</pre>";t.push(a)}}return t}static escapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&/g,"&amp;"),/"/g,"&quot;"),/'/g,"&apos;"),/</g,"&lt;"),/>/g,"&gt;")}static replaceSpacesWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/ /g," ")}static replaceLineBreaksWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/[\r\n]/g," ")}}o.ESCAPE_USER_INPUT_REGEX=/([.+?^=!:${}()|\[\]\/\\])|(\*)/g;r.d(t,"a",function(){return n});r.d(t,"e",function(){return a});r.d(t,"d",function(){return s});r.d(t,"c",function(){return c});r.d(t,"b",function(){return l});var n;!function(e){e[e.Frame=0]="Frame";e[e.ExtensionContext=1]="ExtensionContext"}(n||(n={}));class a{static addListener(e,t,r,o){o?e.addEventListener(t,r,o):e.addEventListener(t,r)}static addSafeListener(e,t,r,o,n,i){var s=a.createSafeFunction(e,o,i);a.addListener(t,r,s,n);return s}static removeListener(e,t,r,o){o?e.removeEventListener(t,r,o):e.removeEventListener(t,r)}static getDefaultView(e){return e?void 0!==e.defaultView?e.defaultView:e.parentWindow:null}static isCrossSiteWindow(e,t){try{e.Object.getOwnPropertyNames(t)}catch(e){return!0}return!1}static getValidWindow(e,t,r){try{if(dom.isWindow(t)){let o=t;if(a.isCrossSiteWindow(e,t)){let n=dom.getCrossSiteWindow(e,t,r);n&&(o=n.document.defaultView)}if(o.document)return{isValid:!0,window:o.document.defaultView}}}catch(e){}return{isValid:!1,window:null}}static getValidContentWindow(e,t){try{return a.getValidWindow(e,t.contentWindow)}catch(e){return{isValid:!1}}}static originForWindow(e){return e&&e.location&&e.location.protocol&&e.location.host?o.escapeHtml(e.location.protocol+"//"+e.location.host):null}static createSafeFunction(e,t,r){return a.executeScript("(func) => { return (...args) => func(...args) }",e,!0)(browser.createSafeFunction(e,t,r))}static safeAsyncCall(e,t){let r,o;const n=new Promise((e,t)=>{r=e;o=t});let a=this.createSafeFunction(e,e=>{r(e)}),i=this.createSafeFunction(e,e=>{o(e)});t.then(a,i);return n}static executeScript(e,t,r){return diagnosticsScript.debugEval.bind(t)(e,r)}static getWindowIterator(e){return new i([e],e=>{for(var t=[],r=0;r<e.frames.length;r++){var o=a.getValidWindow(e,e.frames[r]);o.isValid&&t.push(o.window)}return t})}static getStyleSheetIterator(e,t){var r=[e];if(!t)for(var o=0;o<e.imports.length;o++)r.push(e.imports[o]);return new i(r,e=>{if(!t||!e.imports)return null;for(var r=[],o=0;o<e.imports.length;o++)r.push(e.imports[o]);return r})}static refreshBrowser(){try{browser.refresh()}catch(e){}}}class i{constructor(e,t){this._q=e;this._moreItems=t}hasNext(){return this._q.length>0}next(){if(!this.hasNext())return null;var e=this._q.pop(),t=this._moreItems(e);t&&(this._q=this._q.concat(t));return e}}class s{static propertyEvaluationFunction(e,t){var r,o;if(e.location.protocol.indexOf("http")>=0){r=s.HttpObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));o=s.HttpPropertyIgnorelist[r]}else if(e.location.protocol.indexOf("ms-appx")>=0){r=s.FileObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));o=s.FilePropertyIgnorelist[r]}return o?(e,t)=>{if(!(o.lastIndexOf(t)>=0))try{return e[t]}catch(e){return e.toString()}}:(e,t)=>e[t]}}s.HttpObjectWatchList=["[object Window]"];s.HttpPropertyIgnorelist=[["indexedDB","msIndexedDB"]];s.FileObjectWatchList=["[object Window]"];s.FilePropertyIgnorelist=[["clipboardData"]];class c{constructor(e){this._global=e;this._name=e.location.hostname+e.location.pathname}get name(){return this._name}get type(){return n.Frame}get global(){return this._global}set global(e){this._global=e}executeScript(e,t){return a.executeScript(e,browser.unwrapMirror(this._global),t)}createSafeFunction(e){return a.createSafeFunction(browser.unwrapMirror(this._global),e,!0)}addSafeListener(e,t,r,o){return a.addSafeListener(browser.unwrapMirror(this._global),e,t,r,o,!0)}}class l{constructor(e){this._extensionContext=e;let t=this._extensionContext.name;const r=t.lastIndexOf("_");r>=0&&(t=t.substr(0,r));this._name=t}get name(){return this._name}get type(){return n.ExtensionContext}get global(){return this._extensionContext.global}get extensionContext(){return this._extensionContext}executeScript(e,t){return a.executeScript(e,browser.unwrapMirror(this._extensionContext.global),t)}createSafeFunction(e){return this._extensionContext.createSafeFunction(browser.unwrapMirror(this.global),e)}addSafeListener(e,t,r,o){var n=this.createSafeFunction(r);a.addListener(e,t,n,o);return n}}},function(e,t,r){"use strict";r.d(t,"a",function(){return o});class o{static isTrue(e,t){if(!e){t=t?"Internal error. "+t:"Internal error. Unexpectedly false.";o.fail(t)}}static isFalse(e,t){if(e){t=t?"Internal error. "+t:"Internal error. Unexpectedly true.";o.fail(t)}}static isNull(e,t){if(null!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not null.";t+=" '"+e+"'";o.fail(t)}}static isUndefined(e,t){0;if(void 0!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not undefined.";t+=" '"+e+"'";o.fail(t)}}static hasValue(e,t){if(null===e||void 0===e){t=t?"Internal error. "+t:"Internal error. Unexpectedly "+(null===e?"null":"undefined")+".";o.fail(t)}}static areEqual(e,t,r){e!==t&&o.fail(`Error: ${r}, Unexpectedly not equal- Actual: '${e}', Expected: '${t}'`)}static areNotEqual(e,t,r){e===t&&o.fail(`Error: ${r}, Identical input passed to areNotEqual: '${e}'`)}static failDebugOnly(e){o.fail(e)}static fail(e){var t=new Error((e||"Assert failed.")+"\n");try{throw t}catch(e){e.stack&&(e.description=e.stack);throw e}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var o=r(1);class n{constructor(e,t,r,o,n){this._ourIdentifier=e;this._nextId=0;this._promiseTable={};this._jsonRpcMethodReceive=t;this._jsonRpcNotificationReceive=r;this._postMessage=o;Date.now||(Date.now=function(){return+new Date});n(e=>{this.onMessage(e)})}jsonRpcMethodCall(e,t,r,n,a){r||o.a.failDebugOnly("Trying to insert a promise into the queue without a completed function: The front end will have no way of knowing this promise completed");var s=this._ourIdentifier+"|"+this._nextId;this._nextId++;this._promiseTable[s]={completed:r,error:n};var c=JSON.stringify({id:s,method:e,params:t});if(i.RandomDelay){i.queueData(()=>{this._postMessage(c,a)},c);return!0}return this._postMessage(c,a)}jsonRpcNotification(e,t,r){var o=this._ourIdentifier+"|NULL",n=JSON.stringify({id:o,method:e,params:t});i.RandomDelay?i.queueData(()=>{this._postMessage(n,r)},n):this._postMessage(n,r)}onMessage(e){var t=JSON.parse(e.data),r=t.id.split("|");o.a.areEqual(r.length,2);"NULL"===r[1]?r[0]!==this._ourIdentifier&&this._jsonRpcNotificationReceive(t.method,t.params,t.id):r[0]!==this._ourIdentifier||t.method?i.RandomDelay?i.queueData(()=>{this.handleCall(t)},e.data):this.handleCall(t):i.RandomDelay?i.queueData(()=>{this.handleReply(t)},e.data):this.handleReply(t)}handleReply(e){if(this._promiseTable[e.id]&&this._promiseTable[e.id].completed){if(e.error){o.a.isUndefined(e.data,"Can't have both data and error");this._promiseTable[e.id].error(e.error)}else this._promiseTable[e.id].completed(e.data);delete this._promiseTable[e.id]}else o.a.failDebugOnly("Can't complete a promise that does not exist in the promise table. Probably a dup reply msg.")}handleCall(e){this._jsonRpcMethodReceive(e.method,e.params,(t,r)=>{var o;o=r?JSON.stringify({id:e.id,error:r}):JSON.stringify({id:e.id,data:t});this._postMessage(o)},e.id)}}class a{constructor(e,t){this.callback=e;this.message=t}}class i{static enableDelay(e,t){i.RandomDelay=!0;i.CalculateDelayTime=e;i.DelayedMessage=t}static disableDelay(){i.RandomDelay=!1;if(i.RandomDelayTimeout){clearTimeout(i.RandomDelayTimeout);i.RandomDelayTimeout=null;i.clearQueue()}}static queueData(e,t){var r=new a(e,t);i.DelayedQueue.push(r);if(!i.RandomDelayTimeout){var o=i.CalculateDelayTime(t);i.RandomDelayTimeout=setTimeout(i.fireRandomly,o)}}static fireRandomly(){var e=i.DelayedQueue.shift();i.DelayedMessage(e.message);e.callback();if(i.DelayedQueue.length>0){var t=i.CalculateDelayTime(i.DelayedQueue[0].message);i.RandomDelayTimeout=setTimeout(i.fireRandomly,t)}else i.RandomDelayTimeout=null}static clearQueue(){for(var e=0;e<i.DelayedQueue.length;e++){var t=i.DelayedQueue[e];i.DelayedMessage(t.message);t.callback()}i.DelayedQueue=[]}}i.RandomDelay=!1;i.DelayedQueue=[]},,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"default",function(){return i});r.d(t,"storageRemote",function(){return s});var o=r(1),n=r(2),a=r(0);class i{constructor(){this._isInitialLoad=!0;this._port=toolUI.createPort("storageDiagPort");toolUI.connect(this._port);this._rpc=new n.a("STORAGE_REMOTE_12",(e,t,r)=>this.jsonRpcMethodReceive(e,t,r),(e,t)=>this.jsonRpcNotificationReceive(e,t),e=>{this._port.postMessage(e)},e=>{this._port.addEventListener("message",t=>{e(t)})});a.e.addListener(browser,"beforeScriptExecute",()=>this.onBeforeScriptExecute());this.onBeforeScriptExecute()}static getAllCookiesByUrl(e){try{return resources.cookies.getAllCookiesByDomain(e)}catch(e){return[]}}notify(e,t){this._rpc.jsonRpcNotification(e,t)}getWindowForOrigin(e){if(!e)return null;const t=[a.e.getDefaultView(browser.document)];for(;t.length>0;){const r=t.pop();if(a.e.originForWindow(r)===e)return r;for(let e=0;e<r.frames.length;e++){const o=a.e.getValidWindow(r,r.frames[e]);o.isValid&&t.push(o.window)}}return null}retrieveLocalStorage(e){return this.retrieveWebStorage(e,e=>e.localStorage)}retrieveSessionStorage(e){return this.retrieveWebStorage(e,e=>e.sessionStorage)}getIdbDatabaseAndObjectStoreNames(e){const t=this.getWindowForOrigin(e);if(!t)return Promise.reject(new Error(`Could not find window for origin: ${e}`));if(!t.indexedDB)return Promise.reject(new Error(`IndexedDB not supported for origin: ${e}`));const r=[];return new Promise((o,n)=>{const i=resources.indexedDB.getDatabaseNames(t.indexedDB);i.onsuccess=a.e.createSafeFunction(t,()=>{const a=[];for(const e of i.result)a.push(this.openIdbRequest(t,e,r));Promise.all(a).then(()=>{o(r)}).catch(()=>{n(new Error(`Error on opening one or more database for origin: ${e}`))})});i.onerror=a.e.createSafeFunction(t,()=>{n(new Error(`Error on getting database list for origin: ${e}`))})})}openIdbRequest(e,t,r){return new Promise((o,n)=>{const i=e.indexedDB.open(t);i.onsuccess=a.e.createSafeFunction(e,e=>{const n=e.target.result;if(n.objectStoreNames.length>0)for(const e of Array.from(n.objectStoreNames)){const o={databaseName:t,objectStoreName:e,indexName:""};r.push(o);const a=n.transaction(e).objectStore(e);for(const o of Array.from(a.indexNames)){const n={databaseName:t,objectStoreName:e,indexName:o};r.push(n)}}else{const e={databaseName:t,objectStoreName:"",indexName:""};r.push(e)}o()});i.onerror=a.e.createSafeFunction(e,()=>{n()})})}retrieveIndexedDBKeyValuePairs(e,t,r,o){const n=this.getWindowForOrigin(e);if(!n)return Promise.reject(new Error(`Could not find window for origin: ${e}`));const i=[];return new Promise((e,s)=>{const c=n.indexedDB.open(t);c.onsuccess=a.e.createSafeFunction(n,t=>{const c=t.target.result.transaction(r).objectStore(r),l=(o?c.index(o):c).openCursor();l.onsuccess=a.e.createSafeFunction(n,t=>{const r=t.target.result;if(r){const e={keyString:JSON.stringify(r.key),valueString:JSON.stringify(r.value),primaryKeyString:JSON.stringify(r.primaryKey),primaryKey:r.primaryKey};i.push(e);r.continue()}else e(i)});l.onerror=a.e.createSafeFunction(n,()=>{s()})});c.onerror=a.e.createSafeFunction(n,()=>{s()})})}idbRemoveKeyValuePairs(e,t,r,o){const n=this.getWindowForOrigin(t);return n?new Promise((t,i)=>{const s=n.indexedDB.open(r);s.onsuccess=a.e.createSafeFunction(n,r=>{const s=r.target.result.transaction(o,"readwrite").objectStore(o);for(const t of e){s.delete(t).onerror=a.e.createSafeFunction(n,()=>{i()})}t()});s.onerror=a.e.createSafeFunction(n,()=>{i()})}):Promise.reject(new Error(`Could not find window for origin: ${t}`))}localStorageSetItem(e,t,r){return!this.webStorageSetItem(e,t,r,e=>e.localStorage)&&resources.localStorage.quotaLimiting?i.QuotaExceededErrorMessage:""}sessionStorageSetItem(e,t,r){return!this.webStorageSetItem(e,t,r,e=>e.sessionStorage)&&resources.sessionStorage.quotaLimiting?i.QuotaExceededErrorMessage:""}localStorageDeleteItems(e,t){return this.webStorageDeleteItems(e,t,e=>e.localStorage)}sessionStorageDeleteItems(e,t){return this.webStorageDeleteItems(e,t,e=>e.sessionStorage)}localStorageSetSimulateCap(e){try{resources.localStorage.quotaLimiting=e}catch(e){}return!0}sessionStorageSetSimulateCap(e){try{resources.sessionStorage.quotaLimiting=e}catch(e){}return!0}retrieveCookies(e){return i.getAllCookiesByUrl(e).map(e=>{return{name:e.name,value:e.value,domain:e.domain,expires:e.session?null:e.expires,httpOnly:e.httpOnly,path:e.path,sameSite:e.sameSite,secure:e.secure,session:e.session}})}deleteCookies(e,t){e.forEach(e=>{try{resources.cookies.deleteCookieWithUrl(e.name,e.domain,t)}catch(e){}});return!0}deleteAllCookies(e){this.deleteCookies(i.getAllCookiesByUrl(e),e);return!0}deleteSessionCookies(e){const t=i.getAllCookiesByUrl(e).filter(e=>e.session);this.deleteCookies(t,e);return!0}setCookie(e,t){const r=this.getCookie(e.name,e.domain,t);r.value=e.value;try{resources.cookies.setCookieWithUrl(r,t)}catch(e){return!1}return!0}refreshBrowser(){a.e.refreshBrowser();return!0}async retrieveCache(e,t){const r=this.getWindowForOrigin(e),o=await this.safeOpenCache(r,t),n=await this.safeGetCacheKeys(r,o),a=[],i={};for(const e of n)a.push(this.getCacheEntry(r,o,e));const s=await Promise.all(a);for(const[e,t]of s)i[e]=t;return i}retrieveCacheNames(e){const t=this.getWindowForOrigin(e);return this.safeGetCacheNames(t)}async deleteCacheItems(e,t,r){const o=this.getWindowForOrigin(r),n=await this.safeOpenCache(o,e),a=await this.safeGetCacheKeys(o,n),i=t.map(e=>{const t=a.find(t=>t.url===e);return n.delete(t)});return Promise.all(i)}async getCacheEntry(e,t,r){const o=await this.safeMatchCache(e,t,r),n=o.headers.get("content-type"),a=r.url,i="OpaqueContentTypeText",s="NoContentTypeText";if(n){if(String.prototype.match.call(n,/^text\//i)||String.prototype.match.call(n,"application/json")||String.prototype.match.call(n,"application/xml")||String.prototype.match.call(n,"application/javascript")){return[a,await this.safeGetResponseText(e,o)]}return[a,n]}return[a,o.type.match("opaque")?i:s]}safeGetCacheNames(e){return e&&e.caches?a.e.safeAsyncCall(e,e.caches.keys()):Promise.resolve([])}safeOpenCache(e,t){return e&&e.caches?a.e.safeAsyncCall(e,e.caches.open(t)):Promise.reject(new Error(i.noCacheOnWindow))}safeGetCacheKeys(e,t){return e&&e.caches?a.e.safeAsyncCall(e,t.keys()):Promise.reject(new Error(i.noCacheOnWindow))}safeMatchCache(e,t,r){return e&&e.caches?a.e.safeAsyncCall(e,t.match(r)):Promise.reject(new Error(i.noCacheOnWindow))}safeGetResponseText(e,t){return e&&e.caches?a.e.safeAsyncCall(e,t.text()):Promise.reject(new Error(i.noCacheOnWindow))}retrieveWebStorage(e,t){let r;const o=this.getSafeWebStorage(e,t);o&&(r=this.copyWebStorage(o));return r||{}}webStorageSetItem(e,t,r,o){const n=this.getSafeWebStorage(r,o);if(n&&n.setItem)try{n.setItem(e,t)}catch(e){return!1}return!0}webStorageDeleteItems(e,t,r){const o=this.getSafeWebStorage(t,r);o&&o.removeItem&&e.forEach(e=>o.removeItem(e));return!0}getSafeWebStorage(e,t){let r=null;try{const o=this.getWindowForOrigin(e);o&&(r=t(o))}catch(e){}return r}getCookie(e,t,r){const n=i.getAllCookiesByUrl(r).filter(r=>r.name===e&&r.domain===t);o.a.isTrue(n.length<=1,"More than one cookie with the same name and domain was retrieved from IE");return n.length>0?n[0]:resources.cookies.createCookie(e)}copyWebStorage(e){const t={};Object.keys(e).forEach(r=>{t[r]=e[r]});const r=e.getItem("");null!==r&&void 0!==r&&(t[""]=r);return t}onBeforeScriptExecute(){this._isInitialLoad&&(this._isInitialLoad=!1)}jsonRpcMethodReceive(e,t,r){let o;(o=t?this[e].apply(this,t):this[e].apply(this)).then&&"function"==typeof o.then?o.then(r).catch(e=>{r(void 0,e)}):r(o,void 0)}jsonRpcNotificationReceive(e,t){}}i.QuotaExceededErrorMessage="QuotaExceededError";i.noCacheOnWindow="'caches' does not exist on Window";const s=new i}]);
