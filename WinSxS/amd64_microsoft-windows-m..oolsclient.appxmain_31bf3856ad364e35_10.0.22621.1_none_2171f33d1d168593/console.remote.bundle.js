!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};e[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})};r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";r(r.s=0)}([function(e,t,r){"use strict";r.r(t);function n(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&/g,"&amp;"),/"/g,"&quot;"),/'/g,"&apos;"),/</g,"&lt;"),/>/g,"&gt;")}var o;!function(e){e[e.Frame=0]="Frame";e[e.ExtensionContext=1]="ExtensionContext"}(o||(o={}));class i{static addListener(e,t,r,n){n?e.addEventListener(t,r,n):e.addEventListener(t,r)}static addSafeListener(e,t,r,n,o,a){var l=i.createSafeFunction(browser,e,n,a);i.addListener(t,r,l,o);return l}static removeListener(e,t,r,n){n?e.removeEventListener(t,r,n):e.removeEventListener(t,r)}static getDefaultView(e){return e.defaultView}static getLeafTextContent(e){if(e.childNodes){if("IFRAME"===e.tagName)return"";if(e.childNodes.length>1)return"";if(1===e.childNodes.length){var t=e.childNodes[0];if("IFRAME"===t.tagName||t.childNodes&&t.childNodes.length>0)return""}}return i.getTextContent(e)}static isFrameElement(e){return!!e.tagName&&("IFRAME"===e.tagName||"FRAME"===e.tagName||"iframe"===e.localName&&"http://www.w3.org/1999/xhtml"===e.namespaceURI)}static getTextContent(e){return e.nodeType===e.COMMENT_NODE||e.nodeType===e.TEXT_NODE?e.data:e.childNodes&&1===e.childNodes.length&&e.childNodes[0].nodeType===e.TEXT_NODE?e.childNodes[0].data:e.textContent||""}static setTextContent(e,t){e.textContent=t}static getDocumentTypeNodeText(e){var t="";if(e.nodeType!==e.DOCUMENT_TYPE_NODE)return t;t="<!DOCTYPE "+e.nodeName;if(e.publicId){t+=' PUBLIC "'+e.publicId+'"';e.systemId&&(t+=' "'+e.systemId+'"')}else e.systemId&&(t+=' SYSTEM "'+e.systemId+'"');e.internalSubset&&(t+=" ["+e.internalSubset+"]");return t+=">"}static isCrossSiteWindow(e,t){try{e.Object.getOwnPropertyNames(t)}catch(e){return!0}return!1}static getValidWindow(e,t,r){try{if(dom.isWindow(t)){let n=t;if(i.isCrossSiteWindow(e,t)){let o=dom.getCrossSiteWindow(e,t,r);o&&(n=o.document.defaultView)}if(n.document)return{isValid:!0,window:n.document.defaultView}}}catch(e){}return{isValid:!1}}static getValidContentWindow(e,t){try{return this.getValidWindow(e,t.contentWindow)}catch(e){return{isValid:!1}}}static originForWindow(e){return e&&e.location&&e.location.protocol&&e.location.host?n(e.location.protocol+"//"+e.location.host):""}static createSafeFunction(e,t,r,n){return i.executeScript("(func) => { return (...args) => func(...args) }",t,!0)(e.createSafeFunction(t,r,n))}static executeScript(e,t,r=!1){var n;try{browser.enterToolsScriptMode();n=diagnosticsScript.debugEval.bind(t)(e,r)}finally{browser.exitToolsScriptMode()}return n}static initializeScriptEngines(e){if(e){if(e.document&&e.document.scripts&&0===e.document.scripts.length)try{i.executeScript("",e,!0)}catch(e){}try{if(e.frames)for(var t=0;t<e.frames.length;t++){var r=e.frames[t],n=i.getValidWindow(e,r);n.isValid&&i.initializeScriptEngines(n.window)}}catch(e){}}}static getUid(){return"uid"+(i.uid++).toString(36)}static unwrapMirrorElement(e){try{return browser.extensionContexts.length?browser.extensionContexts[0].unwrapMirror(e):e}catch(t){return e}}}i.uid=0;class a{static propertyEvaluationFunction(e,t){var r,n;if(e.location.protocol.indexOf("http")>=0){r=a.HttpObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=a.HttpPropertyIgnorelist[r]}else if(e.location.protocol.indexOf("ms-appx")>=0){r=a.FileObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=a.FilePropertyIgnorelist[r]}return n?(e,t)=>{if(!(n&&n.lastIndexOf(t)>=0))try{return e[t]}catch(e){return e.toString()}}:(e,t)=>e[t]}}a.HttpObjectWatchList=["[object Window]"];a.HttpPropertyIgnorelist=[["indexedDB","msIndexedDB"]];a.FileObjectWatchList=["[object Window]"];a.FilePropertyIgnorelist=[["clipboardData"]];class l{constructor(e){this._global=e;this._name=e.location.hostname+e.location.pathname}get name(){return this._name}get type(){return o.Frame}get global(){return this._global}set global(e){this._global=e}executeScript(e,t){return i.executeScript(e,browser.unwrapMirror(this._global),t)}createSafeFunction(e){return i.createSafeFunction(browser,browser.unwrapMirror(this._global),e,!0)}addSafeListener(e,t,r,n){return i.addSafeListener(browser.unwrapMirror(this._global),e,t,r,n,!0)}}class s{constructor(e){this._extensionContext=e;let t=this._extensionContext.name;const r=t.lastIndexOf("_");r>=0&&(t=t.substr(0,r));this._name=t}get name(){return this._name}get type(){return o.ExtensionContext}get global(){return this._extensionContext.global}get extensionContext(){return this._extensionContext}executeScript(e,t){return i.executeScript(e,browser.unwrapMirror(this._extensionContext.global),t)}createSafeFunction(e){return i.createSafeFunction(this._extensionContext,browser.unwrapMirror(this.global),e,!0)}addSafeListener(e,t,r,n){var o=this.createSafeFunction(r);i.addListener(e,t,o,n);return o}}class c{constructor(){this.mapping=new Map;this.assignedUidMap=new WeakMap}reset(){for(let e in this.mapping)this.deleteMappedNode(e);this.mapping=new Map}getElementForMappedNode(e){let t=this.mapping.get(e);return t&&c.isElementAccessible(t.ele)?t.ele:null}getChildrenForMappedNode(e){let t=this.mapping.get(e);if(!t||!c.isElementAccessible(t.ele))return;const r=t.isListType;if("STYLE"===t.ele.nodeName)return[{uid:"style"+e,hasChildren:!1,text:t.ele.sheet?t.ele.sheet.cssText:i.getLeafTextContent(t.ele)}];if("SCRIPT"===t.ele.nodeName)return[{uid:"script"+e,hasChildren:!1,text:t.ele.innerHTML}];let n=t.isIframeElement?this.getIframeRootForMappedNode(e):t.ele,o=t.isListType?n:n.childNodes,a=[],l={};for(let e=0;e<o.length;e++){let t=this.createMappedNode(o[e],r);if(t){a.push(t);l[t.uid]=t}}t.isLimited=!1;if(t.childrenNodes)for(let r=0;r<t.childrenNodes.length;r++)l[e=t.childrenNodes[r].uid]||this.deleteMappedNode(e);t.childrenNodes=a;t.isExpanded=!0;return a}static isElementAccessible(e){let t;try{t=typeof e}catch(e){return!1}return"object"===t}createMappedList(e,t){let r=this.getAssignedUid(e),n=0;try{n=e.length}catch(e){}let o={uid:r,hasChildren:Boolean(n&&n>0),tag:t,attributes:[{name:"length",value:String(n)}]};this.mapping.set(r,{ele:e,mapped:o,isListType:!0});return o}createMappedNode(e,t){let r=this.getAssignedUid(e),n={uid:r},o=!1;if(e.nodeType===e.DOCUMENT_NODE||e.nodeType===e.DOCUMENT_FRAGMENT_NODE){n.tag="#document";n.hasChildren=!0;n.text=void 0;n.rootTag=e.nodeName}else if(this.isElement(e)){let t,r=e.tagName.toLowerCase(),a=e.childNodes.length>0;if(this.isStyleElement(e)){a=!0;let r=e.sheet?e.sheet.cssText:i.getLeafTextContent(e);if(r&&r.trim()){if(!String.prototype.match.call(r,/\n/g)&&r.length<c.MAX_INLINE_LENGTH){a=!1;t=r}}else a=!1}else if(1===e.childNodes.length){let r=e.childNodes[0],n=i.getLeafTextContent(r);if(!this.isElement(r)&&n)if(n&&n.trim()){if(!String.prototype.match.call(n,/\n/g)&&n.length<c.MAX_INLINE_LENGTH){a=!1;t=n}}else a=!1}if(this.isIFrameElement(e)){o=!0;let t=i.getDefaultView(e.ownerDocument);a=i.getValidContentWindow(t,e).isValid}let l=[];if(e.attributes)for(let t=0;t<e.attributes.length;t++){let r=e.attributes[t];r&&l.push({name:r.name,value:r.value})}n.tag=r;n.hasChildren=a;n.text=t;n.attributes=l;n.inspectableId=this.findParentChainForElement(e)}else if(e.nodeType){let r,o,a=i.getLeafTextContent(e);if(this.isDocumentType(e)){r="#doctype";a=i.getDocumentTypeNodeText(e)}else if(e.nodeType===e.COMMENT_NODE)r="#comment";else if(e.nodeType===e.TEXT_NODE){let e=a.trim();if(0===e.length){if(!t)return null;o=a="EmptyTextNode"}else a=e}n.tag=r;n.localizeId=o;n.hasChildren=!1;n.text=a}this.mapping.set(r,{ele:e,isIframeElement:o,mapped:n});return n}getIframeRootForMappedNode(e){let t=this.mapping.get(e);if(!t||!c.isElementAccessible(t.ele))return null;if(t.iframeRoot)return t.iframeRoot;if(i.isFrameElement(t.ele)){let e=t.ele,r=i.getDefaultView(e.parentNode.ownerDocument),n=i.getValidContentWindow(r,e);if(n.isValid){t.iframeRoot=n.window.document;return t.iframeRoot}}return null}deleteMappedNode(e,t){let r=this.mapping.get(e);if(r){if(r.childrenNodes){for(let e=0;e<r.childrenNodes.length;e++)this.deleteMappedNode(r.childrenNodes[e].uid,!1);r.childrenNodes=void 0}t?r.isExpanded=!1:this.mapping.delete(e)}}isIFrameElement(e){return i.isFrameElement(e)}isStyleElement(e){return"STYLE"===e.nodeName}isElement(e){return e.nodeType===e.ELEMENT_NODE}isDocumentType(e){return e.nodeType===e.DOCUMENT_TYPE_NODE}getAssignedUid(e){let t=this.assignedUidMap.get(e);if(t)return t;t=i.getUid();this.assignedUidMap.set(e,t);return t}getIFrameChain(e,t){let r=e.querySelectorAll("iframe, frame");for(let n=0,o=r.length;n<o;n++){let o=r[n],a=i.getDefaultView(e),l=i.getValidContentWindow(a,o);if(l.isValid){if(l.window.document===t)return[browser.getUniqueID(r[n])];let e=this.getIFrameChain(l.window.document,t);if(e&&e.length>0){e.push(browser.getUniqueID(r[n]));return e}}}return[]}findParentChainForElement(e){try{let t=[];i.getDefaultView(e.ownerDocument)!==i.getDefaultView(browser.document)&&(t=this.getIFrameChain(browser.document,e.ownerDocument));let r=browser.getUniqueID(e);t&&t.length>0&&(r=r+" "+t.join(" "));return r}catch(e){return""}}}c.MAX_INLINE_LENGTH=70;function u(...e){var t=/%%|%([csbxXideEfF])/g,r=0;let n="";for(var o=t=>{if(r>=e.length)return t;switch(t){case"%%":return"%";case"%c":n=e[r++];return"";case"%d":case"%i":return f(e[r++]);case"%f":return m(e[r++]);case"%s":return d(e[r++]);case"%b":return p(e[r++],2);case"%x":case"%X":return p(e[r++],16);case"%E":case"%e":return g(e[r++]);default:return t}},i=d(e[r++]).replace(t,o),a=r;a<e.length;a++)i=i.length>0?i+" "+d(e[a]):d(e[a]);return{message:i,styles:n}}function d(e){var t;try{void 0===e||null===e?t=String(e):"string"!=typeof(t=e.toString())&&(t="[object Object]")}catch(e){t="[object Object]"}return t}function f(e){var t=m(e);return isNaN(t)?t.toString():Math.round(t-t%1).toString()}function p(e,t){var r=m(e);return isNaN(r)?r.toString():({2:"0b",8:"0",16:"0x"}[t]||"").toString()+(r<0?(r>>>0).toString(t):r.toString(t))}function g(e){var t=m(e);return isNaN(t)?t.toString():t.toExponential()}function m(e){return isNaN(e)||null===e?Number(d(e)):Number(e)}const w=/^$|^\s|\s$/,h=50,y=10,b={functionName:"[function]",objectName:"[object]",arrayName:"[array]",emptyArray:" [ ]",emptyObject:" { }",expandableArray:" [...]",expandableObject:" {...}"};function E(e){if(void 0===e)return"undefined";var t=typeof e;if("object"===t){if(!e)return"null";try{if(Array.isArray(e)||e.constructor.name.endsWith("Array"))return"array";if("RegExp"===e.constructor.name)return"regex";if("Date"===e.constructor.name)return"date"}catch(e){}return"object"}return t}function S(e,t,r,n){var a,l=E(t);if(void 0!==r&&!n){if(!(t=t[r]))return null;l=E(t)}var s,c,u=!N(t);if(u){a=O(t,l);const u=browser.unwrapMirror(e.currentWindowContext.global);if(dom.isWindow(t)&&e.currentWindowContext.type===o.Frame&&i.isCrossSiteWindow(u,t))try{var d=dom.getCrossSiteWindow(u,t,!0);d&&(t=d)}catch(e){s=[{propertyName:"error",propertyValue:_({message:"Access denied."})}]}if(!s){c=i.getUid();e.resultMap.set(c,t);s="array"===l?C(e,c,t,r,n):x(e,t,c)}}else{a=null;s=x(e,t)}var f=e.getHtmlViewableTypeName(t);return{detailedType:l,isExpandable:u,isHtmlViewableType:null!==f&&"AttributeNode"!==f,name:a,value:s,uid:c}}function N(e){if(null===e)return!0;var t=typeof e;if("object"===t||"function"===t)try{if(j(e))return!1}catch(e){return!1}return!0}function O(e,t){t||(t=E(e));switch(t){case"boolean":return""+e;case"date":return"[date] "+e;case"function":return""+e;case"null":return"null";case"number":return""+e;case"regex":return"[regex] "+e;case"string":return e;case"undefined":return"undefined";case"array":return N(e)?b.arrayName:T(e);case"object":case"htmlElement":return N(e)?b.objectName:T(e);default:return""+e}}function T(e){var t;try{t=Object.prototype.toString.call(e)}catch(e){t=null}return t}function C(e,t,r,n,o){var i,a,l,s,c=!1;if(o&&n&&-1!==n.indexOf(":")){var u=n.split(":",2);l=parseInt(u[0],10);i=(s=parseInt(u[1],10)+1)-l;c=!0}else{i=r.length;l=0;s=i}if(i<=h){a=(a=x(e,r.slice(l,s),t)).filter(e=>!isNaN(parseInt(e.propertyName,10)));if(c||s-l!==a.length)for(var d=0;l<s;){var f=typeof r[l];"object"===f?a[d].propertyValue.value=t+":"+l.toString():"undefined"!==f||a[d]||a.splice(d,0,{propertyName:String(d),propertyValue:{detailedType:"undefined",isExpandable:!1,isHtmlViewableType:!1,name:String(d),value:void 0}});a[d++].propertyName=String(l++)}}else{for(var p=y;p*p<i;)p*=p;a=[];for(var g=l,m=l;m<s;){m=(m+=p)<s?m:s;a.push({propertyName:"["+g+"..."+(m-1)+"]",propertyValue:{detailedType:"array",isExpandable:!0,isHtmlViewableType:!1,name:null,value:t+"#internal:"+g+":"+(m-1)}});g=m}}a=v(e,a,r,t,!0);n||a.push({propertyName:"length",propertyValue:{detailedType:"number",isExpandable:!1,isHtmlViewableType:!1,name:"length",value:r.length}});return a}function x(e,t,r){if(null===t)return null;if(N(t)){return O(t,E(t))}return v(e,[],t,r,!1)}function v(e,t,r,n,o=!1){try{const i=o?I(r):M(e,r);let l="";const s=new Set,c=a.propertyEvaluationFunction(e.currentWindowContext.global,r);for(const o of i)try{if(s.has(o))continue;s.add(o);l=String(o);const i=c(r,o),a=E(i);let u=null,d=!N(i);d&&"null"===(u=O(r[l],a))&&(d=!1);const f=e.getHtmlViewableTypeName(i),p={detailedType:a,isExpandable:d,isHtmlViewableType:null!==f&&"AttributeNode"!==f,name:u,value:d?n+":"+l:x(e,i,void 0)};w.test(l)&&(l='"'+l+'"');t.push({propertyName:l,propertyValue:p})}catch(e){t.push({propertyName:l,propertyValue:_(e)});continue}}catch(e){t.push({propertyName:"0",propertyValue:_(e)})}return t}function _(e){var t="<"+(e.message||e.description).trim()+">";"<>"===t&&(t="<Access denied.>");return{detailedType:"exception",isExpandable:!1,value:t}}function I(e){var t=e,r=Object.getOwnPropertyNames(t),n=Object.keys(t);return r=r.filter(e=>{return-1!==n.indexOf(e)&&(isNaN(e)||e<0)})}function L(e){return browser.unwrapMirror(e.currentWindowContext.global).Object}function M(e,t){const r=L(e);let n=[];if(t){let e=Object.getOwnPropertyNames(t);e&&(n=e);let o=Object.getPrototypeOf(t);for(;o&&o!==r.prototype;){e=Object.getOwnPropertyNames(o);for(let t of e){let e=Object.getOwnPropertyDescriptor(o,t);e&&e.get&&n.push(t)}o=Object.getPrototypeOf(o)}}n.indexOf("__proto__")<0&&n.push("__proto__");return n}function j(e){for(var t=e;t&&"undefined"!==t;){var r=Object.getOwnPropertyNames(t);if(r&&r.length>0)return!0;t=Object.getPrototypeOf(t)}return!1}function D(e,t,r,n){var o=(e,t)=>{if(e)try{var n=W(r,e,t);return n||o(Object.getPrototypeOf(e),t)}catch(e){return"TypeError"===e.name?{}:void 0}return e},i=(e,t,o)=>{if(o){if(void 0!==o.value&&null!==o.value)return o.value;var i=typeof e;"object"!==i&&"function"!==i&&(e=new r.Object(e));if(o.isSafeGet)return n(e,t)}};return e&&i(e,t,o(e,t))}function V(e){var t=[];if(null!==e.object&&void 0!==e.object){var r=typeof e.object;"object"!==r&&"function"!==r&&(e.object=new e.windowContext.Object(e.object));var n=i.getValidWindow(e.windowContext,e.object,!0);n.isValid&&n.window&&(e.object=e.windowContext=n.window);var o=Object.getOwnPropertyNames(e.object);o&&(t=o);for(var a=Object.getPrototypeOf(e.object);a;){var l=Object.getOwnPropertyNames(a);t=Array.prototype.concat.call(t,l);a=Object.getPrototypeOf(a)}}return t}function F(e,t){const r=browser.unwrapMirror(e.global);return R(t,r,r.window,[])}function R(e,t,r,n=[]){var o=k(e,t,r);let i=[];t===r&&0===e.length&&(i=i.concat(P(),n));return A(o,i)}function W(e,t,r){var n=function(e,t){try{window.__BROWSERTOOLS_CONSOLE_INTELLISENSE_DESCRIPTOR=null;var r=Object.getOwnPropertyDescriptor(e,t);if(r){var n=!1;r.get&&/\[native code\]/.test(r.get.toString())?n=!0:void 0===r.get&&(n=!0);window.__BROWSERTOOLS_CONSOLE_INTELLISENSE_DESCRIPTOR={value:r.value,isSafeGet:n}}}catch(e){}};try{i.executeScript("window.__BROWSERTOOLS_CONSOLE_INTELLISENSE_GET_DESCRIPTOR = "+n.toString(),e,!0);e.__BROWSERTOOLS_CONSOLE_INTELLISENSE_GET_DESCRIPTOR(t,r);return e.__BROWSERTOOLS_CONSOLE_INTELLISENSE_DESCRIPTOR}catch(t){return new e.Object(null)}}function k(e,t,r){var n=e.split(".");const o=P();for(var l=0;l<n.length&&n[l].length>0;++l){var s=a.propertyEvaluationFunction(t,r);r=D(r,n[l],t,s);var c=i.getValidWindow(t,r,!0);c.isValid&&(r=t=c.window)}if(!r&&n.length&&n[0].length){if(o.indexOf(n[0])>=0)return{object:U(n[0]),windowContext:t}}return{object:r,windowContext:t}}function A(e,t){for(var r=V(e),n=[],o=0,i=(r=Array.prototype.concat.call(r,t)).length;o<i;o++)String.prototype.match.call(r[o],/^\d/)||n.push({name:r[o],info:""});var a=(e,t)=>e<t?-1:e>t?1:0;n=Array.prototype.sort.call(n,function(e,t){var r=a(e.name.toLowerCase(),t.name.toLowerCase());return 0===r?a(t.name,e.name):r});for(o=1;o<n.length;)n[o-1].name===n[o].name?n.splice(o,1):o++;return{choices:n}}function P(){const e=diagnosticsScript.getConsoleScope();return Object.keys(e)}function U(e){return diagnosticsScript.getConsoleScope()[e]}const B={assert:"consoleItemError",error:"consoleItemError",info:"consoleItemInfo",log:"consoleItemLog",warn:"consoleItemWarn",table:"consoleItemTable",internalMessage:"internalMessage"},H={startGroup:"startGroup",startGroupCollapsed:"startGroupCollapsed",endGroup:"endGroup"},$=new c,G=1e3,z=20,q=1e3;let X,J,Y=[];const K="default",Q="timestamp";let Z=new Map,ee=new Map,te=new Map,re=0,ne=0,oe=new WeakMap,ie=[],ae=!0,le=new l(i.getDefaultView(browser.document)),se=new Map,ce=new Map;const ue="suppressOutput-{9724EC8B-E0A8-4B3B-94CB-AB1F31CB47DB}";function de(){setInterval(we,q);X=toolUI.createPort("consolePort");toolUI.connect(X);J=new F12.Tools.RPC.JsonRPCEndpoint("CONSOLE_REMOTE_1",(e,t,r)=>fe(e,t,r),()=>{},e=>{X.postMessage(e)},e=>{X.addEventListener("message",t=>{e(t)})});if("undefined"!=typeof browser){i.addListener(browser,"beforeScriptExecute",We);i.addListener(browser,"consoleMessage",function(e){He(e.source,e.level,e.messageId,e.messageText,e.fileUrl,e.line,e.column)});i.addListener(browser,"extensionContextCreated",ke);i.addListener(browser,"extensionContextClosed",Ae)}i.addListener(toolUI,"detach",Pe);tt();Ve()}function fe(e,t,r){let n;switch(e){case"getHtmlChildren":n=ut(t[0]);break;case"processInput":n=st(le,t[0]);break;case"clearConsoleData":it();break;case"consoleHandshakeCompleted":at();break;case"switchTargetWrapper":lt(t[0],t[1]);break;case"getObjectItemAsHtml":n=dt(t[0]);break;case"getHtmlItemAsObject":n=ft(le,t[0]);break;case"getObjectChildren":n=ct(le,t[0]);break;case"getIntellisenseItemsForExpressionWrapper":n=Ce(t[0])}n?r(n,void 0):r()}function pe(e,t){J.jsonRpcNotification(e,t)}function ge(){se=new Map;te=new Map;pe("ClearTargets",[])}function me(e,t){let r={result:void 0,isError:!1};try{r.result=e.executeScript(t,!1)}catch(e){r.result=e;r.isError=!0}try{diagnosticsScript.getConsoleScope().$_=r.result}catch(e){}return r}function we(){ne=0;if(Y.length){const e=Y.splice(0,z);ne=e.length;for(const t of e)ye(t.executionTarget,t.functionId,t.data)}}function he(e,t,r){ae?ie.push({executionTarget:e,functionId:t,data:r}):++ne>G?ne===G+1&&pe("NotifyCallback",[{notifyType:B.warn,message:{localizeId:"ConsoleTooManyMessagesError"}}]):ne>z||Y.length?Y.push({executionTarget:e,functionId:t,data:r}):ye(e,t,r)}function ye(e,t,r){let n;switch(t){case"clear":Te();pe("ClearCallback",[]);break;case"dir":(n=Oe(e,r))&&"undefined"!==n.detailedType&&pe("OutputCallback",[n]);break;case"dirxml":let o=Ee(r);(n=null!==o?Ne(r,o):Oe(e,r))&&"undefined"!==n.detailedType&&pe("OutputCallback",[n]);break;default:pe("NotifyCallback",[{notifyType:t,message:r}])}}function be(e){try{let t;if(e)if(e.type===o.Frame){const r=i.getValidWindow(le.global,e.global);if(r.isValid){e.global=r.window;t=e;se.forEach((e,t)=>{e.global===r.window&&pe("TargetChanged",[{targetType:"Frame",targetId:t}])})}else t=le}else{t=e;se.forEach((t,r)=>{t===e&&pe("TargetChanged",[{targetType:"Frame",targetId:r}])})}else{t=new l(i.getDefaultView(browser.document));pe("TargetChanged",[{targetType:"_top"}])}le=t;De(t.global);let r=t.global.location.href,n=t.name;pe("NotifyCallback",[{notifyType:"consoleItemCDContext",message:n=String.prototype.replace.call(n,/\/$/,""),contextInfo:r}])}catch(e){pe("NotifyCallback",[{notifyType:B.error,message:e.message||e.description}])}}function Ee(e){if(e)try{const t=Object.prototype.toString.call(e);switch(t.substr(8,4)){case"HTML":if(t.endsWith("Collection]"))return"HtmlCollection";if(t.endsWith("Element]")){e.id;return"HtmlElement"}break;case"Node":if("[object NodeList]"==t)return"NodeList";if("[object Node]"==t){let t=e.nodeType;return t===e.DOCUMENT_NODE?"DocumentNode":t===e.ATTRIBUTE_NODE?"AttributeNode":"HtmlNode"}}}catch(e){}return null}function Se(e,t){let r;if(t.isError){r={notifyType:B.error};if(t.result){t.result.message&&t.result.name?r.message={message:t.result.message}:r.message=t.result.message||t.result.description||t.result.toString();pe("NotifyCallback",[r])}else r.suppressPostObject=!0}else{let n=Ee(t.result);if(null!==n&&"DocumentNode"!==n){const e=i.unwrapMirrorElement(t.result);try{r=Ne(dom.getMirrorElement(e),n)}catch(e){pe("NotifyCallback",[r={notifyType:B.error,message:e.message}]);r.suppressPostObject=!0}}else{r=Oe(e,t.result);"DocumentNode"===n&&(r.isHtmlViewableType=!0)}}t&&(t.isError||t.result===ue)&&(r.suppressPostObject=!0);return r}function Ne(e,t){let r,n="";try{n=Object.prototype.toString.call(e)}catch(e){}return{detailedType:"htmlElement",isExpandable:!0,isHtmlViewableType:!0,name:n,value:r="NodeList"===t||"HtmlCollection"===t?$.createMappedList(e,t):$.createMappedNode(e,!0),uid:r?r.uid:void 0}}function Oe(e,t,r,n){return S({currentWindowContext:e,resultMap:ce,getHtmlViewableTypeName:Ee},t,r,n)}function Te(){ce.clear();$.reset()}function Ce(e,t,r,n){let o;return o=t?R(e,t,r,n):F(le,e)}function xe(e){i.addSafeListener(e,e.document,"DOMNodeRemoved",ve)}function ve(e){let t="IFRAME"===e.target.nodeName?[e.target]:e.target.getElementsByTagName?e.target.getElementsByTagName("IFRAME"):[];for(let e=0,r=t.length;e<r;e++){let r=t[e].contentWindow,n=i.getValidWindow(i.getDefaultView(browser.document),r);if(n.isValid){Ie(r=n.window);if(r&&Le(r,e=>e===browser.unwrapMirror(le.global))){be();break}}}}function _e(e,t){pe("TargetClosed",[{targetType:"Frame",targetId:e,origin:i.originForWindow(t)}]);se.delete(e)}function Ie(e){try{if(e.frames)for(let t=0,r=e.frames.length;t<r;t++){let r=e.frames[t],n=i.getValidWindow(e,r);if(n.isValid){Ie(n.window)}}}catch(e){}let t=!1;se.forEach((r,n)=>{try{t=e===r.global}catch(t){_e(n,e)}t&&_e(n,e)})}function Le(e,t){if(t(e))return!0;if(e.frames)for(let r=0,n=e.frames.length;r<n;r++){let n=e.frames[r],o=i.getValidWindow(e,n);if(o.isValid){let e=o.window;if(e&&Le(e,t))return!0}}return!1}function Me(e){let t=!1;try{t=je(new l(e))}catch(e){}let r,n,o=i.getDefaultView(browser.document);try{if(!browser||!browser.document)return;r=e===o}catch(e){return}if(!r){let r=i.getValidWindow(o,e);if(!r.isValid)return;e=r.window;if(t){let t=!1;se.forEach((r,n)=>{try{if(r.global===e){t=!0;r.global=e;pe("TargetUpdated",[{targetType:"Frame",targetId:n,href:e.location.href,origin:i.originForWindow(e)}])}}catch(t){_e(n,e)}});if(!t){let t=i.getUid();se.set(t,new l(e));pe("TargetCreated",[{targetType:"Frame",targetId:t,href:e.location.href,origin:i.originForWindow(e)}])}}}xe(e);try{n=e.frames&&t}catch(e){n=!1}if(n)for(let t=0,r=e.frames.length;t<r;t++){let r=e.frames[t],n=i.getValidWindow(e,r);n.isValid&&Me(i.getDefaultView(n.window.document))}}function je(e){const t=e.global;let r=function(){let e;se.forEach((r,n)=>{r.global===t&&(e=n)});return e};const n=browser.unwrapMirror(t);let o=n.console,i={injected:{},original:{}};oe.set(n,i);n.__BROWSERTOOLS_CONSOLE_BREAKMODE_FUNC=e.createSafeFunction((t,r)=>{diagnosticsScript.getConsoleScope().$_=r.result;$e(e,t,r)});e.executeScript("window.__BROWSERTOOLS_CONSOLE = {};",!0);n.__BROWSERTOOLS_CONSOLE.performBreakmodeIntellisense=e.createSafeFunction((e,t,r,n,o)=>{et(e,t,r,n,o)});n.__BROWSERTOOLS_CONSOLE.getEventListenersInvoker=e.createSafeFunction(e=>{const t=dom.getElementEventHelper(e,!0).getEventHandlers();return JSON.stringify(t.reduce((e,t)=>{let r=t.eventName;r in e||(e[r]=[]);e[r].push({column:t.column,document:t.document,eventName:t.eventName,functionName:t.functionName,line:t.line,useCapture:t.usesCapture});return e},{}))});o||"undefined"==typeof console||(o=n.console=console);let a=function(t,r){let n="undefined"!=typeof diagnosticsScript?diagnosticsScript.getStackTrace(1):null;if(n&&n[0]&&r){let o=n[0];r.fileUrl=o.documentUrl;r.lineNumber=o.line+1;r.columnNumber=o.column+1;he(e,t,r)}else he(e,t,r)};rt(i,o,e,"log",function(...t){let n=Ge(e,...t);n.targetId=r();a(B.log,n)});rt(i,o,e,"info",function(...t){let n=Ge(e,...t);n.targetId=r();a(B.info,n)});rt(i,o,e,"warn",function(...t){let n=Ge(e,...t);n.targetId=r();a(B.warn,n)});rt(i,o,e,"error",function(...t){let n=Ge(e,...t);"$$ConsoleSelectError$$"===n.message&&(n.localizeId="ConsoleSelectError");n.targetId=r();a(B.error,n)});rt(i,o,e,"debug",function(...t){try{let r=Ge(e,...t);a(B.log,r)}catch(e){a(B.error,e)}});rt(i,o,e,"assert",function(t,...r){if(!t){let t=Ge(e,...r);a(B.assert,t)}});rt(i,o,e,"time",function(t){ze(e,t)});rt(i,o,e,"timeEnd",function(t){qe(e,t)});rt(i,o,e,"timeStamp",function(t){Xe(e,t)});rt(i,o,e,"group",function(t){Qe(e,t,!1)});rt(i,o,e,"groupCollapsed",function(t){Qe(e,t,!0)});rt(i,o,e,"groupEnd",function(){Ke(e)});let l=function(){let e=function(){try{throw new Error("")}catch(e){return e.stack}}(),t=e?e.split("\n"):"";t.splice(0,123);console.log("console.trace()\n"+t.join("\n"))};i.original.trace=o.trace;let s="console.trace = "+l.toString(),c="undefined"!=typeof diagnosticsScript&&diagnosticsScript.debugEval?1:3;s=s.replace("123",c.toString());e.executeScript(s,!0);i.injected.trace=o.trace;rt(i,o,e,"clear",function(){he(e,"clear");return ue});rt(i,o,e,"dir",function(e){a("dir",e)});rt(i,o,e,"dirxml",function(e){a("dirxml",e)});rt(i,o,e,"count",function(t){Je(e,t)});rt(i,o,e,"countReset",function(t){Ye(e,t)});(void 0===o.select||o.select&&o.select.toString&&"function select() { [native code] }"===o.select.toString())&&rt(i,o,e,"select",function(){Ze(e)});rt(i,o,e,"takeHeapSnapshot",function(){memoryAnalyzerRemote&&memoryAnalyzerRemote.consoleTakeSnapshot&&memoryAnalyzerRemote.consoleTakeSnapshot()});rt(i,o,e,"table",function(...t){let n=Ge(e,...t);n.targetId=r();a(B.table,n)});return!0}function De(e){const t=browser.unwrapMirror(e);let r=function(e,t){return t?t.querySelectorAll.call(t,e):window.document.querySelectorAll.apply(window.document,arguments)},n=function(e){return JSON.parse(window.__BROWSERTOOLS_CONSOLE.getEventListenersInvoker(e))},o=function(e){return Object.keys(e)},a=function(e){return Object.values(e)},l=function(e){let t=window.document.evaluate(e,window.document,window.document.createNSResolver(window.document),5,null),r=[];if(!t.invalidIteratorState){let e=t.iterateNext();for(;null!==e&&!t.invalidIteratorState;){r.push(e);e=t.iterateNext()}}return r},s=`\n        let dir = window.console.dir;\n        let select = window.console.select;\n        let $ = ${function(e,t){return t?t.querySelector.call(t,e):window.document.querySelector.apply(window.document,arguments)}.toString()};\n        let $$ = ${r.toString()};\n        let getEventListeners = ${n.toString()};\n        let keys = ${o.toString()};\n        let values = ${a.toString()};\n        let $x = ${l.toString()};`;i.executeScript(s,t,!0)}function Ve(){i.addListener(browser,"webWorkerCreated",Re);let e="worker.unwrapMirror(worker.worker).__BROWSERTOOLS_CONSOLE_BREAKMODE_FUNC = worker.createSafeFunction(worker.worker, "+function(e,t){try{t.isError||t.result&&("object"==typeof t.result?t.result=t.result.toString():t.result=t.result);diagnostics.postMessage("breakmode_func",JSON.stringify({id:e,data:t}))}catch(t){diagnostics.postMessage("breakmode_func",JSON.stringify({id:e,data:{isError:!0,result:t}}))}}.toString()+");";browser.workerStartupScript=e;let t=browser.workers;for(let r in t){t[r].addEventListener("message",Fe);t[r].executeScriptAsync(e,"breakmode_func")}}function Fe(e){if(e.type&&"breakmode_func"===e.type&&e.message){let t=JSON.parse(e.message);$e(le,t.id,t.data)}}function Re(e){let t=browser.workers;e.id&&t[e.id]&&t[e.id].addEventListener("message",Fe)}function We(e){e&&e.browserOrWindow&&(e=e.browserOrWindow);let t;try{t=i.getDefaultView(e.document)}catch(e){return}if(t===i.getDefaultView(browser.document)){le=new l(t);tt()}else if(le){try{i.getDefaultView(browser.unwrapMirror(le.global).document)}catch(e){be()}Me(t)}}function ke(e){if(te.has(e.id))return;const t=new s(e);je(t);const r=i.getUid();se.set(r,t);te.set(e.id,r);pe("TargetCreated",[{targetType:"Extension",targetId:r,href:t.name}]);e.addEventListener("scriptError",e=>{he(t,B.error,{message:e.description,fromContentScriptEngine:t.name})})}function Ae(e){const t=te.get(e);if(t){pe("TargetClosed",[{targetType:"Extension",targetId:t}]);se.delete(t)}te.delete(e)}function Pe(){i.removeListener(browser,"beforeScriptExecute",We);Ue(i.getDefaultView(browser.document))}function Ue(e){const t=browser.unwrapMirror(e);oe.has(t)&&Be(t,oe.get(t));let r=!1;try{r=!!e.frames}catch(e){r=!1}if(r)for(let t=0,r=e.frames.length;t<r;t++){const r=e.frames[t],n=i.getValidWindow(e,r);n.isValid&&Ue(i.getDefaultView(n.window.document))}}function Be(e,t){try{if(e.console&&t)for(let r in t.injected)e.console[r]===t.injected[r]&&(e.console[r]=t.original[r]);e.__BROWSERTOOLS_CONSOLE_BREAKMODE_FUNC&&delete e.__BROWSERTOOLS_CONSOLE_BREAKMODE_FUNC}catch(e){}se=new Map;te=new Map}function He(e,t,r,n,o,i,a){if("HTML"===e&&1300===r){Te();pe("ClearOnNavigate",[])}if(7002===r&&"about:blank"===o)return;if("CONSOLE"===e)switch(r){case 6e3:he(le,B.log,n);return;case 6001:he(le,B.warn,n);return;case 6002:he(le,B.error,n);return;case 6003:he(le,B.assert,n);return;case 6004:he(le,B.info,n);return}let l=`${e}${r}`,s={messageId:l,message:l+": "+n,fileUrl:o,lineNumber:i,columnNumber:a};switch(t){case 0:he(le,B.info,s);break;case 1:he(le,B.warn,s);break;case 2:he(le,B.error,s)}}function $e(e,t,r){if(t){let n=t.split(":");if(2===n.length){let t,o=n[0],i=n[1];"processInput"===o&&(t=Se(e,r));if(t&&t.suppressPostObject)return;void 0!==t&&pe("ProcessMessage",[{uid:i,args:[t]}])}}}function Ge(e,...t){const r={},n=u(...t);r.message=n.message;r.styles=n.styles;const o=[];t.length&&"string"==typeof t[0]&&(r.hasFormatString=!0);t.forEach(t=>{const r=Se(e,{result:t});"object"==typeof t&&r&&"date"!==r.detailedType&&"function"!==r.detailedType&&"regex"!==r.detailedType&&o.push(r)});o.length&&(r.viewableObject=o);return r}function ze(e,t){t||(t=K);Z.has(t)?he(e,B.warn,{localizeId:"ConsoleTimerWarning",args:[String(t)]}):Z.set(t,nt())}function qe(e,t){let r=nt();t||(t=K);if(Z.has(t)){r-=Z.get(t);Z.delete(t);he(e,B.log,{localizeId:"ConsoleTimerDisplay",args:[String(t),r.toFixed(4)]})}else he(e,B.warn,{localizeId:"NonExistentConsoleTimerWarning",args:[String(t)]})}function Xe(e,t){let r=nt();t||(t=Q);he(e,B.log,{localizeId:"ConsoleTimerDisplay",args:[String(t),r]})}function Je(e,t){if(void 0===t||null===t)he(e,"count",{name:null,message:(re+=1).toString()});else{let r=1;const n=String(t);ee.has(n)&&(r=ee.get(n)+1);ee.set(n,r);he(e,"count",{name:n,message:r.toString()})}}function Ye(e,t){if(void 0===t||null===t){re=0;he(e,"count",{name:null,message:"0"})}else{ee.set(String(t),0);he(e,"count",{name:String(t),message:"0"})}}function Ke(e){he(e,B.internalMessage,{key:H.endGroup})}function Qe(e,t,r){t=t?String(t):"";let n=r?H.startGroupCollapsed:H.startGroup;he(e,B.internalMessage,{key:n,name:t})}function Ze(e){he(e,B.error,{localizeId:"ConsoleSelectNotInitializedError"})}function et(e,t,r,n,o){if("string"!=typeof e||"string"!=typeof t)return;let i=Array.prototype.map.call(o,e=>""+e),a=e.split(":");if(2===a.length){pe("ProcessMessage",[{uid:a[1],args:[Ce(t,r,n,i)]}])}}function tt(){const e=le=new l(i.getDefaultView(browser.document)),t=e.global;try{e.executeScript("",!0)}catch(e){return}try{ge();let e={contextInfo:t.location.href,origin:i.originForWindow(t)};ae=!0;pe("Handshake",[e]);Me(t);ot();De(t);ee.clear();re=0;browser.extensionContexts.forEach(ke)}catch(e){}}function rt(e,t,r,n,o){e.original[n]=t[n];t[n]=r.createSafeFunction(o);e.injected[n]=t[n]}function nt(){return i.getDefaultView(browser.document).performance.now()}function ot(){const e=diagnosticsScript.getConsoleScope();for(let t in e)delete e[t]}function it(){Te()}function at(){ae=!1;let e=ie;ie=[];for(let t=0;t<e.length;t++){let r=e[t];he(le,r.functionId,r.data)}}function lt(e,t){"Frame"===t||"Extension"===t?be(se.get(e)):"_top"===t&&be()}function st(e,t){if(!le)return;try{le.global}catch(e){return}return Se(e,me(le,t))}function ct(e,t){let r=t.indexOf(":");if(-1!==r){let n=[];n.push(t.substr(0,r));n.push(t.substr(r+1));let o=n[0].split("#"),i=ce.get(o[0]);if(i)return Oe(e,i,n[1],2===o.length)}return null}function ut(e){return $.getChildrenForMappedNode(e)}function dt(e){let t=null,r=e.split(":",2);if(2===r.length){let e=ce.get(r[0]);e&&(t=e[r[1]])}else 1===r.length&&(t=ce.get(e));return t?Ne(t,Ee(t)):null}function ft(e,t){return Oe(e,$.getElementForMappedNode(t))}de()}]);
