var DomTree,ControlTemplates,Dom,F12;!function(e){"use strict";class t extends Common.Observable{constructor(e){super();this.gutterGlyphs=[];this.attributes=new Common.ObservableCollection;this.glyphTooltip="";this._item=e}get childIndex(){return this._item.childIndex}set childIndex(e){this._item.childIndex=e}get children(){return this._item.children}set children(e){this._item.children=e}get clickSelectAlternative(){return this._item}set clickSelectAlternative(e){throw new Error("Can't set clickSelectAlternative")}get dontVirtualize(){return this._item.dontVirtualize}set dontVirtualize(e){this._item.dontVirtualize=e}get isGettingDetails(){return this._item.isGettingDetails}set isGettingDetails(e){this._item.isGettingDetails=e}get hasChildren(){return!1}set hasChildren(e){throw Error("Cannot set hasChildren")}get id(){return-1}set id(e){throw Error("Cannot set id")}get isBeingDragged(){return this._item.isBeingDragged}set isBeingDragged(e){this._item.isBeingDragged=e}get isHidden(){return this._item.isHidden}set isHidden(e){this._item.isHidden=e}get isBeingEdited(){return this._item.isBeingEdited}set isBeingEdited(e){this._item.isBeingEdited=e}get isClosingTag(){return!0}set isClosingTag(e){throw Error("Cannot set isClosingTag")}get isExpanded(){return this._item.isExpanded}set isExpanded(e){this._item.isExpanded=e}get isForceExpanded(){return!1}set isForceExpanded(e){throw Error("Cannot set isForceExpanded")}get isSelectable(){return!1}set isSelectable(e){throw Error("Cannot set isSelectable")}get isSelfClosing(){return!1}set isSelfClosing(e){throw Error("Cannot set isSelfClosing")}get dontKeyboardSelect(){return!0}set dontKeyboardSelect(e){throw new Error("Can't set dontKeyboardSelect")}get level(){return this._item.level}set level(e){this._item.level=e}get needsRefresh(){return!1}set needsRefresh(e){throw Error("Cannot set needsRefresh")}get node(){return this._item.node}set node(e){this._item.node=e}get parentNode(){return this._item.parentNode}set parentNode(e){this._item.parentNode=e}get parentItem(){return this._item.parentItem}set parentItem(e){this._item.parentItem=e}get potentiallyHasChildren(){return this._item.potentiallyHasChildren}set potentiallyHasChildren(e){this._item.potentiallyHasChildren=e}get tag(){return this._item.tag}set tag(e){this._item.tag=e}get uid(){return this._item.uid}set uid(e){throw Error("Cannot set uid")}get visibleDescendantRowCount(){return this._item.visibleDescendantRowCount}set visibleDescendantRowCount(e){this._item.visibleDescendantRowCount=e}get visibleRowCount(){return this._item.visibleRowCount}set visibleRowCount(e){this._item.visibleRowCount=e}getElement(){return this._item.getElement()}getItemContainerElement(){return this._item.getItemContainerElement()}getNextSibling(){return this._item.getNextSibling()}getPreviousSibling(){return this._item.getPreviousSibling()}isDraggable(){return!1}isItemAChild(e){return!1}updateIsHiddenProperty(){}toggleGutterGlyph(){}ensureHasGutterGlyph(e,t){}addParentGlyphs(){}}e.ClosingTreeDataItem=t}(DomTree||(DomTree={}));!function(e){"use strict";class t{constructor(e,t){this.listChanged=new Common.EventSource;this._remoteDom=e;this._capabilities=t}get count(){return this.domTree.count}set count(e){throw new Error("Cannot set count")}get indentIndexStart(){return this._selectedItem&&this._selectedItem.isExpanded&&this._selectedItem.hasChildren?this._selectedItemIndex:void 0}set indentIndexStart(e){throw new Error("Cannot set indentIndexStart")}get indentIndexEnd(){return this._selectedItem&&this._selectedItem.isExpanded&&this._selectedItem.hasChildren?this.indentIndexStart+this._selectedItem.visibleDescendantRowCount+1:void 0}set indentIndexEnd(e){throw new Error("Cannot set indentIndexEnd")}get indentLevel(){return this._selectedItem&&this._selectedItem.isExpanded?this._selectedItem.level:0}set indentLevel(e){throw new Error("Cannot set indentLevel")}clear(){this.domTree&&this.domTree.clear()}init(){this.domTree=new e.SparseDomTree(this._remoteDom,this._capabilities);this.domTree.listChanged.addHandler(e=>{this.listChanged.invoke(e)});return this.domTree.init().then(()=>this.domTree.addChangeListener(this.handleDomMutation.bind(this)))}collapseBranch(e){this.domTree.collapseItem(this.domTree.getItemAtVisibleIndex(e));return Common.PromiseUtilities.EmptyPromise}collapseUid(e){this.domTree.collapseUid(e);return Common.PromiseUtilities.EmptyPromise}expandBranch(e){this.domTree.expandItem(this.domTree.getItemAtVisibleIndex(e));return this.primeAtIndex(e,!0)}expandUid(e,t=!1){this.domTree.expandUid(e,t);return this.primeAtUid(e,!0)}expandUidChain(e){if(e&&e.length>0){const t=e[e.length-1];return this.domTree.expandUidChain(e).then(e=>this.primeAtUid(t).then(()=>Promise.resolve(e)))}return Promise.resolve(null)}getItemByUid(e){return this.domTree.findItemByUid(e)}fetchItems(){if(Object.keys(this._itemsToFetch).length){var e=[];for(var t in this._itemsToFetch)e.push({parentUid:t,childIndexes:this._itemsToFetch[t].indexes,childUids:this._itemsToFetch[t].uids});this._itemsToFetch={};return new Promise(t=>{this._remoteDom.getBulkChildNodesDetails(e,e=>{Promise.all(e.map(e=>{var t=e.childNodesDetails.map(e=>this.domTree.ingestNodeDescription(e));return Promise.all(t)})).then(t)})})}return Common.PromiseUtilities.EmptyPromise}getIndexChain(e){var t=this.domTree.findItemByUid(e);return t?t.node.getIndexChain():null}getNext(e=0){for(;e>0;e--){this._enumerationItem=this.domTree.findNextItem(this._enumerationItem);if(!this._enumerationItem)return null;this._enumerationItem.needsRefresh&&this.addItemToFetch(this._enumerationItem)}var t=this._enumerationItem;this._enumerationItem=this.domTree.findNextItem(this._enumerationItem);this._enumerationItem&&this._enumerationItem.needsRefresh&&this.addItemToFetch(this._enumerationItem);return t}hasCollapsedAncestor(e){var t=this.getItemByUid(e);return this.domTree.hasCollapsedAncestor(t)}indexOfParent(e){var t=-1,i=this.domTree.findItemById(e);if(i){var n=i.parentItem;n&&(t=this.domTree.getVisibleIndexOfItem(n))}return Promise.resolve(t)}isUnderEditableItem(e){for(var t=["#doctype","script","style"];e;){if(!e.node||t.indexOf(e.node.tagLowerCase)>=0)return!1;e=e.parentItem}return!0}indexOfItem(e){var t=-1,i=this.domTree.findItemById(e);i&&(t=this.domTree.getVisibleIndexOfItem(i));return t}indexOfItemAsync(e){return Promise.resolve(this.indexOfItem(e))}potentiallyHasChildren(e){var t=this.getItemByUid(e);return!!t&&(t.potentiallyHasChildren||t.areChildrenInline)}refreshTree(){this._selectedItem=void 0;this.updateSelectedItemIndex();return this.domTree.refreshTree()}reparent(e,t,i){return this._remoteDom.reparentNode(e,t,i)}startAt(e){this._enumeratedParents={};this._enumerationItem=this.domTree.getItemAtVisibleIndex(e);this._itemsToFetch={}}selectedItemMutated(e){}selectionChanged(e){this._selectedItem=e;this.updateSelectedItemIndex()}setDragUid(e){var t;this._dragUid&&(t=this.getItemByUid(this._dragUid))&&(t.isBeingDragged=!1);this._dragUid=e;this._dragUid&&(t=this.getItemByUid(this._dragUid))&&(t.isBeingDragged=!0)}stop(){return this.fetchItems()}primeAtIndex(e,i){var n=t.PRIME_REACH_COUNT,a=e;i||(a=Math.max(0,e-n));var s=Math.min(this.count,e+n);this.startAt(a);for(var r=a;r<s;r++)this.getNext();return this.stop()}primeAtUid(e,t){var i=this.getItemByUid(e);if(i){var n=this.domTree.getVisibleIndexOfItem(i);return this.primeAtIndex(n,t)}return Common.PromiseUtilities.EmptyPromise}addItemToFetch(e){this._itemsToFetch[e.parentItem.uid]||(this._itemsToFetch[e.parentItem.uid]={indexes:[],uids:[]});e.uid?this._itemsToFetch[e.parentItem.uid].uids.push(e.uid):this._itemsToFetch[e.parentItem.uid].indexes.push(e.childIndex)}handleDomMutation(e,t,i,n){switch(e){case 0:case 1:this.updateSelectedItemIndex()}}updateSelectedItemIndex(){this._selectedItem?this._selectedItemIndex=this.domTree.getVisibleIndexOfItem(this._selectedItem):this._selectedItemIndex=void 0}}t.PRIME_REACH_COUNT=60;e.DomTreeDataSource=t}(DomTree||(DomTree={}));!function(e){"use strict";class t extends Common.Controls.VirtualizingMultiRowStackPanel{render(){this.clearSelectionHighlight();this.clearHoverHighlight();super.render()}allContainersRenderedOverride(e,t){var i=super.allContainersRenderedOverride(e,t);this._highlightWidth=this.rootElement.scrollWidth+"px";this._panelMouseYOffset=this.rootElement.offsetTop-this.scrollTop;if(this._highlightIndex>=0){var n=this.getItemRowInfoFromIndex(this._highlightIndex);n&&e<=n.topRow+n.rowsSpan&&t>=n.topRow&&this.updateSelectionHighlight(n)}return i}onApplyTemplate(){super.onApplyTemplate();this._selectionHighlightElement=null;this._hoverHighlightElement=null;this.rootElement.addEventListener("mousemove",this.handleMouseMove.bind(this));this.rootElement.addEventListener("mouseleave",this.handleMouseLeave.bind(this))}clearSelectionHighlightIndex(){this._highlightIndex=-1;this.clearSelectionHighlight()}setSelectionHighlightIndex(e){this._highlightIndex=e;var t=this.getItemRowInfoFromIndex(this._highlightIndex);t?this.updateSelectionHighlight(t):this.clearSelectionHighlightIndex()}static isInlineElement(e){return"inline"===window.getComputedStyle(e).display}clearHoverHighlight(){this.getHoverHighlightElement().style.width="0px"}clearSelectionHighlight(){this.getSelectionHighlightElement().style.width="0px"}getHoverHighlightElement(){if(!this._hoverHighlightElement){this._hoverHighlightElement=document.createElement("div");this._hoverHighlightElement.className="BPT-Hover-Highlight";this.rootElement.appendChild(this._hoverHighlightElement)}return this._hoverHighlightElement}getSelectionHighlightElement(){if(!this._selectionHighlightElement){this._selectionHighlightElement=document.createElement("div");this._selectionHighlightElement.className="BPT-Selected-Element-Highlight";this.rootElement.appendChild(this._selectionHighlightElement)}return this._selectionHighlightElement}handleMouseMove(e){var i=e.target;if(i!==this.getSelectionHighlightElement())if(i!==this.rootElement){t.isInlineElement(i)&&(i=i.offsetParent);for(var n=e.offsetY;i&&i!==this.rootElement;){n+=i.offsetTop;i=i.offsetParent}this.updateHoverHighlight(n)}else this.updateHoverHighlight(e.offsetY+this.scrollTop)}handleMouseLeave(e){this.clearHoverHighlight()}updateHighlightElement(e,t){e.style.height=t.rowsSpan*this.rowHeight+"px";e.style.top=t.topRow*this.rowHeight+"px";e.style.width=this._highlightWidth}updateHoverHighlight(e){var t=this.getContainerAt(e+this._panelMouseYOffset),i=!1;if(t){var n=t.style.top;if(n!==this.getSelectionHighlightElement().style.top){var a=this.getHoverHighlightElement();a.style.height=t.clientHeight+"px";a.style.top=n;a.style.width=this._highlightWidth;i=!0}}i||this.clearHoverHighlight()}updateSelectionHighlight(e){this.updateHighlightElement(this.getSelectionHighlightElement(),e)}getContainerAt(e){for(var t=document.elementFromPoint(0,e);t&&t!==document;){var i=t;if(i.msMatchesSelector&&i.msMatchesSelector(".BPT-listItemContainer"))return i;t=t.parentNode}return null}}e.DomTreeVirtualizingMultiRowStackPanel=t}(DomTree||(DomTree={}));!function(e){var t=F12.Tools.Utility.Assert;class i{constructor(e,t){this._relativeVisibleIndexes=new Map;this._itemVisibleIndexCache=new Map;this.listChanged=new Common.EventSource;this._remote=e;this._capabilities=t}get count(){return this._rootItem?this._rootItem.visibleRowCount:0}set count(e){throw Error("Cannot set count")}addChangeListener(e){this._changeListeners=this._changeListeners||[];this._changeListeners.push(e)}addItem(e){this.ingestItem(e)}clear(){this._uidToItemMap={};this._uidToClosingItemMap={};this._idToItemMap={};this._changeListeners=[];this._expandedItems={};this._pauseMutationRequestCount=0;this._pausedMutationQueue=[];this.clearItemIndexCache();if(this._rootItem&&0!==this._rootItem.visibleDescendantRowCount){this.reportCountChanged(this._rootItem,0,-this._rootItem.visibleDescendantRowCount);this._rootItem=null}}init(){this.clear();return this._remote.getDomNodeDetails("#root").then(t=>{if(!this._rootItem){if(t.childCount<=0)return this.init();var i=new e.DomTreeElement("#root",t.childCount,null,0,"root");this._rootItem=new e.TreeDataItem(this._capabilities,i,0,null,"#root",t.childCount);return this.ingestItem(this._rootItem)}})}ingestItem(e){if(!this._uidToItemMap[e.uid]){this._uidToItemMap[e.uid]=e;this._idToItemMap[e.id]=e;var t=Common.PromiseUtilities.EmptyPromise;"#root"!==e.uid&&"frame"!==e.tag&&"iframe"!==e.tag||(t=this.setupMutationListener(e.uid));return t.then(()=>{if(e.parentItem){e.parentItem.node.setChild(e.node,e.childIndex);e.parentItem.children[e.childIndex]=e}if(-1!==i.TAGS_TO_EXPAND.indexOf(e.tag)){if(this.expandItem(e)){this.validateTree();return this.loadFirstChildren(e)}}else this.validateTree()})}F12.Tools.Utility.Assert.failDebugOnly("Ingesting an item that already exists. uid: "+e.uid)}ingestNodeDescription(t){if(!t.tag)return Promise.resolve(null);var n=this._uidToItemMap[t.uid],a=this._uidToItemMap[t.parentUid];if(!a)return Promise.resolve(null);var s=a?a.level+1:0;!n&&a&&(n=a.children[t.childIndex]);(!n||n.uid&&n.uid!==t.uid)&&(n=this.findChildByUid(a,t.uid));if(n&&!n.needsRefresh)return Promise.resolve(n);n||((n=new e.TreeDataItem(this._capabilities,null,s,null)).childIndex=t.childIndex);var r=new e.DomTreeElement(t.uid,t.childCount,o);r.tag=t.tag;t.attributes&&t.attributes.forEach(e=>r.addAttribute(e));n.node=r;n.uid=t.uid;n.level=s;n.hasChildren=t.childCount>0;n.children=new Array(t.childCount);n.isClosingTag=!1;n.isSelfClosing=i.isSelfClosingTag(t.tag,t.childCount>0);n.textPreview=t.textPreview;n.parentItem=this.isChildOfRoot(t)?this._rootItem:this.findItemByUid(t.parentUid);var o=n.parentItem?n.parentItem.node:null;!n.isClosingTag&&n.parentItem&&n.parentItem.node.setChild(r,n.childIndex);this.reportInvalidateRowSpan(n);n.needsRefresh=!1;return this.ingestItem(n).then(()=>{this.fireChange(2,n.node);return n})}isChildOfRoot(e){return"#root"===e.parentUid}insertChild(e,t,i){var n,a=this.findItemByUid(e);if(a){this.clearItemIndexCache(a,t);if(this.findChildByUid(a,i)){F12.Tools.Utility.Assert.failDebugOnly("Adding a child that already exists");a.node.insertChildUid({uid:null,childCount:0},a.children.length);a.children.length+=1;this.changeVisibleDescendantRowCounts(a,1);this.reportCountChanged(a,a.children.length-1,1);return}var s=a.children.length;t>a.children.length?a.children[t]=null:a.children.splice(t,0,null);(n=this.getItemPlaceholder(a,t)).uid=i;a.node.insertChildUid({uid:i,childCount:0},t);a.children[t]=n;var r=a.children.length-s;a.hasChildren=!0;this.updateChildIndexes(a);if(a.isExpanded){a.visibleDescendantRowCount+=r;var o=r+(s?0:1);this.changeVisibleDescendantRowCounts(a.parentItem,o);this.hasCollapsedAncestor(a)||this.reportCountChanged(a,t,o)}}return n}findChildByUid(e,t){var i=null;e.children&&e.children.every(e=>{if(e&&e.uid===t){i=e;return!1}return!0});return i}getItemAtVisibleIndex(e){for(var t=this._rootItem,i=this.getChildIndexByVisibleIndex(t,e),n=this.getRelativeVisibleIndex(t,i);n<this.count;){var a=t.children[i];if(n===e)return a||this.getItemPlaceholder(t,i);if(n+a.visibleRowCount-1===e)return this.getClosingTreeDataItem(a);t=a;i=this.getChildIndexByVisibleIndex(t,e);n+=this.getRelativeVisibleIndex(t,i)}}getFirstItemByTag(e){return this.findItemByPredicate(t=>t.tag===e)}getVisibleIndexOfItem(e){var i=0,n=e,a=this._itemVisibleIndexCache.get(e);if(void 0!==a)return a;for(var s=()=>{e.isClosingTag&&(i+=e.visibleRowCount-1);this._itemVisibleIndexCache.set(e,i);return i};n!==this._rootItem;){for(var r=n.parentItem,o=n.childIndex-1;o>=0;o--){var l=r.children[o];if(l){var m=this._itemVisibleIndexCache.get(l);if(void 0!==m){i+=m+l.visibleRowCount;return s()}}i+=l?l.visibleRowCount:1}r!==this._rootItem&&(i+=1);n=r;t.isTrue(null!==r,"getIndexOfItem called for item that is not a descendent of current tree root")}return s()}findItemByUid(e){return this._uidToItemMap[e]}findItemById(e){return this._idToItemMap[e]}findItemByTag(e,t=0){return this.findItemByPredicate(i=>{if(i&&!i.isClosingTag&&i.tag===e){if(t<=0)return!0;t--}return!1})}findItemWithAttrNameValue(e,t,i,n=0){return this.findItemByPredicate(a=>{if(a&&!a.isClosingTag&&a.node){var s=a.node.getAttributeByName(e);if(s&&(!i&&s.value===t||i&&-1!==s.value.indexOf(t))){if(n<=0)return!0;n--}return!1}})}findItemByPredicate(e){for(var t=this._rootItem;t;){if(e(t))return t;t=this.findNextItem(t)}return null}findNextItem(e){var t;if(e)if(e.isClosingTag)this.hasNextSibling(e)?(t=this.findSibling(e))||(t=this.getItemPlaceholder(e.parentItem,e.childIndex+1)):t=e.parentItem&&"#root"!==e.parentItem.uid?this.getClosingTreeDataItem(e.parentItem):null;else if(e.isExpanded&&e.children&&e.children.length)(t=e.children[0])||(t=this.getItemPlaceholder(e,0));else if(e.isForceExpanded)t=this.getClosingTreeDataItem(e);else if(this.hasNextSibling(e))(t=this.findSibling(e))||(t=this.getItemPlaceholder(e.parentItem,e.childIndex+1));else{if(!e.parentItem)return null;t=this.getClosingTreeDataItem(e.parentItem)}return t}expandItem(e,t=!1){if(!e)return!1;if(!t&&e.areChildrenInline)return!1;if(e.isExpanded||!e.hasChildren||e.areChildrenInline||e.isSelfClosing){if(t&&!e.isForceExpanded){this.clearItemIndexCache(e.parentItem,e.childIndex);e.isExpanded=!0;e.isForceExpanded=!0;e.areChildrenInline&&(e.areChildrenInline=!1);this.changeVisibleDescendantRowCounts(e.parentItem,1);this.reportCountChanged(e,0,1)}}else{this.clearItemIndexCache(e.parentItem,e.childIndex);for(var i=0,n=0;n<e.children.length;n++){var a=e.children[n];i+=a?a.visibleRowCount:1}var s=e.visibleRowCount;e.isExpanded=!0;e.visibleDescendantRowCount=i;var r=e.visibleRowCount-s;this.changeVisibleDescendantRowCounts(e.parentItem,r);this.reportCountChanged(e,0,r)}return e.isExpanded}expandUid(e,t=!1){return this.expandItem(this.findItemByUid(e),t)}expandUidChain(e){return this._remote.getDomNodesDetails(e).then(t=>{if(t.length!==e.length){F12.DomExplorer.DomExplorerWindow.showMissingElementError();return Promise.resolve(null)}var i,n=()=>{if(0===t.length)return Promise.resolve(i?i.uid:null);var e=t.shift();e.parentUid=i?i.uid:"#root";i=e;return this.ingestNodeDescription(e).then(e=>this.expandItem(e)?n():Promise.resolve(e.uid))};return n()})}collapseItem(e){if(!e.isClosingTag||(e=this.findItemByUid(e.uid))){this.clearItemIndexCache(e.parentItem,e.childIndex);var t=-(e.visibleRowCount-1);e.isExpanded=!1;e.isForceExpanded=!1;e.visibleDescendantRowCount=0;this.changeVisibleDescendantRowCounts(e.parentItem,t);this.reportCountChanged(e,0,t)}}collapseUid(e){var t=this.findItemByUid(e);t&&this.collapseItem(t)}hasCollapsedAncestor(e){for(;e&&e.isExpanded;)e=e.parentItem;return!!e}loadFirstChildren(e,t=10){for(var i={parentUid:e.uid,childIndexes:[],childUids:[]},n=0;n<e.children.length&&n<t;n++)i.childIndexes.push(n);return 0===i.childIndexes.length?Common.PromiseUtilities.EmptyPromise:new Promise(e=>{this._remote.getBulkChildNodesDetails([i],t=>{var i=t[0];return Promise.all(i.childNodesDetails.map(e=>this.ingestNodeDescription(e))).then(e)})})}pauseDomMutations(){0===this._pauseMutationRequestCount&&this._pausedMutationQueue.length>0&&F12.Tools.Utility.Assert.failDebugOnly("The DOM mutation queue wasn't properly cleaned.");this._pauseMutationRequestCount++}refreshItem(t,i=!0){this.removeChild(t.parentItem.uid,t.childIndex,t.uid);var n=[];n.push({parentUid:t.parentItem.uid,childIndexes:[],childUids:[t.uid]});return new Promise(a=>{this._remote.getBulkChildNodesDetails(n,n=>{var s=n[0];if(s.childNodesDetails.length>0){var r=s.childNodesDetails[0];r.childIndex=t.childIndex;var o=this.insertChild(t.parentItem.uid,t.childIndex,t.uid);e.GleamingBehaviour.allowGleamingIf(i,o,()=>{this.ingestNodeDescription(r).then(a)})}else a()})})}refreshTree(){return this.init()}removeChangeListener(e){for(var t=this._changeListeners.length,i=0;i<t;i++)if(this._changeListeners[i]===e){this._changeListeners.splice(i,1);return!0}return!1}removeChild(e,t,i){var n=this.findItemByUid(e);if(n&&n.children.length>t){var a=n.children[t];if(a){a.uid&&a.uid!==i&&F12.Tools.Utility.Assert.failDebugOnly("Removing a child by childIndex, but its uid doesn't match the one we want to remove!");this.removeItem(a)}else{this._uidToItemMap[i]&&F12.Tools.Utility.Assert.failDebugOnly("Removing a non-loaded child by childIndex, but the child with this uid is actually loaded somewhere else!");this.removeChildAt(n,t)}}else n.children.length<=t&&F12.Tools.Utility.Assert.failDebugOnly("Requested a removal on a child past the end of the parent's child array!")}removeChildAt(e,t){this.clearItemIndexCache(e,t);var i=e.children[t],n=i?i.visibleRowCount:1;e.node.removeChildByIndex(t);e.children.splice(t,1);e.hasChildren=e.children.length>0;this.updateChildIndexes(e);if(e.isExpanded)if(0===e.children.length){e.visibleDescendantRowCount=0;var a=-1-n;this.changeVisibleDescendantRowCounts(e.parentItem,a);this.hasCollapsedAncestor(e.parentItem)||this.reportCountChanged(e,0,a)}else{a=-n;this.changeVisibleDescendantRowCounts(e,a);this.hasCollapsedAncestor(e)||this.reportCountChanged(e,t,a)}}removeForceExpand(e){if(e.isForceExpanded){this.clearItemIndexCache(e.parentItem,e.childIndex);e.isForceExpanded=!1;if(!e.hasChildren){this.changeVisibleDescendantRowCounts(e.parentItem,-1);this.reportCountChanged(e.parentItem,e.childIndex,-1)}return!0}return!1}removeItemByUid(e){var t=this._uidToItemMap[e];t&&this.removeItem(t)}resumeDomMutations(){this._pauseMutationRequestCount<1&&F12.Tools.Utility.Assert.failDebugOnly("Number of requests to pause mutation is negative - there must be a resumeDomMutations() without a matching pauseDomMutations()");if(1===this._pauseMutationRequestCount){this._pausedMutationQueue.forEach(e=>{e.forEach(e=>{this.domMutationHandler(e,!1)})});this._pausedMutationQueue=[]}this._pauseMutationRequestCount--}static isSelfClosingTag(e,t){return!t&&i.VOID_TAG[e.toLowerCase()]}clearItemIndexCache(e,t){this._itemVisibleIndexCache=new Map;if(e)for(;e;){var i=this._relativeVisibleIndexes.get(e);i&&(i.length=t);t=e.childIndex;e=e.parentItem}else this._relativeVisibleIndexes=new Map}getChildIndexByVisibleIndex(e,t){var i;i=e===this._rootItem?t:t-this.getVisibleIndexOfItem(e);for(var n,a,s,r=0,o=e.children.length-1;r<o;){n=Math.floor((r+o)/2);a=this.getRelativeVisibleIndex(e,n);s=e.children[n]?e.children[n].visibleRowCount:1;if(a>i)o=n-1;else{if(!(a+s<=i))return n;r=n+1}}return r}getRelativeVisibleIndex(e,t){var i=this._relativeVisibleIndexes.get(e);if(i){var n=i[t];if(void 0!==n&&null!==n)return n}else{i=[];this._relativeVisibleIndexes.set(e,i)}for(var a,s=t;s>=0&&void 0===i[s];)s--;if(0===(s+=1))a=e===this._rootItem?0:1;else{var r=e.children[s-1];a=i[s-1];a+=r?r.visibleRowCount:1}for(var o=s;o<=t;o++){var l=e.children[o];i[o]=a;a+=l?l.visibleRowCount:1}return i[t]}removeItem(e,t=!0){if(e.children)for(var i=0;i<e.children.length;i++){var n=e.children[i];n&&this.removeItem(n,!1)}t&&e.parentItem&&this.removeChildAt(e.parentItem,e.childIndex);delete this._uidToItemMap[e.uid];delete this._uidToClosingItemMap[e.uid];delete this._idToItemMap[e.id]}domMutationHandler(t,i=!0){var n=this.findItemByUid(t.targetUid);switch(t.type){case"DOMCharacterDataModified":if(n){var a=n.parentItem;a&&e.GleamingBehaviour.allowGleamingIf(i,a,()=>a.textPreview=t.parentTextPreview);var s=n.node;if(s){s.textContent=t.newValue;this.fireChange(2,s,s.parent);this.reportInvalidateRowSpan(n)}}break;case"DOMNodeRefresh":n&&this.refreshItem(n,i).then(()=>{this.fireChange(6,n.node,n.node?n.node.parent:null)});break;case"DOMAttrModified":case"DOMAttributeNameChanged":if(n){var r=n.node;if(r){var o;if(3===t.attrChange){o=5;r.removeAttribute(t.attrName)}else{var l=r.getAttributeByName(t.attrName);o=4;l?e.GleamingBehaviour.allowGleamingIf(i,l,()=>l.value=t.newValue):l=r.addAttribute({name:t.attrName,value:t.newValue})}this.fireChange(o,r,r.parent,t.attrName);this.reportInvalidateRowSpan(n)}}break;case"DOMNodeInserted":if(m=this.findItemByUid(t.parentUid)){this.insertChild(t.parentUid,t.targetChildIndex,t.targetUid);this.fireChange(0,null,m.node)}break;case"DOMNodeRemoved":var m;if(m=this.findItemByUid(t.parentUid)){this.removeChild(t.parentUid,t.targetChildIndex,t.targetUid);this.fireChange(1,n?n.node:null,m.node)}break;case"DOMSubtreeModified":if(n){e.GleamingBehaviour.allowGleaming(n,()=>n.textPreview=t.textPreview);this.reportInvalidateRowSpan(n)}}}fireChange(e,t,i,n){this._changeListeners.slice(0).forEach(a=>a(e,t,i,n))}getItemPlaceholder(t,i){var n=new e.TreeDataItem(this._capabilities,null,0,t);n.needsRefresh=!0;n.childIndex=i;t.children[i]=n;this._idToItemMap[n.id]=n;return n}handleMutation(e){this._pauseMutationRequestCount?this._pausedMutationQueue.push(e):e.forEach(e=>this.domMutationHandler(e))}setupMutationListener(e){return this._remote.addDocumentModifiedListener(e)}addDocumentModifiedListenerCallback(e){var t=JSON.parse(e);this.handleMutation(t)}changeVisibleDescendantRowCounts(e,t){if(e&&e.isExpanded){e.visibleDescendantRowCount+=t;this.changeVisibleDescendantRowCounts(e.parentItem,t)}else this.validateTree()}findSibling(e){return e.parentItem.children[e.childIndex+1]}updateChildIndexes(e){e.children.forEach((e,t)=>{e&&(e.childIndex=t)})}getClosingTreeDataItem(t){this._uidToClosingItemMap[t.uid]||(this._uidToClosingItemMap[t.uid]=new e.ClosingTreeDataItem(t));return this._uidToClosingItemMap[t.uid]}hasNextSibling(e){return e.parentItem&&e.parentItem.children&&e.parentItem.children.length-1>e.childIndex}reportCountChanged(e,t,i){if(0!==i&&t<=e.children.length){for(var n="#root"===e.uid?0:1,a=0;a<t;a++){var s=e.children[a];n+=s?s.visibleRowCount:1}var r,o=this.getVisibleIndexOfItem(e)+n;r=i>0?{action:0,newStartingIndex:o,newCount:i}:{action:1,oldStartingIndex:o,oldCount:-1*i};this.listChanged.invoke(r)}else t>e.children.length&&F12.Tools.Utility.Assert.failDebugOnly("Reporting count changed for child index beyond parent's child array")}reportInvalidateRowSpan(e){var t=this.getVisibleIndexOfItem(e);if(t>=0){var i={action:0,rowSpanIndexToInvalidate:t};this.listChanged.invoke(i)}}validateTree(){if(F12.DomExplorer.DomExplorerWindow.DEBUG_UID_DISPLAY)for(var e=this.count,i=0;i<e;i++){var n=this.getItemAtVisibleIndex(i);n||t.fail("Unexpected null item at index "+i);var a=this.getVisibleIndexOfItem(n);t.areEqual(i,a,"item index");if(a<e-1){var s=this.findNextItem(n),r=this.getVisibleIndexOfItem(s);t.areEqual(i+1,r)}this.validateVisibleRowCount(n);this.validateNodeChildren(n);if(!n.isClosingTag&&n.children)for(var o=0;o<n.children.length;o++){var l=n.children[o];if(l){t.areEqual(n.id,l.parentItem.id,"parent item");t.areEqual(o,l.childIndex,"child index")}}}}validateVisibleRowCount(e){var i=0;if(e.isExpanded&&e.children)for(var n=0;n<e.children.length;n++){var a=e.children[n];i+=a?a.visibleRowCount:1}t.areEqual(e.visibleDescendantRowCount,i,"descendant row count")}validateNodeChildren(e){if(e.node){t.areEqual(e.node.childUidCount,e.children.length);for(var i=0;i<e.children.length;i++){var n=e.children[i],a=e.node.getChild(i);n&&!n.needsRefresh&&t.areEqual(n.uid,a.uid)}}}}i.TAGS_TO_EXPAND=["root","html","body"];i.VOID_TAG={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.SparseDomTree=i}(DomTree||(DomTree={}));!function(e){"use strict";class t extends Common.Observable{static initialize(){Common.ObservableHelpers.defineProperty(t,t.IsGleamingPropertyName,!1)}static allowGleaming(e,i){if(e)try{t.markObject(e);i()}finally{t.unmarkObject(e)}else i()}static allowGleamingIf(e,i,n){e?t.allowGleaming(i,n):n()}gleam(e){if(t.isObjectMarked(e)){this.isGleaming=!0;window.clearTimeout(this._timeoutId);this._timeoutId=window.setTimeout(()=>{this.isGleaming=!1},t.GLEAM_DURATION_MS)}}static isObjectMarked(e){return!!e&&t.MarkedObjects.get(e)>0}static markObject(e){var i=t.MarkedObjects.get(e)||0;i++;t.MarkedObjects.set(e,i)}static unmarkObject(e){var i=t.MarkedObjects.get(e);0===--i?t.MarkedObjects.delete(e):i>0&&t.MarkedObjects.set(e,i)}}t.GLEAM_DURATION_MS=1e3;t.MarkedObjects=new Map;t.IsGleamingPropertyName="isGleaming";e.GleamingBehaviour=t;t.initialize()}(DomTree||(DomTree={}));!function(e){"use strict";class t extends Common.Observable{constructor(e,t,i){super();this.name=e;this.value=t;this.parentElement=i}static initialize(){Common.ObservableHelpers.defineProperty(t,t.NamePropertyName,null);Common.ObservableHelpers.defineProperty(t,t.ValuePropertyName,null)}}t.NamePropertyName="name";t.ValuePropertyName="value";e.ObservableAttribute=t;t.initialize()}(DomTree||(DomTree={}));!function(e){!function(t){"use strict";var i=Common.TraceEvents;class n extends Common.Observable{constructor(e){super();this.palette=e}static initialize(){Common.ObservableHelpers.defineProperty(n,n.CancellationColorPropertyName,null);Common.ObservableHelpers.defineProperty(n,n.ColorPropertyName,n.DEFAULT_COLOR,e=>e.onIsColorChanged(),e=>e.onIsColorChanging());Common.ObservableHelpers.defineProperty(n,n.DockElementPropertyName,null);Microsoft.Plugin.F12&&Microsoft.Plugin.F12.isTargetEdge?Common.ObservableHelpers.defineProperty(n,n.IsSlidersShownPropertyName,!0):Common.ObservableHelpers.defineProperty(n,n.IsSlidersShownPropertyName,!1);Common.ObservableHelpers.defineProperty(n,n.IsVisiblePropertyName,!1,e=>e.onIsVisibleChanged(),e=>e.onIsVisibleChanging());Common.ObservableHelpers.defineProperty(n,n.PalettePropertyName,null)}setOriginalColor(e){this.cancellationColor=e;this.color=e}onIsColorChanged(){e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_SetColorUsingColorPicker_Stop)}onIsColorChanging(){e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_SetColorUsingColorPicker_Start)}onIsVisibleChanged(){if(this.isVisible){e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_ShowColorPicker_Stop);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_COLOR_PICKER,Common.TriggerType.NotSpecified)}else{e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_HideColorPicker_Stop);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.HIDE_COLOR_PICKER,Common.TriggerType.NotSpecified)}}onIsVisibleChanging(){this.isVisible?e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_HideColorPicker_Start):e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_ShowColorPicker_Start)}}n.DEFAULT_COLOR="rgba(0, 0, 0, 1)";n.CancellationColorPropertyName="cancellationColor";n.ColorPropertyName="color";n.DockElementPropertyName="dockElement";n.IsSlidersShownPropertyName="isSlidersShown";n.IsVisiblePropertyName="isVisible";n.PalettePropertyName="palette";t.ColorPickerViewModel=n;n.initialize();class a extends Common.Observable{constructor(e){super();this.colors=new Common.ObservableCollection(a.DEFAULT_COLORS);this._paletteCollector=e;this._paletteCompletionId=null}static initialize(){Common.ObservableHelpers.defineProperty(a,a.ColorsPropertyName,null);Common.ObservableHelpers.defineProperty(a,a.IsLoadingPropertyName,!1)}runColorCollection(){if(this.isLoading)this._paletteCollector.abortPaletteCollection().then(()=>{this.clearPendingActions();this.isLoading=!1;this.runColorCollection()},this.onError.bind(this));else{this.isLoading=!0;this.colors.clear();this._paletteTimer=window.setTimeout(()=>this.onError(),2e4);this._paletteCollector.runPaletteCollection(e=>this.onColorCollectionComplete(e)).then(null,()=>this.onError())}}onColorCollectionComplete(e){this.clearPendingActions();this._paletteCompletionId=window.setImmediate(()=>{var t={},i=[];if(e){for(var n=0;n<e.length;n++){var s=Common.RgbaColor.getString(e[n]);if(s){if(!t[s]){t[s]=0;i.push(s)}t[s]++}}i.sort((e,i)=>t[i]-t[e])}0!==i.length?this.colors.resetItems(i):this.colors.resetItems(a.DEFAULT_COLORS);this.isLoading=!1})}clearPendingActions(){window.clearTimeout(this._paletteTimer);window.clearImmediate(this._paletteCompletionId)}onError(){this.isLoading&&this.onColorCollectionComplete(a.DEFAULT_COLORS)}runPaletteCollectionCallback(e){var t=JSON.parse(e);this.onColorCollectionComplete(t)}}a.DEFAULT_COLORS=["rgba(255, 255, 255, 1)","rgba(0, 0, 0, 1)"];a.ColorsPropertyName="colors";a.IsLoadingPropertyName="isLoading";t.PaletteViewModel=a;a.initialize()}(e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";class t extends Common.TemplateControl{constructor(t){super(t||"DomExplorer.domTreeItemAttributeTemplate");this.valueGleaming=new e.GleamingBehaviour}static initialize(){Common.ObservableHelpers.defineProperty(t,t.ValueGleamingPropertyName,null)}onModelChanged(){super.onModelChanged();if(this._modelPropertyChangedEventRegistration){this._modelPropertyChangedEventRegistration.unregister();this._modelPropertyChangedEventRegistration=null}if(this.model){var e=this.model;e.propertyChanged&&(this._modelPropertyChangedEventRegistration=e.propertyChanged.addHandler(this.onModelPropertyChanged.bind(this)))}}onModelPropertyChanged(t){switch(t){case e.ObservableAttribute.ValuePropertyName:this.valueGleaming.gleam(this.model)}}}t.ValueGleamingPropertyName="valueGleaming";e.ItemAttributeTemplate=t;t.initialize()}(DomTree||(DomTree={}));!function(e){"use strict";class t extends Common.Controls.ItemsControl{constructor(i){super(i);this.itemContainerControl=e.ItemAttributeTemplate;this.itemControlsPoolSizeLimit=t.ITEMS_CONTROLS_POOL_SIZE_LIMIT}}t.ITEMS_CONTROLS_POOL_SIZE_LIMIT=20;e.NodeAttributeItemsControl=t}(DomTree||(DomTree={}));!function(e){"use strict";var t=F12.Tools.Utility.Assert;class i{constructor(e){this.className=e;let t=document.createElement("div");t.classList.add(i.GUTTER_GLYPH_CSS_CLASS,e);this.gutterGlyphElement=t;this.tooltip=i.TOOLTIPS_COLLECTION[e]}get isParent(){return this.gutterGlyphElement.classList.contains(e.TreeDataItem.GUTTER_GLYPH_PARENT_CSS_CLASS)}}i.GUTTER_GLYPH_CSS_CLASS="BPT-gutterGlyph";i.TOOLTIPS_COLLECTION={"BPT-hiddenElement":"ElementHiddenGlyphTooltip","BPT-pseudoStateActive":":active","BPT-pseudoStateHover":":hover","BPT-pseudoStateFocus":":focus","BPT-pseudoStateVisited":":visited","BPT-dmbpElement":"ElementDomMutationTooltip","BPT-dmbpElementDisabled":"ElementDomMutationDisabledTooltip"};e.GutterGlyph=i;class n extends Common.Controls.TreeItemDataTemplate{constructor(t,i,a,s,r,o){super(n.getTemplateMap()[1]);this.textContentPreviewGleaming=new e.GleamingBehaviour;this._htmlElementSource=t;this._domExplorer=i;this._domTree=a;this._domTreeDataSource=s;this._styleComputer=r;this._remoteDom=o;this._nodeChangedListener=this.onNodeChanged.bind(this)}get isVirtualizingDisabled(){return this.model&&this.model.dontVirtualize}set isVirtualizingDisabled(e){this.model&&(this.model.dontVirtualize=e)}static initialize(){Common.ObservableHelpers.defineProperty(n,n.TextContentPreviewGleamingPropertyName,null);Common.ObservableHelpers.defineProperty(n,n.TextContentPreviewPropertyName,"",e=>e.onTextContentPreviewChanged());Common.ObservableHelpers.defineProperty(n,n.CollapsedNodeClosingTagClassPropertyName,n.NO_CLOSING_TAG_CLASS)}onApplyTemplate(){super.onApplyTemplate();this._mainElement=this.getNamedElement("domTreeItemDataTemplateName");t.isTrue(!!this._mainElement,"Expecting domTreeItemDataTemplateName element.");this._gutterGlyphContainer=this.getNamedElement("gutterGlyph");this._gutterGlyphContainer.addEventListener("mouseover",this.showGutterGlyphTooltip.bind(this))}onModelChanged(){super.onModelChanged();this._domTreeDataSource&&this._domTreeDataSource.domTree&&(this.model?this._domTreeDataSource.domTree.addChangeListener(this._nodeChangedListener):this._domTreeDataSource.domTree.removeChangeListener(this._nodeChangedListener));this.updateTreeItemUi()}onModelChanging(){super.onModelChanging();this.updateTemplate();this.updateTextContentPreview()}onModelPropertyChangedOverride(t){switch(t){case e.TreeDataItem.HasChildrenPropertyName:case e.TreeDataItem.IsExpandedPropertyName:case e.TreeDataItem.TextPreviewPropertyName:this.recalculateDisplayClasses();this.updateTextContentPreview();this.ownerListControl.invalidateItemRowSpan(this.model);break;case e.TreeDataItem.IsForceExpandedPropertyName:this.updateExpanderCss();this.recalculateDisplayClasses();this.ownerListControl.invalidateItemRowSpan(this.model);break;case e.TreeDataItem.NodePropertyName:this.updateTemplate();break;case e.TreeDataItem.NeedsRefreshPropertyName:this.updateTreeItemUi();break;case e.TreeDataItem.DebugUidPropertyName:this.updateDebugUid()}}updateTemplate(){if(this.model)if(this.model.node){var e=n.getTemplateMap()[this.model.node.type];if(!e)throw Error("Can not get template for node of type ="+this.model.node.type);this.templateId=e}else this.templateId="DomExplorer.domTreeEmptyItemTemplate";this.updateDebugUid()}static getTemplateMap(){if(!n.TemplateMapCache){n.TemplateMapCache={};n.TemplateMapCache[1]="DomExplorer.domTreeElementTemplate";n.TemplateMapCache[5]="DomExplorer.domTreeTextElementTemplate";n.TemplateMapCache[4]="DomExplorer.domTreeDocTypeTemplate";n.TemplateMapCache[2]="DomExplorer.domTreeCDataTemplate";n.TemplateMapCache[3]="DomExplorer.domTreeCommentTemplate"}return n.TemplateMapCache}updateTreeItemUi(){if(this.model){this.updateExpanderCss();this.recalculateDisplayClasses();this.updateDraggable(this.model)}}updateDraggable(e){var t=this.getClosestAncestor(this._mainElement,".BPT-listItemContainer");if(t){t.draggable=!!e.isDraggable&&e.isDraggable();var i=t.classList.contains("drag-item");e.isBeingDragged?i||t.classList.add("drag-item"):i&&t.classList.remove("drag-item")}}updateGutterGlyphContainer(){super.updateGutterGlyphContainer();let t="",i="",n="",a="";this._gutterGlyphContainer.innerHTML="";this.model.gutterGlyphs=this.model.gutterGlyphs.filter(e=>!e.isParent);this.model.addParentGlyphs();const{gutterGlyphs:s}=this.model;for(let r=0;r<s.length;r++){const o=s[r],{gutterGlyphElement:l}=o;o.isParent?e.TreeDataItem.PSEUDO_STATE_GLYPHS[o.className]?a+=0===a.length?`&nbsp;Element State: ${o.tooltip}`:`, ${o.tooltip}`:i+=`&nbsp;${Common.ToolWindowHelpers.loadString(o.tooltip)}<br>`:e.TreeDataItem.PSEUDO_STATE_GLYPHS[o.className]?n+=0===n.length?"Element State: "+o.tooltip:", "+o.tooltip:t+=`${Common.ToolWindowHelpers.loadString(o.tooltip)}<br>`;l.style.marginLeft=`${2*r}px`;this._gutterGlyphContainer.appendChild(l)}n.length>0&&(t=t+n+"<br>");(i.length>0||a.length>0)&&(i="Children:<br>"+i+a);this.model.glyphTooltip=t+i;const r=this.getClosestAncestor(this._mainElement,".BPT-listItemContainer");if(r&&this.model.glyphTooltip.length>0){const e=this.model.glyphTooltip.replace(/<br\s*[\/]?>/gi,";"),t=r.getAttribute("aria-label");r.setAttribute("aria-label",`${t}; ${e}`)}}showGutterGlyphTooltip(){this.model.gutterGlyphs.length>0&&Microsoft.Plugin.Tooltip.show({content:this.model.glyphTooltip,contentContainsHTML:!0})}getClosestAncestor(e,t){for(;e&&e!==document;){var i=e;if(i.msMatchesSelector&&i.msMatchesSelector(t))return i;e=e.parentNode}}onNodeChanged(e,t,i,n){if(this.model&&this.model.node===t)switch(e){case 5:case 4:this.ownerListControl.invalidateItemRowSpan(this.model)}}getAssociatedUid(e){if(e){var t=this.getClosestAncestor(e,".BPT-listItemContainer");if(t){var i=t.querySelector("DIV.BPT-HTML [data-id]");if(i)return i.getAttribute("data-id")}}}setupEditAttribute(e,t){var i=this.getAssociatedUid(e);if(i){var n=this._domExplorer.getItemByUid(i);if(n&&this._domTreeDataSource.isUnderEditableItem(n)){var a=this._domExplorer.getEditElementController();t?a.editAttributeName(n,$m(e)):a.editAttributeValue(n,$m(e))}}}onAttributeItemsDblClickHandler(e){var t=e.target,i=!1;if(t.classList.contains("BPT-HTML-Attribute")){this.setupEditAttribute(t,!0);i=!0}else if(t.classList.contains("BPT-HTML-Value")){this.setupEditAttribute(t,!1);i=!0}if(i){e.preventDefault();e.stopPropagation()}}onHTMLTagDblClickHandler(e){let t=e.target,i=!1;if(t.classList.contains("BPT-HTML-NewTag")){this.setupEditHTMLTag(t);i=!0}if(i){e.preventDefault();e.stopPropagation()}}setupEditHTMLTag(e){let t=this.getAssociatedUid(e);if(!t)return;let i=this._domExplorer.getItemByUid(t);i&&this._domTreeDataSource.isUnderEditableItem(i)&&this._domExplorer.getEditElementController().editHTMLTag(i,$m(e))}onTextContentPreviewChanged(){this.textContentPreview&&this.textContentPreview!==n.ELLIPSIS&&this.textContentPreviewGleaming.gleam(this.model)}onTextDblClickHandler(e){var t=e.target,i=!1;if(t.classList.contains("BPT-HTML-TextPreview")&&this.textContentPreview){var n=this._domExplorer.domTreeDataSource.indexOfItem(this.model.id);if(n>=0){var a=this.model.areChildrenInline;this.model.areChildrenInline=!1;this._domExplorer.domTree.expandItem(n).then(()=>{if(this.model.children&&this.model.children[0]){var e=this.model.children[0];this._domExplorer.setupEditText(e.uid,!1).then(()=>{this.model.areChildrenInline=a})}});i=!0}}else if(t.classList.contains("BPT-HTML-Text")){var s=this.getAssociatedUid(t);if(s){this._domExplorer.setupEditText(s,!1);i=!0}}if(i){e.preventDefault();e.stopPropagation()}}recalculateDisplayClasses(){this.collapsedNodeClosingTagClass=this.hasCollapsedNodeClosingTag()?"":n.NO_CLOSING_TAG_CLASS}hasCollapsedNodeClosingTag(){return!this.model.isForceExpanded&&(!this.model.isSelfClosing&&!this.model.isClosingTag&&(!this.model.isExpanded||!this.model.hasChildren))}updateDebugUid(){if(this.model&&this.model.debugUid){var e=this.getNamedControl("debugUid");if(!e){var t=this.rootElement.querySelector(".BPT-HTML-HtmlElement");if(!t)return;(e=new Common.TemplateControl("DomExplorer.debugUidTemplate")).rootElement.setAttribute("data-name","debugUid");t.appendChild(e.rootElement)}e.model=this.model.debugUid}}updateTextContentPreview(){this.model&&(this.textContentPreview=this.model.textPreview||n.ELLIPSIS)}}n.CLOSING_TAG_CLASS="BPT-HTML-ClosingTag";n.ELLIPSIS="…";n.NO_TEXTCONTENTPREVIEW_CLASS="BPT-HTML-No-TextContentPreview";n.NO_CLOSING_TAG_CLASS="BPT-HTML-No-Closing-Tag";n.OPENING_TAG_CLASS="BPT-HTML-OpeningTag";n.SELF_CLOSING_TAG_CLASS="BPT-HTML-SelfClosingTag";n.CollapsedNodeClosingTagClassPropertyName="collapsedNodeClosingTagClass";n.TextContentPreviewGleamingPropertyName="textContentPreviewGleaming";n.TextContentPreviewPropertyName="textContentPreview";e.TreeItemDataTemplate=n;n.initialize()}(DomTree||(DomTree={}));!function(e){"use strict";let t;!function(e){e.cssPropertyMetadata={animation:{name:"animation",enumValueListName:"",shorthand:!0},"animation-direction":{name:"animation-direction",enumValueListName:"AnimationDirection"},"animation-iteration-count":{name:"animation-iteration-count",enumValueListName:"Infinite"},"animation-play-state":{name:"animation-play-state",enumValueListName:"PlayState"},"animation-timing-function":{name:"animation-timing-function",enumValueListName:"TimingFunctionKeyword"},"animation-fill-mode":{name:"animation-fill-mode",enumValueListName:"AnimationFillMode"},"background-repeat":{name:"background-repeat",enumValueListName:"BackgroundRepeatStyle"},"background-position-x":{name:"background-position-x",enumValueListName:"HorizontalAlignment"},"background-position-y":{name:"background-position-y",enumValueListName:"VerticalAlignment"},"background-attachment":{name:"background-attachment",enumValueListName:"BackgroundAttachment"},"background-clip":{name:"background-clip",enumValueListName:"Box"},"background-size":{name:"background-size",enumValueListName:"BackgroundSizeScaling"},"border-radius":{name:"border-radius",enumValueListName:"",shorthand:!0},"border-top-width":{name:"border-top-width",enumValueListName:"BorderWidthType"},"border-top-style":{name:"border-top-style",enumValueListName:"BorderStyle"},"border-right-width":{name:"border-right-width",enumValueListName:"BorderWidthType"},"border-right-style":{name:"border-right-style",enumValueListName:"BorderStyle"},"border-bottom-width":{name:"border-bottom-width",enumValueListName:"BorderWidthType"},"border-bottom-style":{name:"border-bottom-style",enumValueListName:"BorderStyle"},"border-left-width":{name:"border-left-width",enumValueListName:"BorderWidthType"},"border-left-style":{name:"border-left-style",enumValueListName:"BorderStyle"},"border-collapse":{name:"border-collapse",enumValueListName:"BorderCollapse"},flex:{name:"flex",enumValueListName:"",shorthand:!0},"-ms-flex":{name:"-ms-flex",enumValueListName:"",shorthand:!0},"flex-direction":{name:"flex-direction",enumValueListName:"FlexDirection"},"flex-wrap":{name:"flex-wrap",enumValueListName:"FlexWrap"},"justify-content":{name:"justify-content",enumValueListName:"JustifyContent"},"align-items":{name:"align-items",enumValueListName:"AlignItems"},"align-self":{name:"align-self",enumValueListName:"AlignSelf"},"align-content":{name:"align-content",enumValueListName:"AlignContent"},"-ms-flex-preferred-size":{name:"-ms-flex-preferred-size",enumValueListName:"Auto"},font:{name:"font",enumValueListName:"",shorthand:!0},"font-size":{name:"font-size",enumValueListName:"FontSizes"},"font-style":{name:"font-style",enumValueListName:"FontStyle"},"font-variant":{name:"font-variant",enumValueListName:"FontVariant"},"font-weight":{name:"font-weight",enumValueListName:"FontWeight"},"line-height":{name:"line-height",enumValueListName:"Normal"},"font-stretch":{name:"font-stretch",enumValueListName:"FontStretch"},"font-size-adjust":{name:"font-size-adjust",enumValueListName:"None"},"text-transform":{name:"text-transform",enumValueListName:"TextTransform"},"text-underline-position":{name:"text-underline-position",enumValueListName:"TextUnderlinePosition"},"-ms-grid-column-align":{name:"-ms-grid-column-align",enumValueListName:"GridAlign"},"-ms-grid-row-align":{name:"-ms-grid-row-align",enumValueListName:"GridAlign"},display:{name:"display",enumValueListName:"Display"},position:{name:"position",enumValueListName:"Position"},top:{name:"top",enumValueListName:"Auto"},right:{name:"right",enumValueListName:"Auto"},bottom:{name:"bottom",enumValueListName:"Auto"},left:{name:"left",enumValueListName:"Auto"},float:{name:"float",enumValueListName:"FloatPosition"},clear:{name:"clear",enumValueListName:"Clear"},margin:{name:"margin",enumValueListName:"",shorthand:!0},"margin-top":{name:"margin-top",enumValueListName:"Auto"},"margin-right":{name:"margin-right",enumValueListName:"Auto"},"margin-bottom":{name:"margin-bottom",enumValueListName:"Auto"},"margin-left":{name:"margin-left",enumValueListName:"Auto"},padding:{name:"padding",enumValueListName:"",shorthand:!0},"padding-top":{name:"padding-top",enumValueListName:"Empty"},"padding-right":{name:"padding-right",enumValueListName:"Empty"},"padding-bottom":{name:"padding-bottom",enumValueListName:"Empty"},"padding-left":{name:"padding-left",enumValueListName:"Empty"},visibility:{name:"visibility",enumValueListName:"Visibility"},"z-index":{name:"z-index",enumValueListName:"Auto"},"layout-flow":{name:"layout-flow",enumValueListName:"LayoutFlow"},"layout-grid-char":{name:"layout-grid-char",enumValueListName:"AutoNone"},"layout-grid-line":{name:"layout-grid-line",enumValueListName:"AutoNone"},"layout-grid-mode":{name:"layout-grid-mode",enumValueListName:"LayoutGridMode"},"layout-grid-type":{name:"layout-grid-type",enumValueListName:"LayoutGridType"},"-ms-wrap-flow":{name:"-ms-wrap-flow",enumValueListName:"WrapFlow"},"-ms-wrap-margin":{name:"-ms-wrap-margin",enumValueListName:"Empty"},"-ms-wrap-through":{name:"-ms-wrap-through",enumValueListName:"WrapThrough"},"list-style":{name:"list-style",enumValueListName:"",shorthand:!0},"list-style-type":{name:"list-style-type",enumValueListName:"ListStyleType"},"list-style-position":{name:"list-style-position",enumValueListName:"ListStylePosition"},zoom:{name:"zoom",enumValueListName:"Normal"},"-ms-ime-align":{name:"-ms-ime-align",enumValueListName:"MsImeAlign"},"ime-mode":{name:"ime-mode",enumValueListName:"ImeMode"},"page-break-before":{name:"page-break-before",enumValueListName:"PageBreak"},"page-break-after":{name:"page-break-after",enumValueListName:"PageBreak"},"page-break-inside":{name:"page-break-inside",enumValueListName:"PageBreakInside"},"table-layout":{name:"table-layout",enumValueListName:"TableLayout"},"caption-side":{name:"caption-side",enumValueListName:"CaptionSide"},"empty-cells":{name:"empty-cells",enumValueListName:"EmptyCells"},"column-count":{name:"column-count",enumValueListName:"Auto"},"column-width":{name:"column-width",enumValueListName:"Auto"},"column-gap":{name:"column-gap",enumValueListName:"Normal"},"column-rule-width":{name:"column-rule-width",enumValueListName:"BorderWidthType"},"column-rule-style":{name:"column-rule-style",enumValueListName:"BorderStyle"},"break-before":{name:"break-before",enumValueListName:"Break"},"break-after":{name:"break-after",enumValueListName:"Break"},"break-inside":{name:"break-inside",enumValueListName:"BreakInside"},"column-span":{name:"column-span",enumValueListName:"ColumnSpan"},"column-fill":{name:"column-fill",enumValueListName:"ColumnFill"},width:{name:"width",enumValueListName:"Auto"},height:{name:"height",enumValueListName:"Auto"},"min-width":{name:"min-width",enumValueListName:"Auto"},"max-width":{name:"max-width",enumValueListName:"None"},"min-height":{name:"min-height",enumValueListName:"Auto"},"max-height":{name:"max-height",enumValueListName:"None"},"box-sizing":{name:"box-sizing",enumValueListName:"BoxSizing"},overflow:{name:"overflow",enumValueListName:"Overflow"},"overflow-x":{name:"overflow-x",enumValueListName:"Overflow"},"overflow-y":{name:"overflow-y",enumValueListName:"Overflow"},"-ms-overflow-style":{name:"-ms-overflow-style",enumValueListName:"OverflowStyle"},"clip-rule":{name:"clip-rule",enumValueListName:"ClipRule"},"color-interpolation-filters":{name:"color-interpolation-filters",enumValueListName:"ColorInterpolationFilters"},"fill-rule":{name:"fill-rule",enumValueListName:"ClipRule"},"stroke-dashoffset":{name:"stroke-dashoffset",enumValueListName:"Empty"},"stroke-linecap":{name:"stroke-linecap",enumValueListName:"StrokeLineCap"},"stroke-linejoin":{name:"stroke-linejoin",enumValueListName:"StrokeLineJoin"},"stroke-width":{name:"stroke-width",enumValueListName:"Empty"},"glyph-orientation-horizontal":{name:"glyph-orientation-horizontal",enumValueListName:"Empty"},"glyph-orientation-vertical":{name:"glyph-orientation-vertical",enumValueListName:"Auto"},kerning:{name:"kerning",enumValueListName:"Auto"},"pointer-events":{name:"pointer-events",enumValueListName:"PointerEvents"},"white-space":{name:"white-space",enumValueListName:"WhiteSpace"},"text-indent":{name:"text-indent",enumValueListName:"Empty"},"vertical-align":{name:"vertical-align",enumValueListName:"VerticalAlign"},"text-align":{name:"text-align",enumValueListName:"TextAlign"},"text-align-last":{name:"text-align-last",enumValueListName:"TextAlignLast"},"text-justify":{name:"text-justify",enumValueListName:"TextJustify"},direction:{name:"direction",enumValueListName:"Direction"},"alignment-baseline":{name:"alignment-baseline",enumValueListName:"AlignmentBaseline"},"baseline-shift":{name:"baseline-shift",enumValueListName:"BaselineShiftType"},"-ms-block-progression":{name:"-ms-block-progression",enumValueListName:"BlockProgression"},"dominant-baseline":{name:"dominant-baseline",enumValueListName:"DominantBaseline"},"-ms-hyphenate-limit-lines":{name:"-ms-hyphenate-limit-lines",enumValueListName:"NoLimit"},"-ms-hyphenate-limit-zone":{name:"-ms-hyphenate-limit-zone",enumValueListName:"Empty"},"-ms-hyphens":{name:"-ms-hyphens",enumValueListName:"Hyphens"},"line-break":{name:"line-break",enumValueListName:"LineBreak"},"ruby-align":{name:"ruby-align",enumValueListName:"RubyAlign"},"ruby-overhang":{name:"ruby-overhang",enumValueListName:"RubyOverhang"},"ruby-position":{name:"ruby-position",enumValueListName:"RubyPosition"},"text-anchor":{name:"text-anchor",enumValueListName:"TextAnchor"},"text-justify-trim":{name:"text-justify-trim",enumValueListName:"TextJustifyTrim"},"text-kashida":{name:"text-kashida",enumValueListName:"Empty"},"text-kashida-space":{name:"text-kashida-space",enumValueListName:"Empty"},"text-overflow":{name:"text-overflow",enumValueListName:"TextOverflow"},"unicode-bidi":{name:"unicode-bidi",enumValueListName:"UnicodeBidi"},"word-break":{name:"word-break",enumValueListName:"WordBreak"},"letter-spacing":{name:"letter-spacing",enumValueListName:"Normal"},"word-spacing":{name:"word-spacing",enumValueListName:"Normal"},"word-wrap":{name:"word-wrap",enumValueListName:"WordWrap"},"writing-mode":{name:"writing-mode",enumValueListName:"WritingMode"},"-ms-text-combine-horizontal":{name:"-ms-text-combine-horizontal",enumValueListName:"MsTextCombineHorizontal"},"-ms-text-size-adjust":{name:"-ms-text-size-adjust",enumValueListName:"AutoNone"},"-ms-scroll-rails":{name:"-ms-scroll-rails",enumValueListName:"ScrollRailed"},"-ms-scroll-snap-type":{name:"-ms-scroll-snap-type",enumValueListName:"SnapType"},"-ms-scroll-chaining":{name:"-ms-scroll-chaining",enumValueListName:"ScrollChained"},"-ms-scroll-limit":{name:"-ms-scroll-limit",enumValueListName:"",shorthand:!0},"-ms-scroll-limit-x-min":{name:"-ms-scroll-limit-x-min",enumValueListName:"Empty"},"-ms-scroll-limit-y-min":{name:"-ms-scroll-limit-y-min",enumValueListName:"Auto"},"-ms-scroll-limit-x-max":{name:"-ms-scroll-limit-x-max",enumValueListName:"Auto"},"-ms-scroll-limit-y-max":{name:"-ms-scroll-limit-y-max",enumValueListName:"Empty"},"-ms-scroll-translation":{name:"-ms-scroll-translation",enumValueListName:"ScrollTranslation"},"-ms-content-zooming":{name:"-ms-content-zooming",enumValueListName:"ContentZooming"},"-ms-content-zoom-limit-min":{name:"-ms-content-zoom-limit-min",enumValueListName:"Empty"},"-ms-content-zoom-limit-max":{name:"-ms-content-zoom-limit-max",enumValueListName:"Empty"},"-ms-content-zoom-snap-type":{name:"-ms-content-zoom-snap-type",enumValueListName:"SnapType"},"-ms-content-zoom-chaining":{name:"-ms-content-zoom-chaining",enumValueListName:"ScrollChained"},"-ms-touch-action":{name:"-ms-touch-action",enumValueListName:"TouchAction"},"touch-action":{name:"touch-action",enumValueListName:"TouchAction"},"-ms-touch-select":{name:"-ms-touch-select",enumValueListName:"Grippers"},"transform-style":{name:"transform-style",enumValueListName:"TransformStyle"},"backface-visibility":{name:"backface-visibility",enumValueListName:"BackfaceVisibility"},"-ms-interpolation-mode":{name:"-ms-interpolation-mode",enumValueListName:"InterpolationMode"},cursor:{name:"cursor",enumValueListName:"Cursor"},outline:{name:"outline",enumValueListName:"",shorthand:!0},"outline-width":{name:"outline-width",enumValueListName:"BorderWidthType"},"outline-style":{name:"outline-style",enumValueListName:"OutlineStyle"},"-ms-user-select":{name:"-ms-user-select",enumValueListName:"UserSelect"},"-ms-high-contrast-adjust":{name:"-ms-high-contrast-adjust",enumValueListName:"AutoNone"},background:{name:"background",enumValueListName:"",shorthand:!0},"background-color":{name:"background-color",enumValueListName:"ColorName"},border:{name:"border",enumValueListName:"",shorthand:!0},"border-top":{name:"border-top",enumValueListName:"",shorthand:!0},"border-right":{name:"border-right",enumValueListName:"",shorthand:!0},"border-bottom":{name:"border-bottom",enumValueListName:"",shorthand:!0},"border-left":{name:"border-left",enumValueListName:"",shorthand:!0},"border-image-repeat":{name:"border-image-repeat",enumValueListName:"BorderImageRepeat"},"border-width":{name:"border-width",enumValueListName:"",shorthand:!0},"border-style":{name:"border-style",enumValueListName:"",shorthand:!0},"border-color":{name:"border-color",enumValueListName:"",shorthand:!0},"border-bottom-color":{name:"border-bottom-color",enumValueListName:"ColorName"},"border-left-color":{name:"border-left-color",enumValueListName:"ColorName"},"border-right-color":{name:"border-right-color",enumValueListName:"ColorName"},"border-top-color":{name:"border-top-color",enumValueListName:"ColorName"},color:{name:"color",enumValueListName:"ColorName"},"column-rule":{name:"column-rule",enumValueListName:"",shorthand:!0},"column-rule-color":{name:"column-rule-color",enumValueListName:"ColorName"},"flood-color":{name:"flood-color",enumValueListName:"ColorName"},"lighting-color":{name:"lighting-color",enumValueListName:"ColorName"},"outline-color":{name:"outline-color",enumValueListName:"ColorName"},"scrollbar-3dlight-color":{name:"scrollbar-3dlight-color",enumValueListName:"ColorName"},"scrollbar-arrow-color":{name:"scrollbar-arrow-color",enumValueListName:"ColorName"},"scrollbar-base-color":{name:"scrollbar-base-color",enumValueListName:"ColorName"},"scrollbar-darkshadow-color":{name:"scrollbar-darkshadow-color",enumValueListName:"ColorName"},"scrollbar-face-color":{name:"scrollbar-face-color",enumValueListName:"ColorName"},"scrollbar-highlight-color":{name:"scrollbar-highlight-color",enumValueListName:"ColorName"},"scrollbar-shadow-color":{name:"scrollbar-shadow-color",enumValueListName:"ColorName"},"scrollbar-track-color":{name:"scrollbar-track-color",enumValueListName:"ColorName"},transition:{name:"transition",enumValueListName:"",shorthand:!0},"stop-color":{name:"stop-color",enumValueListName:"ColorName"},"animation-delay":{name:"animation-delay",enumValueListName:"Empty"},"animation-duration":{name:"animation-duration",enumValueListName:"Empty"},"animation-name":{name:"animation-name",enumValueListName:"Empty"},"background-image":{name:"background-image",enumValueListName:"Empty"},"background-origin":{name:"background-origin",enumValueListName:"Empty"},"background-position":{name:"background-position",enumValueListName:"Empty"},"border-bottom-left-radius":{name:"border-bottom-left-radius",enumValueListName:"Empty"},"border-bottom-right-radius":{name:"border-bottom-right-radius",enumValueListName:"Empty"},"border-image":{name:"border-image",enumValueListName:"Empty",shorthand:!0},"border-image-outset":{name:"border-image-outset",enumValueListName:"Empty"},"border-image-slice":{name:"border-image-slice",enumValueListName:"Empty"},"border-image-source":{name:"border-image-source",enumValueListName:"Empty"},"border-image-width":{name:"border-image-width",enumValueListName:"Empty"},"border-spacing":{name:"border-spacing",enumValueListName:"Empty"},"border-top-left-radius":{name:"border-top-left-radius",enumValueListName:"Empty"},"border-top-right-radius":{name:"border-top-right-radius",enumValueListName:"Empty"},"box-shadow":{name:"box-shadow",enumValueListName:"Empty"},clip:{name:"clip",enumValueListName:"Empty"},"clip-path":{name:"clip-path",enumValueListName:"Empty"},columns:{name:"columns",enumValueListName:"Empty"},content:{name:"content",enumValueListName:"Empty"},"counter-increment":{name:"counter-increment",enumValueListName:"Empty"},"counter-reset":{name:"counter-reset",enumValueListName:"Empty"}}}(t=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){class t{initialize(e=!1){this.canAddStyleProperty=!1;this.canAddStyleRule=!1;this.canCopyElementsWithStyle=!1;this.canDeleteNodes=!1;this.canDragAndDropElements=!1;this.canEditAttributes=!1;this.canEditLayout=!1;this.canEditPropertyName=!1;this.canEditPropertyValue=!1;this.canEditRuleSelector=!1;this.canPasteElements=!1;this.canRemoveStyleProperties=!1;this.canRemoveStyleRules=!1;this.canRevertStyles=!1;this.canToggleComputedPropertyEnable=!1;this.canToggleStylePropertyEnable=!1;this.canToggleStyleSubpropertyEnable=!1;this.canViewSource=!1;this.showChangeBars=!1;this.showChangesPane=!1;this.showEventsPane=!1;this.showHighlightingButton=!1;this.showSelectElementButton=!1;this.showSourceFileLinks=!1;this.showSourceTooltips=!1;this.showEventsPane=!0;if(!e){this.canAddStyleProperty=!0;this.canAddStyleRule=!0;this.canCopyElementsWithStyle=!0;this.canDeleteNodes=!0;this.canDragAndDropElements=!0;this.canEditAttributes=!0;this.canEditLayout=!0;this.canEditPropertyName=!0;this.canEditPropertyValue=!0;this.canEditRuleSelector=!0;this.canPasteElements=!0;this.canRemoveStyleProperties=!0;this.canRemoveStyleRules=!0;this.canRevertStyles=!0;this.canToggleComputedPropertyEnable=!0;this.canToggleStylePropertyEnable=!0;this.canToggleStyleSubpropertyEnable=!0;this.canViewSource=!0;this.showChangeBars=!0;this.showChangesPane=!0;this.showHighlightingButton=!0;this.showSelectElementButton=!0;this.showSourceFileLinks=!0;this.showSourceTooltips=!0}}}e.Capabilities=t}(t=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";class t{constructor(e,t,i,n){this._htmlElementSource=e;this._domExplorer=t;this._domTree=i;this._dataSource=n}cancel(){this._editor&&this._editor.forcedClose()}edit(e,t,i){var n=t?Number.MAX_VALUE:20;this._editor=new Dom.ValueEditor(document,this._domExplorer,window,n,null,i);this._editor.doTrim=!1;var a,s=e.getElement().get(0),r=this.getContainerCell(s);if(t){var o=new Dom.ValueEditorKey("Enter",!1,!0);this._editor.stopPropagation=!1;this._editor.addExitKeys(o);this._editor.enableTabsInData();this._editor.removeExitKeys(Dom.ValueEditorKey.EnterKey);this._editor.shouldContinueEdit=(e=>e.className.indexOf("BPT-stackPanel")>-1&&"DIV"===e.tagName||e.className.indexOf("hostedF12")>-1&&"HTML"===e.tagName);s=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(r,"domTreeItemDataTemplateName").firstElementChild;a=.8*r.clientWidth}else{var l=s.getBoundingClientRect();a=r.getBoundingClientRect().right-l.left-20}var m=this.createOnSizeChangeHandler(e);this.preEditRenderPrep(e);var d=this._editor.show(s,a,void 0,m);e.isBeingEdited=!0;t&&(this._editor.textBox.style.overflowY="hidden");return d.then(i=>{e.isBeingEdited=!1;if(!i.wasCancelled&&i.oldValue!==i.newValue){this._domTree.selectedItem=e.parentItem;t?this._domExplorer.setEditAsHtmlText(e.uid,i.newValue):this._domExplorer.editTextRemote(e.uid,i.newValue)}this._domExplorer.focusToTree();this.postEditRenderCleanup(e);this._editor=null})}getContainerCell(e){return F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,"domTreeItemDataTemplateNameCell")}preEditRenderPrep(e){this._htmlElementSource.querySelector("#treeContainer .BPT-listItemContainer[data-id='"+e.id+"']");e.dontVirtualize=!0;this._dataSource.domTree.pauseDomMutations()}postEditRenderCleanup(e){this._domTree.invalidateItemRowSpan(e);e.dontVirtualize=!1;this._dataSource.domTree.resumeDomMutations()}createOnSizeChangeHandler(e){return t=>{this._domTree.invalidateItemRowSpan(e)}}}e.TextEditController=t}(DomTree||(DomTree={}));!function(e){!function(t){!function(t){var i=e.DomMutationBreakpoints.DmbpManagerBase,n=Common.Itc.ServiceLocator;const a="BPT-dmbpElement",s="BPT-dmbpElementDisabled",r="AriaChangeStateAdd",o="AriaChangeStateRemove",l="ElementDomMutationTooltip";let m=e=>Common.ToolWindowHelpers.loadString(e);class d extends i{constructor(e){super(e);this._domExplorer=e;this._service=n.get("DmbpService");this.registerForServiceEvents();this._service.catchupState().then(e=>{const t=e.breakpoints.filter(e=>"number"!=typeof e.pendingBreakpointId),i=e.breakpoints.filter(e=>"number"==typeof e.pendingBreakpointId);t.forEach(e=>{"number"!=typeof e.pendingBreakpointId&&this.addBreakpoint(e.elementUniqueId,e.breakpointId,e.types,e.isEnabled,e.selector,e.documentUrl)});this.addPendingBreakpoints(i.map(e=>({documentUrl:e.documentUrl,pendingId:e.pendingBreakpointId,selector:e.selector,types:e.types,wasPreviouslyEnabled:e.isEnabled})));this.fireEvent("caughtUp",void 0)})}setDomMutationBreakpoint(e,t){return this._service.setDomMutationBreakpoint(e,t)}attemptRebind(e){return this._service.attemptDmbpRebind(e)}removeDomMutationBreakpoint(e){return this._service.removeDomMutationBreakpoint(e)}setDomMutationBreakpointEnabledState(e,t){return this._service.setDomMutationBreakpointEnabledState(e,t)}deletePendingBreakpoint(e){return this._service.deletePendingDmbpBreakpoint(e)}onDmbpSet(e,t,i,n,a,s){let o=`${m(r)} ${m(l)} ${a}`;this.narratorHelper.tryNarratorAnnounce(o);this.renderDmbpGutterGlyph(e,n)}renderDmbpGutterGlyphs(){this.getBreakpoints().forEach(e=>{this.renderDmbpGutterGlyph(e.elementUniqueId,e.isEnabled)})}renderDmbpGutterGlyph(e,t){this._domExplorer.findItemByUid(e).then(e=>{if(!e)return;let i=t?a:s;e.ensureHasGutterGlyph(i,!0);this._domExplorer.renderGutterGlyph(e,!1)})}onDmbpUnbound(e,t,i){if(i){let i=`${m(o)} ${m(l)} ${t}`;this.narratorHelper.tryNarratorAnnounce(i);this._domExplorer.findItemByUid(e).then(e=>{if(e){e.ensureHasGutterGlyph(a,!1);e.ensureHasGutterGlyph(s,!1);this._domExplorer.renderGutterGlyph(e,!1)}})}}onDmbpEnabledChanged(e,t){this._domExplorer.findItemByUid(e).then(e=>{if(t){e.ensureHasGutterGlyph(a,!0);e.ensureHasGutterGlyph(s,!1)}else{e.ensureHasGutterGlyph(a,!1);e.ensureHasGutterGlyph(s,!0)}this._domExplorer.renderGutterGlyph(e,!1)})}registerForServiceEvents(){this._service.addEventListener("breakpointSet",t=>{this.fireEvent("domMutationBreakpointSet",t);this.addBreakpoint(t.elementUniqueId,t.breakpointId,t.types,t.isEnabled,t.selector,t.documentUrl);let i={elementId:t.elementUniqueId,type:t.types.join(","),generatedSelector:t.selector,breakpointId:t.breakpointId,isTopLevelDocument:t.documentUrl===this._domExplorer.pageUri};e.DomExplorer.Telemetry.analytics.log(e.DomExplorer.Telemetry.EventName.DMBP_SET,i)});this._service.addEventListener("breakpointUnbound",e=>{this.fireEvent("domMutationBreakpointUnbound",e);this.unbindBreakpoint(e.breakpointId,e.isRemoved)});this._service.addEventListener("breakpointEnabledChanged",e=>{this.changeEnabledState(e.breakpointId,e.isEnabled);this.fireEvent("domMutationBreakpointEnabledChanged",e)});this._service.addEventListener("breakpointPendingRegistration",e=>{this.addPendingBreakpoints(e.breakpoints);this.fireEvent("domMutationBreakpointPendingRegistration",e)});this._service.addEventListener("pageChanged",e=>{this.unloadDocument(e.oldDocumentUrl,e.isTopLevelDocument);this.fireEvent("domMutationBreakpointPageChanged",e)});this._service.addEventListener("breakpointBindingFailed",e=>{this.fireEvent("domMutationBreakpointBindingFailed",e)});this._service.addEventListener("pendingBreakpointRemoved",e=>{const t=e.pendingBreakpointId;this.onPendingBreakpointRemoved(t)})}}t.DmbpManager=d}(t.DomExplorer||(t.DomExplorer={}))}(e.Tools||(e.Tools={}))}(F12||(F12={}));!function(e){!function(e){"use strict";let t;!function(e){class t extends Common.Observable{constructor(e,i){super();this._domExplorer=i;this._dmbpManager=e;Common.ObservableHelpers.defineProperty(t,t.IS_VISIBLE_PROPERTY_NAME,!1,e=>e.onIsVisibleChanged())}onIsVisibleChanged(){}}t.IS_VISIBLE_PROPERTY_NAME="isVisible";e.DmbpPane=t}(t=e.BPList||(e.BPList={}))}(e.DomMutations||(e.DomMutations={}))}(Dom||(Dom={}));!function(e){"use strict";let t;!function(e){e.enumMetadata={AlignmentBaseline:{name:"AlignmentBaseline",values:["baseline","before-edge","text-before-edge","after-edge","text-after-edge","central","middle","ideographic","alphabetic","hanging","mathematical","auto"]},AllNone:{name:"AllNone",values:["all","none"]},AnimationDirection:{name:"AnimationDirection",values:["normal","alternate","reverse","alternate-reverse"]},AnimationFillMode:{name:"AnimationFillMode",values:["none","forwards","backwards","both"]},Any:{name:"Any",values:["any"]},Auto:{name:"Auto",values:["auto"]},AutoNone:{name:"AutoNone",values:["auto","none"]},BackfaceVisibility:{name:"BackfaceVisibility",values:["visible","hidden"]},BackgroundAttachment:{name:"BackgroundAttachment",values:["scroll","fixed","local"]},BackgroundRepeatStyle:{name:"BackgroundRepeatStyle",values:["repeat-x","repeat-y","repeat","space","round","no-repeat"]},BackgroundSizeScaling:{name:"BackgroundSizeScaling",values:["contain","cover"]},BaselineShiftType:{name:"BaselineShiftType",values:["baseline","sub","super"]},BlockProgression:{name:"BlockProgression",values:["tb","rl","bt","lr"]},BorderCollapse:{name:"BorderCollapse",values:["collapse","separate"]},BorderImageRepeat:{name:"BorderImageRepeat",values:["stretch","repeat","round","space"]},BorderStyle:{name:"BorderStyle",values:["none","solid","dashed","dotted","double","groove","hidden","inset","outset","ridge","window-inset"]},BorderWidthType:{name:"BorderWidthType",values:["thin","medium","thick"]},Box:{name:"Box",values:["border-box","padding-box","content-box"]},AlignItems:{name:"AlignItems",values:["flex-start","center","flex-end","baseline","stretch"]},FlexDirection:{name:"FlexDirection",values:["row","row-reverse","column","column-reverse"]},AlignSelf:{name:"AlignSelf",values:["auto","flex-start","center","flex-end","baseline","stretch"]},AlignContent:{name:"AlignContent",values:["flex-start","center","flex-end","space-between","space-around","stretch"]},FlexWrap:{name:"FlexWrap",values:["nowrap","wrap","wrap-reverse"]},JustifyContent:{name:"JustifyContent",values:["flex-start","center","flex-end","space-between","space-around"]},BoxSizing:{name:"BoxSizing",values:["content-box","border-box"]},Break:{name:"Break",values:["auto","always","avoid","left","right","page","column","avoid-page","avoid-column"]},BreakInside:{name:"BreakInside",values:["auto","avoid","avoid-page","avoid-column"]},Buffering:{name:"Buffering",values:["none","metadata","auto"]},Button:{name:"Button",values:["submit","reset","button"]},CaptionSide:{name:"CaptionSide",values:["top","bottom","left","right"]},Clear:{name:"Clear",values:["none","left","right","both"]},ClipRule:{name:"ClipRule",values:["nonzero","evenodd"]},ColorInterpolationFilters:{name:"ColorInterpolationFilters",values:["auto","sRGB","linearRGB"]},ColumnFill:{name:"ColumnFill",values:["auto","balance"]},ColumnSpan:{name:"ColumnSpan",values:["none","all"]},Command:{name:"Command",values:["command","checkbox","radio"]},ContentZooming:{name:"ContentZooming",values:["none","zoom"]},ContentZoomStyle:{name:"ContentZoomStyle",values:["immutable","mutable"]},ContentZoomSnapStyle:{name:"ContentZoomSnapStyle",values:["flat","well"]},Cursor:{name:"Cursor",values:["auto","pointer","default","context-menu","help","none","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll"]},Direction:{name:"Direction",values:["ltr","rtl"]},Display:{name:"Display",values:["inline","block","none","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-ms-flexbox","-ms-grid","-ms-inline-grid","-ms-inline-flexbox","run-in","ruby","ruby-base","ruby-text","list-item","ruby-base-container","ruby-text-container","flex","inline-flex"]},DominantBaseline:{name:"DominantBaseline",values:["auto","use-script","no-change","reset-size","alphabetic","hanging","ideographic","mathematical","central","middle","text-after-edge","text-before-edge"]},Empty:{name:"Empty",values:["empty"]},EmptyCells:{name:"EmptyCells",values:["show","hide"]},Enctype:{name:"Enctype",values:["application/x-www-form-urlencoded","multipart/form-data","text/plain"]},Fit:{name:"Fit",values:["fill","hidden","meet","slice"]},FloatPosition:{name:"FloatPosition",values:["none","left","right"]},FontFamilyGenericType:{name:"FontFamilyGenericType",values:["serif","sans-serif","cursive","fantasy","monospace"]},FontSizes:{name:"FontSizes",values:["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},FontStretch:{name:"FontStretch",values:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded","wider","narrower"]},FontStyle:{name:"FontStyle",values:["normal","italic","oblique"]},FontType:{name:"FontType",values:["caption","icon","menu","message-box","small-caption","status-bar"]},FontVariant:{name:"FontVariant",values:["normal","small-caps"]},FontWeight:{name:"FontWeight",values:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},FormMethod:{name:"FormMethod",values:["get","post"]},GridAlign:{name:"GridAlign",values:["start","center","end","stretch"]},GridLength:{name:"GridLength",values:["auto","none","min-content","max-content"]},Grippers:{name:"Grippers",values:["none","grippers"]},HorizontalAlignment:{name:"HorizontalAlignment",values:["left","center","right"]},HyphenateLimitLast:{name:"HyphenateLimitLast",values:["none","always","column","page","spread"]},Hyphens:{name:"Hyphens",values:["none","manual","auto"]},MsImeAlign:{name:"MsImeAlign",values:["auto","after"]},ImeMode:{name:"ImeMode",values:["auto","active","inactive","disabled"]},Infinite:{name:"Infinite",values:["infinite"]},Input:{name:"Input",values:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]},Inset:{name:"Inset",values:["inset"]},InteractionChaining:{name:"InteractionChaining",values:["none","parent"]},InterpolationMode:{name:"InterpolationMode",values:["nearest-neighbor","bicubic"]},LayoutFlow:{name:"LayoutFlow",values:["horizontal","vertical-ideographic"]},LayoutGridMode:{name:"LayoutGridMode",values:["both","none","line","char"]},LayoutGridType:{name:"LayoutGridType",values:["loose","strict","fixed"]},LinearGradientHorizontalAlignment:{name:"LinearGradientHorizontalAlignment",values:["left","right"]},LinearGradientVerticalAlignment:{name:"LinearGradientVerticalAlignment",values:["top","bottom"]},LineBreak:{name:"LineBreak",values:["normal","strict"]},ListStylePosition:{name:"ListStylePosition",values:["inside","outside"]},ListStyleType:{name:"ListStyleType",values:["disc","none","decimal","square","decimal-leading-zero","lower-roman","upper-roman","lower-greek","lower-latin","upper-latin","armenian","georgian","lower-alpha","upper-alpha","circle","upper-greek"]},Marks:{name:"Marks",values:["crop","cross","none"]},Menu:{name:"Menu",values:["context","toolbar"]},MsTextCombineHorizontal:{name:"MsTextCombineHorizontal",values:["none","all","digits"]},NoLimit:{name:"NoLimit",values:["no-limit"]},None:{name:"None",values:["none"]},NoneNormal:{name:"NoneNormal",values:["none","normal"]},Normal:{name:"Normal",values:["normal"]},OnOff:{name:"OnOff",values:["on","off"]},OpenQuote:{name:"OpenQuote",values:["open-quote","close-quote","no-open-quote","no-close-quote"]},OutlineStyle:{name:"OutlineStyle",values:["none","dotted","dashed","solid","double","groove","ridge","inset","outset","window-inset"]},Overflow:{name:"Overflow",values:["visible","hidden","scroll","auto"]},OverflowStyle:{name:"OverflowStyle",values:["scrollbar","-ms-autohiding-scrollbar","none","auto"]},PageBreak:{name:"PageBreak",values:["auto","always","avoid","left","right"]},PageBreakInside:{name:"PageBreakInside",values:["auto","avoid"]},PlayState:{name:"PlayState",values:["running","paused"]},PointerEvents:{name:"PointerEvents",values:["visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","auto"]},Position:{name:"Position",values:["static","relative","absolute","fixed","page","-ms-device-fixed"]},RadialGradientExtent:{name:"RadialGradientExtent",values:["closest-side","closest-corner","farthest-side","farthest-corner"]},RadialGradientShape:{name:"RadialGradientShape",values:["circle","ellipse"]},RubyAlign:{name:"RubyAlign",values:["auto","left","center","right","distribute-letter","distribute-space","line-edge"]},RubyOverhang:{name:"RubyOverhang",values:["auto","whitespace","none"]},RubyPosition:{name:"RubyPosition",values:["above","inline"]},Sandbox:{name:"Sandbox",values:["allow-same-origin","allow-forms","allow-scripts"]},Scope:{name:"Scope",values:["row","col","rowgroup","colgroup"]},ScrollChained:{name:"ScrollChained",values:["none","chained"]},ScrollTranslation:{name:"ScrollTranslation",values:["vertical-to-horizontal","none","inherit"]},ScrollRailed:{name:"ScrollRailed",values:["none","railed"]},Shape:{name:"Shape",values:["circle","default","poly","rect"]},SnapType:{name:"SnapType",values:["none","proximity","mandatory"]},StartEnd:{name:"StartEnd",values:["start","end"]},StrokeLineCap:{name:"StrokeLineCap",values:["butt","round","square"]},StrokeLineJoin:{name:"StrokeLineJoin",values:["miter","round","bevel"]},TableLayout:{name:"TableLayout",values:["auto","fixed"]},TextAlign:{name:"TextAlign",values:["left","right","center","justify"]},TextAlignLast:{name:"TextAlignLast",values:["auto","left","right","center","justify"]},TextAnchor:{name:"TextAnchor",values:["start","middle","end"]},TextAutoSpace:{name:"TextAutoSpace",values:["ideograph-alpha","ideograph-numeric","ideograph-parenthesis","ideograph-space"]},TextDecoration:{name:"TextDecoration",values:["none","underline","overline","line-through","blink"]},TextJustify:{name:"TextJustify",values:["auto","distribute","distribute-all-lines","distribute-center-last","inter-cluster","inter-ideograph","inter-word","kashida","newspaper"]},TextJustifyTrim:{name:"TextJustifyTrim",values:["none","punctuation","punct-and-kana"]},TextOverflow:{name:"TextOverflow",values:["ellipsis","clip"]},TextTransform:{name:"TextTransform",values:["capitalize","uppercase","lowercase","none"]},TextUnderlinePosition:{name:"TextUnderlinePosition",values:["above","below","auto"]},TimingFunctionKeyword:{name:"TimingFunctionKeyword",values:["ease","linear","ease-in","ease-out","ease-in-out","step-start","step-end"]},TouchAction:{name:"TouchAction",values:["pan-x","pan-y","pinch-zoom","manipulation","double-tap-zoom","none","auto","cross-slide-x","cross-slide-y"]},TransformStyle:{name:"TransformStyle",values:["flat"]},TrueFalse:{name:"TrueFalse",values:["true","false"]},UnicodeBidi:{name:"UnicodeBidi",values:["normal","embed","bidi-override"]},UserSelect:{name:"UserSelect",values:["none","text","element","auto"]},VerticalAlign:{name:"VerticalAlign",values:["top","middle","bottom","super","auto","baseline","sub","text-top","text-bottom"]},VerticalAlignment:{name:"VerticalAlignment",values:["top","center","bottom"]},Visibility:{name:"Visibility",values:["visible","hidden","collapse"]},WhiteSpace:{name:"WhiteSpace",values:["normal","pre","nowrap","pre-wrap","pre-line"]},WordBreak:{name:"WordBreak",values:["normal","break-all","keep-all"]},WordWrap:{name:"WordWrap",values:["normal","break-word"]},Wrap:{name:"Wrap",values:["soft","hard"]},WrapFlow:{name:"WrapFlow",values:["auto","both","start","end","clear","minimum","maximum"]},WrapThrough:{name:"WrapThrough",values:["wrap","none"]},WritingMode:{name:"WritingMode",values:["lr-tb","rl-tb","tb-rl","bt-rl","tb-lr","bt-lr","lr-bt","rl-bt","lr","rl","tb"]},YesNoAuto:{name:"YesNoAuto",values:["yes","no","auto"]},ColorName:{name:"ColorName",values:["aliceBlue","antiqueWhite","aqua","aquamarine","azure","beige","bisque","black","blanchedAlmond","blue","blueViolet","brown","burlyWood","cadetBlue","chartreuse","chocolate","coral","cornflowerBlue","cornsilk","crimson","cyan","darkBlue","darkCyan","darkGoldenrod","darkGray","darkGrey","darkGreen","darkKhaki","darkMagenta","darkOliveGreen","darkOrange","darkOrchid","darkRed","darkSalmon","darkSeaGreen","darkSlateBlue","darkSlateGray","darkSlateGrey","darkTurquoise","darkViolet","deepPink","deepSkyBlue","dimGray","dimGrey","dodgerBlue","fireBrick","floralWhite","forestGreen","fuchsia","gainsboro","ghostWhite","gold","goldenrod","gray","green","greenYellow","grey","honeydew","hotPink","indianRed","indigo","ivory","khaki","lavender","lavenderBlush","lawnGreen","lemonChiffon","lightBlue","lightCoral","lightCyan","lightGoldenrodYellow","lightGreen","lightGray","lightGrey","lightPink","lightSalmon","lightSeaGreen","lightSkyBlue","lightSlateGray","lightSlateGrey","lightSteelBlue","lightYellow","lime","limeGreen","linen","magenta","maroon","mediumAquamarine","mediumBlue","mediumOrchid","mediumPurple","mediumSeaGreen","mediumSlateBlue","mediumSpringGreen","mediumTurquoise","mediumVioletRed","midnightBlue","mintCream","mistyRose","moccasin","navajoWhite","navy","oldLace","olive","oliveDrab","orange","orangeRed","orchid","paleGoldenrod","paleGreen","paleTurquoise","paleVioletRed","papayaWhip","peachPuff","peru","pink","plum","powderBlue","purple","rebeccapurple","red","rosyBrown","royalBlue","saddleBrown","salmon","sandyBrown","seaGreen","seashell","sienna","silver","skyBlue","slateBlue","slateGray","slateGrey","snow","springGreen","steelBlue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whiteSmoke","yellow","yellowGreen"]}}}(t=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){e.htmlMetadata={a:{tagName:"a",attributes:{href:{name:"href"},target:{name:"target"},rel:{name:"rel"},media:{name:"media"},hreflang:{name:"hreflang"},type:{name:"type"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},abbr:{tagName:"abbr",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},address:{tagName:"address",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},area:{tagName:"area",attributes:{alt:{name:"alt"},coords:{name:"coords"},shape:{name:"shape",enumValueListName:"Shape"},href:{name:"href"},target:{name:"target"},rel:{name:"rel"},media:{name:"media"},hreflang:{name:"hreflang"},type:{name:"type"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},article:{tagName:"article",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},aside:{tagName:"aside",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},audio:{tagName:"audio",attributes:{src:{name:"src"},preload:{name:"preload",enumValueListName:"Buffering"},autoplay:{name:"autoplay"},loop:{name:"loop"},controls:{name:"controls"},muted:{name:"muted"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},b:{tagName:"b",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},base:{tagName:"base",attributes:{href:{name:"href"},target:{name:"target"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},basefont:{tagName:"basefont",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},bdo:{tagName:"bdo",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},bgsound:{tagName:"bgsound",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},big:{tagName:"big",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},blockquote:{tagName:"blockquote",attributes:{cite:{name:"cite"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},body:{tagName:"body",attributes:{onafterprint:{name:"onafterprint"},onbeforeprint:{name:"onbeforeprint"},onbeforeunload:{name:"onbeforeunload"},onblur:{name:"onblur"},onerror:{name:"onerror"},onfocus:{name:"onfocus"},onhashchange:{name:"onhashchange"},onload:{name:"onload"},onmessage:{name:"onmessage"},onoffline:{name:"onoffline"},ononline:{name:"ononline"},onpagehide:{name:"onpagehide"},onpageshow:{name:"onpageshow"},onpopstate:{name:"onpopstate"},onredo:{name:"onredo"},onresize:{name:"onresize"},onstorage:{name:"onstorage"},onundo:{name:"onundo"},onunload:{name:"onunload"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},br:{tagName:"br",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},button:{tagName:"button",attributes:{autofocus:{name:"autofocus"},disabled:{name:"disabled"},form:{name:"form"},formaction:{name:"formaction"},formenctype:{name:"formenctype",enumValueListName:"Enctype"},formmethod:{name:"formmethod",enumValueListName:"FormMethod"},formnovalidate:{name:"formnovalidate"},formtarget:{name:"formtarget"},name:{name:"name"},type:{name:"type",enumValueListName:"Input"},value:{name:"value"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},canvas:{tagName:"canvas",attributes:{width:{name:"width"},height:{name:"height"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},caption:{tagName:"caption",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},cite:{tagName:"cite",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},code:{tagName:"code",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},col:{tagName:"col",attributes:{span:{name:"span"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},colgroup:{tagName:"colgroup",attributes:{span:{name:"span"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},command:{tagName:"command",attributes:{checked:{name:"checked"},command:{name:"command"},disabled:{name:"disabled"},icon:{name:"icon"},label:{name:"label"},radiogroup:{name:"radiogroup"},type:{name:"type",enumValueListName:"Command"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},datalist:{tagName:"datalist",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},dd:{tagName:"dd",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},del:{tagName:"del",attributes:{cite:{name:"cite"},datetime:{name:"datetime"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},dfn:{tagName:"dfn",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},dir:{tagName:"dir",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},div:{tagName:"div",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},dl:{tagName:"dl",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},dt:{tagName:"dt",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},em:{tagName:"em",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},embed:{tagName:"embed",attributes:{src:{name:"src"},type:{name:"type"},width:{name:"width"},height:{name:"height"},hidden:{name:"hidden"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},fieldset:{tagName:"fieldset",attributes:{disabled:{name:"disabled"},form:{name:"form"},name:{name:"name"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},figcaption:{tagName:"figcaption",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},figure:{tagName:"figure",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},footer:{tagName:"footer",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},form:{tagName:"form",attributes:{"accept-charset":{name:"accept-charset"},action:{name:"action"},autocomplete:{name:"autocomplete",enumValueListName:"OnOff"},enctype:{name:"enctype",enumValueListName:"Enctype"},method:{name:"method",enumValueListName:"FormMethod"},name:{name:"name"},novalidate:{name:"novalidate"},target:{name:"target"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},h1:{tagName:"h1",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},h2:{tagName:"h2",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},h3:{tagName:"h3",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},h4:{tagName:"h4",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},h5:{tagName:"h5",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},h6:{tagName:"h6",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},head:{tagName:"head",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},header:{tagName:"header",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},hgroup:{tagName:"hgroup",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},hr:{tagName:"hr",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},html:{tagName:"html",attributes:{manifest:{name:"manifest"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},i:{tagName:"i",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},iframe:{tagName:"iframe",attributes:{src:{name:"src"},srcdoc:{name:"srcdoc"},name:{name:"name"},sandbox:{name:"sandbox",enumValueListName:"Sandbox"},seamless:{name:"seamless"},width:{name:"width"},height:{name:"height"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},img:{tagName:"img",attributes:{alt:{name:"alt"},src:{name:"src"},usemap:{name:"usemap"},ismap:{name:"ismap"},width:{name:"width"},height:{name:"height"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},input:{tagName:"input",attributes:{accept:{name:"accept"},alt:{name:"alt"},autocomplete:{name:"autocomplete",enumValueListName:"OnOff"},autofocus:{name:"autofocus"},checked:{name:"checked"},disabled:{name:"disabled"},form:{name:"form"},formaction:{name:"formaction"},formenctype:{name:"formenctype",enumValueListName:"Enctype"},formmethod:{name:"formmethod",enumValueListName:"FormMethod"},formnovalidate:{name:"formnovalidate"},formtarget:{name:"formtarget"},height:{name:"height"},list:{name:"list"},max:{name:"max"},maxlength:{name:"maxlength"},min:{name:"min"},multiple:{name:"multiple"},name:{name:"name"},pattern:{name:"pattern"},placeholder:{name:"placeholder"},readonly:{name:"readonly"},required:{name:"required"},size:{name:"size"},src:{name:"src"},step:{name:"step",enumValueListName:"Any"},type:{name:"type",enumValueListName:"Input"},value:{name:"value"},width:{name:"width"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},ins:{tagName:"ins",attributes:{cite:{name:"cite"},datetime:{name:"datetime"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},kbd:{tagName:"kbd",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},keygen:{tagName:"keygen",attributes:{autofocus:{name:"autofocus"},challenge:{name:"challenge"},disabled:{name:"disabled"},form:{name:"form"},keytype:{name:"keytype"},name:{name:"name"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},label:{tagName:"label",attributes:{form:{name:"form"},for:{name:"for"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},legend:{tagName:"legend",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},li:{tagName:"li",attributes:{value:{name:"value"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},link:{tagName:"link",attributes:{href:{name:"href"},rel:{name:"rel"},media:{name:"media"},hreflang:{name:"hreflang"},type:{name:"type"},sizes:{name:"sizes"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},map:{tagName:"map",attributes:{name:{name:"name"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},mark:{tagName:"mark",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},menu:{tagName:"menu",attributes:{type:{name:"type",enumValueListName:"Menu"},label:{name:"label"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},meta:{tagName:"meta",attributes:{name:{name:"name"},"http-equiv":{name:"http-equiv"},content:{name:"content"},charset:{name:"charset"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},nav:{tagName:"nav",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},noframes:{tagName:"noframes",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},noscript:{tagName:"noscript",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},object:{tagName:"object",attributes:{data:{name:"data"},type:{name:"type"},name:{name:"name"},usemap:{name:"usemap"},form:{name:"form"},width:{name:"width"},height:{name:"height"},typemustmatch:{name:"typemustmatch"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},ol:{tagName:"ol",attributes:{reversed:{name:"reversed"},start:{name:"start"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},optgroup:{tagName:"optgroup",attributes:{disabled:{name:"disabled"},label:{name:"label"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},option:{tagName:"option",attributes:{disabled:{name:"disabled"},label:{name:"label"},selected:{name:"selected"},value:{name:"value"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},output:{tagName:"output",attributes:{for:{name:"for"},form:{name:"form"},name:{name:"name"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},p:{tagName:"p",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},param:{tagName:"param",attributes:{name:{name:"name"},value:{name:"value"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},pre:{tagName:"pre",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},progress:{tagName:"progress",attributes:{value:{name:"value"},max:{name:"max"},form:{name:"form"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},q:{tagName:"q",attributes:{cite:{name:"cite"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},rp:{tagName:"rp",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},rt:{tagName:"rt",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},ruby:{tagName:"ruby",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},s:{tagName:"s",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},samp:{tagName:"samp",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},script:{tagName:"script",attributes:{src:{name:"src"},async:{name:"async"},defer:{name:"defer"},type:{name:"type"},charset:{name:"charset"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},section:{tagName:"section",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},select:{tagName:"select",attributes:{autofocus:{name:"autofocus"},disabled:{name:"disabled"},form:{name:"form"},multiple:{name:"multiple"},name:{name:"name"},required:{name:"required"},size:{name:"size"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},small:{tagName:"small",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},source:{tagName:"source",attributes:{src:{name:"src"},type:{name:"type"},media:{name:"media"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},span:{tagName:"span",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},strike:{tagName:"strike",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},strong:{tagName:"strong",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},style:{tagName:"style",attributes:{media:{name:"media"},type:{name:"type"},scoped:{name:"scoped"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},sub:{tagName:"sub",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},sup:{tagName:"sup",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},table:{tagName:"table",attributes:{summary:{name:"summary"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},tbody:{tagName:"tbody",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},td:{tagName:"td",attributes:{colspan:{name:"colspan"},rowspan:{name:"rowspan"},headers:{name:"headers"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},textarea:{tagName:"textarea",attributes:{autofocus:{name:"autofocus"},cols:{name:"cols"},disabled:{name:"disabled"},form:{name:"form"},maxlength:{name:"maxlength"},name:{name:"name"},placeholder:{name:"placeholder"},readonly:{name:"readonly"},required:{name:"required"},rows:{name:"rows"},wrap:{name:"wrap",enumValueListName:"Wrap"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},tfoot:{tagName:"tfoot",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},th:{tagName:"th",attributes:{colspan:{name:"colspan"},rowspan:{name:"rowspan"},headers:{name:"headers"},scope:{name:"scope",enumValueListName:"Scope"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},thead:{tagName:"thead",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},title:{tagName:"title",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},tr:{tagName:"tr",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},track:{tagName:"track",attributes:{src:{name:"src"},srclang:{name:"srclang"},kind:{name:"kind"},label:{name:"label"},default:{name:"default"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},tt:{tagName:"tt",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},u:{tagName:"u",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},ul:{tagName:"ul",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},var:{tagName:"var",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},video:{tagName:"video",attributes:{src:{name:"src"},poster:{name:"poster"},preload:{name:"preload",enumValueListName:"Buffering"},autoplay:{name:"autoplay"},loop:{name:"loop"},controls:{name:"controls"},width:{name:"width"},height:{name:"height"},muted:{name:"muted"},accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}},wbr:{tagName:"wbr",attributes:{accesskey:{name:"accesskey"},class:{name:"class"},contenteditable:{name:"contenteditable",enumValueListName:"TrueFalse"},contextmenu:{name:"contextmenu"},dir:{name:"dir",enumValueListName:"Direction"},draggable:{name:"draggable",enumValueListName:"TrueFalse"},dropzone:{name:"dropzone"},hidden:{name:"hidden"},id:{name:"id"},inert:{name:"inert"},spellcheck:{name:"spellcheck",enumValueListName:"TrueFalse"},style:{name:"style"},tabindex:{name:"tabindex"},title:{name:"title"},translate:{name:"translate"}}}}}(t=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){!function(t){"use strict";class i{constructor(){this._cssMetadata=e.DomExplorer.cssPropertyMetadata;this._enumValueLists=e.DomExplorer.enumMetadata;this._htmlMetadata=e.DomExplorer.htmlMetadata;this._htmlTagNames=[];var t;for(t in this._htmlMetadata)this._htmlTagNames.push(t);this.sortEnumValueListContents()}getCssShorthandList(){var e=[];for(var t in this._cssMetadata)this._cssMetadata[t].shorthand&&e.push(this._cssMetadata[t].name);e.sort();return e}getCssValueList(e){var t=this._cssMetadata[e];if(!t||!t.enumValueListName)return null;var i=this._enumValueLists[t.enumValueListName].values;i.sort();return i}getHtmlValueList(e,t){var i=this._htmlMetadata[e];if(!i)return null;var n=i[t];if(!n)return null;var a=this._enumValueLists[n.enumValueListName].values;a.sort();return a}getHtmlTagNames(){return this._htmlTagNames}getHtmlAttributeNames(e){var t,i=[],n=this._htmlMetadata[e];if(!n)return null;for(t in n)i.push(t);i.sort();return i}sortEnumValueListContents(){for(var e in this._enumValueLists){this._enumValueLists[e].values.sort()}}}t.CssAndHtmlMetadataSource=i}(e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";var t=Common.TraceEvents;let i;!function(i){class n extends Common.Intellisense.StaticContentProvider{constructor(e,t){super(!1);this._metadataSource=t;this.updateChoices(e)}get hasChoices(){return this._hasChoices}updateChoices(e){var t=[],i=this._metadataSource.getCssValueList(e);if(i){this._hasChoices=!0;for(var n=0;n<i.length;n++)t.push(new Common.Intellisense.IntellisenseChoice(i[n],""))}else this._hasChoices=!1;this.choices=t}clearChoices(){this.choices=[];this._hasChoices=!1}fireSetFilterStartEvent(){}fireSetFilterEndEvent(){}fireUpdateLayoutStartEvent(){e.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_StylesTab_Intellisense_Start)}fireUpdateLayoutEndEvent(){e.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_StylesTab_Intellisense_Stop)}}i.StylePropertyValueIntellisenseProvider=n}(i=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";class t{constructor(e,t){this.selection=e;this.editMode=t}}e.StyleEditLocation=t;class i extends Common.ModelView.ListModel{constructor(e,t,i){super();this._remoteDom=e;this._domExplorer=t;this._styleCache=i;this._collapsedProperties={};this._styleProperties=[];this.listSource=((e,t)=>{const i=t[0];this._styleCache.updateView(i,t=>{this._styles=t;e(this._styles.rules);this._collapsedProperties={};this.currentSelection=null;this._styles.rules.forEach(e=>{e.properties.forEach(e=>{this._collapsedProperties[e.uid]=!0})})});0===this._styleProperties.length&&this._remoteDom.getComputedStyles(i).then(e=>{if(e){this._styleProperties=[];var t=e[0];for(var i in t)this._styleProperties.push(i);var n=this.cssAndHtmlMetadataSource.getCssShorthandList();for(var i in n)this._styleProperties.push(n[i]);this._styleProperties.sort()}})});this.cssAndHtmlMetadataSource=new F12.DomExplorer.CssAndHtmlMetadataSource}getRulesGenerator(){let e=[],t=(e=e.concat(this._styles.rules)).length,i=0;return function(){return i>=t?null:e[i++]}}static clearCollapsedRules(){i.CollapsedRules={}}forEachRule(e){this._styles.rules.forEach(e)}addUpdateListeners(e){this._styles.addUpdateListener(e)}select(e){this.selectionLastTime=this.currentSelection;this.currentSelection=e}previousSelection(e,t,i=!0){if(t)return e.container?e.container.container||e.container:this.previousRule(e);var n,a;if(e.isRule){if((n=this.previousRule(e))&&this.isExpanded(n)&&!this.isEmpty(n)){a=this.lastProperty(n);return i&&this.isExpanded(a)&&!this.isEmpty(a)?this.lastProperty(a):a}return n}if(e.isProperty)return(a=this.previousProperty(e))?i&&this.isExpanded(a)&&!this.isEmpty(a)?this.lastProperty(a):a:e.container;a=this.previousProperty(e);return i&&a||e.container}nextSelection(e,t,i=!0){if(t){var n=e.isRule?e:e.isProperty?e.container:e.container.container;return this.nextRule(n)}if(this.isExpanded(e)&&!this.isEmpty(e)&&(i||e.isRule))return this.firstProperty(e);if(e.isRule)return this.nextRule(e);var a=this.nextProperty(e);return a&&(i||a.isProperty)?a:e.isSubProperty&&i?(a=this.nextProperty(e.container))||this.nextRule(e.container.container):this.nextRule(e.container)}outSelection(){return this.currentSelection.container}inSelection(){var e=this.currentSelection;return this.firstProperty(e)}firstRule(){return this._styles.rules[0]}lastRule(){return this._styles.rules[this._styles.rules.length-1]}lastSelection(e=!0){var t=this.lastRule();if(this.isExpanded(t)&&!this.isEmpty(t)){t=this.lastProperty(t);this.isExpanded(t)&&!this.isEmpty(t)&&(t=this.lastProperty(t))}return t}nextRule(e){let t,i=this.getRulesGenerator();for(;t=i();)if(t==e){return i()}return null}previousRule(e){let t,i=this.getRulesGenerator(),n=null;for(;t=i();){if(t==e)return n;n=t}return null}firstProperty(e){for(var t=0;t<e.properties.length;t++){var i=e.properties[t];if(i.isApplied)return i}}lastProperty(e){for(var t=e.properties.length-1;t>=0;t--){var i=e.properties[t];if(i.isApplied)return i}}nextProperty(e){for(var t=e.container.properties,i=!1,n=0;n<t.length;n++){var a=t[n];if(i&&a.isApplied)return a;a===e&&(i=!0)}}previousProperty(e){for(var t,i=e.container.properties,n=0;n<i.length;n++){var a=i[n];if(a===e)return t;a.isApplied&&(t=a)}}isExpanded(e){return!e||(e.isRule?!i.CollapsedRules[e.uid]:e.properties.length>0&&!this._collapsedProperties[e.uid])}isEmpty(e){for(var t=0;t<e.properties.length;t++)if(e.properties[t].isApplied)return!1;return!0}setExpanded(e,t){if(e.isRule||e.isProperty&&e.properties.length){var n=e.isRule?i.CollapsedRules:this._collapsedProperties;t?delete n[e.uid]:n[e.uid]=!0}}getStyleProperties(){return this._styleProperties}getPropertyById(e){return this._styles.getPropertyById(e)}getRuleById(e){return this._styles.getRuleById(e)}createNewRule(e){return this._styles.createNewRule(e)}getNextEdit(e,i,n,a){var s,r,o=!1,l=!1;if(!n&&!e.isDeleted){if(!a&&1===i)return new t(e,2);if(a&&2===i)return new t(e,1)}for(var m=this._styles.rules,d=0;d<m.length;d++){var h=m[d];if(h===e&&a){if(r)return r;l=!0}if(!h.isInlined&&!h.isDeleted){r=new t(h,4);if(o)return r;s||(s=r)}h!==e||a||(o=!0);if(!h.isDeleted&&this.isExpanded(h)){for(var u=h.properties,c=h.properties.length,p=0;p<c;p++){var g=u[p];if(g===e)if(a){if(r)return r;l=!0}else o=!0;else if(!g.isDeleted){r=new t(g,1);if(o)return r;s||(s=r);r=new t(g,2)}}var y=h.properties[c-1];if(e!==y||!n){r=new t(c?y:h,3);if(o)return r;s||(s=r)}}}return l&&r?r:o&&s?s:new t(m[0],3)}hoverElement(e,t){t?this._domExplorer.temporaryShowElementHighlight(e):this._domExplorer.restoreElementHighlight()}enableEditChaining(){this._remoteDom.enableEditChaining()}disableEditChaining(){this._remoteDom.disableEditChaining()}startSingleEdit(){this._remoteDom.startSingleEdit()}endSingleEdit(){this._remoteDom.endSingleEdit()}handleFileLinkClick(e,t,i){Microsoft.Plugin.F12.Debugger.showDocument(decodeURI(e),t,i)}}i.CollapsedRules={};e.StyleModel=i}(Dom||(Dom={}));!function(e){"use strict";var t=Common.TraceEvents;let i;!function(i){class n extends Common.Intellisense.StaticContentProvider{constructor(e){super(!1);for(var t=[],i=e.getStyleProperties(),n=0;n<i.length;n++)t.push(new Common.Intellisense.IntellisenseChoice(i[n],""));this.choices=t}fireSetFilterStartEvent(){}fireSetFilterEndEvent(){}fireUpdateLayoutStartEvent(){e.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_StylesTab_Intellisense_Start)}fireUpdateLayoutEndEvent(){e.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_StylesTab_Intellisense_Stop)}}i.StylePropertyIntellisenseProvider=n}(i=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";var t=Common.Templating,i=Common.TraceEvents;class n extends Common.ModelView.ListView{constructor(e,t,i,a,r,o,l,m){super(i,a,r,o,e.capabilities,m,l);this._domExplorer=e;this._htmlElementSource=i;this._rightPaneElement=i.getElementById("paneRight");this._remoteDom=t;this._stylesListElement=this.htmlElementSource.getElementById(this.listViewDivId);this._model=o;this._domExplorer.horizontalPane.addResizeListener(this);this._scrollContainer=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(this._stylesListElement,n.CssScrollContainer);this._hotElement=void 0;this._hotElementTimeoutToken=0;this._editCancelled=new Common.EventSource;this._editCompleted=new Common.EventSource;this._styleViewMenuController=new s(this,this.htmlElementSource.getElementById("paneRight"),this._stylesListElement,this._domExplorer.capabilities);this.addEventHandlers()}get currentSelection(){var e=this._model.currentSelection;if(!e){var t=this.currentElementSelection;if(t){e=this.findClosestItem(t);this._model.select(e)}}return e}set currentSelection(e){this._model.select(e);var t=this.findElementForSelection(e);if(t){this.setFocus(t);t.setAttribute("aria-selected",!0);let e=this.findElementForSelection(this._model.selectionLastTime);e&&e.removeAttribute("aria-selected")}else this._rightPaneElement.focus()}get currentElementSelection(){return this._stylesListElement.querySelector(":focus")}get ruleCount(){return this._stylesListElement.children.length}set ruleCount(e){throw new Error("set ruleCount not supported")}get propertyCount(){var e=0;this._model.forEachRule(t=>{e+=t.properties.length});return e}get editCancelled(){return this._editCancelled}get editCompleted(){return this._editCompleted}static isRuleExpanded(e){return"true"===(e=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssRule)).getAttribute("aria-expanded")}static isPropertyExpanded(e){return"true"===(e=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssProperty)).getAttribute("aria-expanded")}onPropertyChange(e,t,i){switch(e){case 3:this.onPropertyWinningRuleChange(t,i);break;case 4:this.onPropertyEnableChange(t,i);break;case 5:this.onPropertyAppliedChange(t,i);break;case 6:this.onPropertyStatusChange(t,i);break;case 0:this.onPropertyUidChange(t,i);break;case 1:this.onPropertyNameChange(t,i);break;case 2:this.onPropertyValueChange(t,i);break;case 7:this.onPropertyClearSubproperties(t);break;case 8:this.onPropertyAddSubproperty(t,i);break;case 9:this.onPropertySelectChange(t);break;case 10:this.onPropertyRemoveChange(t,i);break;case 11:this.setPropertyChangeBar(t)}this.checkPropertyColorUpdate(t)}onRuleChange(e,t,i){switch(e){case 0:this.onRuleUidChange(t,i);break;case 1:this.onRuleSelectorChange(t,i);break;case 2:this.onRuleAddPropertyChange(t,i);break;case 5:this.onRuleSelectChange(t);break;case 6:this.setRuleChangeBar(t);break;case 7:this.setRuleFileLinkTooltipChange(t,i);break;case 3:this.onRuleAddRuleChange(t);break;case 4:this.onRuleRemoveChange(t);break;case 8:this.setRuleFileLinkChange(t,i)}}postViewProcessing(){super.postViewProcessing();this._model.forEachRule(e=>{if(!this._model.isExpanded(e)){var t=this.findElementForSelection(e);this.toggleExpander(t,n.CssRule)}});this._model.addUpdateListeners(this);this.adjustToPaneSize();var e=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(this._stylesListElement,n.CssRule);e&&(e.tabIndex=1);this._model.forEachRule(e=>{e.properties.forEach(e=>{if(e.isEnabledIndeterminate){this.onPropertyChange(4,e,void 0);this.setPropertyChangeBar(e)}})});if(this._htmlElementSource.querySelector(":focus")===this._rightPaneElement){var t;if(this._selectionBeforeRefresh){t=this._model.getRuleById(this._selectionBeforeRefresh)||this._model.getPropertyById(this._selectionBeforeRefresh);this._selectionBeforeRefresh=null}t||(t=this._model.firstRule());t&&(this.currentSelection=t.isSubProperty?t.container:t)}if(this._refreshCallback){this._refreshCallback();this._refreshCallback=null}}addEventHandlers(){this.addMouseEventHandlers();this.addKeyboardEventHandlers();this.addMutationEventHandlers();this.addCustomEventHandler()}toggleExpander(e,t){return new Promise((i,n)=>{if(e=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,t)){var a="true"!==e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",a?"true":"false");var s=this.findClosestItem(e);s.isRule&&this.setRuleChangeBar(s,!1);i()}else n(new Error("Expander not found in view"))})}togglePropertyCheckbox(e){return e.toggleEnable()}refresh(e){this._refreshCallback=e;this._rightPaneElement.focus();var t=this.currentSelection;t&&(this._selectionBeforeRefresh=t.uid);this._domExplorer.refreshCSSView()}revertSelection(e){return new Promise((t,i)=>{e.revert().then(()=>{e.isRule&&!this._model.isExpanded(e)&&this.toggleExpander(this.findElementForSelection(e),n.CssRule);t()})})}removeRuleOrProperty(e,t){this.findElementForSelection(e);if(e.isProperty){var i=e;i.commitDelete(!0).then(()=>{this.currentSelection=this.currentSelection;this.narratorAnnounceRemoval(i.name);t&&t(!0)})}else{var n=e;n.isInlined||n.commitDelete().then(()=>{this.narratorAnnounceRemoval(n.selectorText);this.currentSelection=this.currentSelection;t&&t(!0)})}}narratorAnnounceRemoval(e){let t=`${Common.ToolWindowHelpers.loadString(n.ARIA_REMOVED_ID)} ${e}`;this._domExplorer.tryNarratorAnnounce(t)}addProperty(e,t,i,a=!0){var s=this.findElementForSelection(e);F12.DomExplorer.DomExplorerWindow.findAncestorByClass(s,n.CssItem);this._model.isExpanded(e)||this.toggleExpander(s,n.CssRule);var r=this._model.nextSelection(t,!1,!1),o=e.addProperty(null,!1,!r||r.isRule?null:r);this._model.setExpanded(o,!1);var l=(e,t)=>{var i=this.insertNewPropertyIntoView(s,o);if(i){Common.ToolWindowHelpers.scrollIntoView(i,this._scrollContainer);a&&this.prepareEditBox(o,e)}t(o)};return new Promise(e=>{i?o.commitName(i).then(()=>l(2,e)):l(1,e)})}addRule(e,t){var i="",a=this._domExplorer.getSelectedDomTreeItem();if(a){var s=a.node.getAttributeByName("id");if(i=s?s.value:void 0)i="#"+i.trim();else{(s=a.node.getAttributeByName("class"))&&(i=s.value);i=i?"."+i.trim().split(" ")[0]:a.tag}}var r=this._model.createNewRule(e||i),o=this.insertNewRuleIntoView(r);this.adjustToPaneSize();Common.ToolWindowHelpers.scrollIntoView(o,this._scrollContainer);return new Promise((i,a)=>{if(e)this.addProperty(r,r,t,!1).then(e=>{i(r.properties[0])},a);else{F12.DomExplorer.DomExplorerWindow.findDescendentByClass(o,n.CssSelector);this._selectionInEditMode=r;this.editSelector(r,e=>{if(e)i(r.properties[0]);else{r.commitDelete();a()}})}})}findClosestItem(e){var t;(i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssSubProperty))&&(t=this._model.getPropertyById(n.getSubpropertyId(i)));t||(i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssProperty))&&(t=this._model.getPropertyById(n.getPropertyId(i)));if(!t){(i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssRule))&&(t=this._model.getRuleById(n.getRuleId(i)))}if(!t){var i;(i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssItem))&&(i=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssRule))&&(t=this._model.getRuleById(n.getRuleId(i)))}return t}select(e){var t=this.findClosestItem(e);if(t){this.currentSelection=t;return!0}return!1}findRuleElement(e){return e>=0&&e<this._stylesListElement.children.length?this._stylesListElement.children[e]:null}findPropertyElementForRule(e,t){for(var i=F12.DomExplorer.DomExplorerWindow.findAllDescendentsByClass(e,n.CssPropertyName),a=0;a<i.length;a++){var s=i[a];if(s.textContent===t)return F12.DomExplorer.DomExplorerWindow.findAncestorByClass(s,n.CssProperty)}return null}findSubPropertyElementForProperty(e,t){for(var i=F12.DomExplorer.DomExplorerWindow.findAllDescendentsByClass(e,n.CssSubPropertyName),a=0;a<i.length;a++){var s=i[a];if(s.textContent===t)return F12.DomExplorer.DomExplorerWindow.findAncestorByClass(s,n.CssSubProperty)}return null}setPropertyValue(e,t){var i=n.getPropertyId(e);return this._model.getPropertyById(i).commitValue(t)}setPropertyName(e,t){var i=n.getPropertyId(e);return this._model.getPropertyById(i).commitName(t)}setPropertyRevert(e){var t=n.getPropertyId(e),i=this._model.getPropertyById(t);return this.revertSelection(i)}setRuleSelector(e,t){var i=n.getRuleId(e);return this._model.getRuleById(i).commitSelector(t)}setRuleRevert(e){var t=n.getRuleId(e),i=this._model.getRuleById(t);return this.revertSelection(i)}onPaneResize(e,t,i){this._stylesListElement.style.maxWidth=i+"px"}getRuleByElement(e){var t=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,n.CssRule),i=n.getRuleId(t);return this._model.getRuleById(i)}openTargetElementFileLink(e){F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.VIEW_SOURCE,Common.TriggerType.Ui);const t=e.styleHref||e.fileUrl;this._model.handleFileLinkClick(t,e.fileLine,e.fileColumn)}enterEditMode(e,t){var i=(e,t)=>{this._selectionInEditMode=e;setTimeout(t,0)};e.isSubProperty&&(e=e.container);if(e.isProperty&&!e.isDeleted){var n=e;switch(t){case 1:i(n,()=>{this.editPropertyName(n)});return!0;case 2:i(n,()=>{this.editPropertyValue(n)});return!0}}var a=e.isRule?e:e.container;if(!a.isDeleted)switch(t){case 3:i(null,()=>{this.addProperty(a,e)});return!0;case 4:i(a,()=>{this.editSelector(a)});return!0}this._selectionInEditMode=null;return!1}findElementForSelection(e,t){return e?this._stylesListElement.querySelector("[data-uid='"+e.uid+"']"+(t?" ."+t:"")):null}renderView(){this.clearView();this.preViewProcessing();for(let e=0;e<this.model.length;e++){this.preItemViewProcessing(e);let t=this.renderItem(this.model.item(e),"BPT-List-Item");this.listRoot.appendChild(t);this.postItemViewProcessing(e,t)}this.postViewProcessing();this.renderViewCallback&&this.renderViewCallback()}get isFocusWithinInlineStyle(){var e=this.currentElementSelection;if(!e)return!1;var t=this.findClosestItem(e);if(!t)return!1;var i=t.isRule?t:t.container;return i&&i.isInlined}static isSubProperty(e){return e.classList.contains(n.CssSubProperty)}static isProperty(e){return e.classList.contains(n.CssProperty)}static isRule(e){return e.classList.contains(n.CssRule)}static getSubpropertyId(e){return(e=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssSubProperty))?e.getAttribute(n.ATTR_UID):null}static getPropertyId(e){return(e=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssProperty)).getAttribute(n.ATTR_UID)}static getRuleId(e){return(e=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssRule)).getAttribute(n.ATTR_UID)}static findAncestorRuleOrProperty(e){var t=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssSubProperty);if(t)return t;var i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssProperty);if(i)return i;var a=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssRule);return a||null}onPropertyWinningRuleChange(e,t){var i=this.findPropertyElement(e);if(i){e.isStrikeThrough?i.classList.add(n.CssNotWinning):i.classList.remove(n.CssNotWinning);var a=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssPropertyAriaOverridden);a&&(a.innerText=e.ariaOverriddenString)}}adjustToPaneSize(){var e=this._domExplorer.horizontalPane;this.onPaneResize(e.leftWidth,e.centerWidth,e.rightWidth)}validateHotElement(){for(var e=this._hotElement;e;){if(e===this._stylesListElement)return!0;e=e.parentNode}this._hotElementTimeoutToken&&window.clearTimeout(this._hotElementTimeoutToken);this._hotElement=void 0;return!1}addMouseEventHandlers(){this.addHandler(this.listRoot,"mousedown",null,e=>{this._isInEditModeOnMouseDown=!!this._selectionInEditMode;if(this._hotElementTimeoutToken){window.clearTimeout(this._hotElementTimeoutToken);this._hotElementTimeoutToken=0}this._hotElement=e.target;this._hotElementTimeoutToken=window.setTimeout(()=>{this._hotElement=void 0;this._hotElementTimeoutToken=0},250);return!0});this.addHandler(this.listRoot,"click",null,t=>{this.validateHotElement();var i=this._hotElement||t.target,a=this._isInEditModeOnMouseDown;this._isInEditModeOnMouseDown=!1;if(i.classList.contains(n.CssInheritedFromTarget)){var s=t.target.getAttribute("data-id");e.Utility.domTreeSelect(s);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.SELECT_INHERITED_FROM_TARGET,Common.TriggerType.Ui);return!1}var r=this.findClosestItem(i),o=this._domExplorer.capabilities;if(r){if(i.classList.contains(n.CssExpandRuleIcon)){this.toggleExpander(i,n.CssRule);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_GROUP,Common.TriggerType.Ui);this.currentSelection=r;return!1}if(i.classList.contains(n.CssExpandShorthandIcon)){this.toggleExpander(i,n.CssProperty);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_GROUP,Common.TriggerType.Ui);this.currentSelection=r;return!1}if((o.canToggleStylePropertyEnable&&r.isProperty||o.canToggleStyleSubpropertyEnable&&r.isSubProperty)&&i.classList.contains(n.CssCheckbox)&&1===r.status){this.togglePropertyCheckbox(r);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_PROPERTY_CHECKBOX,Common.TriggerType.Ui);this.currentSelection=r;return!1}if(i.classList.contains(n.CssPropertyName)&&o.canEditPropertyName){this.prepareEditBox(r,1);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_PROPERTY_NAME,Common.TriggerType.Ui);return!0}if(i.classList.contains(n.CssPropertyColor)&&r.isProperty&&o.canEditPropertyValue){F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ATTACH_COLOR_PICKER,Common.TriggerType.Ui,0);this.attachColorPicker(r);return!1}if(i.classList.contains(n.CssPropertyValue)&&o.canEditPropertyValue){this.prepareEditBox(r,2);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_PROPERTY_VALUE,Common.TriggerType.Ui);return!0}if(i.classList.contains(n.CssSubPropertyValue)&&o.canAddStyleProperty){this.editSubproperty(r);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_SUBPROPERTY_VALUE,Common.TriggerType.Ui);return!0}if(o.canAddStyleProperty&&(i.classList.contains(n.CssPropertyValueContainer)||i.classList.contains(n.CssEmptyRuleSpace)||i.classList.contains(n.CssBlockFooter)||i.classList.contains(n.CssSelectorContainer))){if(!a){i.classList.contains(n.CssBlockFooter)&&(r=this._model.lastProperty(r)||r);this.prepareEditBox(r,3);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ADD_PROPERTY,Common.TriggerType.Ui)}return!0}if(i.classList.contains(n.CssSelector)&&r.isEditable&&o.canEditRuleSelector){this.prepareEditBox(r,4);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_RULE_SELECTOR,Common.TriggerType.Ui);return!0}if(i.classList.contains(n.CssFileLink)){this.openTargetElementFileLink(r);return!1}this.currentSelection=r}return!r});this.addHandler(this.listRoot,"mouseover",[n.CssInheritedFromTarget],e=>{this.hoverRuleTarget(e,!0);return!0});this.addHandler(this.listRoot,"mouseout",[n.CssInheritedFromTarget],e=>{this.hoverRuleTarget(e,!1);return!0})}addKeyboardEventHandlers(){this.addHandler(this.listRoot,"keydown",null,e=>{var t=this.currentSelection,i=e.shiftKey&&!e.ctrlKey&&!e.altKey,a=e.ctrlKey&&!e.shiftKey&&!e.altKey,s=!e.shiftKey&&!e.ctrlKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.K&&a&&t){this.attachColorPicker(t);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ATTACH_COLOR_PICKER,Common.TriggerType.KeyboardShortcut,0);e.preventDefault();return!1}if(this._selectionInEditMode)return!0;if(t){if(e.keyCode===Common.KeyCodes.ArrowUp&&(s||i)){this.moveSelection(this._model.previousSelection(t,i));F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.MOVE_SELECTION_PREV,Common.TriggerType.KeyboardShortcut);return!1}if(e.keyCode===Common.KeyCodes.ArrowDown&&(s||i)){this.moveSelection(this._model.nextSelection(t,i));F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.MOVE_SELECTION_NEXT,Common.TriggerType.KeyboardShortcut);return!1}var r=this.findElementForSelection(t);if(e.keyCode===Common.KeyCodes.ArrowLeft&&s){if(!t.isSubProperty&&this._model.isExpanded(t)){this.toggleExpander(r,t.isRule?n.CssRule:n.CssProperty);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_GROUP,Common.TriggerType.KeyboardShortcut)}else{this.moveSelection(this._model.outSelection());F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.MOVE_SELECTION_OUT,Common.TriggerType.KeyboardShortcut)}return!1}if(e.keyCode===Common.KeyCodes.ArrowRight&&s){if(!t.isSubProperty)if(this._model.isExpanded(t)){this.moveSelection(this._model.inSelection());F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.MOVE_SELECTION_IN,Common.TriggerType.KeyboardShortcut)}else{this.toggleExpander(r,t.isRule?n.CssRule:n.CssProperty);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_GROUP,Common.TriggerType.KeyboardShortcut)}return!1}if(e.keyCode===Common.KeyCodes.Home&&s){this.moveSelection(this._model.firstRule());F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.MOVE_SELECTION_FIRST,Common.TriggerType.KeyboardShortcut);return!1}if(e.keyCode===Common.KeyCodes.End&&s){this.moveSelection(this._model.lastRule());F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.MOVE_SELECTION_LAST,Common.TriggerType.KeyboardShortcut);return!1}var o=this._domExplorer.capabilities;if(!t.isDeleted){if(e.keyCode===Common.KeyCodes.Delete&&s){if((t.isRule&&o.canRemoveStyleRules||t.isProperty&&o.canRemoveStyleProperties)&&!t.isDeleted){this.removeRuleOrProperty(t);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.DELETE_ITEM,Common.TriggerType.KeyboardShortcut)}return!1}if(t.isProperty||t.isSubProperty){var l=t;if((o.canToggleStylePropertyEnable&&t.isProperty||o.canToggleStyleSubpropertyEnable&&t.isSubProperty)&&e.keyCode===Common.KeyCodes.Space&&s&&1===l.status){this.togglePropertyCheckbox(l);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_PROPERTY_CHECKBOX,Common.TriggerType.KeyboardShortcut);return!1}if(e.keyCode===Common.KeyCodes.Enter&&s&&o.canEditPropertyValue){if(t.isProperty&&o.canEditPropertyValue){this.prepareEditBox(t,2);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_PROPERTY_VALUE,Common.TriggerType.KeyboardShortcut)}else if(t.isSubProperty&&o.canAddStyleProperty){this.editSubproperty(t);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_SUBPROPERTY_VALUE,Common.TriggerType.KeyboardShortcut)}return!1}if(e.keyCode===Common.KeyCodes.F2&&s&&t.isProperty&&o.canEditPropertyName){this.prepareEditBox(t,1);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_PROPERTY_NAME,Common.TriggerType.KeyboardShortcut);return!1}}else if(e.keyCode===Common.KeyCodes.Enter&&s&&o.canEditRuleSelector){const e=t;if(e.isEditable){this.prepareEditBox(t,4);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_RULE_SELECTOR,Common.TriggerType.KeyboardShortcut);return!1}if(e.properties.length>0){this.prepareEditBox(e.properties[0],1);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_PROPERTY_NAME,Common.TriggerType.KeyboardShortcut);return!1}this.addProperty(e,e);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ADD_PROPERTY,Common.TriggerType.KeyboardShortcut);return!1}}if(e.keyCode===Common.KeyCodes.Space&&(s||a)){e.preventDefault();this.isRule(t)&&s&&this.openTargetElementFileLink(t);return!1}}return!0})}addCustomEventHandler(){$(this.listRoot).on(e.ValueEditor.EditCancelledEventName,e=>{this._editCancelled.invoke();e.preventDefault();e.stopImmediatePropagation();return!1});$(this.listRoot).on(e.ValueEditor.EditCompletedEventName,e=>{this._editCompleted.invoke();e.preventDefault();e.stopImmediatePropagation();return!1})}isRule(e){return void 0!==e.commitNewRule}getSelectedRuleForCopy(){F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COPY_STYLES_VIEW_SELECTION_TO_CLIPBOARD,Common.TriggerType.KeyboardShortcut);if(Common.ToolWindowHelpers.hasSelectedText())return Common.ToolWindowHelpers.getTextForClipboard();var e=this.currentSelection;return e?e.formatForCopy:void 0}addMutationEventHandlers(){this.addHandler(this.listRoot,"DOMAttrModified",[n.CssRule,n.CssProperty,n.CssSubProperty],e=>{var t=e.target,i=this.findClosestItem(t);if(i){"aria-expanded"===e.attrName&&this._model.setExpanded(i,"true"===e.newValue);if("aria-checked"===e.attrName&&(i.isProperty||i.isSubProperty)&&"mixed"!==e.newValue){var n=i,a="true"===e.newValue;n.isEnabled!==a&&this.togglePropertyCheckbox(n)}}return!0})}editSubproperty(e){for(var t=e.container,i=e.rule.properties.length-1;i>=0;i--){var n=e.rule.properties[i];if(n===t)break;if(n.name===e.name){this.prepareEditBox(n,2);return}}this.addProperty(e.rule,e.container,e.name)}moveEditBox(t,i,n,a,s){var r,o=i||!n||n.equalTo(e.ValueEditorKey.EnterKey),l=n&&n.equalTo(e.ValueEditorKey.ShiftTabKey);if(o){var m=s?this._model.previousSelection(t,!1,!1):t;r=new e.StyleEditLocation(m,0)}else r=this._model.getNextEdit(t,a,!!s,l);s&&s.remove(!1);this.prepareEditBox(r.selection,r.editMode)}prepareEditBox(e,t){this.enterEditMode(e,t)||(this.currentSelection=e)}hoverRuleTarget(e,t){var i=$m(e.target).attr("data-id");this.model;this._model.hoverElement(i,t)}findPropertyElement(e,t){var i="."+(e.isSubProperty?n.CssSubProperty:n.CssProperty)+"[data-uid='"+e.uid+"']";t&&(i+=" ."+t);return this._stylesListElement.querySelector(i)}findRuleElementById(e,t){var i="."+n.CssRule+"[data-uid='"+e+"']";t&&(i+=" ."+t);return this._stylesListElement.querySelector(i)}moveSelection(e){if(e){this.currentSelection=e;return!0}}onPropertyEnableChange(e,t){var i=this.findPropertyElement(e,n.CssCheckbox);if(i){i.checked=!1!==t;i.indeterminate=void 0===t;var a=i.parentElement,s=i.indeterminate?"mixed":""+t;a.setAttribute("aria-checked",s)}}onPropertyAppliedChange(e,t){var i=this.findPropertyElement(e);if(i){i=i.parentElement;t&&i.classList.contains(n.CssNotApplied)?i.classList.remove(n.CssNotApplied):t||i.classList.contains(n.CssNotApplied)||this._selectionInEditMode===e||i.classList.add(n.CssNotApplied)}}onPropertyUidChange(e,t){var i=this.findPropertyElement(e);i&&i.setAttribute(n.ATTR_UID,t)}onPropertySelectChange(e){var t=e.container;if(!this._model.isExpanded(t)){var i=e.isSubProperty?this.findPropertyElement(t):this.findRuleElementById(t.uid);this.toggleExpander(i,e.isSubProperty?n.CssProperty:n.CssRule)}this.currentSelection=e}onPropertyRemoveChange(e,t){var i=this.findPropertyElement(e);if(i){var a=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(i,n.CssPropertyContainer);a.parentElement.removeChild(a)}t&&(this.currentSelection=t)}setPropertyChangeBar(t){var i=this.findPropertyElement(t);if(i){var a=this._model.isExpanded(t),s=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssChangeBar),r=a?t.changeState:t.extendedChangeState;s.setAttribute("data-change",r);var o=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssPropertyAriaChangeState);o&&(o.innerText=t.ariaChangeStateString);var l=r===e.StyleChangeNotifier.CHANGE_BAR_REMOVE;i.setAttribute("data-removed",l);l&&!t.isSubProperty&&a&&this.toggleExpander(i,n.CssProperty)}}setRuleChangeBar(t,i=!0){var a=this.findRuleElementById(t.uid);if(a){var s=this._model.isExpanded(t),r=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(a.parentElement,n.CssChangeBar),o=s?t.changeState:t.extendedChangeState;r.setAttribute("data-change",o);var l=t;l&&a.setAttribute("aria-label",l.ariaLabel);var m=o===e.StyleChangeNotifier.CHANGE_BAR_REMOVE;a.setAttribute("data-removed",m);var d=a.previousElementSibling;d&&d.classList.contains(n.CssParentRule)&&d.setAttribute("data-removed",m);m&&i&&this._model.isExpanded(t)&&this.toggleExpander(a,n.CssRule)}}setRuleFileLinkChange(e,t){var i=this.findRuleElementById(e.uid,n.CssFileLink);if(i){e&&(i.innerText=e.fileLinkText)}}setRuleFileLinkTooltipChange(e,t){var i=this.findRuleElementById(e.uid,n.CssFileLink);if(i){e&&i.setAttribute("data-tooltip",t)}}onRuleUidChange(e,t){var i=this.findRuleElementById(e.uid);i&&i.setAttribute(n.ATTR_UID,t)}onRuleSelectorChange(e,t){var i=this.findRuleElementById(e.uid,n.CssSelector);if(i){i.textContent=t;i.setAttribute("data-tooltip",t)}}onRuleAddPropertyChange(e,t){var i=this.findRuleElementById(e.uid);if(i){this.insertNewPropertyIntoView(i,t);this._model.setExpanded(t,!1)}}onRuleAddRuleChange(e){this.insertNewRuleIntoView(e);this._model.setExpanded(e,!0)}onRuleRemoveChange(e){var t=this.findRuleElementById(e.uid);if(t){var i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(t,n.CssItem);i.parentElement.removeChild(i)}}onRuleSelectChange(e){if(!this._model.isExpanded(e)){var t=this.findRuleElementById(e.uid);this.toggleExpander(t,n.CssRule)}this.currentSelection=e}onPropertyStatusChange(e,t){var i=this.findPropertyElement(e);if(i){var a=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssPropertyName),s=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssPropertyValue),r=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssPropertyNameAriaInvalid),o=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,n.CssPropertyValueAriaInvalid);a&&a.classList.remove(n.CssInvalidProperty);s&&s.classList.remove(n.CssInvalidProperty);i.setAttribute("aria-invalid",""+(1!==t));switch(t){case 2:a&&e.isNameDisplayedAsInvalid&&a.classList.add(n.CssInvalidProperty);break;case 3:s&&s.classList.add(n.CssInvalidProperty);break;case 0:a&&a.classList.add(n.CssInvalidProperty);s&&s.classList.add(n.CssInvalidProperty)}r&&(r.innerText=e.ariaInvalidNameString);o&&(o.innerText=e.ariaInvalidValueString)}}onPropertyNameChange(e,t){var i=this.findPropertyElement(e,e.isSubProperty?n.CssSubPropertyName:n.CssPropertyName);i&&(i.textContent=t)}onPropertyValueChange(e,t){var i=this.findPropertyElement(e,e.isSubProperty?n.CssSubPropertyValue:n.CssPropertyValue);i&&(i.textContent=t)}onPropertyClearSubproperties(e){var t=this.findPropertyElement(e);if(t){if(!t.classList.contains(n.CssPropertyLonghand)){t.classList.add(n.CssPropertyLonghand);t.setAttribute("aria-expanded","false");t.removeAttribute("aria-setsize")}if(this._model.isExpanded(e)){this._model.setExpanded(e,!1);this.toggleExpander(t,n.CssProperty)}t.nextElementSibling.innerHTML=""}this._model.setExpanded(e,!1)}onPropertyAddSubproperty(e,t){var i=this.findPropertyElement(e);if(i){if(i.classList.contains(n.CssPropertyLonghand)){i.classList.remove(n.CssPropertyLonghand);i.setAttribute("aria-expanded","false")}var a=i.nextElementSibling,s=this.instantiateTemplate("styleSubPropertyTemplate",t);a.appendChild(s);i.setAttribute("aria-setsize",e.properties.length)}}checkPropertyColorUpdate(e){var t=this.findPropertyElement(e,n.CssPropertyColor);if(t)if(e.isDisplayableColor){t.style.backgroundColor=e.colorForDisplay;t.classList.remove(n.CssPropertyColorHidden)}else{t.style.backgroundColor="";t.classList.add(n.CssPropertyColorHidden)}e.isSubProperty&&this.checkPropertyColorUpdate(e.owner)}instantiateTemplate(e,i){var n=new t.Template(this._domExplorer.capabilities,{htmlElementSource:document,templateId:e}),a=this.htmlElementSource.createElement("div");a.innerHTML=n.createTemplateText(i);return a.firstElementChild}editPropertyName(t){this.currentSelection=t;var a=this.findElementForSelection(t,n.CssPropertyName);if(a){var s,r,o=new e.ValueEditorKey(":",!0);F12.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Intellisense_Start);var l=new F12.DomExplorer.StylePropertyIntellisenseProvider(this._model),m=new Common.Intellisense.IntellisenseMenu("intellisenseListBox",null,null,500,!0,l);r=new Common.Intellisense.IntellisenseContext(new Common.Intellisense.InputElementTextEditorBridge,m,l);F12.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Intellisense_Stop);(s=new e.ValueEditor(document,this._domExplorer,window,n.MAX_PROPERTY_NAME_ROWS,r)).addExitKeys(o);var d=t.isNew;s.show(a,Math.max((a&&a.offsetWidth||0)+2,100),(e,i)=>new Promise(i=>{t.commitName(e).then(()=>i(!0),()=>i(!1))})).then(i=>{d&&i.newValue&&!i.wasCancelled&&i.exitKey&&i.exitKey.equalTo(e.ValueEditorKey.EnterKey)&&(i.exitKey=e.ValueEditorKey.TabKey);t.isDeleted=!i.wasCancelled&&!i.newValue;this.moveEditBox(t,i.wasCancelled,i.exitKey,1,!t.isNew||!i.wasCancelled&&i.newValue?null:t);i.wasCancelled||i.newValue||t.isNew?t.refreshNameDisplay():t.commitDelete(!1).then(()=>{t.refreshNameDisplay()})})}}editPropertyValue(t){this.currentSelection=t;var a=this.findElementForSelection(t,n.CssPropertyValue);if(a){var s,r,o,l=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(a,n.CssProperty);F12.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Intellisense_Start);(s=new F12.DomExplorer.StylePropertyValueIntellisenseProvider(t.name,this._model.cssAndHtmlMetadataSource)).onShouldOpenOnTextChange=(e=>!e.match(/^-?\d/)&&!e.match(/!important$/));r=new Common.Intellisense.IntellisenseContext(new Common.Intellisense.InputElementTextEditorBridge,new Common.Intellisense.IntellisenseMenu("intellisenseListBox",null,null,500,!0,s,null,!0),s);F12.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Intellisense_Stop);var m=new e.ValueEditorKey(";");(o=new e.ValueEditor(document,this._domExplorer,window,n.MAX_PROPERTY_VALUE_ROWS,r)).addExitKeys(m);o.enableNumericChanges();t.isNew;this._model.enableEditChaining();var d=!1,h=(l&&l.offsetWidth||0)-a.offsetLeft,u=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(l,n.CssPropertyColor),c=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(l,n.CssExpandShorthandIcon),p=window.getComputedStyle(u),g=window.getComputedStyle(c);h+=(u&&u.offsetWidth||0)+parseInt(p.marginLeft,10)+parseInt(p.marginRight,10)+(c&&c.offsetWidth||0)+parseInt(g.marginLeft,10)+parseInt(g.marginRight,10);a.textContent=a.textContent.trim();var y,C=null;o.show(a,h,(e,i)=>new Promise(i=>{if(!t.isNew&&!d){this._model.startSingleEdit();d=!0}null!==C&&window.clearTimeout(C);y=e;C=window.setTimeout(()=>{t.commitValue(y);C=null},200);i(!0)})).then(e=>{if(null!==C){window.clearTimeout(C);t.commitValue(y)}d&&this._model.endSingleEdit();this._model.disableEditChaining();t.refreshValueDisplay();this.moveEditBox(t,e.wasCancelled,e.exitKey,2,e.wasCancelled&&t.isNew?t:null)})}}editSelector(t,i){this.currentSelection=t;var a=this.findElementForSelection(t,n.CssSelector);if(a){var s=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(a,n.CssRule),r=new e.ValueEditor(document,this._domExplorer,window,n.MAX_SELECTOR_ROWS);r.addExitKeys(new e.ValueEditorKey("{",!0),new e.ValueEditorKey("{"));r.show(a,(s&&s.offsetWidth||0)-a.offsetLeft,(e,i)=>new Promise(i=>{e?t.commitSelector(e).then(()=>i(!0),()=>i(!1)):t.commitDelete().then(()=>i(!0),()=>i(!1))})).then(e=>{var n=e.newValue&&!e.wasCancelled;n||(a.textContent=e.oldValue);i&&i(n);this.moveEditBox(t,e.wasCancelled,e.exitKey,4)})}}insertNewRuleIntoView(e){var t,i=this.instantiateTemplate("styleRuleTemplate",e),n=this._model.nextRule(e);n&&(t=this.findElementForSelection(n));n&&t?this._stylesListElement.insertBefore(i,t.parentElement):this._stylesListElement.appendChild(i);return i}insertNewPropertyIntoView(e,t){var i=this.instantiateTemplate("stylePropertyTemplate",t),a=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,n.CssItem),s=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(a,n.CssPropertiesCollection);if(s){var r,o=this._model.nextProperty(t);r=o?this.findElementForSelection(o).parentElement:F12.DomExplorer.DomExplorerWindow.findDescendentByClass(s,n.CssBlockFooter);s.insertBefore(i,r);return i}}initializeColorPicker(){return this._domExplorer.initializeColorPicker().then(e=>{this.colorPickerViewModel=new F12.DomExplorer.ColorPickerViewModel(this._domExplorer.paletteViewModel);var t=new Common.TemplateControl("DomExplorer.colorPickerHost");t.model=this.colorPickerViewModel;this.colorPickerViewModel.propertyChanged.addHandler(this.onColorPickerChanged.bind(this));this.colorPickerControl=t.getNamedControl("colorPicker");this.colorPickerControl.disablePopupActiveIndicator=!0;this.colorPickerControl.isCompactView=!0;this.colorPickerControl.viewportMargin={top:30};document.body.appendChild(this.colorPickerControl.rootElement);this.colorPickerControl.onCustomKeyDown=(e=>{var t=e.ctrlKey&&!e.shiftKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.K&&t){this.colorPickerViewModel.isVisible=!1;e.preventDefault();return!0}return!1})})}waitForColorPickerToBeInitialized(){this._colorPickerInitialized||(this._colorPickerInitialized=this.initializeColorPicker());return this._colorPickerInitialized}async attachColorPicker(e){await this.waitForColorPickerToBeInitialized();var t=this.findElementForSelection(e);if(Microsoft.Plugin.F12&&e&&e.isDisplayableColor&&e.colorForDisplay&&!e.isShorthand&&!e.isSubProperty&&t){var i=t.querySelector("."+n.CssPropertyColor);if(i&&i.offsetParent){this._colorPickerProperty=e;this.colorPickerViewModel.dockElement=i;this.colorPickerViewModel.isVisible=!0;return!0}}return!1}onColorPickerChanged(e){if(e===F12.DomExplorer.ColorPickerViewModel.IsVisiblePropertyName)if(this.colorPickerViewModel.isVisible){this._model.startSingleEdit();this.colorPickerViewModel.isSlidersShown=!0;F12.Tools.Utility.Assert.hasValue(this._colorPickerProperty);F12.Tools.Utility.Assert.hasValue(this._colorPickerProperty.colorForDisplay);this.colorPickerViewModel.setOriginalColor(this._colorPickerProperty.colorForDisplay)}else{this._model.endSingleEdit();this.colorPickerViewModel.isSlidersShown=!1;this.colorPickerViewModel.dockElement=null;this.currentSelection=this._colorPickerProperty;this._colorPickerProperty=null}else e===F12.DomExplorer.ColorPickerViewModel.ColorPropertyName&&this.colorPickerViewModel.isVisible&&this._colorPickerProperty&&this._colorPickerProperty.commitValue(this.colorPickerViewModel.color,this._colorPickerProperty.isImportant)}}n.MAX_PROPERTY_NAME_ROWS=2;n.MAX_PROPERTY_VALUE_ROWS=5;n.MAX_SELECTOR_ROWS=10;n.ATTR_UID="data-uid";n.ARIA_REMOVED_ID="AriaChangeStateRemove";n.CssBlockFooter="BPT-Style-BlockFooter";n.CssChangeBar="BPT-Style-ChangeBar";n.CssCheckbox="BPT-Style-Property-Checkbox";n.CssEmptyRuleSpace="BPT-Style-EmptyRuleSpace";n.CssExpandRuleIcon="BPT-Style-ExpandIcon";n.CssExpandShorthandIcon="BPT-Style-PropertyValue-ExpandIcon";n.CssFileLink="BPT-FileLink";n.CssInheritedFromTarget="BPT-Style-InheritedFromTarget";n.CssInvalidProperty="BPT-Style-InvalidProperty";n.CssItem="BPT-Style-Item";n.CssNotApplied="BPT-Style-Property-NotApplied";n.CssNotWinning="BPT-Style-NotWinning";n.CssParentRule="BPT-Style-ParentRule";n.CssPropertiesCollection="BPT-Style-Properties";n.CssProperty="BPT-Style-Property";n.CssPropertyAriaChangeState="BPT-Style-PropertyAriaChangeState";n.CssPropertyAriaOverridden="BPT-Style-PropertyAriaOverridden";n.CssPropertyColor="BPT-Style-Color";n.CssPropertyColorHidden="BPT-Style-Color-Hidden";n.CssPropertyContainer="BPT-Style-Property-Container";n.CssPropertyLonghand="BPT-Style-Property-LongHand";n.CssPropertyName="BPT-Style-PropertyName";n.CssPropertyNameAriaInvalid="BPT-Style-PropertyNameAriaInvalid";n.CssPropertyNameContainer="BPT-Style-PropertyName-Container";n.CssPropertyValue="BPT-Style-PropertyValue";n.CssPropertyValueAriaInvalid="BPT-Style-PropertyValueAriaInvalid";n.CssPropertyValueContainer="BPT-Style-PropertyValue-Container";n.CssRule="BPT-Style-Rule";n.CssScrollContainer="BPT-DataTree-ScrollContainer";n.CssSelector="BPT-Style-Selector";n.CssSelectorContainer="BPT-Style-Selector-Container";n.CssSubProperty="BPT-Style-SubProperty";n.CssSubPropertyName="BPT-Style-SubPropertyName";n.CssSubPropertyValue="BPT-Style-SubPropertyValue";e.StyleView=n;let a;!function(e){e[e.AddRule=0]="AddRule";e[e.AddProperty=1]="AddProperty";e[e.Remove=3]="Remove";e[e.Revert=4]="Revert";e[e.CopyRule=6]="CopyRule";e[e.CopyProperty=7]="CopyProperty";e[e.RefreshStyles=9]="RefreshStyles";e[e.ViewSource=10]="ViewSource"}(a||(a={}));class s{constructor(e,t,i,n){this._styleView=e;this._elementListener=t;this._stylesListElement=i;this._capabilities=n;this._menuId="StyleViewContextMenu_";this._menuItems=[{id:"addRule",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("AddRuleMenuText")},{id:"addProperty",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("AddPropertyMenuText")},{id:"separator",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"remove",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("RemoveStyleMenuText")},{id:"revert",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("RevertStyleMenuText")},{id:"separator",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"copyRule",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("CopyRuleMenuText")},{id:"copyProperty",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("CopyPropertyMenuText")},{id:"separator",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"refreshStyles",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("RefreshStyleMenuText")},{id:"viewSource",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Common.ToolWindowHelpers.loadString("ViewSourceMenuText")}];this.initialize()}showContextMenu(e,t,i){var n;null!=e&&(n=this._styleView.findClosestItem(e));this._selection=n;this._hasSelectedItem=!!n;this._hasNonDeletedSelection=this._hasSelectedItem&&!n.isDeleted;this._isProperty=this._hasSelectedItem&&n.isProperty;this._isSubProperty=this._hasSelectedItem&&n.isSubProperty;this._isRule=this._hasSelectedItem&&n.isRule;this._hasSelectedText=Common.ToolWindowHelpers.hasSelectedText();this._rule=this._hasSelectedItem&&(this._isRule?n:n.rule);this._hasChanged=!!n&&!!n.extendedChangeState;if(!this._contextMenu){this._menuItems[a.AddRule].disabled=(()=>!this._capabilities.canAddStyleRule);this._menuItems[a.AddProperty].disabled=(()=>!(this._capabilities.canAddStyleProperty&&this._hasSelectedItem));this._menuItems[a.Remove].disabled=(()=>!(this._hasNonDeletedSelection&&(this._capabilities.canRemoveStyleProperties&&this._isProperty||this._capabilities.canRemoveStyleRules&&this._isRule&&!this._rule.isInlined)));this._menuItems[a.Revert].disabled=(()=>!this._capabilities.canRevertStyles||!this._hasChanged||this._rule.isDeleted&&this._isProperty||this._isSubProperty);this._menuItems[a.CopyRule].disabled=(()=>!this._rule||this._rule.isDeleted);this._menuItems[a.CopyProperty].disabled=(()=>!this._hasNonDeletedSelection||!(this._isProperty||this._isSubProperty));this._menuItems[a.RefreshStyles].disabled=(()=>!1);this._menuItems[a.ViewSource].disabled=(()=>!this.canViewSource(this._rule));this._contextMenu=Microsoft.Plugin.ContextMenu.create(this._menuItems,this._menuId,null,null,(e,t)=>this.onMenuItemClicked(e,t.id,this._selection,this._rule));this._dismissHandler=(e=>{this._styleView.currentSelection=this._styleView.currentSelection;this.dismiss()})}this._contextMenu.show(parseInt(t.toFixed(0)),parseInt(i.toFixed(0)));this._contextMenu.addEventListener("dismiss",this._dismissHandler);Common.ToolWindowHelpers.contextMenuUp(!0);return!1}canViewSource(e){return this._capabilities.canViewSource&&!(!e||!e.fileUrl)}initialize(){this._elementListener.addEventListener("contextmenu",e=>this.onContextMenu(e));this._elementListener.addEventListener("keydown",e=>this.onKeydown(e))}eventIsForThisPane(e){if(this._stylesListElement.clientHeight){var t=e.target;do{if(t===this._elementListener)return!0;if(t===this._stylesListElement)return!0;t=t.parentElement}while(t)}return!1}onKeydown(e){if(!this.eventIsForThisPane(e))return!0;var t=e.shiftKey&&!e.ctrlKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.F10&&t){this.dismiss();var i=this._styleView.findElementForSelection(this._styleView.currentSelection)||this._elementListener,n=i.getBoundingClientRect();this.showContextMenu(i,n.left,n.top);e.preventDefault();e.stopImmediatePropagation()}return!0}onContextMenu(e){this.dismiss();if(!this.eventIsForThisPane(e))return!0;var t=null,i=e.clientX,n=e.clientY;if(i<=0||n<=0){if(t=this._styleView.currentElementSelection){var a=t.getBoundingClientRect();i=a.left;n=a.top}}else(t=this._styleView.htmlElementSource.elementFromPoint(i,n))&&this._styleView.select(t);this.showContextMenu(t,i,n);e.preventDefault();e.stopImmediatePropagation();return!1}onMenuItemClicked(e,t,i,n){if(e===this._menuId){switch(t){case this._menuItems[a.AddRule].id:this._styleView.addRule();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ADD_RULE,Common.TriggerType.ContextMenu);break;case this._menuItems[a.AddProperty].id:this._styleView.enterEditMode(i,3);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ADD_PROPERTY,Common.TriggerType.ContextMenu);break;case this._menuItems[a.Remove].id:this._styleView.removeRuleOrProperty(i);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.DELETE_ITEM,Common.TriggerType.ContextMenu);break;case this._menuItems[a.Revert].id:this._styleView.revertSelection(i);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.REVERT_ITEM,Common.TriggerType.ContextMenu);break;case this._menuItems[a.CopyRule].id:const e=n.formatForCopy||"";Common.ClipboardHelper.copyPlainText(e);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COPY_RULE,Common.TriggerType.ContextMenu);break;case this._menuItems[a.CopyProperty].id:const s=i.formatForCopy||"";Common.ClipboardHelper.copyPlainText(s);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COPY_PROPERTY,Common.TriggerType.ContextMenu);break;case this._menuItems[a.RefreshStyles].id:this._styleView.refresh();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.REFRESH_STYLES,Common.TriggerType.ContextMenu);break;case this._menuItems[a.ViewSource].id:window.setTimeout(()=>{this.canViewSource(n)&&this._styleView.openTargetElementFileLink(n)},0)}this.dismiss()}}dismiss(){if(this._contextMenu){this._contextMenu.removeEventListener("dismiss",this._dismissHandler);this._contextMenu.dismiss();this._contextMenu.dispose();this._contextMenu=null}Common.ToolWindowHelpers.contextMenuUp(!1)}}e.StyleViewMenuController=s}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,t){this._element=e;this._domTree=t;this._uid=this._element.uid}get elementName(){switch(this._element.node.type){case 1:case 2:return this._element.tag;case 4:return"(DOCTYPE)";case 3:return Common.ToolWindowHelpers.loadString("CommentElement");case 5:return Common.ToolWindowHelpers.loadString("TextElement")}return null}set elementName(e){throw new Error("Cannot set elementName")}get breadcrumbName(){var e=this.elementName;if(e)if(this.id)e+="#"+this.id;else if(this.classNames){var t=this.classNames.trim().split(" ");t.length>0&&(e+="."+t[0])}return e}set breadcrumbName(e){throw new Error("Cannot set breadcrumbName")}get isSelected(){return this._domTree.selectedItem===this._element}set isSelected(e){throw new Error("Cannot set selected")}get elementUID(){return this._uid}set elementUID(e){throw new Error("Cannot set elementUID")}get element(){return this._element}set element(e){throw new Error("Cannot set element")}get id(){return this.getAttribute("id")}set id(e){throw new Error("Cannot set id")}get level(){return this.element.level}set level(e){throw new Error("Cannot set level")}get classNames(){var e=this.getAttribute("class");return e||""}set classNames(e){throw new Error("Cannot set classNames")}getAttribute(e){var t=this._element.node.getAttributeByName(e);if(t)return t.value}}e.BreadcrumbItem=t}(Dom||(Dom={}));!function(e){"use strict";class t extends Common.ModelView.ListModel{constructor(e,t){super();this.skipNextLoad=!1;this._selectedElement=e;this._domTree=t;this.listSource=((e,t)=>{this.skipNextLoad?this.verifyTrail():this.buildBreadcrumbs();this.skipNextLoad=!1;e(this._breadcrumbs)})}get numberOfBreadcrumbs(){return this._breadcrumbs.length}findBreadcrumbByTagName(e,t){for(var i=0;i<this.numberOfBreadcrumbs;i++){var n=this.breadcrumb(i);if(e===n.elementName){if(0===t)return n;t--}}return null}findBreadcrumbByClass(e,t){for(var i=0;i<this.numberOfBreadcrumbs;i++)for(var n=this.breadcrumb(i),a=n.classNames.split(" "),s=0;s<a.length;s++)if(a[s]===e){if(0===t)return n;t--}return null}findBreadcrumbById(e){for(var t=0;t<this.numberOfBreadcrumbs;t++){var i=this.breadcrumb(t);if(e===i.id)return i}return null}breadcrumb(e){return this._breadcrumbs[e]}clearSelection(){this._selectedElement=void 0}setSelectedElement(e){if(e)for(var t=e.uid,i=0;i<this._breadcrumbs.length;i++)this._breadcrumbs[i].elementUID===t&&this._breadcrumbs[i].element.id===e.id&&(this.skipNextLoad=!0);this._selectedElement=e}findPreviousBreadcrumb(e){for(var t=0;t<this.numberOfBreadcrumbs;t++){if(this._breadcrumbs[t].elementUID===e)return t>0?this._breadcrumbs[t-1]:null}return null}findNextBreadcrumb(e){for(var t=0;t<this.numberOfBreadcrumbs;t++){if(this._breadcrumbs[t].elementUID===e)return t<this.numberOfBreadcrumbs-1?this._breadcrumbs[t+1]:null}return null}verifyTrail(){for(var e=this.numberOfBreadcrumbs-1;e>=0;){var t=this.breadcrumb(e);t.elementUID;t.element.parentItem&&t.element.parentItem.isExpanded&&t.element.parentItem.isItemAChild(t.element)||this._breadcrumbs.splice(e,this.numberOfBreadcrumbs-e);--e>=this.numberOfBreadcrumbs&&(e=this.numberOfBreadcrumbs-1)}}buildBreadcrumbs(){this._breadcrumbs=[];for(var t=this._selectedElement;t&&t.isSelectable;){var i=new e.BreadcrumbItem(t,this._domTree);this._breadcrumbs.unshift(i);t=t.parentItem}this.newBreadcrumbs=!0;return this._breadcrumbs}}e.BreadcrumbsModel=t}(Dom||(Dom={}));!function(e){"use strict";var t=Common.Templating;const i=".BPT-HorizontalPane-BreadcrumbBar",n="BPT-BCB-NoLeftArrow",a="BPT-BCB-NoRightArrow",s="BPT-BCB-NoArrows";class r extends Common.ModelView.ListView{constructor(e,i,n,a,s,r){super(n,a,s,i,e.capabilities,r);this._forceSelectedIntoView=!0;this._grabKeyFocus=!1;this._disableKeyBoardTooltip=!1;this._domExplorerWindow=e;this._htmlElementSource=n;this._listElement=this._htmlElementSource.getElementById(this.listViewDivId);this._tooltipTemplate=new t.Template(this._domExplorerWindow.capabilities,{htmlElementSource:this._htmlElementSource,templateId:"breadcrumbTooltip"});this.init();e.horizontalPane.addResizeListener(this);this.addEventHandlers();this.updateView()}selectedItemMutated(e){this.selectionChanged(e)}selectionChanged(e){this._breadcrumbModel.setSelectedElement(e);this.updateView()}updateView(){!this._grabKeyFocus&&document.activeElement&&!Common.ToolWindowHelpers.isContextMenuUp()&&F12.DomExplorer.DomExplorerWindow.findAncestorByClass(document.activeElement,"BPT-HorizontalPane-BreadcrumbBar")&&(this._grabKeyFocus=!0);this._breadcrumbModel||(this._breadcrumbModel=this.model);return super.updateView()}skipNextLoad(){this._breadcrumbModel.skipNextLoad=!0}preViewProcessing(){$m("#BreadcrumbsView").show()}checkToPullDownTooltip(){window.setTimeout(()=>{document.activeElement&&!F12.DomExplorer.DomExplorerWindow.findAncestorByClass(document.activeElement,"BPT-HorizontalPane-BreadcrumbBar")&&this.closeTooltip()},0)}postViewProcessing(){super.postViewProcessing();var e=$m(".BPT-HorizontalPane-BreadcrumbBar"),t=e.find(".BPT-Breadcrumb, .BPT-Breadcrumb-Selected");const i=12;let n=Math.max(0,e.width()-i-i),a=[];for(let e=0;e<this._breadcrumbModel.numberOfBreadcrumbs;e++)a.push($m(t.get(e)).outerWidth(!0));this._widths=a;let s=a.length-1;if(!this._breadcrumbModel.newBreadcrumbs){s=this._breadcrumbModel.cache.findIndex(e=>e.isSelected)}let r=a[a.length-1];this._firstBreadcrumbToShow=0;for(let e=this._breadcrumbModel.length-2;e>=0&&r<n;e--)if((r+=a[e])>n){this._firstBreadcrumbToShow=e+1;break}this._firstBreadcrumbToShow>s&&(this._firstBreadcrumbToShow=s);this._lastBreadcrumbShown=s;for(let e=s+1;e<a.length;e++)if(r+a[e]<=n){r+=a[e];this._lastBreadcrumbShown=e}this._breadcrumbModel.newBreadcrumbs=!1;this.shiftTranslation(!1);this._selectedElement=t.get(s);for(let e=0;e<this._breadcrumbModel.numberOfBreadcrumbs;e++){var o=t.get(e).parentNode;o.setAttribute("bcIndex",e);o.onmouseenter=(e=>{if(!Common.ToolWindowHelpers.isContextMenuUp()){var t=e.target,i=t.children[0],n=t.children[1].querySelector("path"),a=i.getAttribute("bc-data-uid");this._domExplorerWindow.temporaryShowElementHighlight(a);t.savebackgroundColor=n.className.baseVal;i.classList.add("BPT-Breadcrumb-Hover");n.className.baseVal="BPT-BreadcrumbChevron-Hover";if(!this._tooltipComingId){this.closeTooltip();this.showTooltipOnBreadcrumb(!1,t)}this._disableKeyBoardTooltip=!0}});o.onmouseleave=(e=>{var t=e.target,i=t.children[0],n=t.children[1].querySelector("path");this._domExplorerWindow.restoreElementHighlight();this.closeTooltip();if(void 0!==t.savebackgroundColor){this._disableKeyBoardTooltip=!1;i.classList.remove("BPT-Breadcrumb-Hover");n.className.baseVal=t.savebackgroundColor;t.savebackgroundColor=void 0}})}if(this._grabKeyFocus){var l=e.find(".BPT-Breadcrumb-Selected");l&&l.focus();this._grabKeyFocus=!1;this._disableKeyBoardTooltip||this.showTooltipOnBreadcrumb(!0)}this._forceSelectedIntoView=!0}shiftTranslation(e){let t=8;for(let e=0;e<this._firstBreadcrumbToShow;e++)t-=this._widths[e];$m("#BreadcrumbsView").css("transform",`translateX(${t}px)`);if(e){const e=12;var r=$m(".BPT-HorizontalPane-BreadcrumbBar");let t=Math.max(0,r.width()-e-e),i=0,n=this._widths;for(let e=this._firstBreadcrumbToShow;e<n.length&&i+n[e]<=t;e++){i+=n[e];this._lastBreadcrumbShown=e}}let o=!1,l=!1;0===this._firstBreadcrumbToShow&&(o=!0);this._lastBreadcrumbShown+1>=this._breadcrumbModel.numberOfBreadcrumbs&&(l=!0);$m(i).removeClass("BPT-BCB-NoLeftArrow");$m(i).removeClass("BPT-BCB-NoRightArrow");$m(i).removeClass("BPT-BCB-NoArrows");o&&l?$m(i).addClass(s):o?$m(i).addClass(n):l&&$m(i).addClass(a)}selectBreadcrumbNodeByTagName(e,t){t||(t=0);var i=this._breadcrumbModel.findBreadcrumbByTagName(e,t);this.selectElementByUid(i.elementUID)}selectBreadcrumbNodeByClass(e,t){t||(t=0);var i=this._breadcrumbModel.findBreadcrumbByClass(e,t);this.selectElementByUid(i.elementUID)}selectBreadcrumbNodeById(e){var t=this._breadcrumbModel.findBreadcrumbById(e);this.selectElementByUid(t.elementUID)}showTooltipOnBreadcrumb(e,t){if(t)a=t.children[0].getBoundingClientRect(),t.children[1].getBoundingClientRect(),n=t;else{var i=$m(".BPT-HorizontalPane-BreadcrumbBar").find(".BPT-Breadcrumb-Selected").get(0);if(!i)return;var n=i.parentNode,a=i.getBoundingClientRect();i.nextElementSibling.getBoundingClientRect()}var s=a,r=s.width,o=s.left,l=$m("#breadcrumbLeftArrow").get(0);if("none"!==l.style.display){o-=l.getBoundingClientRect().width}this.popupTooltip(n,o+r/2,s.top+s.height/2,!1,e)}onPaneResize(e,t,i){this.skipNextLoad();this.updateView()}addEventHandlers(){this.addHandler(this._listElement,"click",["BPT-Breadcrumb","BPT-Breadcrumb-Selected"],e=>{this.takeDownContextMenu();this._grabKeyFocus=!0;var t=e.target;if(!t.hasAttribute("bc-data-uid")){for(var i=!1,n=t;n!==this._listElement;){if(n.classList&&n.classList.contains("BPT-Breadcrumb-Container")){i=!0;break}n=n.parentNode}i&&(t=n.querySelector("[bc-data-uid]"))}this.selectBreadcrumb(t);this.updateView()});this._htmlElementSource.addEventListener("mousedown",e=>{this.checkToPullDownTooltip()})}lastKey(e){this._lastKey=e}selectBreadcrumb(e){this._selectedElement=e;var t=e?e.getAttribute("bc-data-uid"):"";this.selectElementByUid(t)}selectElementByUid(e){if(this._domExplorerWindow.domTreeDataSource&&this._domExplorerWindow.domTree){this._domExplorerWindow.domTree.selectedItem=this._domExplorerWindow.domTreeDataSource.getItemByUid(e);this.skipNextLoad()}}takeDownContextMenu(){this._domExplorerWindow.takeDownContextMenu()}popupTooltip(e,t,i,n,a){if(!Common.ToolWindowHelpers.isContextMenuUp())if(n){var s=e.getBoundingClientRect(),r=e.getAttribute("bcIndex");if(r){var o=parseInt(r);if(o<this._breadcrumbModel.numberOfBreadcrumbs){var l=this._breadcrumbModel.breadcrumb(o);this._tooltip=this._tooltipTemplate.createTemplateElement(l);$m("#BreadcrumbsView").get(0).appendChild(this._tooltip);var m=this._tooltip.getBoundingClientRect();$m("#BreadcrumbsView").get(0).removeChild(this._tooltip);this._tooltip.style.left=Math.max(1,t-m.width/2)+"px";this._tooltip.style.top=0-(m.height+2)+"px";this._tooltipConfig={content:this._tooltip.innerHTML,contentContainsHTML:!0,x:Math.max(1,s.left+s.width/2-m.width/2),y:s.top-(m.height+9)};Microsoft.Plugin.Tooltip.show(this._tooltipConfig);var d=$m(".BPT-HorizontalPane-BreadcrumbBar").find(".BPT-Breadcrumb-Selected");d&&a&&d.focus()}}this._tooltipComingId=void 0}else{this._tooltipComingId&&window.clearTimeout(this._tooltipComingId);this._tooltipComingId=window.setTimeout(()=>{this._tooltipComingId=null;this.popupTooltip(e,t,i,!0,a)},500)}}isActiveElementInBreadcrumb(e){var t=document.activeElement;if(!t)return!1;for(var i=e.get(0);t.parentNode;){if(t===i)return!0;t=t.parentNode}return!1}closeTooltip(){if(this._tooltipComingId){window.clearTimeout(this._tooltipComingId);this._tooltipComingId=void 0}else if(this._tooltipConfig){var e=$m(".BPT-HorizontalPane-BreadcrumbBar"),t=this.isActiveElementInBreadcrumb(e);Microsoft.Plugin.Tooltip.dismiss(!0);var i=e.find(".BPT-Breadcrumb-Selected");i&&t&&i.focus()}}handleKeyPress(e){if(e.ctrlKey||e.shiftKey||e.altKey)return!0;var t,i=$m(".BPT-Breadcrumb-Selected").attr("bc-data-uid"),n=e;this.lastKey(n.keyCode);switch(n.keyCode){case Common.KeyCodes.ArrowLeft:case Common.KeyCodes.ArrowUp:if(t=this._breadcrumbModel.findPreviousBreadcrumb(i)){this.closeTooltip();var a=t.elementUID;this.selectElementByUid(a);this._grabKeyFocus=!0;this.updateView()}return!1;case Common.KeyCodes.ArrowRight:case Common.KeyCodes.ArrowDown:if(t=this._breadcrumbModel.findNextBreadcrumb(i)){this.closeTooltip();a=t.elementUID;this.selectElementByUid(a);this._grabKeyFocus=!0;this.updateView()}return!1;case Common.KeyCodes.PageDown:this.shiftPage(!0);return!1;case Common.KeyCodes.PageUp:this.shiftPage(!1);return!1;case Common.KeyCodes.Escape:this.closeTooltip();return!1;case Common.KeyCodes.Tab:this.closeTooltip();return!0}return!0}init(){var e=$m(".BPT-HorizontalPane-BreadcrumbBar");e.bind("contextmenu",t=>{this.takeDownContextMenu();this.closeTooltip();var i=t.target,n=t.clientX,a=t.clientY;if(n<=0||a<=0||this._lastKey===Common.KeyCodes.ContextMenu){this._lastKey!==Common.KeyCodes.ContextMenu&&this.selectBreadcrumb(i);this._lastKey=void 0;var s=this._selectedElement.getBoundingClientRect();n=s.left;a=s.top;i=this._selectedElement}else this.selectBreadcrumb(i);if(this._domExplorerWindow.domTreeDataSource){var r=i.getAttribute("bc-data-uid");this._grabKeyFocus=!1;window.setTimeout(()=>{e.focus();var t=this._domExplorerWindow.domTreeDataSource.getItemByUid(r);this._domExplorerWindow.htmlContextMenu(t,n,a);this.skipNextLoad();this.updateView()},1)}});e.bind("keydown",e=>{this.takeDownContextMenu();if(!this.handleKeyPress(e)){e.preventDefault();return!1}return!0},!0);$m(".BPT-HorizontalPane-BreadcrumbBar-Arrow").bind("click",e=>{var t=e.target;this.shiftPage("breadcrumbRightArrow"===t.getAttribute("id"));return!1});$m("#breadcrumbLeftArrow").attr("aria-label",Microsoft.Plugin.Resources.getString("navigateToParentElement"));$m("#breadcrumbRightArrow").attr("aria-label",Microsoft.Plugin.Resources.getString("navigateToChildElement"))}shiftPage(e){this.takeDownContextMenu();this._firstBreadcrumbToShow=e?Math.min(this._breadcrumbModel.numberOfBreadcrumbs-1,this._firstBreadcrumbToShow+1):Math.max(0,this._firstBreadcrumbToShow-1);this.skipNextLoad();this._forceSelectedIntoView=!1;this._grabKeyFocus=!0;this.shiftTranslation(!0)}}r.ARROW_WIDTH=16;e.BreadcrumbsView=r}(Dom||(Dom={}));!function(e){"use strict";let t;!function(t){class i{constructor(e,t,i,n,a,s,r,o,l,m,d,h,u,c,p,g,y){this.selector=e;this.value=t;this.fileUrl=i;this.fileLine=n;this.fileColumn=a;this.fileLinkText=s;this.tooltip=r;this.isWinning=o;this.isImportant=l;this.isEnabled=m;this.isDeleted=d;this.changeState=h;this.ariaChangeStateString=u;this.ariaOverriddenString=c;this.status=p;this.isColor=g;this.propertyId=y}get isWinningAndEnabled(){return this.isWinning&&this.isEnabled}get valueForDisplay(){var e=this.valueWithPriority;return e.length?e:" "}get valueWithPriority(){return this.value+(this.isImportant?" !important":"")}get isDisplayableColor(){return this.isValid&&this.isColor&&!e.StyleProperty.isCssVariableValue(this.value)}get isValid(){return 1===this.status}get isInvalid(){return 1!==this.status}get arialInvalidString(){return this.isValid?"":e.StyleProperty.AriaInvalidString}}t.Source=i;class n{constructor(t,i,n){this._model=t;this.propertyName=i;this.propertyValue=n;this.sources=[];this.enabledCount=0;this.changeState=e.StyleChangeNotifier.CHANGE_BAR_NONE}isColor(){return this.propertyName.indexOf("color")>-1}hasChildren(){return!!this.sources&&this.sources.length>0}addSource(e){this.sources.unshift(e);e.isEnabled&&!e.isDeleted&&this.enabledCount++}get children(){return this.sources}get uniqueId(){return"Dom_Wsp_Style"+this.propertyName}get expanded(){return this._model.isExpanded(this.uniqueId)}set expanded(e){this._model.setExpansionState(this.uniqueId,e)}equals(e){if(!e)return!1;if(this.propertyName!==e.propertyName||this.propertyValue!==e.propertyValue||this.sources.length!==e.sources.length)return!1;for(var t=0;t<this.sources.length;t++){var i=this.sources[t],n=e.sources[t];if(i.selector!==n.selector||i.value!==n.value||i.isWinning!==n.isWinning||i.fileLinkText!==n.fileLinkText||i.fileUrl!==n.fileUrl)return!1}return!0}get isEnabled(){return this.enabledCount>0}get isEnabledIndeterminate(){if(this.enabledCount<=0)return!1;for(var e=0,t=0;t<this.sources.length;t++)this.sources[t].isDeleted||e++;return this.enabledCount<e}recalculateEnabledCount(){for(var e=0,t=0;t<this.sources.length;t++)this.sources[t].isEnabled&&!this.sources[t].isDeleted&&e++;this.enabledCount=e}updateChangeState(){for(var t=e.StyleChangeNotifier.CHANGE_BAR_NONE,i="",n=0;n<this.sources.length;n++)if(this.sources[n].changeState!==e.StyleChangeNotifier.CHANGE_BAR_NONE){t=e.StyleChangeNotifier.CHANGE_BAR_UPDATE;this.expanded||(i=e.StyleRule.AriaChangeStateUpdateString);break}this.changeState=t;this.ariaChangeStateString=i}}t.Style=n;class a extends Common.ModelView.ListModel{constructor(e,t,i){super();this._remoteDom=e;this._getStyleResults={};this._listenerArray=[];this._showAllStyles=!1;this._styleList=[];this.allStylesChanged=new Common.EventSource;this.listSource=((e,i)=>{t.updateView(i[0],t=>{this._elementStyleModel=t;this._getStyleRuleResults=t.rules;this._elementStyleModel.addUpdateListener(this);this._remoteDom.getComputedStyles(i[0]).then(t=>{if(t){this._getStyleResults=t[0];this._styleList=this.determineWinningStyles(this._getStyleResults,this._getStyleRuleResults);e(this._styleList)}})})});this._uniqueIdsOfExpandedStyles={};this._createShortenedUrlText=(e=>{if(e){return i(e).replace(/\\"/g,'"')}})}clearModel(){this._getStyleResults={};this._getStyleRuleResults=[];this._styleList=[];this.cache=this._styleList}isExpanded(e){return!0===this._uniqueIdsOfExpandedStyles[e]}setExpansionState(e,t){this.isExpanded(e)!==t&&(t?this._uniqueIdsOfExpandedStyles[e]=!0:delete this._uniqueIdsOfExpandedStyles[e])}set showAllStyles(e){if(this._showAllStyles!==e){this._showAllStyles=e;if(this._getStyleResults&&this._getStyleRuleResults){this._styleList=this.determineWinningStyles(this._getStyleResults,this._getStyleRuleResults);this.cache=this._styleList}this.allStylesChanged.invoke(e)}}get showAllStyles(){return this._showAllStyles}set nameFilter(e){if(this._nameFilter!==e){this._nameFilter=e;if(this._getStyleResults&&this._getStyleRuleResults){this._styleList=this.determineWinningStyles(this._getStyleResults,this._getStyleRuleResults);this.cache=this._styleList}}}get nameFilter(){return this._nameFilter}determineWinningStyles(t,a){for(var s,r=[],o={},l=[],m=e=>{if(e.isApplied&&e.isValidName){if(!o[e.name]){o[e.name]=[];l.push(e.name)}o[e.name].unshift(e)}},d=0;d<a.length;d++)for(var h=a[d],u=h.properties.length-1;u>=0;u--){var c=h.properties[u];c.isShorthand?c.isApplied&&c.properties.forEach(m):m(c)}if(this.showAllStyles){l=[];for(s in t)t.hasOwnProperty(s)&&l.push(s)}(l=this.applyPropertyNameFilter(l)).sort();for(d=0;d<l.length;d++){s=l[d];var p=o[s],g=new n(this,s,t[s]);e.StyleChangeNotifier.CHANGE_BAR_NONE;if(p)for(u=0;u<p.length;u++){var y=p[u],C=new i(y.rule.selectorText,y.value,y.rule.fileUrl,y.rule.fileLine,y.rule.fileColumn,y.rule.fileLinkText,y.rule.tooltip,y.isWinning,y.isImportant,y.isEnabled,y.isSubProperty?y.container.isDeleted:y.isDeleted,y.changeState,y.ariaChangeStateString,y.ariaOverriddenString,y.status,g.isColor(),y.uid);g.addSource(C);if(!g.expanded&&C.changeState!==e.StyleChangeNotifier.CHANGE_BAR_NONE){g.changeState=e.StyleChangeNotifier.CHANGE_BAR_UPDATE;g.ariaChangeStateString=e.StyleRule.AriaChangeStateUpdateString}}r.push(g)}return r}applyPropertyNameFilter(e){if(!this._nameFilter||0===this._nameFilter.trim().length)return e;var t=[];if(this._nameFilter&&this._nameFilter.length>0)for(var i=0;i<e.length;i++){var n=e[i];n.indexOf(this._nameFilter)>-1&&t.push(n)}return t}toggleEnabled(e,t){return new Promise((i,n)=>{var a=this._elementStyleModel.getPropertyById(e);if(a){(a.isSubProperty?a.owner:a).isDeleted||void 0!==t&&t===a.isEnabled?i():a.toggleEnable().then(i)}else n("Property not found")})}forEachStyle(e){this._styleList.forEach(e)}addUpdateListener(e){this._listenerArray.indexOf(e)<0&&this._listenerArray.push(e)}removeUpdateListener(e){var t=this._listenerArray.indexOf(e);t>=0&&this._listenerArray.splice(t,1)}onRuleChange(e,t,i){this.fireRuleChange(e,t,i)}onPropertyChange(e,t,i){3===e?this.onPropertyWinningRuleChange(t,i):4===e?this.onPropertyEnableChange(t,i):2===e?this.onPropertyValueChange(t,i):6===e?this.onPropertyStatusChange(t,i):11===e?this.onPropertyChangeStateChange(t):this.firePropertyChange(e,t,i)}fireRuleChange(e,t,i){for(var n=this._listenerArray.slice(0),a=0,s=n.length;a<s;a++){n[a].onRuleChange(e,t,i)}}firePropertyChange(e,t,i){for(var n=this._listenerArray.slice(0),a=0,s=n.length;a<s;a++){n[a].onPropertyChange(e,t,i)}}onPropertyStatusChange(e,t){var i=this.findSourceByUid(e.uid);if(i&&i.status!==t){i.status;i.status=t;this.firePropertyChange(6,e,t)}}onPropertyChangeStateChange(e){var t=this.findSourceByUid(e.uid);if(t&&t.changeState!==e.changeState){t.changeState;t.changeState=e.changeState;this.findStyleByName(e.name).updateChangeState();this.firePropertyChange(11,e)}}onPropertyValueChange(e,t){var i=this.findSourceByUid(e.uid);if(i&&i.valueForDisplay!==t){i.value;i.value=e.value;i.isImportant=e.isImportant;this.firePropertyChange(2,e,t)}}onPropertyEnableChange(e,t){var i=this.findSourceByUid(e.uid);if(i&&i.isEnabled!==t){i.isEnabled;i.isEnabled=t;this.firePropertyChange(4,e,t)}}onPropertyWinningRuleChange(e,t){var i=this.findSourceByUid(e.uid);if(i&&i.isWinning!==t){i.isWinning;i.isWinning=t;this.firePropertyChange(3,e,t)}}findSourceByUid(e){for(var t=0,i=this._styleList.length;t<i;t++)for(var n=this._styleList[t].children,a=0,s=n.length;a<s;a++){var r=n[a];if(r.propertyId===e)return r}return null}findStyleByName(e){for(var t=0,i=this._styleList.length;t<i;t++){var n=this._styleList[t];if(n.propertyName===e)return n}}getPropertyById(e){return e?this._elementStyleModel.getPropertyById(e):null}handleFileLinkClick(e,t,i){Microsoft.Plugin.F12.Debugger.showDocument(decodeURI(e),t,i)}startSingleEdit(){this._remoteDom.startSingleEdit()}endSingleEdit(){this._remoteDom.endSingleEdit()}toggleEnableForStyle(e,t){var i=[];if(void 0===t||t!==e.isEnabled){var n=!e.isEnabled;e.sources.forEach(t=>{var a=this.getPropertyById(t.propertyId),s=a.isSubProperty?a.owner:a;if(a&&!s.isDeleted&&a.isEnabled!==n){i.push(a.toggleEnable());e.enabledCount+=n?1:-1}})}return Promise.all(i).then(()=>e.recalculateEnabledCount())}insertNewSource(e,t){for(var n=0,a=this._styleList.length;n<a;n++)for(var s=this._styleList[n],r=s.children,o=0,l=r.length;o<l;o++){if((m=r[o]).propertyId===t.uid){var m=new i(e.rule.selectorText,e.value,e.rule.fileUrl,e.rule.fileLine,e.rule.fileColumn,e.rule.fileLinkText,e.rule.tooltip,e.isWinning,e.isImportant,e.isEnabled,e.isSubProperty?e.container.isDeleted:e.isDeleted,e.changeState,e.ariaChangeStateString,e.ariaOverriddenString,e.status,s.isColor(),e.uid);r.splice(o,0,m);return m}}}tcGetStyleList(){return this._styleList}}t.Model=a}(t=e.Wsp||(e.Wsp={}))}(Dom||(Dom={}));!function(e){"use strict";class t extends Common.ModelView.ListModel{constructor(t,i){super();this._remoteDom=t;this._domExplorer=i;this._changedSources=[];this._ruleMap={};this._collapsedStyles={};this.listSource=(t=>{e.ElementStyleModel.create(this._remoteDom,null,this._domExplorer.capabilities,i=>{this._changedSources=[];this._ruleMap={};this._styles=i;i.addUpdateListener(this);i.rules.forEach(t=>{if(this.changesInRuleAreSignificant(t)){var i=t.styleHref||t.fileUrl;t.isInlined?i=this._inlineStyleString||(this._inlineStyleString=Common.ToolWindowHelpers.loadString("InlineStyleSelector")):t.wasCreatedInSession?i=this._newRuleString||(this._newRuleString=Common.ToolWindowHelpers.loadString("ChangesViewNewInSessionCSSSource")):i||(i=this._unknownSourceString||(this._unknownSourceString=Common.ToolWindowHelpers.loadString("ChangesViewUnknownCSSSource")));var n=this.findSource(i);if(!n){n=new e.ChangedSource(i,this,t.isInlined);this._changedSources.push(n)}var a=new e.ChangedRule(n,t,i);this._ruleMap[t.uid]=a;n.add(a)}});this._changedSources.forEach(e=>{e.sort()});t(this._changedSources);i.addUpdateListener(this)})})}get changes(){return this._changedSources}get textForCopy(){var e=!0,t="";this._changedSources.forEach(i=>{e||(t+="\r\n");t+=i.textForCopy;e=!1});return t}isCollapsed(e){return!!this._collapsedStyles[e]}setCollapsedState(e,t){this.isCollapsed(e)!==t&&(t?this._collapsedStyles[e]=!0:delete this._collapsedStyles[e])}lookupSource(e){for(var t=0;t<this._changedSources.length;t++){var i=this._changedSources[t];if(i.uniqueId===e)return i}}lookupRule(e){return this._ruleMap[e]}selectElement(e){this._remoteDom.getParentChainForStyle(e).then(e=>{e&&this._domExplorer.domTreeDataSource&&this._domExplorer.domTreeDataSource.expandUidChain(e).then(()=>{this._domExplorer.selectItemByUid(e[e.length-1])})})}navigateFileLink(e,t,i){Microsoft.Plugin.F12.Debugger.showDocument(decodeURI(e),t,i)}addUpdateListener(e){this._styles.addUpdateListener(e)}onRuleChange(e,t,i){7===e&&this._changedSources.forEach(e=>{e.updateTooltip(t,i)})}onPropertyChange(e,t,i){}findSource(e){for(var t=0;t<this._changedSources.length;t++){var i=this._changedSources[t];if(i.source===e)return i}}changesInRuleAreSignificant(e){if(!e.isOriginal)return!0;for(var t=0;t<e.properties.length;t++){var i=e.properties[t];if(!i.isOriginal&&(!i.wasCreatedInSession||i.isEnabled||1!==i.status))return!0}return!1}}e.ChangesModel=t}(Dom||(Dom={}));!function(e){!function(t){"use strict";class i extends Common.ModelView.ListModel{constructor(e,t){super();this._uniqueIdsOfCollapsedStyles={};this.remoteDom=e;this._retrieveType=t;this._dataModel=[];this.listSource=((t,i)=>{e.collectEvents(i[0],this.RetrieveType).then(e=>{this.collectEventsRetrieved(this.normalizeRemoteEventModel(e));t(this._dataModel)})});this.AddButtonHandlers()}get RetrieveType(){return this._retrieveType}set RetrieveType(e){this._retrieveType=e}get DataModel(){return this._dataModel}load(e){this._lastLoadCallback=e;this.listSource(()=>{this.SyncModelWithExpandedCache();e()},this._loadArgs)}refreshOnModifiedEvent(e){let t=JSON.parse(e);this.collectEventsRetrieved(this.normalizeRemoteEventModel(t));this._lastLoadCallback()}collectEventsRetrieved(t){this._dataModel=[];for(let i=0;i<t.length;i++){let n=new e.Events.RemoteEventModel;n.DisplayName=t[i].DisplayName;n.RemoteAssociatedEvents=t[i].RemoteAssociatedEvents;this._dataModel.push(n)}for(let e=0;e<this._dataModel.length;e++){let t=[];for(let i=0;i<this._dataModel[e].RemoteAssociatedEvents.length;i++)t.push(this.processAddedEventHandler(this._dataModel[e].RemoteAssociatedEvents[i]));this._dataModel[e].TranslatedAssociatedEvents=this.groupSimilarEvents(t)}}isCollapsed(e){return!0===this._uniqueIdsOfCollapsedStyles[e]}setCollapsedState(e,t){this.isCollapsed(e)!==t&&(t?this._uniqueIdsOfCollapsedStyles[e]=!0:delete this._uniqueIdsOfCollapsedStyles[e])}processAddedEventHandler(e){let i=e.line+1,n=e.column+1,a=new t.EventHandler(n,e.cookie,e.document,e.functionName,i,e.eventName,e.usesCapture,e.document);Microsoft.Plugin.F12.Debugger.getTranslatedLocation(e.document,i,n,!0).then(e=>{a.onTranslatedLocationChanged(e)});return a}normalizeRemoteEventModel(e){let i;if(e){i=[];for(let n=0;n<e.length;n++){let a=new t.RemoteEventModel;e[n]._displayName&&(a.DisplayName=e[n]._displayName);e[n]._remoteAssociatedEvents&&(a.RemoteAssociatedEvents=e[n]._remoteAssociatedEvents);e[n]._translatedAssociatedEvents&&(a.TranslatedAssociatedEvents=e[n]._translatedAssociatedEvents);e[n]._expanded&&(a.expanded=e[n]._expanded);i.push(a)}}return i}groupSimilarEvents(t){var i={};let n=[];if(t&&t.length)for(let n=0;n<t.length;n++){let a=i[t[n].eventName];a||((a=new e.Events.EventHandlerGroup).GroupName=t[n].eventName);a.EventHandlers.push(t[n]);i[t[n].eventName]=a}for(let e in i)n.push(i[e]);return n}SyncModelWithExpandedCache(){for(let e=0;e<this.DataModel.length;e++){void 0!==this._uniqueIdsOfCollapsedStyles[this.DataModel[e].DisplayName]&&null!==this._uniqueIdsOfCollapsedStyles[this.DataModel[e].DisplayName]&&(this.DataModel[e].expanded=!this._uniqueIdsOfCollapsedStyles[this.DataModel[e].DisplayName]);for(let t=0;t<this.DataModel[e].TranslatedAssociatedEvents.length;t++)void 0!==this._uniqueIdsOfCollapsedStyles[this.DataModel[e].TranslatedAssociatedEvents[t].GroupName]&&null!==this._uniqueIdsOfCollapsedStyles[this.DataModel[e].TranslatedAssociatedEvents[t].GroupName]&&(this.DataModel[e].TranslatedAssociatedEvents[t].expanded=!this._uniqueIdsOfCollapsedStyles[this.DataModel[e].TranslatedAssociatedEvents[t].GroupName])}}AddButtonHandlers(){$("#Event-Ancestors-Enabled-CheckBox").change(t=>{this.RetrieveType=e.Utility.GetEventRetrieveType();this.load(this._lastLoadCallback);this.ToggleEventsGroupByBox()});$(i.ANCESTOR_COMBOBOX_ID).change(t=>{this.ChangeAncestorComboBoxTooltip(t);this.RetrieveType=e.Utility.GetEventRetrieveType();this.load(this._lastLoadCallback);let i={selectedType:this.RetrieveType};F12.DomExplorer.Telemetry.analytics.log(F12.DomExplorer.Telemetry.EventName.GROUP_BY_SELECTION_CHANGED,i)})}ToggleEventsGroupByBox(){if(this.RetrieveType===e.Enums.EventRetrieveType.NONE){$(i.ANCESTOR_COMBOBOX_ID).prop("disabled",!0);$(i.ANCESTOR_COMBOBOX_ID).val("1")}else $(i.ANCESTOR_COMBOBOX_ID).prop("disabled",!1);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.DISPLAY_ANCESTOR_EVENT_LISTENER,Common.TriggerType.Ui)}ChangeAncestorComboBoxTooltip(e){if(e){const t=e.target;if(t){let e;e="1"===t.nodeValue?"EventGroupByComboOption1":"EventGroupByComboOption2";$m("#Event-Ancestors-ComboBoxContainer-Div").bind("mouseover",t=>F12.DomExplorer.DomExplorerWindow.showToolTip(Common.ToolWindowHelpers.loadString(e)))}}}}i.ANCESTOR_COMBOBOX_ID="#Event-Ancestors-GroupBy";t.EventsModelView=i}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(e,t,i,n,a,s,r,o){this.column=e;this.cookie=t;this.documentUrl=i;this._functionName=n;this.line=a;this.usesCapture=r;this.documentLocation=o;this.eventName=s;this.translatedLocation={documentPath:this.documentLocation,oneBasedLine:this.line,oneBasedColumn:this.column};this.updateInternal()}get FunctionName(){return"Anonymous function"===this._functionName?"function()":this._functionName}set FunctionName(e){this._functionName=e}onTranslatedLocationChanged(e){this.translatedLocation=e;this.updateInternal()}updateInternal(){this.text=Common.ToolWindowHelpers.createFileLinkText(this.translatedLocation.documentPath,this.translatedLocation.oneBasedLine);void 0!==this.documentUrl&&""!==this.documentUrl?0===this.documentUrl.indexOf("eval code")?this.tooltip=Common.ToolWindowHelpers.loadString("EvalCodeEventHandlerToolTip"):0===this.documentUrl.indexOf("Function code")?this.tooltip=Common.ToolWindowHelpers.loadString("FunctionCodeEventHandlerToolTip"):0===this.documentUrl.indexOf("script block")?this.tooltip=Common.ToolWindowHelpers.loadString("DynamicScriptBlockEventHandlerToolTip"):this.tooltip=Common.ToolWindowHelpers.loadString("EventHandlerTooltip",[this.eventName,this.usesCapture,this.translatedLocation.documentPath,this.translatedLocation.oneBasedLine,this.translatedLocation.oneBasedColumn]):this.tooltip=Common.ToolWindowHelpers.loadString("ExternalEventHandlerTooltip",[this.eventName,this.usesCapture])}}e.EventHandler=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";var t=Common.ModelView.ExpandingListView;class i extends t{constructor(e,t,i,n,a,s,r){super(e,t,i,n,a,(e,t)=>{n.setCollapsedState(e,!t)},r,null,"uniqueId","eventName");this._focusSettingDivClickHandlerApplied=!1;this._addKeyboardNavigationHandlersApplied=!1;this._clickEventName="click";this._capabilities=a;this._documentOpener=s;this._defaultItemTemplateId=i;this._renderingCompleteSubscribers=[];this.addEventHandlers()}collapseChange(e,t){this.model.setCollapsedState(e,t)}set RenderingCompleteSubscribe(e){this._renderingCompleteSubscribers.push(e)}renderView(){this.clearView();this.preViewProcessing();let e=!1,t=this.model.DataModel;if(t)for(let i=0;i<t.length;i++)if(t[i]&&t[i].hasChildren){if(!e){t[i].expanded=!0;e=!0}this.listRoot.appendChild(this.renderItemWithTemplate(t[i],this._capabilities,"ancestorEventsTemplateHeaderOpener"))}this.postViewProcessing();this.renderViewCallback&&this.renderViewCallback();for(let e=0;e<this._renderingCompleteSubscribers.length;e++)this._renderingCompleteSubscribers[e]();this._renderingCompleteSubscribers=[]}postViewProcessing(){super.postViewProcessing();var e=Common.ModelView.Utility.findDescendentByClass(this.listRoot,t.HEADER_CLASS);e&&(e.tabIndex=4)}addEventHandlers(){this.addHandler(this.listRoot,this._clickEventName,["BPT-Events-Handler-Link"],e=>{this._documentOpener.openDocumentLinkFromEvent(e);return!1});this.addHandler(this.listRoot,"keydown",null,e=>{e.target;if(!("Enter"!==e.key&&" "!==e.key||e.ctrlKey||e.shiftKey||e.altKey)){this.openDocument(e);return!1}return!0});let e=$("#Event-Ancestor-Collapse").get(0);this.addHandler(e,"click",null,e=>{this.collapseAll();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COLLAPSE_ALL_EVENTS,Common.TriggerType.Ui)});this.addHandler(e,"keydown",null,e=>{if(!("Enter"!==e.key&&" "!=e.key||e.ctrlKey||e.shiftKey||e.altKey)){this.collapseAll();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COLLAPSE_ALL_EVENTS,Common.TriggerType.Ui);return!1}return!0})}collapseAll(){let e=$("#eventsList").find(".Ancestor-Events-Template-EventName").get();if(e)for(let t=0;t<e.length;t++)this.collapseSection(e[t])}openDocument(e){if(e.target){var t=$m(e.target).children(".BPT-FileLink").get(0);this._documentOpener.openDocumentLinkFromElement(t)}}findFocusableDown(e){let i,n=e.nextElementSibling;if(n&&this.isChild(e))return n;if(this.isChild(e))i=e.parentElement.parentElement;else{if("true"===e.getAttribute("aria-expanded")){let i=e.nextElementSibling;if(i&&i.children.length){let e=i.children[0];return this.isChild(e)?e:e=Common.ModelView.Utility.findDescendentByClass(e,t.HEADER_CLASS)}}i=e.parentElement}let a=i.nextElementSibling;return a?Common.ModelView.Utility.findDescendentByClass(a,t.HEADER_CLASS):i.parentElement.parentElement&&(a=i.parentElement.parentElement.nextElementSibling)&&a.getAttribute("data-listid")?Common.ModelView.Utility.findDescendentByClass(a,t.HEADER_CLASS):null}findFocusableUp(e){let i,n=e.previousElementSibling;if(n)return n;if(this.isChild(e)){i=e.parentElement.parentElement;return Common.ModelView.Utility.findDescendentByClass(i,t.HEADER_CLASS)}let a=(i=e.parentElement).previousElementSibling;if(!a)return(a=i.parentElement.previousElementSibling)&&a.getAttribute("aria-expanded")?a:null;let s=Common.ModelView.Utility.findDescendentByClass(a,t.HEADER_CLASS);if("true"===s.getAttribute("aria-expanded")&&a.children&&a.children.length>=2){let e=a.children[1].lastElementChild;if(this.isChild(e))return e;{let i=Common.ModelView.Utility.findDescendentByClass(e,t.HEADER_CLASS);return i&&"true"===i.getAttribute("aria-expanded")?e.children[1].lastElementChild:i}}return s}}e.EventsView=i}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(){this._displayName="";this._translatedAssociatedEvents=[];this._expanded=!1}get DisplayName(){return this._displayName?this._displayName:""}set DisplayName(e){this._displayName=e}get RemoteAssociatedEvents(){return this._remoteAssociatedEvents}set RemoteAssociatedEvents(e){this._remoteAssociatedEvents=e}get TranslatedAssociatedEvents(){return this._translatedAssociatedEvents}set TranslatedAssociatedEvents(e){this._translatedAssociatedEvents=e}get expanded(){return this._expanded}set expanded(e){this._expanded=e}get hasChildren(){return!!this.TranslatedAssociatedEvents&&this.TranslatedAssociatedEvents.length>0}}e.RemoteEventModel=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(){this._groupName="";this._eventHandlers=[];this._expanded=!0}get EventHandlers(){return this._eventHandlers}set EventHandlers(e){this._eventHandlers=e}get GroupName(){return this._groupName}set GroupName(e){this._groupName=e}get hasChildren(){return!!this.EventHandlers&&this.EventHandlers.length>0}get expanded(){return this._expanded}set expanded(e){this._expanded=e}}e.EventHandlerGroup=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";class t{constructor(){}static get Instance(){t._instance||(t._instance=new t);return t._instance}CompareRemoteEventHandlers(e,t){if(e&&t)return e.functionName.toLocaleLowerCase()<t.functionName?-1:e.functionName.toLocaleLowerCase()>t.functionName.toLocaleLowerCase()?1:0}CompareRemoteEventModel(e,t){if(e&&t)return e.DisplayName.toLocaleLowerCase()<t.DisplayName.toLocaleLowerCase()?-1:e.DisplayName.toLocaleLowerCase()>t.DisplayName.toLocaleLowerCase()?1:0}}t._instance=new t;e.EventsUtilities=t}(e.Events||(e.Events={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";const t=/\r\n/g;class i{constructor(e,t,i,n,a,s){this.computedFontName=e;this.specifiedFontName=t;this.characterCount=i;this.fontSource=n;this.fontType=a;this.fontFaceRule=s;this.expanded=!0;this.hasRule=!!s}get atFontRule(){const e=this.fontFaceRule.split(t).map(e=>{const t=e.indexOf(":");return{ruleProperty:e.substring(0,t),ruleValue:e.substring(t+1,e.length)}});return e.slice(1,e.length-2)}get fontHeader(){const e=null!==this.computedFontName?this.computedFontName:"-";return`${e} ${null!==e&&e!==this.specifiedFontName?` used as ${this.specifiedFontName}`:""} (${this.fontSource}, ${this.fontType}, ${this.characterCount} chars)`}}e.FontsModel=i}(e.Fonts||(e.Fonts={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";var t=Common.ModelView.ExpandingListView;class i extends t{constructor(e,t,i,n,a){super(e,t,i,n,a);this._fontsListElement=e.getElementById(t);this.menuItems=[{name:"copyProperty",textIdentifier:"CopyPropertyMenuText",execute:()=>this.copySelectedItem(this._fontsListElement)}];this.setupHandler()}getMenuConfig(){return this}copySelectedItem(e){const t=F12.DomExplorer.DomExplorerWindow.findAllDescendentsByClass(e,i.STYLE_PROPERTY_CLASS);let n="";for(let e=0;e<t.length;e++){n+=t[e].textContent+" "}Common.ClipboardHelper.copyPlainText(n)}setupHandler(){this._fontsListElement.addEventListener("keyup",e=>{const t=e.ctrlKey&&!e.shiftKey&&!e.altKey;e.keyCode===Common.KeyCodes.C&&t&&this.copySelectedItem(this._fontsListElement)})}}i.STYLE_PROPERTY_CLASS="BPT-Style-Property";e.FontsView=i}(e.Fonts||(e.Fonts={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";var t=Common.ModelView.ListModel;class i extends t{constructor(t){super();this.remoteDom=t;this.listSource=((i,n)=>{t.getRenderedFonts(n[0]).then(t=>{this.fonts=t.map(t=>new e.FontsModel(t.computedFontName,t.specifiedFontName,t.characterCount,t.fontSource,t.fontType,t.fontFaceRule));i(this.fonts)})})}}e.FontsModelView=i}(e.Fonts||(e.Fonts={}))}(Dom||(Dom={}));!function(e){"use strict";var t=Common.TraceEvents,i=Common.ModelView.ExpandingListView;let n;!function(n){var a=Common.Templating;class s{static getPropertyId(e){var t=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e,s.CSS_SOURCE);return(t?t.getAttribute("data-uid"):"")||""}static isHeader(e){return e.classList.contains(s.CSS_HEADER)}static isSource(e){return e.classList.contains(s.CSS_SOURCE)}static findHeaderOrSourceAncestor(e){for(;e;){if(s.isHeader(e)||s.isSource(e))return e;e=e.parentElement}return null}static isCurrentFocusOnInput(){var e=document.activeElement;if(!e)return!1;var t=e.tagName;return"INPUT"===t&&"text"===e.getAttribute("type")||"TEXTAREA"===t}}s.ALL_STYLES_BUTTON_ID="allWinningStylesButton";s.CSS_ARIA_INVALID="BPT-Style-PropertyValueAriaInvalid";s.CSS_ARIA_CHANGE_STATE="BPT-WinningStyle-PropertyAriaChangeState";s.CSS_ARIA_OVERRIDDEN="BPT-WinningStyle-PropertyAriaOverridden";s.CSS_BPT_TOOLBAR_TOGGLE_BUTTON_STATE_ON="BPT-ToolbarToggleButton-StateOn";s.CSS_CHANGE_BAR="BPT-Style-ChangeBar";s.CSS_FILE_LINK="BPT-FileLink";s.CSS_HEADER="BPT-ExpandingList-Header";s.CSS_HEADER_CHECKBOX="BPT-WinningStyle-HeaderCheckBox";s.CSS_HEADER_COLOR="BPT-WinningStyle-Color";s.CSS_HEADER_COLOR_HIDDEN="BPT-WinningStyle-Color-Hidden";s.CSS_HEADER_VALUE="BPT-WinningStyle-PropertyValue-Grid";s.CSS_INVALID_PROPERTY="BPT-Style-InvalidProperty";s.CSS_NOT_WINNING="BPT-WinningStyle-NotWinning";s.CSS_PROPERTY_NAME="BPT-WinningStyle-PropertyName";s.CSS_PROPERTY_VALUE="BPT-Style-PropertyValue";s.CSS_SCROLL_CONTAINER="BPT-DataTree-ScrollContainer";s.CSS_SOURCE="BPT-ExpandingList-Child-Value-Container";s.CSS_SOURCE_CHECKBOX="BPT-WinningStyle-SourceCheckBox";s.CSS_SOURCE_COLOR="BPT-WinningStyle-SourceColor";s.FILTER_TEXT_BOX_ID="winningStylesFilterTextBox";s.MAX_PROPERTY_VALUE_ROWS=5;s.NO_RESULTS_MESSAGE_ID="winningStylesNoResultsMessage";class r extends i{constructor(e,t,i,n,a,r){super(t,i,n,a,e.capabilities,(e,t)=>a.setExpansionState(e,t),r,null,"uniqueId","propertyName",(e,t)=>!e.equals(t));this._domExplorer=e;this._model=a;this._tcPropertyEnableCallback=null;this._listElement=this.htmlElementSource.getElementById(this.listViewDivId);this.initializeAllStylesButton();this._model.allStylesChanged.addHandler(e=>{if(this._allStylesButton){var t=""+!e;this._allStylesButton.getAttribute("aria-pressed")!==t&&this._allStylesButton.setAttribute("aria-pressed",t);e?this._allStylesButton.classList.remove(s.CSS_BPT_TOOLBAR_TOGGLE_BUTTON_STATE_ON):this._allStylesButton.classList.add(s.CSS_BPT_TOOLBAR_TOGGLE_BUTTON_STATE_ON);this.renderView()}});this.menuItems=[{name:"copyProperty",textIdentifier:"CopyPropertyMenuText",execute:e=>{const t=this.onCopy(e)||"";Common.ClipboardHelper.copyPlainText(t)}},{name:"viewSource",textIdentifier:"ViewSourceMenuText",execute:e=>{window.setTimeout(()=>{this.canViewSource(e)&&this.viewSource(e)},0)},isDisabled:e=>!this.canViewSource(e)}];this._model.addUpdateListener(this);this.registerClickHandler();this.registerKeydownHandler();this.registerDOMAttrModifiedHandler();this.initializeAllStylesButton();this.addNameFilterHandlers()}clearView(){super.clearView();this._model.clearModel();this.initializeAllStylesButton();this.synchronizeNoResultsMessage()}refreshLayoutView(t,i,n,a){var s=$m("#"+e.Wsp.View.LAYOUT_VIEW);if(i&&n&&!/^#/.test(n)&&!a){$m(`#${r.LAYOUT_BOX}`).show();var o=i===s.attr("data-uid");s.attr("data-uid",i);s.attr("data-tag",n);t.getComputedBox(i).then(t=>{t&&s.find("[data-layoutProperty]").each(function(i){var n=$m(this),a=n.attr("data-layoutProperty"),s=null==t[a]?"":t[a]+"";s=s.replace(/px$/,"");var r=parseFloat(s);isNaN(r)||(s=(Math.round(100*r)/100).toString());o&&n.text()!==s&&e.TabPanes.gleamLayoutChange(n);n.text(s)})})}else this.clearLayoutView()}clearLayoutView(){$m("#"+e.Wsp.View.LAYOUT_VIEW).find("[data-layoutProperty]").text("");$m(`#${r.LAYOUT_BOX}`).hide()}toggleExpander(e){super.toggleExpander(e);var t=e.parentElement.getAttribute("data-name"),i=this._model.findStyleByName(t);if(i){i.updateChangeState();this.updateStyleChangeBar(i)}}setTabIndex(e,t=101){for(var i=this.listRoot.querySelectorAll('[tabIndex="101"]'),n=0;n<i.length;n++)i[n].removeAttribute("tabIndex");e.setAttribute("tabIndex",t.toString())}registerClickHandler(){this.addHandler(this._listElement,"click",[s.CSS_SOURCE_CHECKBOX,s.CSS_FILE_LINK,s.CSS_HEADER_CHECKBOX,s.CSS_PROPERTY_VALUE],e=>{var t=e.target;if(t.classList.contains(s.CSS_SOURCE_CHECKBOX)){this.togglePropertyCheckBox(t);this.select(t.parentElement);return!1}if(t.classList.contains(s.CSS_FILE_LINK)){this.viewSource(t);return!1}if(t.classList.contains(s.CSS_HEADER_CHECKBOX)&&this._domExplorer.capabilities.canToggleComputedPropertyEnable){this.toggleHeaderCheckBox(t);this.select(t.parentElement);return!1}if(t.classList.contains(s.CSS_PROPERTY_VALUE)&&this._domExplorer.capabilities.canEditPropertyValue){var i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(t,s.CSS_SOURCE);if(i){this.select(i);var n=this.findClosestProperty(t);this.editProperty(n);return!0}}return!0})}viewSource(e){var t=this.findClosestProperty(e);t&&this.openTargetElementFileLink(t)}canViewSource(e){return!!this._domExplorer.capabilities.canViewSource&&!!this.findClosestProperty(e)}editProperty(e){e&&!e.isDeleted&&(e.isProperty?this.prepareEditBox(e):this.editSubproperty(e))}registerKeydownHandler(){this.addHandler(this._listElement,"keydown",null,e=>{if(this._isInEditMode)return!0;const t=e.target,i=!e.ctrlKey&&!e.shiftKey&&!e.altKey,n=e.ctrlKey&&!e.shiftKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.Space&&(n||i)&&this._domExplorer.capabilities.canToggleComputedPropertyEnable){const i=s.findHeaderOrSourceAncestor(t),a=s.isHeader(i);if(!a&&n){this.viewSource(t);return!1}const r=t.firstElementChild;a?this.toggleHeaderCheckBox(r):this.togglePropertyCheckBox(r);e.preventDefault();return!1}if(e.key===Common.Keys.ENTER&&i&&this._domExplorer.capabilities.canEditPropertyValue){const e=this.findClosestProperty(t);this.editProperty(e);return!1}return!0})}prepareEditBox(e){this.enterEditValue(e)||this.setCurrentSelection(e)}editSubproperty(e){for(var t=e.container,i=e.rule.properties.length-1;i>=0;i--){var n=e.rule.properties[i];if(n===t)break;if(n.name===e.name){this.prepareEditBox(n);return}}this.editAddedLonghandPropertyFromShorthandSubproperty(e)}editAddedLonghandPropertyFromShorthandSubproperty(e){var t=e.name,i=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(this._listElement,s.CSS_SCROLL_CONTAINER),n=this.findElementForProperty(e),a=e.rule.addProperty(),r=t=>{var s=this._model.insertNewSource(a,e),r=this.insertNewPropertyIntoView(n,s);Common.ToolWindowHelpers.scrollIntoView(r,i);this.prepareEditBox(a);t(a)};return new Promise(e=>{a.commitName(t).then(()=>r(e))})}insertNewPropertyIntoView(e,t){var i=this.instantiateTemplate("winningStylesPropertyTemplate",t);e.parentElement.insertBefore(i,e);return i}instantiateTemplate(e,t){var i=new a.Template(this._domExplorer.capabilities,{htmlElementSource:document,templateId:e}),n=this.htmlElementSource.createElement("div");n.innerHTML=i.createTemplateText(t);return n.firstElementChild}setCurrentSelection(e){var t=this.findElementForProperty(e);t&&this.setFocus(t)}findElementForProperty(e,t){var i="."+s.CSS_SOURCE+"[data-uid='"+e.uid+"']"+(t?" ."+t:"");return this._listElement.querySelector(i)}enterEditValue(e){(e=>{this._isInEditMode=!0;setTimeout(e,0)})(()=>this.editPropertyValue(e));return!0}editPropertyValue(i){var n=this.findElementForProperty(i,s.CSS_PROPERTY_VALUE);if(n){var a=F12.DomExplorer.DomExplorerWindow.findAncestorByClass(n,s.CSS_SOURCE);if(a){F12.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_Intellisense_Start);var r=new F12.DomExplorer.CssAndHtmlMetadataSource,o=new F12.DomExplorer.StylePropertyValueIntellisenseProvider(i.name,r);o.onShouldOpenOnTextChange=(e=>!e.match(/^-?\d/));var l=new Common.Intellisense.IntellisenseContext(new Common.Intellisense.InputElementTextEditorBridge,new Common.Intellisense.IntellisenseMenu("intellisenseListBox",null,null,500,!0,o,null,!0),o);F12.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_Intellisense_Stop);var m=new e.ValueEditorKey(";"),d=new e.ValueEditor(document,this._domExplorer,window,s.MAX_PROPERTY_VALUE_ROWS,l);d.addExitKeys(m);d.enableCommitOnChange();d.enableNumericChanges();var h=!1,u=1,c=1,p=1,g=a.offsetWidth+a.offsetLeft-n.offsetLeft-u-c-p,y=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(a,s.CSS_SOURCE_COLOR);if(y){var C=window.getComputedStyle(y);if(C&&"none"!==C.display){g+=y.offsetWidth;g+=parseInt(C.marginLeft,10)+parseInt(C.marginRight,10)}}n.textContent=n.textContent.trim();var E,T=null;d.show(n,g,(e,t)=>new Promise(t=>{if(!h){this._model.startSingleEdit();h=!0}null!==T&&window.clearTimeout(T);E=e;T=window.setTimeout(()=>{i.commitValue(E);T=null},200);t(!0)})).then(e=>{if(null!==T){window.clearTimeout(T);i.commitValue(E)}h&&this._model.endSingleEdit();this._isInEditMode=!1;i.refreshValueDisplay();this.updateViewSetFocus(i);var t=this.findElementForProperty(i);t&&this.updateStatus(i,t)})}}}updateViewSetFocus(e){if(!this._isInEditMode){this._oneShotPropertyFocus=e;this.updateView()}}registerDOMAttrModifiedHandler(){this.addHandler(this._listElement,"DOMAttrModified",null,e=>{if("aria-checked"===e.attrName){var t=s.findHeaderOrSourceAncestor(e.target);if(t){var i="true"===e.newValue,n=t.firstElementChild;s.isHeader(t)?this.toggleHeaderCheckBox(n,i):this.togglePropertyCheckBox(n,i)}}return!0})}postViewProcessing(){super.postViewProcessing();var e=Common.ModelView.Utility.findDescendentByClass(this.listRoot,i.HEADER_CLASS);e&&(e.tabIndex=r.DEFAULT_TABINDEX_VALUE);this.synchronizeCheckBoxState();if(this._oneShotPropertyFocus){if(!s.isCurrentFocusOnInput()){var t=this.findElementForProperty(this._oneShotPropertyFocus);t&&this.select(t)}this._oneShotPropertyFocus=null}}synchronizeCheckBoxState(){this._model.forEachStyle(e=>this.setCheckBoxState(e))}openTargetElementFileLink(e){var t=e.rule,i=t.styleHref||t.fileUrl;this._model.handleFileLinkClick(i,t.fileLine,t.fileColumn)}findFocus(){return this._listElement.querySelector(":focus")}findClosestProperty(e){if(e){var t=s.getPropertyId(e);if(t){return this._model.getPropertyById(t)}}}getMenuConfig(){return this}preViewProcessing(){super.preViewProcessing();this.synchronizeViewAndModel()}synchronizeViewAndModel(){this._model.showAllStyles=this.getAllStylesButtonState();this._model.nameFilter=this.htmlElementSource.getElementById(s.FILTER_TEXT_BOX_ID).value;this.synchronizeNoResultsMessage()}synchronizeNoResultsMessage(){var e=this.htmlElementSource.getElementById(s.NO_RESULTS_MESSAGE_ID);0===this._model.length?e.style.display="block":e.style.display="none"}onCopy(e){var t=this.findClosestProperty(e);if(t)return t.formatForCopy;var i=this._model.findStyleByName(e.getAttribute("data-name"));return i?i.propertyName+": "+i.propertyValue+";":void 0}initializeAllStylesButton(){this._allStylesButton=this.htmlElementSource.getElementById(s.ALL_STYLES_BUTTON_ID);if(this._allStylesButton){if(!this._allStylesButtonInitialized){this._allStylesButton.classList.add(s.CSS_BPT_TOOLBAR_TOGGLE_BUTTON_STATE_ON);this._allStylesButton.setAttribute("aria-pressed","true");this._allStylesButtonInitialized=!0}this.addHandler(this._allStylesButton,"mouseover",null,e=>{Microsoft.Plugin.Tooltip.show({content:this.getAllStylesButtonToolTip()});return!0});this._allStylesButton.setAttribute("aria-label",this.getAllStylesButtonToolTip());this.addHandler(this._allStylesButton,"click",null,e=>{this.synchronizeAllStylesModelStateWithButtonState();return!1});this.addHandler(this._allStylesButton,"keydown",null,e=>{if(this._isInEditMode)return!0;var t=!e.ctrlKey&&!e.shiftKey&&!e.altKey;if((e.key===Common.Keys.SPACEBAR||e.key===Common.Keys.ENTER)&&t){this.synchronizeAllStylesModelStateWithButtonState();return!1}return!0});this.addHandler(this._allStylesButton,"DOMAttrModified",null,e=>{if("aria-pressed"===e.attrName&&e.target===this._allStylesButton){"true"===e.newValue===this._model.showAllStyles&&(this._model.showAllStyles=!this._model.showAllStyles)}return!0})}}synchronizeAllStylesModelStateWithButtonState(){this._model.showAllStyles=this.getAllStylesButtonState()}getAllStylesButtonState(){this._allStylesButton||(this._allStylesButton=this.htmlElementSource.getElementById(s.ALL_STYLES_BUTTON_ID));return!this._allStylesButton.classList.contains(s.CSS_BPT_TOOLBAR_TOGGLE_BUTTON_STATE_ON)}getAllStylesButtonToolTip(){return Microsoft.Plugin.Resources.getString("UserStylesDomExplorerButtonTooltip")}addNameFilterHandlers(){var t=this.htmlElementSource.getElementById(s.FILTER_TEXT_BOX_ID);if(t){this.addHandler(t,"keyup",null,e=>{var t=e.target;if(this._model.nameFilter!==t.value){this._model.nameFilter=t.value;this.renderView()}return!0});this._filterTextBoxContextMenu=new e.TextControlMenuController(t)}}select(e){if(e){this.setFocus(e);return!0}return!1}togglePropertyCheckBox(e,t){this._model.toggleEnabled(s.getPropertyId(e),t)}toggleHeaderCheckBox(e,t){var i=e.parentElement.getAttribute("data-name"),n=this._model.findStyleByName(i);n&&this._model.toggleEnableForStyle(n,t)}onRuleChange(e,t,i){2===e&&this.updateViewSetFocus(this.findClosestProperty(this.findFocus()))}onPropertyChange(e,t,i){3===e?this.onPropertyWinningRuleChange(t,i):4===e?this.onPropertyEnableChange(t,i):2===e?this.onPropertyValueChange(t,i):6===e?this.onPropertyStatusChange(t,i):11===e&&this.onPropertyChangeStatusChange(t);this.synchronizeStyle(t);var n=this._model.findStyleByName(t.name);n&&this.setCheckBoxState(n)}synchronizeStyle(e){var t=e.name,i="."+s.CSS_HEADER+"[data-name='"+t+"']",n=this._listElement.querySelector(i);if(n){F12.DomExplorer.DomExplorerWindow;if(this._model.findStyleByName(t)){e.isWinning?n.setAttribute("data-uid",e.uid):n.getAttribute("data-uid")===e.uid&&n.setAttribute("data-uid","");this.updateViewSetFocus(this.findClosestProperty(this.findFocus()))}}}onPropertyStatusChange(e,t){var i=this.findElementForProperty(e);if(i){this.updateStatus(e,i);this.updateColorDisplay(e,i)}}onPropertyChangeStatusChange(e){var t=this.findElementForProperty(e);t&&this.updateSourceChangeBar(e,t,e.changeState)}onPropertyWinningRuleChange(e,t){var i=e.uid,n="."+s.CSS_SOURCE+"[data-uid='"+i+"']",a=this._listElement.querySelector(n);if(a){t?a.classList.remove(s.CSS_NOT_WINNING):a.classList.add(s.CSS_NOT_WINNING);var r=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(a,s.CSS_ARIA_OVERRIDDEN);r&&(r.innerText=e.ariaOverriddenString)}}onPropertyEnableChange(e,t){var i="."+s.CSS_SOURCE+"[data-uid='"+e.uid+"'] ."+s.CSS_SOURCE_CHECKBOX,n=this._listElement.querySelector(i);if(n){n.checked=t;this._model.findStyleByName(e.name).enabledCount+=t?1:-1;n.parentElement.setAttribute("aria-checked",t)}if(this._tcPropertyEnableCallback){this._tcPropertyEnableCallback(t);this._tcPropertyEnableCallback=null}}onPropertyValueChange(e,t){var i="."+s.CSS_SOURCE+"[data-uid='"+e.uid+"']",n=this._listElement.querySelector(i);if(n){var a=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(n,s.CSS_PROPERTY_VALUE);a&&(a.textContent=e.valueForDisplay);this.updateColorDisplay(e,n)}}updateStatus(t,i){var n=1===t.status;i.setAttribute("aria-invalid",""+!n);var a=this.findElementForProperty(t,s.CSS_PROPERTY_VALUE);a&&(n?a.classList.remove(s.CSS_INVALID_PROPERTY):a.classList.add(s.CSS_INVALID_PROPERTY));var r=this.findElementForProperty(t,s.CSS_ARIA_INVALID);r&&(r.innerText=n?"":e.StyleProperty.AriaInvalidString)}updateSourceChangeBar(t,i,n){var a=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,s.CSS_CHANGE_BAR);a.setAttribute("data-change",n);var r=this.findElementForProperty(t,s.CSS_ARIA_CHANGE_STATE);r&&(r.innerText=t.ariaChangeStateString);var o=n===e.StyleChangeNotifier.CHANGE_BAR_REMOVE;a.parentElement.setAttribute("data-removed",o);this.updateStyleChangeBar(this._model.findStyleByName(t.name))}updateStyleChangeBar(t){var i="."+s.CSS_HEADER+"[data-name='"+t.propertyName+"'] > ."+s.CSS_CHANGE_BAR,n=this._listElement.querySelector(i);if(n){var a=t.expanded?e.StyleChangeNotifier.CHANGE_BAR_NONE:t.changeState;n.setAttribute("data-change",a);var r=n.nextElementSibling;r&&r.classList.contains(s.CSS_ARIA_CHANGE_STATE)&&(r.innerText=t.expanded?"":e.StyleRule.AriaChangeStateUpdateString)}}updateColorDisplay(e,t){var i=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(t,s.CSS_SOURCE_COLOR);if(i)if(e.isDisplayableColor){i.style.backgroundColor=e.value;i.classList.remove(s.CSS_HEADER_COLOR_HIDDEN)}else i.classList.add(s.CSS_HEADER_COLOR_HIDDEN)}setCheckBoxState(e){var t="."+s.CSS_HEADER+"[data-name='"+e.propertyName+"'] > ."+s.CSS_HEADER_CHECKBOX,i=this._listElement.querySelector(t);if(i){i.checked=e.isEnabled;i.indeterminate=e.isEnabledIndeterminate;i.parentElement.setAttribute("aria-checked",e.isEnabled)}}get tcPropertyEnableCallback(){return this._tcPropertyEnableCallback}set tcPropertyEnableCallback(e){this._tcPropertyEnableCallback=e}tcQuery(e){return this._listElement.querySelector(e)}}r.LAYOUT_VIEW="layoutView";r.LAYOUT_BOX="Layout-Box";r.DEFAULT_TABINDEX_VALUE=101;n.View=r}(n=e.Wsp||(e.Wsp={}))}(Dom||(Dom={}));!function(e){!function(e){"use strict";let t;!function(e){class t extends F12.DomMutationBreakpoints.DmbpViewBase{constructor(e,i,n,a,s){super(e.dmbpManager,i,n,t.TEMPLATE_NAME_BREAKPOINT,s);this._domExplorer=e}activateTab(){this._domExplorer.activateTab("dmbp")}navigateToElementByUid(e){this._domExplorer.expandToElementByUid(e)}}t.TEMPLATE_NAME_BREAKPOINT="dmbpBreakpointTemplate";e.View=t}(t=e.Views||(e.Views={}))}(e.DomMutations||(e.DomMutations={}))}(Dom||(Dom={}));!function(e){"use strict";var t=Common.ModelView.ExpandingListView;class i extends t{constructor(e,t,i,n,a,s,r,o){super(t,i,n,a,e.capabilities,(e,t)=>{a.setCollapsedState(e,!t)},o,r,"uniqueId","source");this._domExplorer=e;this._changesListElement=this.htmlElementSource.getElementById(this.listViewDivId);this._emptyMessageElement=this.htmlElementSource.getElementById("changesEmptyMessage");this._emptyMessageElement.textContent=Common.ToolWindowHelpers.loadString("ChangesViewEmptyMessage");this._model=a;this._styleCache=s;this.setupEventHandlers();this.menuItems=[{name:"copy",textIdentifier:"CopyMenuText",execute:e=>this.copyObject(e),isDisabled:e=>this.isCopyDisabled(e)},{name:"copyAll",textIdentifier:"CopyAllMenuText",execute:e=>this.copyAll()},{name:"revert",textIdentifier:"RevertStyleMenuText",execute:e=>this.revert(e),isDisabled:e=>this.isRevertDisabled(e)},{name:"viewSource",textIdentifier:"ViewSourceMenuText",execute:e=>{window.setTimeout(()=>{this.canViewSource(e)&&this.viewSource(e)},0)},isDisabled:e=>!this.canViewSource(e)}]}postViewProcessing(){this._model.addUpdateListener(this);super.postViewProcessing();this._emptyMessageElement.style.display=this._model.changes.length?"none":"block"}navigateLink(e){e.isInline?this._model.selectElement(e.uid):this._model.navigateFileLink(e.url,e.line,e.column)}getMenuConfig(){return this}isCopyDisabled(e){if(e.classList.contains(t.HEADER_CLASS))return!1;var n=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,i.RULE_CLASS);return this.getRuleForElement(n).isDeleted}copyObject(e){var n;if(e.classList.contains(t.HEADER_CLASS)){var a=e.parentElement.getAttribute("data-listid");n=this._model.lookupSource(a)}else{var s=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,i.RULE_CLASS);n=this.getRuleForElement(s)}this.setClipboard(n)}copyAll(){this.setClipboard(this._model)}isRevertDisabled(e){return!F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,i.RULE_CLASS)}revert(e){const t=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,i.RULE_CLASS);this.revertRule(this.getRuleForElement(t))}revertRule(e){return e.revert().then(t=>{this._styleCache.applyChanges([{event:"revertRule",uid:e.uid,obj:t}]);this.updateView()})}viewQuery(e,i,n){var a="."+t.LIST_ITEM_CLASS+"[data-listid='"+e.uniqueId+"']";i&&(a+=" [data-listsubid='"+i.uid+"']");n&&(a+=" ."+n);return this.listRoot.querySelector(a)}onRuleChange(e,t,n){if(7===e){if(a=this._model.lookupRule(t.uid)){if(s=this.viewQuery(a.source,a,i.LINK_CLASS)){s.setAttribute("data-tooltip",n);(s=this.viewQuery(a.source,null,i.SOURCE_CLASS))&&s.setAttribute("data-tooltip",n)}}}if(8===e){var a;if(a=this._model.lookupRule(t.uid)){var s,r=n;a.url=r.documentPath;a.line=r.oneBasedLine;a.column=r.oneBasedColumn;(s=this.viewQuery(a.source,a,i.LINK_CLASS))&&(s.innerText=Common.ToolWindowHelpers.createFileLinkText(null,r.oneBasedLine,r.oneBasedColumn));(s=this.viewQuery(a.source,null,i.SOURCE_CLASS))&&(s.innerText=Common.ToolWindowHelpers.getTruncatedFileName(r.documentPath,50))}}}onPropertyChange(e,t,i){}getRuleForElement(e){if(e&&e.classList.contains(i.RULE_CLASS)){var t=e.getAttribute("data-uid");return this._model.lookupRule(t)}}setClipboard(e){const t=(e?e.textForCopy:"")||"";Common.ClipboardHelper.copyPlainText(t)}viewSource(e){var t=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,i.RULE_CLASS);if(t){var n=this.getRuleForElement(t);n&&n.hasFileLink&&this.navigateLink(n)}}canViewSource(e){if(!this._domExplorer.capabilities.canViewSource)return!1;var t=F12.DomExplorer.DomExplorerWindow.findDescendentByClass(e,i.RULE_CLASS);if(!t)return!1;var n=this.getRuleForElement(t);return!!n&&n.hasFileLink}setupEventHandlers(){this.addHandler(this.listRoot,"click",[i.LINK_CLASS],e=>{var t=e.target.nextElementSibling;this.navigateLink(this.getRuleForElement(t));return!1});this.addHandler(this.listRoot,"keydown",[t.HEADER_CLASS,t.CHILD_VALUE_CONTAINER_CLASS],e=>{var t=e.target,i=e.ctrlKey&&!e.shiftKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.C&&i){this.copyObject(t);e.preventDefault();return!1}var n=!e.ctrlKey&&!e.shiftKey&&!e.altKey;if(this.canViewSource(t)&&(e.keyCode===Common.KeyCodes.Space||e.keyCode===Common.KeyCodes.Enter)&&n){this.viewSource(t);return!1}return!0})}}i.SOURCE_CLASS="BPT-Changes-Source";i.RULE_CLASS="BPT-Changes-Rule";i.LINK_CLASS="BPT-Changes-Link";e.ChangesView=i}(Dom||(Dom={}));!function(e){"use strict";class t{static init(e,i){e.addClass("BPT-Tab-Item");F12.Tools.Utility.Assert.areEqual(e.attr("role"),"tab","Missing tab role");F12.Tools.Utility.Assert.areEqual(e.parent().attr("role"),"tablist","Missing tablist role");e.bind("click",()=>{t.selectItem(e)});e.bind("keydown",i=>{if(i.keyCode!=Common.KeyCodes.Enter)return!0;t.selectItem(e);return!1});e.get(0).addEventListener("DOMAttrModified",t=>{if("aria-selected"===t.attrName){if("true"===t.newValue){e.attr("tabindex","1");i()}else e.removeAttr("tabindex")}})}static isActive(e){return"true"===e.attr("aria-selected")}static selectItem(e){var t=e.parent().find(".BPT-Tab-Item[aria-selected='true']");t.length>0&&t.get(0)!==e.get(0)&&t.attr("aria-selected","false");"true"!==e.attr("aria-selected")&&e.attr("aria-selected","true")}}e.TabItem=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,t){this._listeners=[];this._minPaneSize=240;this._verticalLayoutMinPaneSize=40;this._verticalLayout=F12.DomExplorer.verticalLayout;this.refreshPaneDimensions=(()=>{this.refreshPaneWidth();this.refreshPaneHeight()});this._container=e;this._domExplorer=t;this._leftPane=this._container.children(".BPT-HorizontalPane-Left");this._centerPane=this._container.children(".BPT-HorizontalPane-Center");this._rightPane=this._container.children(".BPT-HorizontalPane-Right");this._leftPane.addClass("BPT-Pane");this._centerPane.addClass("BPT-Pane");this._centerPane.addClass("BPT-Pane-Hidden");this._rightPane.addClass("BPT-Pane");this._curRightPaneWidth=this.getInitRightPaneWidth();this._curRightPaneHeight=this.getInitRightPaneHeight();this._lastCenterPaneWidth=200;this._curCenterPaneWidth=0;this._rightSplitter=$m("<div>");this._rightSplitter.addClass("BPT-Pane-Splitter");this._rightSplitter.addClass("BPT-RightSplitterVDocking");this._rightPane.parent().get(0).insertBefore(this._rightSplitter.get(0),this._rightPane.get(0));this._centerSplitter=$m("<div>");this._centerSplitter.addClass("BPT-Pane-Splitter");this._centerSplitter.addClass("BPT-Pane-Splitter-Hidden");this.hideAccessibilityPaneForVerticalLayout();this._centerPane.parent().get(0).insertBefore(this._centerSplitter.get(0),this._centerPane.get(0));window.addEventListener("resize",this.refreshPaneDimensions);this.refreshPaneDimensions();this._rightSplitter.bind("mousedown",e=>{this.splitterMouseDownHandler(e,Common.Util.deferUntilNextFrame(this.rightSplitterMouseMoveHandler.bind(this)))});this._centerSplitter.bind("mousedown",e=>{this.splitterMouseDownHandler(e,Common.Util.deferUntilNextFrame(this.centerSplitterMouseMoveHandler.bind(this)))})}get leftWidth(){return this._leftWidth}get rightWidth(){return this._rightWidth}get centerWidth(){return this._centerWidth}addResizeListener(e){this._listeners.indexOf(e)<0&&this._listeners.push(e)}refreshPaneWidth(){this.setPaneWidth(this._curRightPaneWidth,this._curCenterPaneWidth)}refreshPaneHeight(){if(this._verticalLayout.matches){this._curRightPaneHeight&&0!==this._curRightPaneHeight||(this._curRightPaneHeight=this._container.outerHeight(!0)/2);this.setPaneHeight(this._curRightPaneHeight);this.setPaneWidth(this._curRightPaneWidth,this._curCenterPaneWidth)}else{this._rightPane.css("height","");this._centerPane.css("height","");this._leftPane.css("height","");this._centerSplitter.css("height","")}}removeResizeListener(e){var t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}showAccessibilityPane(){this._centerSplitter.removeClass("BPT-Pane-Splitter-Hidden");this._centerPane.removeClass("BPT-Pane-Hidden");this.showAccessibilityPaneForVerticalLayout();this.setPaneWidth(this._curRightPaneWidth,this._lastCenterPaneWidth)}showAccessibilityPaneForVerticalLayout(){this._centerPane.addClass("BPT-CenterPane-Shown");this._centerPane.removeClass("BPT-CenterPane-Hidden");this._leftPane.addClass("BPT-LeftPane-WithCenterPaneShown");this._leftPane.removeClass("BPT-LeftPane-WithCenterPaneHidden")}hideAccessibilityPane(){this._centerSplitter.addClass("BPT-Pane-Splitter-Hidden");this._centerPane.addClass("BPT-Pane-Hidden");this.hideAccessibilityPaneForVerticalLayout();0!==this._curCenterPaneWidth?this._lastCenterPaneWidth=this._curCenterPaneWidth:this._lastCenterPaneWidth=this._minPaneSize;this._curCenterPaneWidth=0;this.setPaneWidth(this._curRightPaneWidth,this._curCenterPaneWidth)}hideAccessibilityPaneForVerticalLayout(){this._centerPane.removeClass("BPT-CenterPane-Shown");this._centerPane.addClass("BPT-CenterPane-Hidden");this._leftPane.removeClass("BPT-LeftPane-WithCenterPaneShown");this._leftPane.addClass("BPT-LeftPane-WithCenterPaneHidden")}rightSplitterMouseMoveHandler(e){if(this._verticalLayout.matches){this._curRightPaneHeight&&0!==this._curRightPaneHeight||(this._curRightPaneHeight=this._container.outerHeight(!0)/2);const t=this._rightSplitter.get(0).getBoundingClientRect().top,i=this._curRightPaneHeight+t-e.pageY;this._curRightPaneHeight=i<this._verticalLayoutMinPaneSize?this._verticalLayoutMinPaneSize:i;this.setPaneHeight(i)}else{var t=this._rightSplitter.get(0).getBoundingClientRect().left;if(0===this._curCenterPaneWidth){this.setPaneWidth(this._rightPane.width()-e.pageX+t,0);return}let a=this._curCenterPaneWidth+e.pageX-t,s=this._rightPane.width()-e.pageX+t;var i=this._container.outerWidth(!0);if(s<this._minPaneSize){var n=this._minPaneSize-s;s=this._minPaneSize;a-=n}if(a<this._minPaneSize){let e=this._container.outerWidth(!0)-(s+a),t=this._minPaneSize-a;e-t>this._minPaneSize?s+=t:s=i-2*this._minPaneSize;a=this._minPaneSize}this.setPaneWidth(s,a)}}centerSplitterMouseMoveHandler(e){var t=this._centerSplitter.get(0).getBoundingClientRect().left;if(this._verticalLayout.matches){const i=this._container.outerWidth(!0);let n=this._centerPane.width()-e.pageX+t;n<this._verticalLayoutMinPaneSize&&(n=this._verticalLayoutMinPaneSize);const a=this._container.outerWidth(!0)-n;a<this._verticalLayoutMinPaneSize&&(n-=this._verticalLayoutMinPaneSize-a);this.setPaneWidth(i,n)}else{let n=this._rightPane.width(),a=this._centerPane.width()-e.pageX+t;if(a<this._minPaneSize){var i=this._minPaneSize-a;n-i>this._minPaneSize?n-=i:n=this._minPaneSize;a=this._minPaneSize}let s=this._container.outerWidth(!0)-(n+a);s<this._minPaneSize&&(a-=this._minPaneSize-s);this.setPaneWidth(n,a)}}splitterMouseDownHandler(e,t){var i=document.body.style.cursor;document.body.style.cursor="w-resize";var n=()=>{$m(document).unbind("mousemove",t);$m(document).unbind("mouseup",n);document.body.style.cursor=i;this.triggerOnPaneResizeListeners()};$m(document).bind("mousemove",t);$m(document).bind("mouseup",n);e.stopImmediatePropagation();e.preventDefault()}setPaneWidth(e,i){if(!(e<=0||i<0)){if(this._verticalLayout.matches){0!==i&&(i=this._curCenterPaneWidth=Math.round(Math.max(this._verticalLayoutMinPaneSize,i)));const e=this._container.outerWidth(!0);if(0===i){this._rightPane.css("width",e+"px");this._leftPane.css("width",e+"px");this._centerPane.css("width","0px")}else{let t=e-i-this._centerSplitter.width();t<this._verticalLayoutMinPaneSize&&(i=e-(t=this._verticalLayoutMinPaneSize)-this._centerSplitter.width());this._rightPane.css("width",e+"px");this._centerPane.css("width",i+"px");this._leftPane.css("width",e-i-this._centerSplitter.width()+"px")}}else{e=this._curRightPaneWidth=Math.round(Math.max(this._minPaneSize,e));0!==i&&(i=this._curCenterPaneWidth=Math.round(Math.max(this._minPaneSize,i)));var n=this._container.outerWidth(!0);0===i?n<2*this._minPaneSize?e=n>>1:n-e<this._minPaneSize&&(e=n-this._minPaneSize):n<3*this._minPaneSize?e=i=Math.floor(n/3):n-(e+i)<this._minPaneSize&&(e=i=Math.floor((n-this._minPaneSize)/2));this._leftPane.css("width","calc(100% - "+(e+i+this._rightSplitter.width()+this._centerSplitter.width())+"px)");this._centerPane.css("width",i+"px");this._rightPane.css("width",e+"px")}this._leftWidth=this._leftPane.outerWidth(!1);this._centerWidth=this._centerPane.outerWidth(!1);this._rightWidth=this._rightPane.outerWidth(!1);this._domExplorer.persistenceManager.setSetting(t.RIGHT_PANE_WIDTH_KEY,this._rightWidth);this.triggerOnPaneResizeListeners()}}triggerOnPaneResizeListeners(){this._listeners.length>0&&this._listeners.forEach(e=>e.onPaneResize(this.leftWidth,this._centerWidth,this.rightWidth))}setPaneHeight(e){if(e<=0)return;const i=this._container.outerHeight(!0)-e-this._rightSplitter.height();if(this._centerPane.hasClass("BPT-CenterPane-Hidden")){this._rightPane.css("height",e+"px");this._leftPane.css("height",i+"px")}else{this._rightPane.css("height",e+"px");this._leftPane.css("height",i+"px");this._centerSplitter.css("height",i+"px");this._centerPane.css("height",i+"px")}this._domExplorer.persistenceManager.setSetting(t.RIGHT_PANE_HEIGHT_KEY,this._curRightPaneHeight)}getInitRightPaneWidth(){let e=this._domExplorer.persistenceManager.getSetting(t.RIGHT_PANE_WIDTH_KEY,this.getDefaultRightPaneWidth());return e<this._minPaneSize?this._minPaneSize:e}getDefaultRightPaneWidth(){let e=window.outerWidth;return e>0?Math.max(t.RIGHT_PANE_DEFAULT_WIDTH,e/100*30):t.RIGHT_PANE_DEFAULT_WIDTH}getInitRightPaneHeight(){let e=this._container.outerHeight(!0)/2,i=this._domExplorer.persistenceManager.getSetting(t.RIGHT_PANE_HEIGHT_KEY,e);return i<this._verticalLayoutMinPaneSize?this._verticalLayoutMinPaneSize:i}}t.RIGHT_PANE_WIDTH_KEY="DomExplorerRightPaneWidth";t.RIGHT_PANE_HEIGHT_KEY="DomExplorerRightPaneHeight";t.RIGHT_PANE_DEFAULT_WIDTH=390;e.HorizontalPane=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,t=!1,i=!1,n=!1,a=!1){this.key=e;this.shiftKey=t;this.ctrlKey=i;this.altKey=n;this.metaKey=a}equalTo(e){return this.key===e.key&&this.shiftKey===e.shiftKey&&this.ctrlKey===e.ctrlKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey}}t.EnterKey=new t("Enter");t.CtrlEnterKey=new t("Enter",!1,!0);t.TabKey=new t("Tab");t.ShiftTabKey=new t("Tab",!0);t.EscapeKey=new t("Escape");t.UpKey=new t("Up");t.DownKey=new t("Down");t.ShiftUpKey=new t("Up",!0);t.ShiftDownKey=new t("Down",!0);t.ShiftF10Key=new t("F10",!0);e.ValueEditorKey=t;let i;!function(e){e[e.Cancelled=0]="Cancelled";e[e.Dismissed=1]="Dismissed";e[e.Committed=2]="Committed"}(i||(i={}));class n{constructor(e,i,n,a=1,s,r){this._htmlElementSource=e;this._domExplorer=i;this._view=n;this._maxRows=a;this._intellisenseContext=s;this._oldValue=r;this._exitKeys=[t.EnterKey,t.TabKey,t.ShiftTabKey];this._cancelKey=t.EscapeKey;this._arrowKeys=[t.UpKey,t.DownKey,t.ShiftUpKey,t.ShiftDownKey];this._reportedRowCount=0;this.doTrim=!0;this.stopPropagation=!0}get textBox(){return this._textBox}addExitKeys(...e){this._exitKeys=this._exitKeys.concat(e)}removeExitKeys(...e){e.forEach((e,t,i)=>{for(var n=0;n<this._exitKeys.length;n++)if(this._exitKeys[n]===e){this._exitKeys.splice(n,1);break}})}enableNumericChanges(){this._isNumericArrowsEnabled=!0}enableStripDelimiter(e){this._stripDelimiter=e}enableTabsInData(){this.removeExitKeys(e.ValueEditorKey.TabKey,e.ValueEditorKey.ShiftTabKey);this._allowTabs=!0}enableCommitOnChange(){this._isCommitOnChangeEnabled=!0}show(s,r,o,l){this._onSizeChange=l;this._element=s;this._onCommit=o;this._dragElements=[];this._textBox=this._htmlElementSource.createElement("textarea");this._textBox.classList.add("BPT-EditBox");this._textBox.setAttribute("role","textbox");this._textBox.setAttribute("spellcheck","false");this._textBox.setAttribute("aria-label",s.getAttribute("aria-label"));if(1===this._maxRows){this._textBox.rows=1;this._textBox.removeAttribute("aria-multiline")}else this._textBox.setAttribute("aria-multiline","true");for(var m=s.parentNode;m;){if(m.draggable){this._dragElements.push(m);m.draggable=!1}m=m.parentNode}var d=this._view.getComputedStyle(s);this._textBox.style.fontFamily=d.fontFamily;this._textBox.style.fontSize=d.fontSize;this._textBox.style.fontWeight=d.fontWeight;this._textBox.style.fontStyle=d.fontStyle;this._textBox.style.lineHeight=d.lineHeight;this._textBox.style.width=(r||s.offsetWidth+10)+"px";this._textBox.style.overflowX="hidden";this._markActiveElements=F12.DomExplorer.DomExplorerWindow.findAllAncestorsByClass(s,"BPT-EditBox-MarkActive");this._markActiveElements.forEach(e=>{e.classList.add("BPT-EditBox-Active")});m=this._element.parentElement;this._originalOverflow=m.style.overflow;m.style.overflow="visible";this._originalMaxHeight=m.style.maxHeight;this._textBox.rows=1;n.replace(this._element,this._textBox);var h=this._textBox.clientHeight;this.setInitialValue(this._lastCommitValue=this._originalValue=this._oldValue||this._element.textContent);this._updateHandler=(e=>{this._maxRows>1&&(this._textBox.rows=Math.max(Math.min(Math.ceil(this._textBox.scrollHeight/h),this._maxRows),1));this._textBox.style.height=this._textBox.rows*h+"px";this._isCommitOnChangeEnabled?this.checkForValueCommit(!1):this._textBox.classList.remove(n.InvalidValueClass);if(this._reportedRowCount!==this._textBox.rows){this._reportedRowCount=this._textBox.rows;this._onSizeChange&&this._onSizeChange(this._textBox.rows)}});this._dismissContextMenuAndStopPropagation=(e=>{this.stopPropagation&&e.stopPropagation();Microsoft.Plugin.ContextMenu.dismissAll()});this._updateHandler();m.classList.contains("BPT-EditBox-MaxHeightOverride")&&(m.style.maxHeight=this._maxRows*h+"px");this._textBox.addEventListener("input",this._updateHandler);this._intellisenseContext&&this._intellisenseContext.initialize(this._textBox);this._keyDownHandler=(e=>{if(!this.onKeyPress(e)){e.preventDefault();e.stopPropagation()}});this._textBox.addEventListener("keydown",this._keyDownHandler);this._textBox.addEventListener("mousedown",this._dismissContextMenuAndStopPropagation,!0);this._textBox.addEventListener("mouseup",this._dismissContextMenuAndStopPropagation,!0);this._textBox.addEventListener("click",this._dismissContextMenuAndStopPropagation,!0);this._textBox.addEventListener("dblclick",this._dismissContextMenuAndStopPropagation,!0);Microsoft.Plugin.F12.addEventListener("deactivated",this._forcedCloseHandler=this.forcedClose.bind(this));window.addEventListener("navigatesubframes",this._forcedCloseHandler);Common.NavigationUtilities.disableNavigation();this._textBoxContextMenu=new e.TextControlMenuController(this._textBox);this._mouseWheelHandler=(e=>{if(this._isNumericArrowsEnabled){var t=Math.floor(e.wheelDelta/120);e.shiftKey&&(t*=10);this.numericValueChange(t);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.CHANGE_VALUE_EDITOR_NUMERIC_VALUE,Common.TriggerType.Ui);e.preventDefault();e.stopPropagation()}});this._textBox.addEventListener("mousewheel",this._mouseWheelHandler);if(this._intellisenseContext){var u=this._intellisenseContext.intellisenseMenu;if(this._isCommitOnChangeEnabled){var c=u.onSelectionChanged;u.onSelectionChanged=(e=>{c&&c(e);this.checkForValueCommit(!1,e.text)});var p=u.onClosing;u.onClosing=(()=>{p&&p();this.checkForValueCommit(!1)})}var g=u.onChoiceCommitted;u.onChoiceCommitted=((e,n)=>{g&&g(e,n);this.checkForValueCommit(!1,e.text);this.completeEdit(i.Committed,0===n?t.TabKey:t.EnterKey)})}this._dismissCheck=(e=>{if(!this._isDismissed){var t=e.target;if(t!==this._textBox&&!Common.ToolWindowHelpers.isContextMenuUp()){var n=t.parentElement;if(!("intellisenseListBox"===t.className||n&&"intellisenseListBox"===n.className||this.shouldContinueEdit&&this.shouldContinueEdit(t)||"HTML"===t.nodeName)){this._isDismissed=!0;this.completeEdit(i.Dismissed)}}}});this._htmlElementSource.addEventListener("mousedown",this._dismissCheck);this._htmlElementSource.addEventListener("mouseup",this._dismissCheck,!0);this._htmlElementSource.addEventListener("click",this._dismissCheck,!0);this._htmlElementSource.addEventListener("dblclick",this._dismissCheck,!0);this._textBox.select();this._textBox.focus();this._promiseExec=new a;return new Promise(this._promiseExec.init.bind(this._promiseExec))}forcedClose(){this.completeEdit(i.Committed)}static replace(e,t){var i=e.parentElement;if(i){var n=e.nextSibling;i.removeChild(e);n?i.insertBefore(t,n):i.appendChild(t)}}setInitialValue(e){this._textBox.value=e;document.queryCommandSupported("ms-clearUndoStack")&&document.execCommand("ms-clearUndoStack")}setValue(e,t,i){var n=document.queryCommandSupported("ms-beginUndoUnit");n&&document.execCommand("ms-beginUndoUnit");this._textBox.value=Common.ToolWindowHelpers.replaceTextInRange(this._textBox.value,t,i,e);n&&document.execCommand("ms-endUndoUnit")}checkForValueCommit(e,t){return new Promise(i=>{if(void 0===t){t="\t"!==this._textBox.value?e?this._originalValue:this._textBox.value:this._originalValue;this.doTrim&&(t=t.trim())}if(this._lastCommitValue!==t)if(this._onCommit)this._onCommit(t,this._originalValue).then(e=>{if(e){this._lastCommitValue=t;this._textBox.classList.remove(n.InvalidValueClass)}else this._textBox.classList.add(n.InvalidValueClass);i(e)});else{this._lastCommitValue=t;i(!0)}else i(!0)})}completeEdit(e,t){switch(e){case i.Cancelled:F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EXIT_VALUE_EDIT_CANCELLED,Common.TriggerType.NotSpecified);break;case i.Dismissed:F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EXIT_VALUE_EDIT_DISMISSED,Common.TriggerType.NotSpecified);break;case i.Committed:F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EXIT_VALUE_EDIT_COMMITTED,Common.TriggerType.NotSpecified)}if(!this._promiseExec.isCompleted){if(this._stripDelimiter){var a=this._textBox.value;if(a.length>=2){var s=a[0];s===a[a.length-1]&&-1!==this._stripDelimiter.indexOf(s)&&(this._textBox.value=a.substr(1,a.length-2))}}this.checkForValueCommit(e===i.Cancelled).then(a=>{if(this._element&&(a||e===i.Dismissed)){let m=this._element;a&&!this._oldValue&&e!==i.Cancelled&&(this._element.textContent=this._textBox.value);this._intellisenseContext&&this._intellisenseContext.uninitialize();var s=this._textBox.parentElement;if(s&&s.style){s.style.overflow=this._originalOverflow;s.classList.contains("BPT-EditBox-MaxHeightOverride")&&(s.style.maxHeight=this._originalMaxHeight)}n.replace(this._textBox,this._element);this._element=null;this._markActiveElements.forEach(e=>{e.classList.remove("BPT-EditBox-Active")});this._textBox.removeEventListener("keydown",this._keyDownHandler);this._textBox.removeEventListener("input",this._updateHandler);this._textBox.removeEventListener("mousedown",this._dismissContextMenuAndStopPropagation);this._textBox.removeEventListener("mouseup",this._dismissContextMenuAndStopPropagation);this._textBox.removeEventListener("click",this._dismissContextMenuAndStopPropagation);this._textBox.removeEventListener("dblclick",this._dismissContextMenuAndStopPropagation);this._textBox.removeEventListener("mousewheel",this._mouseWheelHandler);this._htmlElementSource.removeEventListener("mousedown",this._dismissCheck);this._htmlElementSource.removeEventListener("mouseup",this._dismissCheck,!0);this._htmlElementSource.removeEventListener("click",this._dismissCheck,!0);this._htmlElementSource.removeEventListener("dblclick",this._dismissCheck,!0);Microsoft.Plugin.F12.removeEventListener("deactivated",this._forcedCloseHandler);window.removeEventListener("navigatesubframes",this._forcedCloseHandler);Common.NavigationUtilities.enableNavigation();this._textBoxContextMenu.uninitialize();var r=this._dragElements;this._dragElements=[];for(var o=0,l=r.length;o<l;o++)r[o].draggable=!0;this._promiseExec.completed({newValue:this._lastCommitValue,oldValue:this._originalValue,exitKey:t,wasCancelled:e===i.Cancelled||!a});switch(e){case i.Cancelled:case i.Dismissed:$(m).trigger(n.EditCancelledEventName);break;case i.Committed:$(m).trigger(n.EditCompletedEventName)}}})}}onKeyPress(n){if(this._element){var a=new t(n.key,n.shiftKey,n.ctrlKey,n.altKey,n.metaKey);if(a.equalTo(this._cancelKey)){this.completeEdit(i.Cancelled,a);return!1}for(var s=0;s<this._exitKeys.length;s++)if(a.equalTo(this._exitKeys[s])){this.completeEdit(i.Committed,a);return!1}if(this._allowTabs&&(a.equalTo(e.ValueEditorKey.TabKey)||a.equalTo(e.ValueEditorKey.ShiftTabKey))){if(a.equalTo(e.ValueEditorKey.TabKey)){var r=this._textBox.selectionStart,o=this._textBox.selectionEnd;this.setValue("\t",r,o)}return!1}if(this._isNumericArrowsEnabled&&(!this._intellisenseContext||!this._intellisenseContext.intellisenseMenu.isOpen))for(s=0;s<this._arrowKeys.length;s++)if(a.equalTo(this._arrowKeys[s])){var l=(a.shiftKey?10:1)*("Up"===a.key?1:-1);if(this.numericValueChange(l)){F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.CHANGE_VALUE_EDITOR_NUMERIC_VALUE,Common.TriggerType.KeyboardShortcut);return!1}break}}return!0}numericValueChange(e){this._textBox.selectionStart;var t=this.findNumberAtCaret();if(t){var i=t.length-t.extraLength,n=((i?parseInt(this._textBox.value.substr(t.start,i)):0)+e).toString();this.setValue(n,t.start,t.start+i);this._textBox.selectionStart=t.start;this._textBox.selectionEnd=t.start+n.length+t.extraLength;this.checkForValueCommit(!1)}return!!t}findNumberAtCaret(){var e,t,i,n,a=this._textBox.selectionStart||0,s=this._textBox.value,r=/^-?\d*(\.?\d*(%|[a-zA-Z]+)?)/,o=/\d/;do{if((e=s.substr(a).match(r))&&o.test(s.substr(a,e[0].length))){t=a;i=e[0].length;n=e[1].length}a--}while(a>=0&&(e&&e[0].length||a===this._textBox.selectionStart-1));if(i)return{start:t,length:i,extraLength:n}}}n.InvalidValueClass="BPT-EditBox-Invalid";n.EditCancelledEventName="editcancelled";n.EditCompletedEventName="editcompleted";e.ValueEditor=n;class a{constructor(){this._hasCompleted=!1}get isCompleted(){return this._hasCompleted}init(e){this._completed=e}completed(e){this._hasCompleted=!0;this._completed(e)}}e.EditorShowPromiseExecutive=a}(Dom||(Dom={}));!function(e){"use strict";var t=Common.TraceEvents;class i{constructor(e,t,n){this._remoteDom=e;this._styleCache=t;this._domExplorer=n;this._markToolReady=Common.Util.waitForPaintOnce(()=>{Microsoft.Plugin.F12.TraceWriter.markToolReady(Microsoft.Plugin.F12.PluginId.dom);Microsoft.Plugin.F12.F12Host.startPreload(Microsoft.Plugin.F12.PluginId.dom)});this.activeTab=null;this._scrollPositions={};this._pseudoStatesToggle=document.getElementById("pseudoStatesToggle");this._pseudoStatesPanel=document.getElementById("pseudoStatesPanel");this._rightPane=document.getElementById("pane-right");this.installPseudoStateEvents();this.accessibilityView=new F12.DomExplorer.AccessibilityPropertiesPane(this._remoteDom,this._domExplorer);this._addNewRuleButton=document.getElementById("addNewRuleButton");if(!i.PseudoStatesToggleTooltipOn){i.PseudoStatesToggleTooltipOn=Common.ToolWindowHelpers.loadString("PseudoClassesButtonTooltipOn");i.PseudoStatesToggleTooltipOff=Common.ToolWindowHelpers.loadString("PseudoClassesButtonTooltipOff")}this.initializePseudoStatesToggle();this.initializeAddNewRuleButton();window.addEventListener("resize",()=>{this.setScrollHeight()});this._loadDmbpPane()}static gleamLayoutChange(e){var t=e&&e.get&&e.get(0);if(t){if(t.gleamToken){window.clearTimeout(t.gleamToken);delete t.gleamToken}else e.addClass("BPT-HTML-Mutation");t.gleamToken=window.setTimeout(()=>{e.removeClass("BPT-HTML-Mutation");delete t.gleamToken},1e3)}}get isTabLoaded(){return this._isTabLoaded}addTabLoadedCallback(e){e&&(this._tabLoadedCallbackList?this._tabLoadedCallbackList.push(e):this._tabLoadedCallbackList=[e])}executeCleanup(){this.storeScrollPosition();$m(".BPT-HorizontalPane-Right-Tab").hide().addClass("BPT-Tab-Inactive");if(this._cleanup){this._cleanup();this._cleanup=null}}onDetach(){this.displayPseudoState(!1);this.executeCleanup()}clearStylesState(){$m(".BPT-HorizontalPane-Right-Content > .BPT-DataTree-Container").data("previousUid","");this._styleCache.clearState();this._styleView&&this._styleView.clearView()}clearState(){this.clearStylesState();if(this._winningStyleView){this._winningStyleView.clearView();this._winningStyleView.clearLayoutView()}}storeScrollPosition(){var e=$m("#pane-right");this._scrollPositions[this.activeTab]={left:e.scrollLeft(),top:e.scrollTop()}}restoreScrollPosition(){var e=this._scrollPositions[this.activeTab];if(!e){e={left:0,top:0};this._scrollPositions[this.activeTab]=e}var t=$m("#pane-right");t.scrollLeft(e.left);t.scrollTop(e.top)}applyRemoteStyleChanges(e){this._styleCache.applyChanges(e);"changesView"===this.activeTab&&this._changesView&&this._changesView.updateView()}setHorizontalPane(e){e.addResizeListener(this)}onPaneResize(e,t,i){for(var n,a=$m(".BPT-Tabbar > .BPT-Tab-Item"),s=a.length,r=$m(".BPT-Tabbar.BPT-TabCycle-Horizontal").width(),o=0,l=0;l<s;l++){(n=a.get(l)).style.padding="";o+=n.scrollWidth+1}var m=6*s,d=Math.max(r-o,m),h=Math.min(d/s,28)/2,u=(r-h)/s+"px";for(l=0;l<s;l++){(n=a.get(l)).style.maxWidth=u;n.style.paddingLeft=n.style.paddingRight=h+"px"}this.setScrollHeight()}showStyles(n,a){return new Promise(s=>{this._telemetryStartTime=Date.now();this.setActiveTab(i.STYLES_VIEW,n,a,{pseudo:!0,addRule:!0,allStyles:!1},()=>{this._styleView&&this._styleView.clearView()},t.Dom_StylesTabLoad_Start);if(n&&a&&!/^#/.test(a)){if(this._styleModel)this._styleModel.setLoadArgs([n]);else{this._styleModel=new e.StyleModel(this._remoteDom,this._domExplorer,this._styleCache);this._styleModel.setLoadArgs([n]);this._styleView=new e.StyleView(this._domExplorer,this._remoteDom,document,i.StyleListId,i.StyleRuleTemplateId,this._styleModel,Microsoft.Plugin.Resources);this._styleView.renderViewCallback=(()=>{this.onTabLoadComplete(t.Dom_StylesTabLoad_Stop);var e={ElementPropertyCount:this._styleView.propertyCount,ElementRuleCount:this._styleView.ruleCount,LoadTime:Date.now()-this._telemetryStartTime};F12.DomExplorer.Telemetry.analytics.log(F12.DomExplorer.Telemetry.EventName.LOAD_STYLES_TAB,e)})}this._styleView.updateView().then(s).then(()=>{Microsoft.Plugin.F12&&this._markToolReady()})}else{this._styleView&&this._styleView.clearView();this.onTabLoadComplete(t.Dom_StylesTabLoad_Stop);var r={LoadTime:Date.now()-this._telemetryStartTime};F12.DomExplorer.Telemetry.analytics.log(F12.DomExplorer.Telemetry.EventName.LOAD_STYLES_TAB,r);s()}})}getStyleModel(){return this._styleModel}getStyleView(){return this._styleView}getAccessibilityView(){return this.accessibilityView}showWinningStyles(n,a,s){return new Promise(r=>{if(!this._winningStyleModel){this._winningStyleModel=new e.Wsp.Model(this._remoteDom,this._styleCache,Common.ToolWindowHelpers.createShortenedUrlText);this._winningStyleView=new e.Wsp.View(this._domExplorer,document,i.WinningStyleListId,i.WinningStyleItemTemplateId,this._winningStyleModel);this._winningStyleView.renderViewCallback=(()=>this.onTabLoadComplete(t.Dom_ComputedTabLoad_Stop))}this.setActiveTab(i.WINNING_STYLES_VIEW,n,a,{pseudo:!1,addRule:!1,allStyles:!0},()=>{this._winningStyleView&&this._winningStyleView.clearView();var t=$m("#"+e.Wsp.View.LAYOUT_VIEW);t.attr("data-uid","");t.attr("data-tag","")},t.Dom_ComputedTabLoad_Start);if(n&&a&&!/^#/.test(a)){this._winningStyleView.refreshLayoutView(this._remoteDom,n,a,s);this._winningStyleModel.setLoadArgs([n]);this._winningStyleView.updateView().then(r)}else{this._winningStyleView.clearView();this.onTabLoadComplete(t.Dom_ComputedTabLoad_Stop);r()}})}getWinningStyleModel(){return this._winningStyleModel}getWinningStyleView(){return this._winningStyleView}showFonts(t,n){return new Promise(a=>{this.setActiveTab(i.FONTS_VIEW,t,n,{pseudo:!1,addRule:!1,allStyles:!1},()=>{this.fontsView&&this.fontsView.clearView()},"Dom_FontsTabLoad_Start");if(t&&n&&!/^#/.test(n)){if(this.fontsModel)this.fontsModel.setLoadArgs([t]);else{this.fontsModel=new e.Fonts.FontsModelView(this._remoteDom);this.fontsModel.setLoadArgs([t]);this.fontsView=new e.Fonts.FontsView(document,i.FontsListId,i.FontsTemplateId,this.fontsModel,this._domExplorer.capabilities);this.fontsView.renderViewCallback=(()=>this.onTabLoadComplete("Dom_FontsTabLoad_stop"))}this.fontsView.updateView().then(a)}else{this.fontsView&&this.fontsView.clearView();this.onTabLoadComplete("Dom_FontsTabLoad_Stop");a()}})}showEvents(n,a,s){return new Promise(r=>{this.setActiveTab(i.EVENTS_VIEW,a,s,{pseudo:!1,addRule:!1,allStyles:!1},()=>{this._eventsView&&this._eventsView.clearView()},t.Dom_EventsTabLoad_Start);if(a&&s&&!/^#/.test(s)){if(this.eventsModel){this.eventsModel.RetrieveType=n;this.eventsModel.setLoadArgs([a])}else{this.eventsModel=new e.Events.EventsModelView(this._remoteDom,n);this.eventsModel.setLoadArgs([a]);this._eventsView=new e.Events.EventsView(document,i.EventsListId,i.EventsTemplateId,this.eventsModel,this._domExplorer.capabilities,this._domExplorer);this._eventsView.renderViewCallback=(()=>this.onTabLoadComplete(t.Dom_EventsTabLoad_Stop))}this._eventsView.updateView().then(r)}else{this._eventsView&&this._eventsView.clearView();this.onTabLoadComplete(t.Dom_EventsTabLoad_Stop);r()}})}showChanges(){return new Promise(n=>{this.setActiveTab(i.CHANGES_VIEW,null,null,{pseudo:!1,addRule:!1,allStyles:!1},()=>{this._changesView&&this._changesView.clearView()},t.Dom_ChangesTabLoad_Start);if(!this._changesModel){this._changesModel=new e.ChangesModel(this._remoteDom,this._domExplorer);this._changesView=new e.ChangesView(this._domExplorer,document,i.ChangesListId,i.ChangesItemTemplateId,this._changesModel,this._styleCache);this._changesView.renderViewCallback=(()=>this.onTabLoadComplete(t.Dom_ChangesTabLoad_Stop))}this._changesView.updateView().then(n)})}getChangesModel(){return this._changesModel}getChangesView(){return this._changesView}updateSelectedAccessibilityNode(e){this.accessibilityView.setSelectedNode(e)}showAccessibility(){return new Promise(e=>{this.setActiveTab(i.ACCESSIBILITY_VIEW,null,null,{pseudo:!1,addRule:!1,allStyles:!1},()=>{this.accessibilityView.isVisible=!1});this.accessibilityView.isVisible=!0;this.onTabLoadComplete();e()})}showDmbp(e,n){return Promise.resolve().then(()=>{this.setActiveTab(i.DMBP_VIEW,e,n,{pseudo:!1,addRule:!1,allStyles:!1},()=>{this._dmbpView&&this._dmbpView.clearView()},"Dom_DmbpTabLoad_Start");return this._dmbpView.updateView().then(()=>{this.onTabLoadComplete(t.Dom_ComputedTabLoad_Stop)})})}_loadDmbpPane(){if(!this._dmbpView){this._dmbpModel=new F12.DomMutationBreakpoints.DmbpListViewModel(this._domExplorer.dmbpManager,F12.DomExplorer.Telemetry.analytics);this._dmbpView=new e.DomMutations.Views.View(this._domExplorer,document,i.DmbpListId,i.DmbpListTemplateId,this._dmbpModel);this.onTabLoadComplete("Dom_DmbpTabLoad_Stop")}}get dmbpListViewModel(){return this._dmbpView.model}isPseudoStatePanelAvailable(){return"true"===this._pseudoStatesToggle.getAttribute("data-show")}isPseudoStatePanelOpen(){return"true"===this._pseudoStatesPanel.getAttribute("data-show")}togglePseudoStatePanel(){if(this.isPseudoStatePanelAvailable()){var e=this._pseudoStatesToggle.classList.contains(i.ToggleButtonOn);e?this._pseudoStatesToggle.classList.remove(i.ToggleButtonOn):this._pseudoStatesToggle.classList.add(i.ToggleButtonOn);var t=!e;this.displayPseudoState(t);return t}}isPseudoClassEnabled(e){var t=this._pseudoStatesPanel.querySelector(".BPT-PseudoSelector[data-name='"+e+"']");if(t){return!t.firstElementChild.disabled}}getPseudoClassState(e){if(this.isPseudoStatePanelAvailable()&&this.isPseudoClassEnabled(e)){return this._pseudoStatesPanel.querySelector(".BPT-PseudoSelector[data-name='"+e+"']").firstElementChild.checked}}setPseudoClassState(e,t){return new Promise((t,i)=>{if(this.isPseudoStatePanelAvailable())if(this.isPseudoClassEnabled(e)){var n=this._pseudoStatesPanel.querySelector(".BPT-PseudoSelector[data-name='"+e+"']").firstElementChild;this.addTabLoadedCallback(t);n.click()}else i(new Error(e+" state is unavailable for the current element"));else i(new Error("Pseudo state panel not available"))})}initializePseudoStatesToggle(){if(!this._pseudoStatesToggle)return;const e=this._domExplorer.persistenceManager.getSetting(i.SHOW_PSEUDO_STATE_PANEL_KEY,!1);this._pseudoStatesToggle.setAttribute("aria-pressed",e);this.displayPseudoState(e);this._pseudoStatesToggleTooltip=i.PseudoStatesToggleTooltipOff;$m(this._pseudoStatesToggle).bind("mouseover",e=>{if(Common.ToolWindowHelpers.isContextMenuUp())return!0;Microsoft.Plugin.Tooltip.show({content:this._pseudoStatesToggleTooltip});return!1});this._pseudoStatesToggle.addEventListener("click",e=>{let t=!this._pseudoStatesToggle.classList.contains(i.ToggleButtonOn);this._domExplorer.persistenceManager.setSetting(i.SHOW_PSEUDO_STATE_PANEL_KEY,t)});this._pseudoStatesToggle.addEventListener("DOMAttrModified",e=>{if("aria-pressed"===e.attrName&&e.target===this._pseudoStatesToggle&&e.newValue!==e.prevValue){var t="true"===e.newValue;this.displayPseudoState(t)}return!0})}initializeAddNewRuleButton(){let e=()=>{let e=()=>{n.unregister();setImmediate(()=>{this._addNewRuleButton.focus()})},t=()=>{i.unregister()},i=this._styleView.editCancelled.addOne(e),n=this._styleView.editCompleted.addOne(t)};this._addNewRuleButton.addEventListener("click",()=>{e();this._styleView.addRule();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ADD_RULE,Common.TriggerType.Ui)});this._addNewRuleButton.addEventListener("keydown",t=>{const i=!t.shiftKey&&!t.ctrlKey&&!t.altKey;if((t.keyCode===Common.KeyCodes.Space||t.keyCode===Common.KeyCodes.Enter)&&i){e();this._styleView.addRule()}})}setActiveTab(e,t,n,a,s,r){this._isTabLoaded=!1;r&&this.raiseTraceEvents(r);this._currentUid=t;this.executeCleanup();this.activeTab=e;$m("#"+e).show().removeClass("BPT-Tab-Inactive");var o=a.pseudo,l=o||a.addRule||a.allStyles,m=$m("#optionalButtonsPanel");l?m.removeClass("BPT-OptionsPanel-Hidden"):m.addClass("BPT-OptionsPanel-Hidden");this.updatePseudoStates(o,n?n.toLowerCase():n);var d=$m("#addNewRuleButton");a.addRule?d.show():d.hide();var h=$m("#allWinningStylesButton");a.allStyles?h.show():h.hide();this.restoreScrollPosition();F12.DomExplorer.verticalLayout.matches||this.setPaneLeftJustification();this._cleanup=(()=>{i.PseudoStateList.forEach(e=>{this._pseudoStatesPanel.querySelector(".BPT-PseudoSelector[data-name='"+e+"']").firstElementChild.checked=!1});s()})}onTabLoadComplete(e){e&&this.raiseTraceEvents(e);this._isTabLoaded=!0;if(this._tabLoadedCallbackList){var t=this._tabLoadedCallbackList;this._tabLoadedCallbackList=null;for(var i=0,n=t.length;i<n;i++){(0,t[i])()}}}setPaneLeftJustification(){var e=document.getElementsByClassName("BPT-Tab-Container")[0].getBoundingClientRect().left,t=document.getElementsByClassName("BPT-Pane-Splitter")[0].getBoundingClientRect().left,i=document.getElementsByClassName("BPT-Pane-Splitter")[1].getBoundingClientRect().left,n=Math.max(t,i)-e+3;$m(document.getElementById("pane-right")).css("left",n+"px")}installPseudoStateEvents(){if(this._pseudoStatesPanel)for(var e=this._pseudoStatesPanel.querySelectorAll(".BPT-PseudoCheckbox"),t=0;t<e.length;t++)e[t].addEventListener("change",e=>{var t=e.target,i=t.parentElement.getAttribute("data-name");switch(i){case"active":this._domExplorer.selectedItem.toggleGutterGlyph("BPT-pseudoStateActive");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer();break;case"focus":this._domExplorer.selectedItem.toggleGutterGlyph("BPT-pseudoStateFocus");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer();break;case"hover":this._domExplorer.selectedItem.toggleGutterGlyph("BPT-pseudoStateHover");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer();break;case"visited":this._domExplorer.selectedItem.toggleGutterGlyph("BPT-pseudoStateVisited");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer()}this._remoteDom.setPseudoStyling(this._currentUid,i,t.checked).then(()=>{this._domExplorer.refreshCSSView()})})}updatePseudoStates(e,t){this._pseudoStatesToggle.setAttribute("data-show",e);if(e){this.displayPseudoState(this._domExplorer.persistenceManager.getSetting(i.SHOW_PSEUDO_STATE_PANEL_KEY,!1));this._remoteDom.getPseudoStyling(this._currentUid).then(e=>{i.PseudoStateList.forEach(i=>{var n=this._pseudoStatesPanel.querySelector(".BPT-PseudoSelector[data-name='"+i+"']"),a=n.firstElementChild;if("visited"===i&&"a"!==t){a.checked=!1;a.disabled=!0;n.classList.add("BPT-PseudoSelector-Disabled")}else{a.disabled=!1;n.classList.remove("BPT-PseudoSelector-Disabled");a.checked=e[i]}})})}else this.displayPseudoState(!1)}displayPseudoState(e){e?this._pseudoStatesToggle.classList.add(i.ToggleButtonOn):this._pseudoStatesToggle.classList.remove(i.ToggleButtonOn);this._pseudoStatesPanel.setAttribute("data-show",e);this._pseudoStatesToggleTooltip=e?i.PseudoStatesToggleTooltipOff:i.PseudoStatesToggleTooltipOn;this._pseudoStatesToggle.setAttribute("aria-label",this._pseudoStatesToggleTooltip);"true"===this._pseudoStatesToggle.getAttribute("aria-pressed")!==e&&this._pseudoStatesToggle.setAttribute("aria-pressed",e?"true":"false");this.setScrollHeight()}setScrollHeight(){setTimeout(()=>{this._rightPane.style.maxHeight=this._rightPane.parentElement.clientHeight-this._rightPane.offsetTop+"px"},1)}raiseTraceEvents(e){this._domExplorer&&this._domExplorer.raiseTraceEvents(e)}}i.EVENTS_VIEW="eventsView";i.CHANGES_VIEW="changesView";i.STYLES_VIEW="stylesView";i.WINNING_STYLES_VIEW="winningStylesView";i.FONTS_VIEW="fontsView";i.ACCESSIBILITY_VIEW="accessibilityView";i.DMBP_VIEW="dmbpView";i.PseudoStateList=["active","focus","hover","visited"];i.SHOW_PSEUDO_STATE_PANEL_KEY="DomExplorerShowPseudoStatePanel";i.ChangesListId="changesList";i.ChangesItemTemplateId="changesTemplate";i.ToggleButtonOn="BPT-ToolbarToggleButton-StateOn";i.WinningStyleListId="winningStylesList";i.WinningStyleItemTemplateId="winningStylesItemTemplate";i.FontsTemplateId="fontsTemplate";i.FontsListId="fontsList";i.EventsTemplateId="ancestorEventsTemplateHeaderOpener";i.EventsListId="eventsList";i.StyleListId="styleList";i.StyleRuleTemplateId="styleRuleTemplate";i.DmbpListId="dmbpList";i.DmbpListTemplateId="dmbpBreakpointTemplate";e.TabPanes=i}(Dom||(Dom={}));!function(e){!function(e){"use strict";let t;!function(e){e[e.NONE=0]="NONE";e[e.EVENT=1]="EVENT";e[e.ELEMENT=2]="ELEMENT"}(t=e.EventRetrieveType||(e.EventRetrieveType={}))}(e.Enums||(e.Enums={}))}(Dom||(Dom={}));!function(e){"use strict";class t{static isSelfClosingTag(e,i){return!i&&t.VOID_TAG[e.toLowerCase()]}static domTreeSelect(e){F12.DomExplorer.App.domExplorer.selectItemByUid(e)}static isCurrentFocusOnInput(){var e=document.activeElement;return t.isTextArea(e)||t.isInputText(e)}static isChecked(e){let t=document.getElementById(e);return t?t.checked:null}static GetEventRetrieveType(){if(!e.Utility.isChecked("Event-Ancestors-Enabled-CheckBox"))return e.Enums.EventRetrieveType.NONE;switch(e.Utility.getSelectedOption("Event-Ancestors-GroupBy")){case"1":return e.Enums.EventRetrieveType.EVENT;case"2":return e.Enums.EventRetrieveType.ELEMENT;default:return e.Enums.EventRetrieveType.NONE}}static getSelectedOption(e){let t=document.getElementById(e);return t?t.value:null}static isTextArea(e){if(!e)return!1;var t=e.tagName;return"string"==typeof t&&"TEXTAREA"===t.toUpperCase()}static isInputText(e){if(!e)return!1;var t=e.tagName;return"string"==typeof t&&("INPUT"===t.toUpperCase()&&e.hasAttribute("type")&&"text"===e.getAttribute("type"))}}t.VOID_TAG={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.Utility=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e){this.listeners=e}notifyRuleChange(e,t,i){this.listeners.forEach(n=>{n.onRuleChange(e,t,i)})}notifyPropertyChange(e,t,i){this.listeners.forEach(n=>{n.onPropertyChange(e,t,i)})}}t.CHANGE_BAR_ADD="add";t.CHANGE_BAR_REMOVE="remove";t.CHANGE_BAR_UPDATE="update";t.CHANGE_BAR_NONE="";e.StyleChangeNotifier=t}(Dom||(Dom={}));!function(e){"use strict";class t extends e.StyleChangeNotifier{constructor(e,i,n,a,s,r,o,l=!0){super(i);this._model=e;this._uid=n;this.wasCreatedInSession=a;this.isDeleted=s;this.pseudoElementType=r;this._selectorText=o;this._hasEditableSelector=l;this.properties=[];this.sourceResolutionComplete=!1;t.InheritedFromString||(t.InheritedFromString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("DOMExplorerInheritedFromText",[""]):"");t.AriaChangeStateRemoveString||(t.AriaChangeStateRemoveString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateRemove"):"");t.AriaChangeStateAddString||(t.AriaChangeStateAddString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateAdd"):"");t.AriaChangeStateUpdateString||(t.AriaChangeStateUpdateString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateUpdate"):"");this.updateChangeState()}get ariaLabel(){var e="";e+=this.ariaChangeStateString;if(this.isInherited){e+=t.InheritedFromString+" ";e+=this.displayInheritedFrom+" : "}this.parent&&(e+=this.parent+" : ");this.selectorText&&(e+=this.selectorText+" ");this.fileLinkText&&(e+=" : "+this.fileLinkText);return e}get isRule(){return!0}get isProperty(){return!1}get isSubProperty(){return!1}get container(){return null}get uid(){return this._uid}set uid(e){if(e!==this._uid){var t=this._uid;this._model.remapRuleId(this,t,e);this.notifyRuleChange(0,this,e);this._uid=e}}get isInjectedStyle(){return!this._selectorText}get selectorText(){return this._selectorText||`[ ${Microsoft.Plugin.Resources.getString("InjectedStyleSelectorLabel")} ]`}set selectorText(e){if(e!==this._selectorText){this._selectorText=e;this.notifyRuleChange(1,this,e)}}get formatForCopy(){var e=(this.isInlined?"":this._selectorText+" ")+"{\r\n";this.parent&&(e="/*"+this.parent+"*/\r\n"+e);for(var t=0;t<this.properties.length;t++){var i=this.properties[t];!i.isEnabled&&1===i.status||i.isDeleted||(i.isShorthand&&i.isEnabledIndeterminate?i.properties.forEach(t=>{t.isEnabled&&(e+="    "+t.formatForCopy+"\r\n")}):e+="    "+i.formatForCopy+"\r\n")}return e+"}\r\n"}get isNew(){return e.ElementStyleModel.isNew(this._uid)}get isEditable(){return!this.isInlined&&this._hasEditableSelector}get isOriginal(){return!this.isDeleted&&(this.isInlined||this._selectorText===this.originalSelectorText)}get displayInheritedFrom(){return this.target.description}get ariaChangeStateString(){switch(this.changeState){case e.StyleChangeNotifier.CHANGE_BAR_REMOVE:return t.AriaChangeStateRemoveString;case e.StyleChangeNotifier.CHANGE_BAR_ADD:return t.AriaChangeStateAddString;case e.StyleChangeNotifier.CHANGE_BAR_UPDATE:return t.AriaChangeStateUpdateString}return""}get changeState(){return this._changeState}set changeState(e){if(this._changeState!==e){this._changeState=e;this.notifyRuleChange(6,this,e)}}get extendedChangeState(){return this._extendedChangeState}set extendedChangeState(e){if(this._extendedChangeState!==e){this._extendedChangeState=e;this.notifyRuleChange(6,this,e)}}setOriginal(e){this.originalSelectorText=e;this.updateChangeState()}addProperty(t,i=!1,n){var a;a=t?new e.StyleProperty(this._model,this.listeners,t.wasCreatedInSession,t.current,t.original,t.originalLonghand,t.isApplied,t.isWinning,t.isDeleted,t.status,t.uid,this):new e.StyleProperty(this._model,this.listeners,!0,{name:"",value:"",isImportant:!1,isEnabled:!0},null,null,!0,!0,!1,"Valid",e.ElementStyleModel.createNewId(),this);this._model.remapPropertyId(a,null,a.uid);var s=this.getPositionForRule(n);this.properties.splice(s,0,a);i&&this.notifyRuleChange(2,this,a);if(t){t.longhand.forEach(t=>{var n=new e.StyleProperty(this._model,this.listeners,!1,t.current,null,null,t.isApplied,t.isWinning,!1,t.status,t.uid,this);a.addSubproperty(n,i)});a.lookupLonghandOriginals()}this.updateChangeState();return a}recalculateWinning(){this.properties.forEach(e=>{e.recalculateWinning()})}remove(){this.recalculateWinning();this._model.removeRule(this);this.notifyRuleChange(4,this)}removeProperty(e){var t=this.properties;e.clearSubproperties();for(var i=0;i<t.length;i++)if(t[i]===e){t.splice(i,1);this._model.removeProperty(e);this.updateChangeState();return i}return-1}revert(){return this.wasCreatedInSession?this.commitDelete():new Promise((e,t)=>{this._model.editRuleRevert(this._uid,i=>{if(i){this.removeNewProperties();this.updateFromRemote(i);e(i)}else t()})})}updateWinningProperties(e,t){this.properties.forEach(i=>{i.updateWinning(e,t)})}commitDelete(){return new Promise((e,t)=>{if(this.isNew){this.remove();e()}else this._model.editRuleDelete(this._uid,t=>{t?this.updateFromRemote(t):this.remove();e()})})}select(){this.notifyRuleChange(5,this)}updateFromRemote(e){this.uid=e.uid;this.pseudoElementType=e.pseudoElementType;this.isDeleted=e.isDeleted;if(!this.isInlined){this.selectorText=e.selector;this.originalSelectorText=e.originalSelector}for(var t=0;t<this.properties.length;t++)this.properties[t].updateFromRemote(e.properties[t]);this.updateChangeState()}removeNewProperties(){var e=[];this.properties.forEach(t=>{t.wasCreatedInSession&&e.push(t)});e.forEach(e=>{e.remove(!1)})}commitSelector(e){return new Promise((t,i)=>{if(e!==this._selectorText){var n=this;if(this.isNew){this._selectorText=e;t()}else this._model.editRuleSelector(this._uid,e,e=>{if(e){n.updateFromRemote(e);t()}else{n.notifyRuleChange(1,this,this._selectorText);i()}})}else t()})}commitNewRule(e){var t=this.getPositionForRule(this);return new Promise((i,n)=>{this._model.addRule(this._selectorText,e.name,e.value,e.isImportant,t,e=>{if(e&&e.properties.length){this.updateFromRemote(e);i()}else n()})})}addRemoteProperty(e,t,i){this._model.addProperty(this.uid,e,t,i,null,e=>{if(e){this.addProperty(e,!0).recalculateWinning()}})}setExistingOrAddNewProperty(e,t,i){for(var n,a=this.properties.length-1;a>=0;a--)if(this.properties[a].name===e){n=this.properties[a];break}n?n.commitValue(t+(i?" !important":"")):this.addRemoteProperty(e,t,i)}updateChangeState(){if(this._model.capabilities.showChangeBars)if(this.isDeleted)this.changeState=this.extendedChangeState=e.StyleChangeNotifier.CHANGE_BAR_REMOVE;else if(this.wasCreatedInSession)this.changeState=this.extendedChangeState=e.StyleChangeNotifier.CHANGE_BAR_ADD;else if(this.isOriginal){this.changeState=this.extendedChangeState=e.StyleChangeNotifier.CHANGE_BAR_NONE;for(var t=0;t<this.properties.length;t++){var i=this.properties[t];i.isApplied&&i.changeState&&(this.extendedChangeState=e.StyleChangeNotifier.CHANGE_BAR_UPDATE)}}else this.changeState=this.extendedChangeState=e.StyleChangeNotifier.CHANGE_BAR_UPDATE}getPositionForRule(e){var t=this.properties.length;if(e)for(var i=0;i<this.properties.length;i++)if(this.properties[i].uid===e.uid){t=i;break}return t}}e.StyleRule=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,t){this._remoteDom=e;this._capabilities=t}clearState(){this._cache=null}updateView(t,i){this._cache?i(this._cache):e.ElementStyleModel.create(this._remoteDom,t,this._capabilities,e=>{this._cache=e;i(e)})}applyChanges(e){this._cache&&this._cache.applyChanges(e)}}e.StyleCache=t}(Dom||(Dom={}));!function(e){"use strict";let t;!function(e){class t{main(){window.addEventListener("load",async()=>{try{Microsoft.Plugin.F12.Communications.getRpcClient().call("ms:host","postPendingMessageToPlugin",[Microsoft.Plugin.F12.PluginId.dom]);if(Microsoft&&Microsoft.Plugin){Microsoft.Plugin.Tooltip&&(Microsoft.Plugin.Tooltip.defaultTooltipContentToHTML=!1);e.Telemetry.initializeAnalytics()}this.domExplorer=new e.DomExplorerWindow;await this.domExplorer.initialize();this.onDomExplorerAppLoaded&&this.onDomExplorerAppLoaded()}catch(e){diagnosticOutput("Exception in window.onload: "+e.toString(),e.stack);throw e}})}}e.DomExplorerApp=t;e.App=new t}(t=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));F12.DomExplorer.App.main();function diagnosticOutput(e,t){"use strict";try{var i=document.querySelector("#diagnostic-output");if(!i){(i=document.createElement("div")).setAttribute("id","diagnostic-output");i.innerHTML="Diagnostic:";document.body.insertBefore(i,document.body.firstChild);i=document.querySelector("#diagnostic-output")}if(i){var n=document.createElement("br");i.appendChild(n);var a=document.createTextNode(e);i.appendChild(a)}if(t){var s=document.querySelector("#diagnostic-trace");if(!s){(s=document.createElement("div")).setAttribute("id","diagnostic-trace");s.innerHTML="StackTrace:";i.appendChild(s);s=document.querySelector("#diagnostic-trace")}s&&(i.innerHTML+="<br>"+t)}}catch(e){}}!function(e){"use strict";var t=Microsoft.Plugin.F12.TraceWriter,i=Common.TraceEvents,n=Microsoft.Plugin.F12.externalApis,a=Microsoft.Plugin.F12.Communications;let s;!function(s){var r=e.Tools.Utility.Assert;s.verticalLayout=window.matchMedia("(max-width: 680px) and (min-width: 1px)");class o{constructor(){this.currentSelectedId="";this._log=[];this._selectedItemMutatedTimeoutMap={};this._activatedFocusToken=Number.NaN;this._initializationErrorMessage=null;this._currentElementHighlightUid="";this._temporaryElementHighlightUid="";this._lastKnownElementHighlightUid="";this._highlightIsShown=!1;this._selectionListeners=[];this.handleFirstClickOfColorPickerButton=(async()=>{await this.initializeColorPicker();this.colorPickerViewModel.isVisible=!0});this.capabilities=new s.Capabilities;this.eventManager=new Microsoft.Plugin.Utilities.EventManager;this._remoteDom=new s.RemoteDom(this);e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Window_Create_Start);this.persistenceManager=new Common.PersistenceManager(o.DOMEXPLORER_SETTING_KEY);this.domExplorerModel=new s.DomExplorerModel;this._state="initializing";this.throttle=new Common.MessageThrottle;this._styleCache=new Dom.StyleCache(this._remoteDom,this.capabilities);this._dmbpManager=new e.Tools.DomExplorer.DmbpManager(this);this.tabPanes=new Dom.TabPanes(this._remoteDom,this._styleCache,this);a.getRpcClient().listen("toolMessage",e=>this.handleToolMessage(e));Common.Itc.ServiceLocator.register("DomTreeService",this);let t=document.getElementById(o.DOMEXPLORER_ARIA_ANNOUNCER_ID);t&&(this._ariaAnnouncer=new Common.Accessibility.AriaAnnouncer(t))}trySelectNode(e,t){if(null===t)return Promise.resolve(!1);this.expandToElementByUid(t);return Promise.resolve(!0)}get isColorPickerReady(){return!!this.colorPickerControl}initializeColorPicker(){this._colorPickerInitialized||(this._colorPickerInitialized=new Promise(e=>{this.paletteViewModel=new s.PaletteViewModel(this._remoteDom);this.paletteViewModel.runColorCollection();this.colorPickerViewModel=new s.ColorPickerViewModel(this.paletteViewModel);var t=new Common.TemplateControl("DomExplorer.colorPickerHost");t.model=this.colorPickerViewModel;this.colorPickerControl=t.getNamedControl("colorPicker");document.getElementById("toolbar").appendChild(this.colorPickerControl.rootElement);this.colorPickerViewModel.dockElement=this._toolbar.getNamedElement("colorPickerButton");this.colorPickerControl.onCustomKeyDown=(e=>{var t=e.ctrlKey&&!e.shiftKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.K&&t){this.initializeColorPicker().then(()=>{this.colorPickerViewModel.isVisible=!1});e.preventDefault();return!0}return!1});e(this.colorPickerControl)}));return this._colorPickerInitialized}get remoteDom(){return this._remoteDom}get log(){return this._log}get dmbpManager(){return this._dmbpManager}get selectedItem(){var e=this.domTree.selectedItem;return e&&this.domTreeDataSource.indexOfItem(e.id)<0?null:e}set selectedItem(e){this.domTree.selectedItem=e}get state(){return this._state}static findAncestorByClass(e,t){for(;e;){if(e.classList.contains(t))return e;e=e.parentElement}return null}static findAllAncestorsByClass(e,t){for(var i=[];e;){e.classList.contains(t)&&i.push(e);e=e.parentElement}return i}static findDescendentByClass(e,t){return e?e.querySelector("."+t):null}static findAllDescendentsByClass(e,t){return e?e.querySelectorAll("."+t):null}static detabify(e,t){void 0===t&&(t=8);for(var i="",n=0,a=e.length,s=0;s<a;s++){var r=e.charAt(s);i+="\t"===r?Array(t-n+1).join(" "):r;n="\n"===r||"\t"===r?0:(n+1)%t}return i}static showMissingElementError(){if(Microsoft.Plugin.F12){var e=Microsoft.Plugin.Resources.getString("/Common/DOMExplorerMissingElementError");Microsoft.Plugin.F12.ErrorDisplay.show(e)}}getToolbar(){return this._toolbar}timeLog(e,t){if(t){this._log=[];this._lastLog=0;this._startLog=0}var i=new Date,n=i.getTime();if(this._lastLog){var a=n-this._lastLog,s=n-this._startLog;this._log.push(e+": "+a+"ms from start: "+s)}else{this._startLog=n;this._log.push(e+": "+i.toDateString())}this._lastLog=n}getPageUri(){return this.pageUri}onDomExplorerBeforeMenuLoaded(){}onDomExplorerMenuLoaded(){}temporaryShowElementHighlight(e){if(e&&this.domExplorerModel.showLayoutIsEnabled){this._temporaryElementHighlightUid=e===this._currentElementHighlightUid?"":e;this.remoteHighlight(e)}}showElementHighlight(e){if(e){this._currentElementHighlightUid=e;this._temporaryElementHighlightUid="";this.domExplorerModel.showLayoutIsEnabled&&this.remoteHighlight(e)}}hideElementHighlight(e=!1){this._temporaryElementHighlightUid="";this._lastKnownElementHighlightUid="";if("ready"===this._state&&(this._highlightIsShown||e)){this._remoteDom.hideHoverItem();this._highlightIsShown=!1}}refreshElementHighlight(){this._currentElementHighlightUid&&!this._temporaryElementHighlightUid&&this.restoreElementHighlight()}restoreElementHighlight(){this._temporaryElementHighlightUid="";this._lastKnownElementHighlightUid="";"ready"===this._state&&(this._currentElementHighlightUid?this.showElementHighlight(this._currentElementHighlightUid):this.hideElementHighlight())}mouseoverUid(e,t,i){var n;"#text"!==t&&""!==t||i&&(n=i);this.temporaryShowElementHighlight(n||e)}mouseoutUid(){this._currentElementHighlightUid?this.showElementHighlight(this._currentElementHighlightUid):this.hideElementHighlight()}async initialize(){this._initializationErrorMessage="";var t=(e,t)=>Common.ToolWindowHelpers.loadString(e,t);try{Microsoft.Plugin.F12&&Microsoft.Plugin.F12.isTargetEdge&&document.body.classList.add("xamlWindow");this._toolbar=new Common.Controls.ToolbarControl("Common.toolbarTemplateWithSearchBox");this._toolbar.title=Microsoft.Plugin.Resources.getString("DomToolLabelText");this._toolbar.model=this.domExplorerModel;this._toolbar.panelTemplateId="DomExplorer.domExplorerButtonPanel";document.getElementById("toolbar").appendChild(this._toolbar.rootElement);Common.ToolWindowHelpers.registerErrorComponent("DomExplorerWindow",this.onError);Common.ToolWindowHelpers.initializeToolWindow();n.addEventListener("detach",this.onDetach.bind(this));n.addEventListener("break",this.onBreak.bind(this));n.addEventListener("run",this.onRun.bind(this));n.addEventListener("load",this.onLoad.bind(this));await this.initializeSettings();this.initializeTabs();this.initializeToolbarButtons();this.initializeGlobalCommands();this.initializeLayoutButtons();this.initializeContextMenus();this._remoteDom.addEventListener("attach",this.onAttach.bind(this));$m("#attributeNodeLabel > div > span:first-child").text(t("AttributeNodeLabel"));$m("#stylesTabButton").text(t("StylesTabButtonText")).bind("mouseover",e=>o.showToolTip(t("StylesTabButtonTooltip")));$m("#eventsTabButton").text(t("EventsTabButtonText")).bind("mouseover",e=>o.showToolTip(t("EventsTabButtonTooltip")));$m("#fontsTabButton").text(t("FontsTabButtonText")).bind("mouseover",()=>o.showToolTip(t("FontsTabTooltipText")));$m("#changesTabButton").text(t("ChangesTabButtonText")).bind("mouseover",e=>o.showToolTip(t("ChangesTabButtonTooltip")));$m("#accessibilityTabButton").text(t("AccessibilityTabButtonText")).bind("mouseover",e=>o.showToolTip(t("AccessibilityTabButtonToolTip")));$m("#dmbpTabButton").text(t("DomMutationBreakpointsTabButtonText")).bind("mouseover",e=>o.showToolTip(t("DomMutationBreakpointsTabButtonTooltip")));$m("#Div-Event-Ancestors-Enabled-CheckBox").text(t("EventGroupByCheckBoxTitle"));$m("#Div-Event-Ancestors-Enabled-CheckBox").bind("mouseover",e=>o.showToolTip(t("EventGroupByCheckBoxTooltip")));$m("#Event-Ancestors-Enabled-CheckBox").attr("aria-label",t("EventGroupByCheckBoxTitle"));$m("#Event-Ancestor-Collapse").bind("mouseover",e=>o.showToolTip(t("EventCollapseAllTitle")));$m("#Event-Ancestor-Collapse").attr("aria-label",t("EventCollapseAllTitle"));$m("#Div-Event-Ancestors-GroupByCombo").bind("mouseover",e=>o.showToolTip(t("EventGroupByComboTitle")));$m("#Event-Ancestors-GroupBy").bind("mouseover",e=>o.showToolTip(t("EventGroupByComboOption1")));$m("#Event-Ancestors-GroupBy").attr("aria-label",t("EventGroupByComboTitle"));$m("#Event-Ancestors-GroupBy-Option1").text(t("EventGroupByComboOption1"));$m("#Event-Ancestors-GroupBy-Option2").text(t("EventGroupByComboOption2"));$m("#Div-Event-Ancestors-GroupByCombo").text(t("EventGroupByComboTitle"));$m("#searchbox").placeholder(t("DOMExplorerFindBoxHinting")).bind("mouseover",e=>o.showToolTip(t("DOMSearchBoxToolTip")));$m("#searchbox").attr("aria-label",t("SearchBoxPlaceholder"));$m("#searchNextResult").bind("mouseover",e=>o.showToolTip(t("DOMSearchNextButtonToolTip")));$m("#searchNextResult").attr("aria-label",t("DOMSearchNextButtonToolTip"));$m("#searchPreviousResult").bind("mouseover",e=>o.showToolTip(t("DOMSearchPreviousButtonToolTip")));$m("#searchPreviousResult").attr("aria-label",t("DOMSearchPreviousButtonToolTip"));$m("#pseudoStatesPanel [data-name='active']").bind("mouseover",e=>o.showToolTip(t("PseudoClassActiveTooltip")));$m("#pseudoStatesPanel [data-name='focus']").bind("mouseover",e=>o.showToolTip(t("PseudoClassFocusTooltip")));$m("#pseudoStatesPanel [data-name='hover']").bind("mouseover",e=>o.showToolTip(t("PseudoClassHoverTooltip")));$m("#pseudoStatesPanel [data-name='visited']").bind("mouseover",e=>o.showToolTip(t("PseudoClassVisitedTooltip")));$m("#pseudoActiveLabel").text(t("PseudoClassActive"));$m("#pseudoFocusLabel").text(t("PseudoClassFocus"));$m("#pseudoHoverLabel").text(t("PseudoClassHover"));$m("#pseudoVisitedLabel").text(t("PseudoClassVisited"));$m("#addNewRuleButton").bind("mouseover",e=>o.showToolTip(t("AddCSSRuleTooltip")));$m("#addNewRuleButton").attr("aria-label",t("AddCSSRuleTooltip"));$m("#pseudoActiveLabel").text(":active");$m("#pseudoFocusLabel").text(":focus");$m("#pseudoHoverLabel").text(":hover");$m("#pseudoVisitedLabel").text(":visited");$m("#winningStylesTabButton").text(t("ComputedStylesTabButtonText")).bind("mouseover",e=>o.showToolTip(t("ComputedStylesTabButtonTooltip")));$m("#winningStylesFilterTextBox").placeholder(t("DOMExplorerComputedStylesFilterTextBoxPlaceholder"));$m("#winningStylesFilterTextBox").attr("aria-label",t("DOMExplorerComputedStylesFilterTextBoxPlaceholder"));$m("#winningStylesFilterTextBox").bind("mouseover",e=>o.showToolTip(t("DOMExplorerComputedStylesFilterTextBoxPlaceholder")));$m("#winningStylesNoResultsMessage").text(t("DOMExplorerComputedStylesNoResultsMessage"));$m("*.BPT-HorizontalPane-Right-Tab").hide();$m("#searchBoxBorder").addClass("BPT-SearchBox-HideButtons");$m("#accessibilityTreeViewHeader").text(t("AccessibilityTreeViewHeader"));window.lastScriptError&&this.onError(window.lastScriptError.message,window.lastScriptError.file,window.lastScriptError.line,window.lastScriptError.additionalInfo);n.addEventListener("activated",this.onActivated.bind(this));n.addEventListener("deactivated",this.onDeactivated.bind(this));if(Microsoft.Plugin.F12){Common.NavigationUtilities.registerNavigationFrames([Common.NavigationUtilities.makeNavigationFrameFromCallback(document.body,()=>this._toolbar.getActiveElement()),Common.NavigationUtilities.makeNavigationFrameFromCallback(document.getElementById("paneRight"),()=>this.getActiveTabElement())]);Common.NavigationUtilities.registerFocusHandlers(Microsoft.Plugin.F12.PluginId.dom);e.DomExplorer.Telemetry.analytics.logPerformance(i.Shell_Load_Stop)}e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Window_Create_Stop);Microsoft.Plugin.F12&&s.SelfTest&&Microsoft.Plugin.F12.SelfTest.selfTestEnabled&&s.SelfTest.init(this);Microsoft.Plugin.Utilities.registerGlobalKeyboardHandlers()}catch(e){diagnosticOutput("Exception during DomExplorer.initialize: "+e.toString(),e.stack);throw e}}onBreak(){this.stopSelectElementByClick();this.domExplorerModel.domExplorerIsReady=!1}onRun(){this.domExplorerModel.domExplorerIsReady=!0}getSelectedDomTreeItem(){var e=this.domTree?this.domTree.selectedItem:null;return e&&e.node?e:null}onError(e,t,i,n){try{if(t){var a=t.split("/");a.length>0&&(t=a[a.length-1])}var s=Common.EncodingUtilities.escapeHtml(Common.ToolWindowHelpers.loadString("DomExplorerScriptError"))+"<br/>"+Common.EncodingUtilities.escapeHtml(Common.ToolWindowHelpers.loadString("ScriptErrorMessage",[e]))+"<br/>"+Common.EncodingUtilities.escapeHtml(Common.ToolWindowHelpers.loadString("ScriptErrorFile",[t]))+"<br/>"+Common.EncodingUtilities.escapeHtml(Common.ToolWindowHelpers.loadString("ScriptErrorLine",[i]))+"\r\n"+n;$m("#scriptErrorMessageText").html(s);$m("#scriptErrorSection").show();"string"==typeof this._initializationErrorMessage&&(this._initializationErrorMessage+=s)}catch(e){}}populateTree(){var e=document.getElementById("eventsTabButton");if(this.capabilities.showEventsPane){e.style.display="";e.classList.contains("BPT-TabCycle-Item")||e.classList.add("BPT-TabCycle-Item");document.getElementById("eventsView").style.display=""}else{e.style.display="none";e.classList.contains("BPT-TabCycle-Item")&&e.classList.remove("BPT-TabCycle-Item");document.getElementById("eventsView").style.display="none"}var t=document.getElementById("changesTabButton");this.capabilities.showChangesPane||(t.style.display="none");this.refreshTree(()=>{this._dmbpManager.renderDmbpGutterGlyphs()})}giveHostForeground(){Microsoft.Plugin.F12.bringPluginToForeground(Microsoft.Plugin.F12.PluginId.dom)}tcSearchNext(e,t){this.searchDomTree(1,e,t)}tcSearchPrevious(e,t){this.searchDomTree(-1,e,t)}tcSetSearchText(e){if("string"==typeof e){var t=document.getElementById("searchbox");if(t){t.value=e;return!0}}return!1}setTestEditCallbacks(e){this._remoteDom.setEditCallback(e)}setTestUndoCallbacks(e){this._remoteDom.setUndoCallback(e)}performUndo(){e.DomExplorer.Telemetry.analytics.logPerformance(Common.TraceEvents.Dom_UndoRedo_Start);this._remoteDom.undoLastEdit().then(()=>e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_UndoRedo_Stop))}performNextEdit(){e.DomExplorer.Telemetry.analytics.logPerformance(Common.TraceEvents.Dom_UndoRedo_Start);this._remoteDom.performNextEdit().then(()=>e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_UndoRedo_Stop))}toggleElement(e){return this._remoteDom.hideElement(e.uid)}renderGutterGlyph(e,t=!0){let i=this.getItemContainerFromItem(e,!1);if(i){i.template.updateGutterGlyphContainer()}}deleteElement(e,t){var i=t.getNextSibling()||t.getPreviousSibling()||t.parentItem;return this._remoteDom.deleteElement(e).then(e=>{if(e){if(this.domTree){this.domTree.selectedItem=i;this.updateBreadcrumbs()}this.render()}return e})}scrollElementIntoView(e){return this._remoteDom.scrollElementIntoView(e)}openLinkInNewTab(e){e.startsWith("/")?this._remoteDom.getOriginURL().then(t=>{(e=t+e)&&Microsoft.Plugin.F12.openBrowser(e)}):e&&Microsoft.Plugin.F12.openBrowser(e)}isEditableElement(e){return"string"==typeof e&&["html","head","body","script","#doctype"].indexOf(e.toLowerCase())<0}raiseTraceEvents(i){t&&e.DomExplorer.Telemetry.analytics.logPerformance(i)}canDeleteItem(e){var t=!!e&&!!e.node;if(t&&this.domTreeDataSource){var i=e.parentItem,n=!!i&&!!i.node&&0!==i.node.type&&this.domTreeDataSource&&this.domTreeDataSource.isUnderEditableItem(e),a=t&&5===e.node.type;return this.capabilities.canDeleteNodes&&t&&(a||this.isEditableElement(e.node.tagLowerCase))&&n}return!1}getItemContainerFromItem(e,t){var i=this.domTree.itemContainerGenerator.getItemContainerFromItemId(e.id);if(!i&&t){this.domTree.scrollToItem(e);i=this.domTree.itemContainerGenerator.getItemContainerFromItemId(e.id)}return i}getSelectedItemContainer(e){return this.selectedItem?this.getItemContainerFromItem(this.selectedItem,e):null}getSelectedTreeItemDataTemplate(){var e=this.getSelectedItemContainer();return e?e.template:null}onShowContextMenu(){var e=this.getSelectedTreeItemDataTemplate();if(e&&this._domTreeContextMenuController){var t=e.rootElement.getBoundingClientRect();this.htmlContextMenu(this.domTree.selectedItem,t.left+t.width/2,t.top+t.height/2)}}htmlContextMenu(e,t,i){this._domTreeContextMenuController.showContextMenu(e,t,i)}takeDownContextMenu(){this._domTreeContextMenuController.dismiss()}openDocumentLinkFromEvent(e){if("click"===e.type||e.keyCode===Common.KeyCodes.Enter||e.keyCode===Common.KeyCodes.Space){var t=$m(e.target).get(0);this.openDocumentLinkFromElement(t)}}openDocumentLinkFromElement(e){if(e){var t=e.getAttribute("data-linkUrl"),i=e.getAttribute("data-linkLine"),n=e.getAttribute("data-linkCol"),a=0;i&&(a=parseInt(i,10));var s=0;n&&(s=parseInt(n,10));Microsoft.Plugin.F12.Debugger.showDocument(decodeURI(t),a,s)}}startSelectElementByClick(){this.domExplorerModel.selectElementIsEnabled=!0}stopSelectElementByClick(){this.domExplorerModel.selectElementIsEnabled=!1}getAttributeCopyText(e){if(1===e.length){return DataTreeView.getName(e).text()+'="'+DataTreeView.getValue(e).text()+'"'}return""}getEventCopyText(e){var t="";if(1===e.length){t=DataTreeView.getName(e).text();var i=DataTreeView.getChildren(e);if(i.length>0){t+="\r\n";for(var n=0;n<i.length;n++){var a=$m(i.get(n));t+=DataTreeView.getName(a).text()+" "+DataTreeView.getValue(a).text()+"\r\n"+o.detabify(a.attr("title"))+(n<i.length-2?"\r\n\r\n":"")}}else t+=" "+DataTreeView.getValue(e).text().replace(/\t+/g,"\t")+"\r\n"+o.detabify(e.attr("title"))}return t}render(e=!1){this.domTree&&this.domTree.render(e)}scheduleRender(e=300){this._scheduledRenderPromise||(this._scheduledRenderPromise=new Promise(t=>{window.setTimeout(()=>{this._scheduledRenderPromise=null;this.render();t()},e)}));return this._scheduledRenderPromise}selectItemByUid(e,t=!1,i=!0){var n=this.domTreeDataSource.getItemByUid(e);if(n){this.domTree.scrollToItem(n,t);this.domTree.setSelectedItem(n,i);return n}return null}getItemByUid(e){return this.domTreeDataSource.getItemByUid(e)}findItemByUid(e){if(!this.domTreeDataSource)return new Promise((e,t)=>t(new Error("No data source.")));let t=this.getItemByUid(e);return t?Promise.resolve(t):this._remoteDom.getParentChainForElement(e).then(t=>t?this.domTreeDataSource.expandUidChain(t).then(()=>this.getItemByUid(e)):null)}getFirstElement(){this.domTreeDataSource.startAt(0);var e=this.domTreeDataSource.getNext();this.domTreeDataSource.stop();return e}refreshTree(e){this._state="refreshing";if(this._initializationErrorMessage){$m("#scriptErrorMessageText").html(this._initializationErrorMessage);$m("#scriptErrorSection").show()}else{$m("#scriptErrorMessagetext").html("");$m("#scriptErrorSection").hide()}this.domTree&&(this.domTree.selectedItem=null);if(this._textEditController){this._textEditController.cancel();this._textEditController=null}if(this.domTreeDataSource){this.domTreeDataSource.clear();this.render(!0)}this._initializationErrorMessage=null;this.currentSelectedId="";this._currentElementHighlightUid="";this._temporaryElementHighlightUid="";this.hideElementHighlight(!0);$m("*.BPT-HorizontalPane").show();$m("*.BPT-Toolbar").show();$m("#pane").show();this.horizontalPane.refreshPaneWidth();this._remoteDom.clearStyleCache();$m(".BPT-DataTree-Container").each((e,t)=>{DataTreeView.clear($m(t))});this.tabPanes.clearState();this.tabPanes.executeCleanup();Dom.StyleModel.clearCollapsedRules();$m("#layoutView[data-layoutProperty]").text("");this.domExplorerModel.domExplorerIsReady=!1;this.domExplorerModel.selectElementIsEnabled=!1;var t=void 0===Microsoft.Plugin.F12?"vs":"f12";this._remoteDom.initializeHost(t);this.tabPanes.activeTab&&$m("#"+this.tabPanes.activeTab).show();this._remoteDom.getRootElement().then(e=>{this._rootUid=e;return this.showDomTree()}).then(()=>{this.domExplorerModel.domExplorerIsReady=!0;this.registerStyleChangeEvents();"refreshing"===this._state&&(this._state="ready");e&&e()})}showDomTree(){return this.domTreeDataSource?this.domTree?this.domTreeDataSource.refreshTree().then(()=>{this.domTreeDataSource.domTree.addChangeListener(this.handleMutations.bind(this));this.selectBodyOrHtml();this.render(!0);this.capabilities.canDragAndDropElements&&this._dragDropController&&this._dragDropController.attachAllHandlers()}):Promise.resolve():this.createNewDomTreeAndDataSource()}handleMutations(e,t,i,n){switch(e){case 0:i&&!this.domTreeDataSource.hasCollapsedAncestor(i.uid)&&this.scheduleRender().then(()=>{this.domTree&&this.domTree.updateSelectionHighlight(this.domTree.selectedItem)});break;case 1:if(this.domTree.selectedItem){var a=this.findAncestorStillInTree(this.domTree.selectedItem);this.domTree.selectedItem=a||this.domTreeDataSource.domTree.getFirstItemByTag("body")}i&&!this.domTreeDataSource.hasCollapsedAncestor(i.uid)&&this.scheduleRender().then(()=>{this.domTree&&this.domTree.updateSelectionHighlight(this.domTree.selectedItem)});break;case 6:var s=this.domTree.selectedItem?this.domTree.selectedItem.uid:null;this.afterRefresh(s);break;case 2:case 4:case 5:if(t){var r=this.domTreeDataSource&&this.domTreeDataSource.getItemByUid(t.uid);if(r){this.domTree.invalidateItemRowSpan(r);r===this.domTree.selectedItem&&this.scheduleSelectedItemMutatedEvent(r,n)}}}}onPaneResize(){this.domTree&&this.domTree.onWindowResize()}setupEditText(e,t){var n=this.domTreeDataSource.getItemByUid(e);if(!n)return Common.PromiseUtilities.EmptyPromise;if(!this.domTreeDataSource.isUnderEditableItem(n))return Common.PromiseUtilities.EmptyPromise;if(this.canDeleteItem(n)){this._textEditController=new DomTree.TextEditController(document,this,this.domTree,this.domTreeDataSource);if(t){this.raiseTraceEvents(i.Dom_EnterEditAsHtml_Start);return this.getEditAsHtmlText(e).then(e=>n.isExpanded?this.domTreeDataSource.collapseUid(n.uid).then(()=>{this.render();return this._textEditController.edit(n,!0,e)}).then(()=>{this._textEditController=null}):this._textEditController.edit(n,!0,e).then(()=>{this._textEditController=null}))}return this._textEditController.edit(n,!1).then(()=>{this._textEditController=null})}return Common.PromiseUtilities.EmptyPromise}editNewAttribute(e,t=!1){var i=e.getElement();this.getEditElementController().editNewAttribute(e,i,t)}getEditElementController(){if(!this._editElementController){var e=e=>this.domTreeDataSource.domTree.pauseDomMutations(),t=()=>{this.focusToTree();this.domTreeDataSource.domTree.resumeDomMutations()},i=e=>{this.domTree.invalidateItemRowSpan(e)};this._editElementController=new DomTree.EditElementController(document,this,this.domTree,window,this._remoteDom,e,t,i)}return this._editElementController}tryEditAttribute(e,t){this.canEditAttribute(e,t)&&this.editNewAttribute(t,!0)}registerStyleChangeEvents(){this._remoteDom.attachMediaQueryEvents()}addSelectionListener(e){this._selectionListeners.push(e)}updateBreadcrumbs(e){if(this.domTree)if(this._breadcrumbsModel)this._breadcrumbsModel.setSelectedElement(this.domTree.selectedItem);else{this._breadcrumbsModel=new Dom.BreadcrumbsModel(this.domTree.selectedItem,this.domTree);this.breadcrumbsView=new Dom.BreadcrumbsView(this,this._breadcrumbsModel,document,o.BreadcrumbsListId,o.BreadcrumbsTemplateId);this.addSelectionListener(this.breadcrumbsView)}if(this.breadcrumbsView){e&&this.breadcrumbsView.skipNextLoad();this.breadcrumbsView.updateView();this.refreshElementHighlight()}}selectBreadcrumbNodeByTagName(e,t){this.breadcrumbsView.selectBreadcrumbNodeByTagName(e,t)}selectBreadcrumbNodeByClass(e,t){this.breadcrumbsView.selectBreadcrumbNodeByClass(e,t)}selectBreadcrumbNodeById(e,t){this.breadcrumbsView.selectBreadcrumbNodeById(e)}showTooltipOnSelectedBreadcrumb(){this.breadcrumbsView.showTooltipOnBreadcrumb(!0)}refreshCSSView(t=!1){var i=this.getSelectedDomTreeItem();if(i){var n=i.node&&5===i.node.type;if(!(i=this.elementOrTextParent(i))){e.Tools.Utility.Assert.failDebugOnly("Unexpected: text node with no parent.");this.tabPanes.clearState();return}var a=i.uid,s=i.tag;switch(this.tabPanes.activeTab){case Dom.TabPanes.WINNING_STYLES_VIEW:var r=this.tabPanes.getWinningStyleView();if(r)if(t)r.refreshLayoutView(this._remoteDom,a,s,n);else{this.tabPanes.clearStylesState();r.updateView()}else this.tabPanes.clearState();break;case Dom.TabPanes.STYLES_VIEW:if(!t){this.tabPanes.clearState();this.tabPanes.showStyles(a,s)}}}else this.tabPanes.clearState();this.updateBreadcrumbs()}refreshEventsView(){if(!(this.tabPanes.activeTab===Dom.TabPanes.EVENTS_VIEW))return;let e=this.getSelectedDomTreeItem(),t=Dom.Utility.GetEventRetrieveType();this.tabPanes.clearState();if(e){var i=e.uid,n=e.tag;this.tabPanes.showEvents(t,i,n)}else this.tabPanes.showEvents(t)}isColorProperty(e){switch(e.toLowerCase()){case"background-color":case"border-bottom-color":case"border-left-color":case"border-right-color":case"border-top-color":case"color":case"column-rule-color":case"layout-border-bottom-color":case"layout-border-left-color":case"layout-border-right-color":case"layout-border-top-color":case"outline-color":case"stop-color":case"flood-color":case"lighting-color":case"scrollbar-3dlight-color":case"scrollbar-arrow-color":case"scrollbar-base-color":case"scrollbar-darkshadow-color":case"scrollbar-face-color":case"scrollbar-highlight-color":case"scrollbar-shadow-color":case"scrollbar-track-color":return!0}return!1}elementOrTextParent(e){return e&&e.node&&5===e.node.type?e.parentItem:e}canPasteAsChild(e){var t=!!e,i=!!(t&&this.domTreeDataSource?e.parentItem:null),n=e.node.tagLowerCase,a=t&&!!n&&this.isPasteAsChildCapableElement(n),s=i&&this.domTreeDataSource&&this.domTreeDataSource.isUnderEditableItem(e);return t&&s&&a}cut(t){e.Tools.Utility.Assert.isTrue(!!t,"cut item parameter cannot be null/undefined");var i=t.node.type;e.Tools.Utility.Assert.isTrue(1===i||5===i,"cut item parameter must be a Html element or text");this.raiseTraceEvents(Common.TraceEvents.Dom_CutElement_Start);this.copy(t);var n=t.node.uid;return this.deleteElement(n,t).then(e=>{e&&this.raiseTraceEvents(Common.TraceEvents.Dom_CutElement_Stop)})}getContextMenuTarget(t){var i=null,n=t instanceof MouseEvent?t.clientX:0,a=t instanceof MouseEvent?t.clientY:0;if(this.domTree){if(t instanceof MouseEvent)i=this.getItem(0,a);else{e.Tools.Utility.Assert.failDebugOnly("Trying to get context menu target for non-mouse event");var s=(i=this.domTree.selectedItem).getElement().get(0).getBoundingClientRect();n=s.left;a=s.top}i&&(this.domTree.selectedItem=i)}return{target:i,x:n,y:a}}getItem(e,t){var i=document.elementFromPoint(e,t),n=this.closest(i,".BPT-listItemContainer");if(n){var a=n.querySelector("DIV.BPT-HTML [data-id]");if(a){var s=a.getAttribute("data-id");return this.domTreeDataSource.getItemByUid(s)}}return null}copy(e){var t=e;if(5!==t.node.type||(t=t.parentItem)&&0!==t.node.type){var i=t.uid;this._remoteDom.getHTMLString(i,!1,null).then(e=>{Common.ClipboardHelper.copyPlainText(e||"")})}}paste(e,t){this._pasteParentElement=e;this._pasteBeforeChild=t;e=this._pasteParentElement||this.domTree.selectedItem;if(!this.canPasteAsChild(e))return!1;this.onPaste();return!0}getEditAsHtmlText(e){return this._remoteDom.getHTMLString(e,!1,null)}setEditAsHtmlText(e,t,n){this.raiseTraceEvents(i.Dom_CommitEditAsHtml_Start);if(this.domTreeDataSource){var a=this.domTreeDataSource.getItemByUid(e).parentItem;this._remoteDom.replaceElement(e,t).then(e=>{e&&this.domTree&&(this.domTree.selectedItem=a);n&&n(e);this.raiseTraceEvents(i.Dom_CommitEditAsHtml_Stop)})}}doesAttributeForceCSSRefresh(e){return o.ForceRefreshAttributes.indexOf(e)>=0}editAttribute(e,t,n,a){this.raiseTraceEvents(i.Dom_CommitEditAttribute_Start);this._remoteDom.editAttribute(e,t,n).then(t=>{this.domTreeDataSource.getItemByUid(e);a&&a(t);this.raiseTraceEvents(i.Dom_CommitEditAttribute_Stop)})}removeAttribute(e,t,i){this._remoteDom.removeAttribute(e,t).then(i)}editTextRemote(e,t,i){var n=this.domTreeDataSource.getItemByUid(e).parentItem;this._remoteDom.editText(e,t).then(e=>{e&&this.domTree&&(this.domTree.selectedItem=n);i&&i(e)})}getCssClassesUsedInCurrentDocument(e){this._remoteDom.getCssClassesUsedInCurrentDocument(this.currentSelectedId).then(t=>{for(var i=[],n=0;n<t.length;n++){var a=t[n];i.push(new Common.Intellisense.IntellisenseChoice(a,a))}e(i)})}getLoadDocumentData(e){this._remoteDom.getLoadDocumentData().then(t=>e(t))}selectedItemMutated(e,t){t&&(this.doesAttributeForceCSSRefresh(t)?this.refreshCSSView("style"===t):0===t.indexOf("on")&&this.refreshEventsView())}selectionChanged(e){for(var t in this._selectedItemMutatedTimeoutMap)window.clearTimeout(this._selectedItemMutatedTimeoutMap[t]);this._selectedItemMutatedTimeoutMap={};if(e){var n=e.uid;this._tabRefreshTimeout&&window.clearTimeout(this._tabRefreshTimeout);var a=()=>{this.raiseTraceEvents(i.Dom_SelectElement_Start);this.tabPanes.clearState();var t=e.node&&5===e.node.type,a=this.elementOrTextParent(e);let s=Dom.Utility.GetEventRetrieveType();"stylesView"===this.tabPanes.activeTab?this.tabPanes.showStyles(a.uid,a.tag):"winningStylesView"===this.tabPanes.activeTab?this.tabPanes.showWinningStyles(a.uid,a.tag,t):"fontsView"===this.tabPanes.activeTab?this.tabPanes.showFonts(a.uid,a.tag):"eventsView"===this.tabPanes.activeTab?this.tabPanes.showEvents(s,e.uid,e.tag):"accessibilityView"===this.tabPanes.activeTab?this.tabPanes.showAccessibility():"dmbpView"===this.tabPanes.activeTab?this.tabPanes.showDmbp():"changesView"===this.tabPanes.activeTab?this.tabPanes.showChanges():this.tabPanes.showStyles(a.uid,a.tag);this.accessibilityViewModel.selectAccessibilityNodeByDomElement(e);this.updateBreadcrumbs();this._remoteDom.storeElementForConsole(n);this.raiseTraceEvents(i.Dom_SelectElement_Stop)};this.currentSelectedId=n;if(this._immediateTabRefresh){a();this._immediateTabRefresh=!1}else this._tabRefreshTimeout=window.setTimeout(a,100);this._remoteDom.selectElement(e.uid)}}tryNarratorAnnounce(e){this._ariaAnnouncer&&this._ariaAnnouncer.setAlertMessage(e)}lookupStringForNarrator(e){return Common.ToolWindowHelpers.loadString(e)}showAccessibilityPropertiesForNode(e,t=!1){if(t){this.tabPanes.updateSelectedAccessibilityNode(e);this.tabPanes.showAccessibility()}else this.tabPanes.updateSelectedAccessibilityNode(e)}focusToTree(){this.domTree&&this.domTree.forceFocusToSelectedItem()}domExplorerLoaded(){if(Microsoft.Plugin.F12&&Microsoft.Plugin.F12.getInspectElementId){var e=Microsoft.Plugin.F12.getInspectElementId();if(e){this.domTree.selectedItem=this.domTreeDataSource.getItemByUid(e);this._remoteDom.inspectElementById(e).then(e=>{e||o.showMissingElementError()});!0}}this.tabPanes.addTabLoadedCallback(()=>{this._state="ready";this.eventManager.dispatchEvent("domExplorerLoaded");window.setTimeout(()=>{"detached"!==this._state&&this.logLoadDocumentData()},500)})}expandToElementByUid(e){this.domTreeDataSource&&this._remoteDom.getParentChainForElement(e).then(t=>{t&&t.length>0?this.domTreeDataSource.expandUidChain(t).then(()=>{this.selectItemByUid(e,!0)}):o.showMissingElementError()})}expandToRemoteSelectedElement(){this.domTreeDataSource&&this._remoteDom.getParentChainForSelectedElement().then(t=>{t&&t.length>0?this.domTreeDataSource.expandUidChain(t).then(()=>this._remoteDom.getSelectedElement()).then(t=>{this.selectItemByUid(t,!0);e.Host.ExternalApis.activateTab(Microsoft.Plugin.F12.PluginId.dom);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.EXPAND_TO_REMOTE_SELECTED_ELEMENT,Common.TriggerType.Ui)}):o.showMissingElementError()})}static showToolTip(e){var t={content:e};Microsoft.Plugin.Tooltip.show(t)}static getItemContainerAriaLabel(e){var t=e.item;if(t&&t.node){var i="";switch(t.node.type){case 1:i=t.tag;if(t.attributes)for(var n=0;n<t.attributes.length;n++){var a=t.attributes.getItem(n);i+=";"+Microsoft.Plugin.Resources.getString("EditAttributeNameAriaLabel");i+=":"+a.name;i+=";"+Microsoft.Plugin.Resources.getString("EditAttributeValueAriaLabel");i+=":"+a.value}if(t.textPreview){i+=";"+Microsoft.Plugin.Resources.getString("SearchContentText");i+=":"+t.textPreview}break;case 5:i=t.textNodeText;break;case 2:i="CDATA:"+t.cDataText;break;case 4:i="DOCTYPE:"+t.docTypeText;break;case 3:i="COMMENT:"+t.commentText}}return i}scheduleSelectedItemMutatedEvent(t,i,n=300){this._selectedItemMutatedTimeoutMap[i]||(this._selectedItemMutatedTimeoutMap[i]=window.setTimeout(()=>{delete this._selectedItemMutatedTimeoutMap[i];t===this.domTree.selectedItem?this.fireSelectedItemMutated(t,i):e.Tools.Utility.Assert.failDebugOnly("Firing selectedItemMutated on an item that is not selected")},n))}afterRefresh(e){this.render();if(e){var t=this.domTreeDataSource.getItemByUid(e);t?this.domTree.selectedItem=t:this.selectBodyOrHtml()}else this.selectBodyOrHtml()}createNewDomTreeAndDataSource(){r.isTrue(!this.domTreeDataSource,"Should not attempt to create a DomTreeDataSource if one already exists");var e=new DomTree.NotifyingItemContainerGenerator,t=this.capabilities.canDeleteNodes,i=t?(e,t)=>this.setupEditText(e,t):null,n=t?(e,t)=>this.tryEditAttribute(e,t):null,a=document.getElementById("treeContainer"),s=new DomTree.DomTreeListControl(i,n,this.onShowContextMenu.bind(this));s.dataItemTemplate=new Common.ControlConstruction(()=>null,null,()=>new DomTree.TreeItemDataTemplate(document,this,s,this.domTreeDataSource,window,this._remoteDom));s.itemContainerGenerator=e;s.onGetItemContainerAriaLabel=o.getItemContainerAriaLabel;s.selectedItemChanged=(e=>this.fireSelectionChanged(e));this.addSelectionListener(s);var l=new DomTree.DomTreeDataSource(this._remoteDom,this.capabilities);return l.init().then(()=>{if(!this.domTreeDataSource){this.domTree=s;this.domTreeDataSource=l;a.appendChild(this.domTree.rootElement);this.domTreeDataSource.domTree.addChangeListener(this.handleMutations.bind(this));this.addSelectionListener(this.domTreeDataSource);this.domTree.dataSource=this.domTreeDataSource;this.capabilities.canDragAndDropElements&&(this._dragDropController=new DomTree.DragDropController(this,this.domTreeDataSource,a,e));this.horizontalPane.addResizeListener(this);this.breadcrumbsView&&this.addSelectionListener(this.breadcrumbsView);this.addSelectionListener(this);this.selectBodyOrHtml();e.hoverStateChangeEvent.addHandler(e=>{if(e.hovering){var t=e.container.item;t&&t.parentItem&&this.mouseoverUid(t.uid,t.tag,t.parentItem.uid)}else this.mouseoutUid()});this.render(!0);this.capabilities.canDragAndDropElements&&this._dragDropController.attachAllHandlers();this.domExplorerLoaded()}})}findAncestorStillInTree(e){return this.domTreeDataSource.getItemByUid(e.uid)?e:e.parentItem&&"#root"!==e.parentItem.uid?this.findAncestorStillInTree(e.parentItem):null}onAttach(t){e.Tools.Utility.Assert.isTrue(void 0!==t,"args is invalid");this._remoteDom.onAttach();var i=!!t.isDesignerConnected;this.capabilities.initialize(i);this.domExplorerModel.selectElementIsVisible=this.capabilities.showSelectElementButton;this.domExplorerModel.showLayoutIsVisible=this.capabilities.showHighlightingButton;this.domExplorerModel.showAccessibilityIsVisible=!0}onDetach(){for(var e=document.getElementById("treeContainer");e&&e.firstChild;)e.removeChild(e.firstChild);if(this._dragDropController){this._dragDropController.detachAllHandlers();this._dragDropController=void 0}this.domTree=void 0;this.domTreeDataSource=void 0;this._selectionListeners=[];$m(".BPT-DataTree-Container").each((e,t)=>{DataTreeView.clear($m(t))});$m("#pane").hide();this.tabPanes.onDetach();$m("#layoutView[data-layoutProperty]").text("");this.domExplorerModel.domExplorerIsReady=!1;this.domExplorerModel.selectElementIsEnabled=!1;this._state="detached";this.colorPickerViewModel&&(this.colorPickerViewModel.isVisible=!1)}onLoad(e){var t=document.createElement("script");t.src=e.url;t.type="text/javascript";document.getElementsByTagName("head").item(0).appendChild(t)}handleToolMessage(e){e&&("highlightDomElement"===e.type&&e.uidChain?this._remoteDom.hoverItem(e.uidChain):"removeDomHighlight"===e.type&&this._remoteDom.hideHoverItem())}canEditAttribute(e,t){if(!e||!t)return!1;if(!this.capabilities.canEditAttributes||this.domTree.selectedItem!==t||!this.domTreeDataSource.isUnderEditableItem(t))return!1;var i=t.node.type,n=1===i?t.node.tag:null;return 5!==i&&3!==i&&4!==i&&"script"!==n&&"style"!==n}fireSelectionChanged(t){for(var i=this._selectionListeners.slice(0),n=i.length,a=0;a<n;a++)i[a].selectionChanged(t);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SELECTED_ITEM_CHANGED,Common.TriggerType.NotSpecified)}fireSelectedItemMutated(e,t){for(var i=this._selectionListeners.slice(0),n=i.length,a=0;a<n;a++)i[a].selectedItemMutated(e,t)}onActivated(){this.restoreElementHighlight();if(this._activatedFocusToken){window.clearTimeout(this._activatedFocusToken);this._activatedFocusToken=Number.NaN}this._activatedFocusToken=window.setTimeout(()=>{this.focusToTree();this._activatedFocusToken=Number.NaN},0)}onDeactivated(){if(this._activatedFocusToken){window.clearTimeout(this._activatedFocusToken);this._activatedFocusToken=Number.NaN}this.domExplorerModel.selectElementIsEnabled=!1;this.hideElementHighlight(!0)}async initializeSettings(){await this.persistenceManager.initializeSettingMap();this._isShowAccessibilityEnabled=this.persistenceManager.getSetting(o.SHOW_ACCESSIBILITY_KEY,!1);this.domExplorerModel.showLayoutIsEnabled=this.persistenceManager.getSetting(o.SHOW_LAYOUT_KEY,!0);this.domExplorerModel.showAccessibilityIsEnabled=this._isShowAccessibilityEnabled}initializeTabs(){this.horizontalPane=new Dom.HorizontalPane($m("#pane"),this);this.tabPanes.setHorizontalPane(this.horizontalPane);Dom.TabItem.init($m("#stylesTabButton"),()=>{this.doClickStyles();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_STYLES_TAB,Common.TriggerType.Ui)});Dom.TabItem.init($m("#winningStylesTabButton"),()=>{this.doClickComputed();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_COMPUTED_TAB,Common.TriggerType.Ui)});Dom.TabItem.init($m("#fontsTabButton"),()=>{this.doClickFonts();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_FONTS_TAB,Common.TriggerType.Ui)});Dom.TabItem.init($m("#eventsTabButton"),()=>{this.doClickEvents();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_EVENTS_TAB,Common.TriggerType.Ui)});Dom.TabItem.init($m("#changesTabButton"),()=>{this.tabPanes.showChanges();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_CHANGES_TAB,Common.TriggerType.Ui)});Dom.TabItem.init($m("#accessibilityTabButton"),()=>{this.tabPanes.showAccessibility();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_ACCESSIBILITY_TAB,Common.TriggerType.Ui)});Dom.TabItem.init($m("#dmbpTabButton"),()=>{this.tabPanes.showDmbp();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_DMBP_TAB,Common.TriggerType.Ui)})}doClickStyles(){var e=this.getSelectedDomTreeItem();if(e){e=this.elementOrTextParent(e);return this.tabPanes.showStyles(e.uid,e.tag)}return this.tabPanes.showStyles()}doClickComputed(){var e=this.getSelectedDomTreeItem(),t=e&&e.node&&5===e.node.type;if(e){e=this.elementOrTextParent(e);return this.tabPanes.showWinningStyles(e.uid,e.tag,t)}return this.tabPanes.showWinningStyles()}doClickFonts(){const e=this.getSelectedDomTreeItem();return e?this.tabPanes.showFonts(this.elementOrTextParent(e).uid,e.tag):this.tabPanes.showFonts()}doClickEvents(){let e=this.getSelectedDomTreeItem(),t=Dom.Utility.GetEventRetrieveType();return e?this.tabPanes.showEvents(t,e.uid,e.tag):this.tabPanes.showEvents(t)}activateTab(e){$m({styles:"#stylesTabButton",computed:"#winningStylesTabButton",layout:"#layoutTabButton",events:"#eventsTabButton",changes:"#changesTabButton",accessibility:"#accessibilityTabButton",dmbp:"#dmbpTabButton"}[e]).click()}searchDomTree(t,n,a){var s=null,r=$m("#searchbox");document.activeElement===r.get(0)&&(s=document.activeElement);var o=r.val();if(o){e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Search_Start);this._remoteDom.findTerm(this.currentSelectedId,o,t,null).then(t=>{var a=0!==t.length;if(a){const e=Common.ToolWindowHelpers.loadString("ElementsSearchTermFound",o);this.tryNarratorAnnounce(e);$m("#searchBoxBorder").removeClass("BPT-SearchBox-NoResult");$m("#searchBoxBorder").removeClass("BPT-SearchBox-HideButtons");this.domTreeDataSource&&this.domTreeDataSource.expandUidChain(t).then(e=>{if(e){this.selectItemByUid(e);s&&s.focus()}})}else{$m("#searchBoxBorder").addClass("BPT-SearchBox-NoResult");$m("#searchBoxBorder").addClass("BPT-SearchBox-HideButtons")}n&&n(a);e.DomExplorer.Telemetry.analytics.logPerformance(i.Dom_Search_Stop)})}else a&&a("Invalid searchterm")}initializeGlobalCommands(){var t=t=>{var i=!1,n=t.shiftKey&&t.ctrlKey&&!t.altKey,a=t.shiftKey&&!t.ctrlKey&&!t.altKey,s=t.ctrlKey&&!t.shiftKey&&!t.altKey,r=!t.shiftKey&&!t.ctrlKey&&!t.altKey;if(t.keyCode===Common.KeyCodes.B&&s){this.domExplorerModel.selectElementIsEnabled=!this.domExplorerModel.selectElementIsEnabled;i=!0}else if(t.keyCode===Common.KeyCodes.F&&s){document.getElementById("searchbox").focus();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND,Common.TriggerType.KeyboardShortcut,0);i=!0}else if(t.keyCode===Common.KeyCodes.K&&s){this.initializeColorPicker().then(()=>{this.colorPickerViewModel.isVisible=!0});i=!0}else if(t.keyCode===Common.KeyCodes.F3&&r){this.searchDomTree(1);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND_NEXT,Common.TriggerType.KeyboardShortcut,0);i=!0}else if(t.keyCode===Common.KeyCodes.F3&&a){this.searchDomTree(-1);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND_PREV,Common.TriggerType.KeyboardShortcut,0);i=!0}else if(t.keyCode===Common.KeyCodes.Z&&s&&!this.isInTextControl()){this.performUndo();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.UNDO,Common.TriggerType.KeyboardShortcut,0);i=!0}else if(t.keyCode===Common.KeyCodes.Y&&s&&!this.isInTextControl()){this.performNextEdit();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.REDO,Common.TriggerType.KeyboardShortcut,0);i=!0}else if(t.keyCode===Common.KeyCodes.A&&n){this.domExplorerModel.showAccessibilityIsEnabled=!this.domExplorerModel.showAccessibilityIsEnabled;i=!0}else if(t.keyCode===Common.KeyCodes.L&&n){this.domExplorerModel.showLayoutIsEnabled=!this.domExplorerModel.showLayoutIsEnabled;i=!0}if(i){t.preventDefault();return!1}return!0};document.addEventListener(o.KeydownEventName,e=>t(e));n.addEventListener(o.KeydownEventName,e=>t(e))}selectElementFromUidChain(e,t=!1){e&&e.length>0?this.domTreeDataSource&&this.domTreeDataSource.expandUidChain(e).then(()=>{for(;e.length>0;){var i=e.pop();if(this.selectItemByUid(i,!0,!t)){t||this.focusToTree();break}}}):t?this.accessibilityViewModel.selectAccessibilityNodeByDomElement(null):o.showMissingElementError()}onAccessibilityIsEnabledChanged(t){this.accessibilityViewModel.isVisible=t;if(t){this.horizontalPane.showAccessibilityPane();this.accessibilityViewModel.gainDefaultFocus();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.SHOW_ACCESSIBILITY_TREE,Common.TriggerType.NotSpecified)}else{this.horizontalPane.hideAccessibilityPane();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.HIDE_ACCESSIBILITY_TREE,Common.TriggerType.NotSpecified)}}tryBringRemoteToForeground(){try{Microsoft.Plugin.F12.bringRemoteToForeground();return!0}catch(e){return!1}}initializeToolbarButtons(){this.domExplorerModel.selectElementIsEnabledChanged.addHandler(t=>{if(t){this.tryBringRemoteToForeground();this._remoteDom.selectElementByClick();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.START_SELECT_ELEMENT,Common.TriggerType.NotSpecified)}else{this._remoteDom.cancelSelectElementByClick();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.STOP_SELECT_ELEMENT,Common.TriggerType.NotSpecified)}});this.domExplorerModel.showLayoutIsEnabledChanged.addHandler(t=>{if(t){this.restoreElementHighlight();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.START_SHOW_LAYOUT,Common.TriggerType.NotSpecified)}else{this.hideElementHighlight();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.STOP_SHOW_LAYOUT,Common.TriggerType.NotSpecified)}this.persistenceManager.setSetting(o.SHOW_LAYOUT_KEY,t)});this.domExplorerModel.showAccessibilityIsEnabledChanged.addHandler(e=>{this.onAccessibilityIsEnabledChanged(e);this.persistenceManager.setSetting(o.SHOW_ACCESSIBILITY_KEY,e)});if(Microsoft.Plugin.F12){this.accessibilityViewModel=new s.AccessibilityViewModel(this._remoteDom,this,this._isShowAccessibilityEnabled);this._isShowAccessibilityEnabled&&this.horizontalPane.showAccessibilityPane();this._toolbar.getNamedControl("colorPickerButton").click.addOne(this.handleFirstClickOfColorPickerButton)}else this._toolbar.getNamedControl("colorPickerButton").isVisible=!1;this._toolbar.addClickHandlerToButton("refreshButton",t=>{if(this.domTreeDataSource){this.getSelectedDomTreeItem()||this.domTreeDataSource.domTree.getFirstItemByTag("html");e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.REFRESH,Common.TriggerType.Ui)}return!1});this._domTreeContextMenuController=new Dom.DomTreeContextMenuController(this,this._remoteDom,"treeContainer");this._findBoxContextMenu=new Dom.TextControlMenuController(document.getElementById("searchbox"));$m("#searchbox").bind(o.KeydownEventName,t=>{t.shiftKey&&!t.ctrlKey&&t.altKey;var i=!t.shiftKey&&!t.ctrlKey&&!t.altKey;let n=t.ctrlKey&&!t.shiftKey&&!t.altKey;if(t.keyCode===Common.KeyCodes.Enter&&i){this.searchDomTree(1);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND_NEXT,Common.TriggerType.Ui);return!1}if(n&&t.keyCode===Common.KeyCodes.V){this.pasteIntoSearchBox();return!1}return!0});document.getElementById("searchbox").addEventListener("input",e=>{$m("#searchBoxBorder").removeClass("BPT-SearchBox-NoResult");$m("#searchBoxBorder").addClass("BPT-SearchBox-HideButtons")});$m("#searchbox").bind("click keydown",t=>{$m("#searchbox").focus();e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND,Common.TriggerType.Ui);return!0});$m("#searchNextResult").bind("click keydown",t=>{if("click"===t.type||t.keyCode===Common.KeyCodes.Enter||t.keyCode===Common.KeyCodes.Space){this.searchDomTree(1);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND_NEXT,Common.TriggerType.Ui);return!1}return!0});$m("#searchPreviousResult").bind("click keydown",t=>{var i=t;if("click"===t.type||i.keyCode===Common.KeyCodes.Enter||i.keyCode===Common.KeyCodes.Space){this.searchDomTree(-1);e.DomExplorer.Telemetry.analytics.logExecuteCommand(e.DomExplorer.Telemetry.CommandName.FIND_PREV,Common.TriggerType.Ui);return!1}return!0});if(Microsoft.Plugin.F12){document.getElementById("tabStartMarker").setAttribute(o.TabIndexAttributeName,"-1");document.getElementById("tabEndMarker").setAttribute(o.TabIndexAttributeName,"-1")}else $m("#tabStartMarker,#tabEndMarker").bind("focus",e=>{var t=$m("[tabindex='1']");if(t.length>2){for(var i=[],n=1;n<t.length-1;n++){var a=t.get(n);$m(a).closest(".BPT-Tab-Inactive").length||i.push(a)}("tabStartMarker"===e.target.id?i[i.length-1]:i[0]).focus()}})}async pasteIntoSearchBox(){const e=document.getElementById("searchbox"),t=await Common.ClipboardHelper.getPasteTextAsync();if(void 0!==e.selectionStart){const i=e.value,n=`${i.substring(0,e.selectionStart)}${t}${i.substring(e.selectionEnd)}`;e.value=n}else e.value=t}initializeLayoutButtons(){var e=$m("#"+Dom.Wsp.View.LAYOUT_VIEW),t=document.getElementById("Layout-EditContainer"),i=t.firstElementChild,n=n=>{if(document.activeElement&&"text"!==document.activeElement.type&&this.capabilities.canEditLayout&&this.capabilities.canAddStyleProperty&&("click"===n.type||n.type===o.KeydownEventName&&(n.keyCode===Common.KeyCodes.Enter||n.keyCode===Common.KeyCodes.Space)&&!n.ctrlKey&&!n.shiftKey&&!n.altKey)){var a=n.target;a.hasAttribute("data-layoutProperty")||(a=$(a).find("[data-layoutProperty]").get(0));var s=e.attr("data-uid"),r=e.attr("data-tag"),l=a.getAttribute("data-layoutProperty");if(s&&r){var m=a.getBoundingClientRect(),d=e.get(0).getBoundingClientRect(),h=document.getElementById("layout-offset-layer").getBoundingClientRect(),u="none"===window.getComputedStyle(a).transform?m.height:m.width,c=60,p=m.top+m.height/2-u/2-d.top,g=h.left-d.left-d.left;"height"===l||a.classList.contains("BPT-Layout-Left")?g+=m.left:"width"===l||a.classList.contains("BPT-Layout-Right")?g+=m.right-c:g+=m.left+m.width/2-c/2;t.style.left=g+"px";t.style.top=p+"px";t.style.display="block";i.textContent=a.textContent;var y=a.style.color;a.style.color="transparent";var C=new Dom.ValueEditor(document,this,window);C.enableCommitOnChange();C.enableNumericChanges();this._remoteDom.enableEditChaining();C.show(i,c,(e,t)=>new Promise(t=>{if(e){/^\d*(\.\d+)?$/.test(e)&&(e+="px");this.editLayoutValue(s,l,e)}t(!0)})).then(e=>{this._remoteDom.disableEditChaining();t.style.display="none";a.style.color=y;if(!e.wasCancelled){a.textContent=e.newValue;this.tabPanes.showWinningStyles(s,r)}})}return!1}};const a=[];e.find("[data-layoutProperty]").each((e,t)=>{if(!t.hasAttribute(o.TabIndexAttributeName))return a.push($(t).parents("[tabindex]").get(0));a.push(t)});$m(a).bind("click keydown",n);this.initialzeLayoutKeyboardNavigation()}initialzeLayoutKeyboardNavigation(){const e=[Common.KeyCodes.ArrowUp,Common.KeyCodes.ArrowRight,Common.KeyCodes.ArrowDown,Common.KeyCodes.ArrowLeft];function t(e){let t=$(e);t.get(0).hasAttribute(o.TabIndexAttributeName)||(t=$(t.parents("[tabindex]").get(0)));return t}function i(i,n,a){return i=>{if(i.ctrlKey||i.shiftKey||i.altKey)return!0;for(let n=0;n<4;n++){let s=e[n],r=a[n];if(r&&i.keyCode===s){t(r).focus();return!1}}return!0}}for(const e of Object.keys(o.LayoutPaneKeyboardNavigationRoadMap)){if(!o.LayoutPaneKeyboardNavigationRoadMap.hasOwnProperty(e))return;let n=t(e),a=o.LayoutPaneKeyboardNavigationRoadMap[e];n.on(o.KeydownEventName,i(e,n,a))}}isInTextControl(){return document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLInputElement&&"text"===document.activeElement.type.toLowerCase()}editLayoutValue(e,t,i){"offsetLeft"===t?t="left":"offsetTop"===t?t="top":"clientWidth"===t?t="width":"clientHeight"===t&&(t="height");this._styleCache.updateView(e,e=>{e.setInlineProperty(t,i,!1)})}addElements(e,t,i,n){this._remoteDom.addElement(e,t,i).then(t=>{if(t&&this.domTreeDataSource){this.domTreeDataSource.getItemByUid(e);this.updateBreadcrumbs();n&&n(t)}})}remoteHighlight(e){if(this._lastKnownElementHighlightUid!==e){this._lastKnownElementHighlightUid=e;this._remoteDom.hoverItem(e);this._highlightIsShown=!0}}isPasteAsChildCapableElement(e){switch(e){case"html":case"script":case"style":case"#doctype":case"#comment":case"iframe":case"frame":case"#text":return!1}return!Dom.Utility.isSelfClosingTag(e,!1)}logLoadDocumentData(){this.getLoadDocumentData(e=>{if(e){var t={SerializedLength:e.serializedLength,NodeCount:e.nodeCount,NestedLevel:e.nestedLevel,IframeCount:e.iframeCount,ScriptFileCount:e.scriptFileCount,StylesheetLinkCount:e.stylesheetLinkCount};s.Telemetry.analytics.log(s.Telemetry.EventName.LOAD_DOCUMENT,t)}})}selectRippleAppRoot(){this.domTreeDataSource&&this.findRippleAppFrame(e=>{e&&this._remoteDom.querySelector(e,"body",!0).then(e=>this._remoteDom.inspectElementById(e)).then(()=>this.domTreeDataSource.expandUid(e))})}findRippleAppFrame(e){this._remoteDom.querySelector(this._rootUid,"head link[href^='/ripple/']").then(t=>{t?this._remoteDom.querySelector(this._rootUid,"body iframe#document").then(t=>{e(t)}):e(t)})}selectBodyOrHtml(){var e=this.domTreeDataSource.domTree.getFirstItemByTag("body");e||(e=this.domTreeDataSource.domTree.getFirstItemByTag("html"));this.domTree.selectedItem=e}switchTab(e){switch(e){case 0:$m("#stylesTabButton").click();break;case 1:$m("#winningStylesTabButton").click();break;case 2:$m("#eventsTabButton").click();break;case 3:$m("#changesTabButton").click();break;case 4:$m("#accessibilityTabButton").click();break;case 6:$m("#dmbpTabButton").click()}}getActiveTabElement(){for(var e,t=["stylesTabButton","winningStylesTabButton","eventsTabButton","changesTabButton","accessibilityTabButton","dmbpTabButton"],i=0;i<t.length;i++){e=document.getElementById(t[i]);if(Dom.TabItem.isActive($m(e)))break}return e}closest(e,t){for(;e&&e!==document;){var i=e;if(i.msMatchesSelector&&i.msMatchesSelector(t))return i;e=e.parentNode}}initializeContextMenus(){this._domTreeViewElement=document.getElementById("domTreeView");this._domTreeViewElement.addEventListener(o.KeydownEventName,e=>{var t=!1;if(!this.isInTextControl()){if(!Common.ToolWindowHelpers.hasSelectedText()&&this.domTree){var i=this.domTree.selectedItem;if(i&&i.node){var n=i.uid,a=this.canDeleteItem(i),s=(e.shiftKey&&!e.ctrlKey&&e.altKey,e.ctrlKey&&!e.shiftKey&&!e.altKey),r=!e.shiftKey&&!e.ctrlKey&&!e.altKey;if(a&&e.keyCode===Common.KeyCodes.X&&s){t=!0;this.cut(i)}else if(a&&e.keyCode===Common.KeyCodes.Delete&&r){t=!0;this.deleteElement(n,i)}}}if(t){e.preventDefault();e.stopPropagation()}}})}async onPaste(){if(this._textEditController||this._editElementController&&this._editElementController.isInEditMode)return;const e=await Common.ClipboardHelper.getPasteTextAsync();this.pasteText(e)}pasteText(e){try{var t=this._pasteParentElement||this.domTree.selectedItem;if(this.canPasteAsChild(t)){this.raiseTraceEvents(Common.TraceEvents.Dom_PasteElement_Start);if(e){var i=t.uid,n=this._pasteBeforeChild&&this._pasteBeforeChild.uid;this.addElements(i,n,e,e=>{this.raiseTraceEvents(Common.TraceEvents.Dom_PasteElement_Stop)})}else this.raiseTraceEvents(Common.TraceEvents.Dom_PasteElement_Stop)}}finally{this._pasteParentElement=null;this._pasteBeforeChild=null}}}o.DEBUG_UID_DISPLAY=!1;o.DOMEXPLORER_SETTING_KEY="JavaScriptDomExplorerSettings";o.SHOW_LAYOUT_KEY="DomExplorerShowLayout";o.SHOW_ACCESSIBILITY_KEY="DomExplorerShowAccessibility";o.BreadcrumbsListId="BreadcrumbsView";o.BreadcrumbsTemplateId="breadcrumbsTemplate";o.ForceRefreshAttributes=["style","class","id","checked","color","type","align","valign"];o.HiddenRootSelector=".BPT-HtmlTreeItem-HiddenRoot";o.ItemSelector=".BPT-HtmlTreeItem";o.TabIndexAttributeName="tabindex";o.KeydownEventName="keydown";o.DOMEXPLORER_ARIA_ANNOUNCER_ID="domAriaAlertZone";o.LayoutPaneKeyboardNavigationRoadMap={"#Layout-Offset-Left":["#Layout-Offset-Top","#Layout-Margin-Left",null,null],"#Layout-Offset-Top":[null,null,"#Layout-Margin-Top","#Layout-Offset-Left"],"#Layout-Margin-Top":["#Layout-Offset-Top","#Layout-Margin-Right","#Layout-Border-Top","#Layout-Margin-Left"],"#Layout-Margin-Right":["#Layout-Margin-Top",null,"#Layout-Margin-Bottom","#Layout-Border-Right"],"#Layout-Margin-Bottom":["#Layout-Border-Bottom","#Layout-Margin-Right",null,"#Layout-Margin-Left"],"#Layout-Margin-Left":["#Layout-Margin-Top","#Layout-Border-Left","#Layout-Margin-Bottom","#Layout-Offset-Left"],"#Layout-Border-Top":["#Layout-Margin-Top","#Layout-Border-Right","#Layout-Padding-Top","#Layout-Border-Left"],"#Layout-Border-Right":["#Layout-Border-Top","#Layout-Margin-Right","#Layout-Border-Bottom","#Layout-Padding-Right"],"#Layout-Border-Bottom":["#Layout-Padding-Bottom","#Layout-Border-Right","#Layout-Margin-Bottom","#Layout-Border-Left"],"#Layout-Border-Left":["#Layout-Border-Top","#Layout-Padding-Left","#Layout-Border-Bottom","#Layout-Margin-Left"],"#Layout-Padding-Top":["#Layout-Border-Top","#Layout-Padding-Right","#Layout-Size-Width","#Layout-Padding-Left"],"#Layout-Padding-Right":["#Layout-Padding-Top","#Layout-Border-Right","#Layout-Padding-Bottom","#Layout-Size-Height"],"#Layout-Padding-Bottom":["#Layout-Size-Width","#Layout-Padding-Right","#Layout-Border-Bottom","#Layout-Padding-Left"],"#Layout-Padding-Left":["#Layout-Padding-Top","#Layout-Size-Width","#Layout-Padding-Bottom","#Layout-Border-Left"],"#Layout-Size-Width":["#Layout-Padding-Top","#Layout-Size-Height","#Layout-Padding-Bottom","#Layout-Padding-Left"],"#Layout-Size-Height":["#Layout-Padding-Top","#Layout-Padding-Right","#Layout-Padding-Bottom","#Layout-Size-Width"]};s.DomExplorerWindow=o}(s=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";let t;!function(e){e[e.Attributes=0]="Attributes"}(t=e.ObservableProperties||(e.ObservableProperties={}));class i extends Common.Observable{constructor(e,t,i,n,a,s){super();this._autoExpanded=!1;this._childReadInCount=0;this._parent=i;this._tag=a;this._type=n;this._uid=e;this._attributeLookup={};this._hasChildren=t>0;this.textContentChanged=new Common.EventSource;this.attributes=new Common.ObservableCollection(s);if(s)for(var r=0,o=this.attributes.length;r<o;r++){var l=this.attributes.getItem(r);this._attributeLookup[l.name]=l}this._children=Array(t);this._childUidLookup={}}get isFrame(){var e=this.tagLowerCase;return"frame"===e||"iframe"===e}set isFrame(e){throw new Error("Can not set the isFrame property")}get hasChildren(){return!!(this.hasChildUids()&&this.childUidCount>0)||this._hasChildren}set hasChildren(e){this._hasChildren=e}get childUidCount(){return this._children?this._children.length:0}get autoExpanded(){return this._autoExpanded}get uid(){return this._uid}get type(){return this._type}set type(e){this._type=e}get parent(){return this._parent}set parent(e){this._parent=e}get tag(){return this._tag}get tagLowerCase(){void 0===this._tagLowerCase&&void 0!==this._tag&&(this._tagLowerCase=this._tag.toLowerCase());return this._tagLowerCase}get attributeCount(){return this.attributes?this.attributes.length:0}get textContent(){var e=this.getAttributeByName(i.TextContentAttributeName);return e?e.value:""}set textContent(e){this.addAttribute({name:i.TextContentAttributeName,value:e})}set tag(e){this._tag=e;this._tagLowerCase=void 0;switch(e){case"#root":this._type=0;break;case"#text":this._type=5;break;case"#comment":this._type=3;break;case"#doctype":this._type=4;break;case"#cdata-section":this._type=2;break;default:this._type=1}}set autoExpanded(e){this._autoExpanded=e}static initialize(){Common.ObservableHelpers.defineProperty(i,i.AttributesPropertyName,null)}clearNode(){this._attributeLookup={};this._children=[];this._childUidLookup={};this._childReadInCount=0;this._hasChildren=void 0;this._autoExpanded=!1;this.attributes=new Common.ObservableCollection}getChildIndex(e){if(this._children)for(var t=0,i=this._children.length;t<i;t++){var n=this._children[t];if(n&&n.child===e)return t}return-1}isNodeAChild(e){return this.getChildIndex(e)>=0}isParentTagName(e){for(var t=e.toLocaleLowerCase(),i=this;i;){if(i.tagLowerCase===t)return!0;i=i.parent}return!1}findChildIndexByUid(e){if(this._children)for(var t=0,i=this._children.length;t<i;t++){var n=this._children[t];if(n&&n.uid===e)return t}return-1}findChildInfoByUid(e){return this._childUidLookup[e]}doesChildHaveChildren(e){if(this._children&&e<this._children.length&&this._children[e])return this._children[e].childCount>0;throw new Error("accessing childIndex that doesn't exist")}hasChildUids(){return!!this._children}appendChildUids(e){if(!this._children){this._children=[];this._childUidLookup={}}for(var t=0,i=e.length;t<i;t++){var n=e[t].uid;if(!this._childUidLookup[n]){var a={};a.childCount=e[t].childCount;a.uid=n;a.child=null;this._children.push(a);this._childUidLookup[n]=a}}}setChildUids(e){var t;this._children&&(t=this._children.slice(0));this._children=[];this._childUidLookup={};for(var i=0,n=e.length;i<n;i++){var a=e[i].uid;this._children[i]={};this._children[i].childCount=e[i].childCount;this._children[i].uid=a;t&&t[i]&&t[i].uid===a&&(this._children[i].child=t[i].child);this._childUidLookup[a]=this._children[i]}}insertChildUid(e,t){if(!this._children){if(this._hasChildren)return!1;this._children=[];this._childUidLookup={}}var i={uid:e.uid,childCount:e.childCount,child:null};t>this._children.length?this._children[t]=i:this._children.splice(t,0,i);this._childUidLookup[i.uid]=i;return!0}isWhitespace(){return 5===this._type&&(!this.textContent||i.WHITESPACE_REGEXP.test(this.textContent))}toString(){if(5===this._type)return this.textContent;if(3===this._type)return"\x3c!--"+this.textContent+"--\x3e";if(4===this._type)return"<!DOCTYPE "+this.textContent+">";if(2===this._type)return"<![CDATA[ "+this.textContent+" ]]>";var e="<"+this.tagLowerCase;if(this.attributes)for(var t=0,i=this.attributes.length;t<i;t++){var n=this.attributes.getItem(t);e+=" "+n.name+" = '"+n.value+"'"}return e+=">"}getChild(e){if(this._children&&e<this._children.length&&e>=0&&this._children[e])return this._children[e].child}getChildUid(e){if(this._children&&e<this._children.length&&e>=0)return this._children[e].uid}getIndexChain(){for(var e=[],t=this.parent,i=this;t;){var n=t.findChildIndexByUid(i.uid);if(-1===n)return;var a=this.isFrame;e.unshift({index:n,isDocumentBreak:a});i=t;t=t.parent}return e}setChild(e,t){if(this._children&&!(t>=this._children.length)){var i=this._children[t];if(i){i.uid=e.uid;i.childCount=e.childUidCount;i.child=e}else this._children[t]={uid:e.uid,child:e,childCount:e.childUidCount};e.parent=this;this._childUidLookup[e.uid]=i}}removeChild(e){if(!this._children)return!1;for(var t=-1,i=0,n=this._children.length;i<n;i++)if(this._children[i].child===e){t=i;break}if(t>=0){this._children.splice(t,1);delete this._childUidLookup[e.uid];this._childReadInCount--;return!0}return!1}removeChildByIndex(e){if(!this._children)return!1;if(-1!==e){var t=this._children[e];if(t&&t.child){delete this._childUidLookup[t.uid];this._childReadInCount--}this._children.splice(e,1);0===this._children.length&&this.removeAllChildren();return!0}return!1}removeChildByUid(e){if(!this._children)return!1;for(var t=-1,i=0,n=this._children.length;i<n;i++)if(this._children[i]&&this._children[i].uid===e){t=i;break}if(-1!==t){this._children[t].child&&this._childReadInCount--;this._children.splice(t,1);delete this._childUidLookup[e];0===this._children.length&&this.removeAllChildren();return!0}return!1}removeAllChildren(){this._childReadInCount=0;this._children=[];this._childUidLookup={};this._hasChildren=!1}getAttribute(e){return e<this.attributes.length?this.attributes.getItem(e):null}getAttributeByName(e){return this._attributeLookup[e]}removeAttribute(e){if(this.attributes){for(var t=this.attributes.length;t>0;t--){var i=t-1;if(this.attributes.getItem(i).name===e){this.attributes.splice(i,1);break}}delete this._attributeLookup[e]}}addObservableProperty(t,n){let a=this.getAttributeByName(t.name);if(a)a.value=t.value;else{a=new e.ObservableAttribute(t.name,t.value,this);let i=this.attributes;i=i||new Common.ObservableCollection;n&&n<this.attributes.length?i.splice(n,0,a):i.push(a);this._attributeLookup[t.name]=a}a.name===i.TextContentAttributeName&&this.textContentChanged.invoke();return a}addAttribute(e,t){return this.addObservableProperty(e,t)}dumpNode(e,t){var i="";if(this.isWhitespace())return"";for(var n=0;n<e;n++)i+=" ";i+=this.toString();if(t&&this._children){i+="\n";this._children.forEach(n=>{i+="uid:"+n.uid+" count="+n.childCount+" info="+(n.child?n.child.dumpNode(e+1,t):"null")});for(n=0;n<e;n++)i+=" ";i+="<\\"+this.tagLowerCase+">\n"}return i}}i.WHITESPACE_REGEXP=/^\s+$/;i.AttributesPropertyName="attributes";i.TextContentAttributeName="textContent";e.DomTreeElement=i;i.initialize()}(DomTree||(DomTree={}));!function(e){"use strict";var t=Common.TraceEvents;class i{constructor(e,t,i,n,a,s,r,o){this._inEditMode=!1;this._htmlElementSource=e;this._domExplorer=t;this._domTree=i;this._styleComputer=n;this._remoteDom=a;this._enterEditModeCallback=s;this._exitEditModeCallback=r;this._onSizeChangedCallback=o}editNewAttribute(e,t,i=!1){if(this._domExplorer.capabilities.canEditAttributes){var n=i?this.findFirstAttribute(t):null;if(!n||!n.length){var a={name:"",value:""};n=$m(this._domTree.addAttributeTemplateToItemView(this._domExplorer.capabilities,t.get(0),a))}var s=this.findNameForAttribute(n);this.editAttributeName(e,s)}}editAttributeName(e,t){if(this._domExplorer.capabilities.canEditAttributes){var i=t.next(".BPT-HTML-Value");if(i.get(0)){this.enterEditMode(e.uid);var n=i.text(),a=new Dom.ValueEditor(this._htmlElementSource,this._domExplorer,this._styleComputer),s=new Dom.ValueEditorKey("=");a.addExitKeys(s);var r=this.calculateEditWidth(t.get(0)),o=$m("<span>").text(t.text());o.attr("aria-label",Microsoft.Plugin.Resources.getString("/Common/EditAttributeNameAriaLabel"));t.text("");t.append(o);var l=o.get(0),m=this.findOwnerItem(o),d=(i,a)=>new Promise(s=>this.editAttributeNameCommit(e.uid,t,n,i,a,s)),h=this.createOnSizeChangeHandler(e,a);a.show(l,r,d,h).then(i=>this.editAttributeNameCleanup(e,i,t,m))}}}editAttributeNameCommit(e,t,i,n,a,s){a=a.toLowerCase();if((n=n.toLowerCase())&&n!==a){if(this.findAttributeNameByName(this.findOwnerItem(t),n,t.get(0)))s(!0);else{this._remoteDom.enableEditChaining();var r=i=>this.editAttributeNameCompleted(i,e,t,n,a,s);this.editAttribute(e,n,i,r)}}else s(!0)}editAttributeNameCompleted(e,t,i,n,a,s){if(e){i.text(n);i.parent(".BPT-HTML-Attribute-Section").attr("data-attrName",n);this.removeAttribute(t,a)}this._remoteDom.disableEditChaining();s(e)}editAttributeNameCleanup(e,t,i,n){var a=t.oldValue.toLowerCase(),s=t.newValue.toLowerCase(),r=!1,o=this.findPreviousAttribute(i);if(s){var l=this.findAttributeNameByName(this.findOwnerItem(i),s,i.get(0)),m=t.wasCancelled||!!l;i.text(m?a:s);if(l){var d=this.findAttribute(l),h=this.findValueForAttribute(d);this.editAttributeValue(e,h);this.cleanupTempEditSections(this.findOwnerItem(i));return}}else if(a)this.removeAttribute(e.uid,a);else{i.parent(".BPT-HTML-Attribute-Section").remove();r=!0}if(t.wasCancelled||!t.exitKey||t.exitKey.equalTo(Dom.ValueEditorKey.EnterKey))this.exitEditMode(e,this.findOwnerItem(i));else{var u,c=0;if(t.exitKey.equalTo(Dom.ValueEditorKey.ShiftTabKey)){u=r?o:this.findPreviousAttribute(i);c=2}else if(r){u=this.findFirstAttribute(n);c=1}else{u=this.findAttribute(i);c=2}u&&u.length?this.moveEditor(e,u,c,n):this.moveEditor(e,i,3,n)}}editAttributeValue(e,t){if(this._domExplorer.capabilities.canEditAttributes){var i=t.prev(".BPT-HTML-Attribute");if(i.get(0)){this.enterEditMode(e.uid);var n=i.text(),a=t.text(),s=new Dom.ValueEditor(this._htmlElementSource,this._domExplorer,this._styleComputer),r=this.calculateEditWidth(t.get(0)),o=$m("<span>").text(a);o.attr("aria-label",Microsoft.Plugin.Resources.getString("/Common/EditAttributeValueAriaLabel"));t.text("");t.append(o);var l=o.get(0),m=this.findOwnerItem(o),d=(i,a)=>new Promise(s=>this.editAttributeValueCommit(e.uid,t,n,i,a,s)),h=this.createOnSizeChangeHandler(e,s);s.show(l,r,d,h).then(i=>this.editAttributeValueCleanup(e,i,t,m))}}}isInEditMode(){return this._inEditMode}editAttributeValueCommit(e,t,i,n,a,s){if(n!==a){this._remoteDom.enableEditChaining();var r=e=>this.editAttributeValueCompleted(e,t,n,s);this.editAttribute(e,i,n,r)}else s(!0)}editAttributeValueCompleted(e,t,i,n){e&&t.text(i);this._remoteDom.disableEditChaining();n(e)}editAttributeValueCleanup(e,t,i,n){var a=t.oldValue,s=t.newValue,r=t.wasCancelled;i.text(r?a:s);if(t.wasCancelled||!t.exitKey||t.exitKey.equalTo(Dom.ValueEditorKey.EnterKey))this.exitEditMode(e,this.findOwnerItem(i));else{var o,l=1;(o=t.exitKey.equalTo(Dom.ValueEditorKey.ShiftTabKey)?this.findAttribute(i):this.findNextAttribute(i))&&o.length?this.moveEditor(e,o,l,n):this.moveEditor(e,i,3,n)}}removeAttribute(e,t,i){var n=e=>{i&&i(e)};this._remoteDom.removeAttribute(e,t).then(n)}editAttribute(e,i,n,a){F12.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_CommitEditAttribute_Start);var s=e=>{a&&a(e);F12.DomExplorer.Telemetry.analytics.logPerformance(t.Dom_CommitEditAttribute_Stop)};this._remoteDom.editAttribute(e,i,n).then(s)}calculateEditWidth(e){var t=30,i=70+t,n=4,a=this.width(e)+t,s=this.findWidthForTreeItem(e)-n,r=Math.min(a,s);return r=Math.max(r,i)}findWidthForTreeItem(e){if(!e)return 0;var t=this.closest(e,".domTreeItemDataTemplateName");return t&&this.width(t)||0}width(e){if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect().width,i=window.getComputedStyle(e,null);t-=parseInt(i.paddingLeft,10);t-=parseInt(i.paddingRight,10);t-=parseInt(i.borderLeftWidth,10);return t-=parseInt(i.borderRightWidth,10)}}closest(e,t){for(;e&&e!==document;){var i=e;if(i.msMatchesSelector&&i.msMatchesSelector(t))return i;e=e.parentNode}}findOwnerItem(e){return e.closest(".BPT-HTML-HtmlElement")}findAttributeNameByName(e,t,i){for(var n=e.find(".BPT-HTML-Attribute"),a=0,s=n.length;a<s;a++){var r=$m(n.get(a));if(r.get(0)!==i&&r.text().toLowerCase()===t)return this.findAttribute(r)}}findAttribute(e){return e.closest(".BPT-HTML-Attribute-Section")}findNameForAttribute(e){return e.find(".BPT-HTML-Attribute")}findValueForAttribute(e){return e.find(".BPT-HTML-Value")}findNextAttribute(e){return e.closest(".BPT-HTML-Attribute-Section").next(".BPT-HTML-Attribute-Section")}findPreviousAttribute(e){return e.closest(".BPT-HTML-Attribute-Section").prev(".BPT-HTML-Attribute-Section")}findFirstAttribute(e){return e.find(".BPT-HTML-Attribute-Section").first()}moveEditor(e,t,i,n){window.setTimeout(()=>{n.attr("data-id");var a=this.findAttribute(t);a.hasClass("BPT-HTML-Attribute-Section")&&3!==i?2===i?this.editAttributeValue(e,this.findValueForAttribute(a)):this.editAttributeName(e,this.findNameForAttribute(a)):this.editNewAttribute(e,n)},0)}enterEditMode(e){if(!this._inEditMode){this._inEditMode=!0;this._enterEditModeCallback&&this._enterEditModeCallback(e)}}exitEditMode(e,t){if(this._inEditMode){this._inEditMode=!1;this.cleanupTempEditSections(t);e.renderedElement=null;this._domTree.invalidateItemRowSpan(e);e.dontVirtualize=!1;this._domTree.render(!1);this._exitEditModeCallback&&this._exitEditModeCallback()}}createOnSizeChangeHandler(e,t){var i=this._htmlElementSource.querySelector("#treeContainer .BPT-listItemContainer[data-id='"+e.id+"']");F12.DomExplorer.DomExplorerWindow.findDescendentByClass(i,"domTreeItemDataTemplateName").firstElementChild;return t=>{e.dontVirtualize=!0;this._onSizeChangedCallback&&this._onSizeChangedCallback(e)}}cleanupTempEditSections(e){e.find(".BPT-HTML-Attribute-Section-New").remove()}editHTMLTag(e,t){this.enterEditMode(e.uid);let i=new Dom.ValueEditor(this._htmlElementSource,this._domExplorer,this._styleComputer),n=t.get(0),a=this.calculateEditWidth(n);const s=(t,i)=>this.editHTMLTagCommit(e,t,i);let r=this.createOnSizeChangeHandler(e,i);i.show(n,a,s,r).then(i=>this.editHTMLTagCleanup(e,i,t))}editHTMLTagCommit(e,t,i){i=i.toLowerCase();if((t=t.toLowerCase())&&t!==i){F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.QUICK_EDIT_TAG_COMMIT,Common.TriggerType.Ui);this._remoteDom.enableEditChaining();return this.addElementWithNewTag(e,i,t).then(t=>t?this.deleteElementWithOldTag(e):t)}return Promise.resolve(!0)}addElementWithNewTag(e,t,i){let n=e.uid,a=this._domExplorer.selectedItem.parentItem.uid;return this._remoteDom.getHTMLString(n,!1,null).then(e=>{e=(e=e.slice(0,e.indexOf(">")+1)).replace(t,i);return this._remoteDom.addElementWithNewTag(a,n,e)})}deleteElementWithOldTag(e){let t=e.parentItem;return this._remoteDom.deleteElement(e.uid).then(e=>{if(e){if(this._domExplorer.domTree){this._domExplorer.domTree.selectedItem=t;this._domExplorer.updateBreadcrumbs()}this._domExplorer.render()}this._remoteDom.disableEditChaining();return e})}editHTMLTagCleanup(e,t,i){let n=t.oldValue.toLowerCase(),a=t.newValue.toLowerCase();if(!n||!a||n===a){t.wasCancelled=!0;i.text(n);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.QUICK_EDIT_TAG_CANCELLED,Common.TriggerType.Ui)}(t.wasCancelled||!t.exitKey||t.exitKey.equalTo(Dom.ValueEditorKey.EnterKey))&&this.exitEditMode(e,this.findOwnerItem(i))}}e.EditElementController=i}(DomTree||(DomTree={}));!function(e){"use strict";class t extends Common.Controls.TreeListControl{constructor(t,i,n){super();this._onEditTextCallback=t;this._onEditAttributeOnEnter=i;this._showContextMenuCallback=n;this.panel=new e.DomTreeVirtualizingMultiRowStackPanel}onApplyTemplate(){super.onApplyTemplate();this.rootElement.tabIndex=1;this.rootElement.setAttribute("aria-label",Microsoft.Plugin.Resources.getString("domTreeLabel"))}currentFocusOnInput(){var e=document.activeElement;return this.isTextArea(e)||this.isInputText(e)}onShowContextMenu(){super.onShowContextMenu();this._showContextMenuCallback&&this._showContextMenuCallback()}onKeyDownOverride(e){if(this.currentFocusOnInput())return!1;var t=!1,i=!e.ctrlKey&&!e.shiftKey&&!e.altKey,n=e.ctrlKey&&!e.shiftKey&&!e.altKey,a=this.selectedItem;if(a&&e.keyCode===Common.KeyCodes.Enter)if(n&&this._onEditTextCallback){this._onEditTextCallback(a.uid,!0);t=!0}else if(i)if(5===a.node.type&&this._onEditTextCallback){this._onEditTextCallback(a.uid,!1);t=!0}else if(this._onEditAttributeOnEnter){this._onEditAttributeOnEnter(a.uid,a);t=!0}t||(t=super.onKeyDownOverride(e));t&&e.preventDefault();return t}addAttributeTemplateToItemView(e,t,i,n){var a=new Common.Templating.Template(e,{htmlElementSource:document,templateId:"newAttributeTemplate"}).createTemplateText(i),s=document.createElement("div");s.innerHTML=a;var r=s.children[0],o=F12.DomExplorer.DomExplorerWindow.findAllDescendentsByClass(t,"BPT-HTML-Attribute-Section");o.length&&o.length<n?t.insertBefore(r,o[n]):t.appendChild(r);return r}selectedItemMutated(e,t){}updateSelectionHighlight(e){if(e){if(this.dataSource){var t=this.dataSource.indexOfItem(e.id);this.panel.setSelectionHighlightIndex(t)}}else this.panel.clearSelectionHighlightIndex()}selectionChanged(e){this.updateSelectionHighlight(e)}isInputText(e){if(!e)return!1;var t=e.tagName;return"string"==typeof t&&("INPUT"===t.toUpperCase()&&e.hasAttribute("type")&&"text"===e.getAttribute("type"))}isTextArea(e){if(!e)return!1;var t=e.tagName;return"string"==typeof t&&"TEXTAREA"===t.toUpperCase()}}e.DomTreeListControl=t}(DomTree||(DomTree={}));!function(e){"use strict";const t="__BROWSERTOOLS_HIDEELEMENT";class i extends Common.Observable{constructor(e,t,n,a,s,r=0,o,l){super();this.isGettingDetails=!1;this.isBeingDragged=!1;this.isBeingEdited=!1;this.isClosingTag=!1;this.isExpanding=!1;this.isHidden=!1;this.isForceExpanded=!1;this.gutterGlyphs=[];this.glyphTooltip="";this._capabilities=e;this.node=t;this.level=n;this.parentItem=a;this.uid=s;this.children=new Array(r);this.hasChildren=r>0;this.parentNode=o;this.childIndex=l;this.uid||this.node&&(this.uid=this.node.uid);this.dontVirtualize=!1;this._id=i.IdSource++;this.isExpanded=!1;this.visibleDescendantRowCount=0;this.propertyChanged.addHandler(this.handlePropertyChanged.bind(this))}get dontKeyboardSelect(){return this.isClosingTag}set dontKeyboardSelect(e){throw new Error("Can't set dontKeyboardSelect")}get clickSelectAlternative(){return this.isClosingTag?this.parentItem:this}set clickSelectAlternative(e){throw new Error("Can't set clickSelectAlternative")}get attributes(){return this.node&&this.node.attributes?this.node.attributes:new Common.ObservableCollection}set attributes(e){throw new Error("Cannot set attributes")}get tag(){return this.node&&this.node.tag?this.node.tagLowerCase:""}set tag(e){throw new Error("Cannot set tag")}get textNodeText(){if(5===this.node.type)return this.node.textContent.trim();throw Error()}set textNodeText(e){throw new Error("Cannot set textNodeText")}get cDataText(){if(2===this.node.type)return this.node.textContent;throw Error()}set cDataText(e){throw new Error("Cannot set cDataText")}get docTypeText(){if(4===this.node.type)return this.node.getAttributeByName("textContent").value;throw Error()}set docTypeText(e){throw new Error("Cannot set docTypeText")}get commentText(){if(3===this.node.type){var e=this.node.getAttributeByName("textContent");return e?e.value:" "}throw Error()}set commentText(e){throw new Error("Cannot set commentText")}get id(){return this._id}set id(e){this._id=e}get renderedElement(){return this._renderedElement}set renderedElement(e){this._renderedElement=e}get isSelectable(){return this.node&&0!==this.node.type}set isSelectable(e){throw new Error("Cannot set isSelectable")}get hasDebugUid(){return F12.DomExplorer.DomExplorerWindow.DEBUG_UID_DISPLAY&&!!this.uid}set hasDebugUid(e){throw new Error("Cannot set hasDebugUid")}get hasImmediateClosingTag(){return!this.hasChildren&&this.canHaveClosingTag()}set hasImmediateClosingTag(e){throw new Error("Cannot set hasImmediateClosingTag")}get potentiallyHasChildren(){return!this.hasChildren&&this.canHaveClosingTag()}set potentiallyHasChildren(e){throw new Error("Cannot set potentiallyHasChildren")}get hasEllipsisClosingTag(){return this.hasChildren&&!this.isExpanded}set hasEllipsisClosingTag(e){throw new Error("Cannot set hasEllipsisClosingTag")}get visibleRowCount(){return"#root"===this.uid?this.visibleDescendantRowCount:this.isExpanded&&(this.hasChildren||this.isForceExpanded)?this.visibleDescendantRowCount+2:1}set visibleRowCount(e){throw new Error("Cannot set visibleRowCount")}static initialize(){Common.ObservableHelpers.defineProperty(i,i.AreChildrenInlinePropertyName,void 0);Common.ObservableHelpers.defineProperty(i,i.DebugUidPropertyName,"");Common.ObservableHelpers.defineProperty(i,i.HasChildrenPropertyName,!1);Common.ObservableHelpers.defineProperty(i,i.IsExpandedPropertyName,!1);Common.ObservableHelpers.defineProperty(i,i.IsForceExpandedPropertyName,!1);Common.ObservableHelpers.defineProperty(i,i.IsSelfClosingPropertyName,!1);Common.ObservableHelpers.defineProperty(i,i.LevelPropertyName,0);Common.ObservableHelpers.defineProperty(i,i.UidPropertyName,null);Common.ObservableHelpers.defineProperty(i,i.NodePropertyName,null);Common.ObservableHelpers.defineProperty(i,i.NeedsRefreshPropertyName,!1);Common.ObservableHelpers.defineProperty(i,i.TextPreviewPropertyName,void 0,e=>e.onTextPreviewChanged())}isItemAChild(e){return this.node.isNodeAChild(e.node)}updateIsHiddenProperty(){const e="class";for(let i of this.attributes.getInternalArray())i.name===e&&(this.isHidden=i.value.indexOf(t)>=0)}toggleGutterGlyph(t){const n=new e.GutterGlyph(t),a=i.findIndexOfGlyph(this.gutterGlyphs,n);-1!==a?this.gutterGlyphs.splice(a,1):this.gutterGlyphs.push(n)}ensureHasGutterGlyph(t,n=!0){const a=new e.GutterGlyph(t),s=i.findIndexOfGlyph(this.gutterGlyphs,a);-1===s&&n?this.gutterGlyphs.push(a):s>=0&&!n&&this.gutterGlyphs.splice(s,1)}static findIndexOfGlyph(e,t,i=!0){let n=-1;e.filter((e,a)=>{if(i&&e.isParent)return!1;if(i&&!e.isParent&&e.className===t.className){n=a;return!0}return!1});return n}addParentGlyphs(){let t=[],n=new Set,a=this.children.slice(0);for(let s=0;s<a.length;s++){const r=a[s];if(r)for(let a=0;a<r.gutterGlyphs.length;a++){const s=r.gutterGlyphs[a];if(-1===i.findIndexOfGlyph(this.gutterGlyphs,s,!1)&&!this.isExpanded&&!s.isParent&&!n.has(s.className)){const a=new e.GutterGlyph(s.className);a.gutterGlyphElement.classList.add(i.GUTTER_GLYPH_PARENT_CSS_CLASS);t.push(a);n.add(s.className)}}r&&r.children&&(a=a.concat(r.children))}this.gutterGlyphs=this.gutterGlyphs.concat(t)}isWhitespace(){return this.node.isWhitespace()}clearCachedContent(){this._contentCached=void 0}instantiateTemplate(e,t){return new Common.Templating.Template(this._capabilities,{htmlElementSource:document,templateId:e}).createTemplateText(t)}getItemContainerElement(){var e=this.getElement();return e&&e.length>0?$m(F12.DomExplorer.DomExplorerWindow.findAncestorByClass(e.get(0),"BPT-listItemContainer")):e}getElement(){var e=$m("#treeContainer").find(".BPT-listItemContainer[data-id='"+this.id+"'] .BPT-HTML");switch(this.node.type){case 1:return e.find(".BPT-HTML-HtmlElement");case 5:return e.find(".BPT-HTML-Text");case 2:return e.find(".BPT-HTML-CData");case 3:return e.find(".BPT-HTML-Comment");case 4:return e.find(".BPT-HTML-DocType")}throw new Error("getting element for element type = "+this.node.type)}getNextSibling(){var e;this.parentItem&&(e=this.parentItem.children[this.childIndex+1]);return e}getPreviousSibling(){var e;this.parentItem&&(e=this.parentItem.children[this.childIndex-1]);return e}isDraggable(){if(!this.node)return!1;var e=this.node.type;return 1===e?!i.NO_DRAG_TAG[this.tag]:5===e||3===e}handlePropertyChanged(e){switch(e){case"uid":this.debugUid=this.hasDebugUid?this.uid:"";break;case"node":this.node&&this.node.textContentChanged.addHandler(()=>{this.propertyChanged.invoke(i.TextNodeTextPropertyName)})}}canHaveClosingTag(){return!i.VOID_TAG[this.tag]}onTextPreviewChanged(){if(this.textPreview){if("…"!==this.textPreview.charAt(this.textPreview.length-1)){this.areChildrenInline=!0;return}}this.areChildrenInline=void 0}}i.IdSource=0;i.NO_DRAG_TAG={html:!0,head:!0,body:!0,script:!0};i.VOID_TAG={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};i.AreChildrenInlinePropertyName="areChildrenInline";i.DebugUidPropertyName="debugUid";i.ID="BPT-TreeDataItemId-";i.MinSizingParentWidth=400;i.HasChildrenPropertyName="hasChildren";i.IsExpandedPropertyName="isExpanded";i.IsForceExpandedPropertyName="isForceExpanded";i.IsSelfClosingPropertyName="isSelfClosing";i.LevelPropertyName="level";i.NeedsRefreshPropertyName="needsRefresh";i.NodePropertyName="node";i.TextNodeTextPropertyName="textNodeText";i.TextPreviewPropertyName="textPreview";i.UidPropertyName="uid";i.GUTTER_GLYPH_PARENT_CSS_CLASS="BPT-gutterGlyphParent";i.PSEUDO_STATE_GLYPHS={"BPT-pseudoStateActive":!0,"BPT-pseudoStateHover":!0,"BPT-pseudoStateFocus":!0,"BPT-pseudoStateVisited":!0};e.TreeDataItem=i;i.initialize()}(DomTree||(DomTree={}));!function(e){"use strict";var t=F12.Tools.Utility.Assert;class i{static ReparentActionToString(e){switch(e){case 1:return"before sibling";case 2:return"after sibling";case 3:return"first child";case 4:return"last child";default:return}}static isExpandableAndExpanded(e){return e.isForceExpanded||e.isExpanded&&e.hasChildren}static isStandaloneClosingTag(e){return!!e.querySelector("DIV.domTreeItemDataTemplate > DIV.domTreeItemDataTemplateNameCell > DIV.domTreeItemDataTemplateName > DIV > DIV > DIV.BPT-HTML-ClosingTag")}static nearby(e,t,i){return!(t+i<e||t-i>e)}}i.AUTOSCROLL_PIXELS_PER_SECOND=30;i.AUTOSCROLL_ACCELERATION=5;i.AUTOEXPAND_DISCLOSURE_TRIANGLE_MILLISECOND_DELAY=500;i.AUTOEXPAND_NONEXPANDABLE_MILLISECOND_DELAY=1e3;i.AUTOEXPAND_PIXEL_DRIFT=2;e.Static=i;class n extends Common.Controls.ItemContainerGenerator{constructor(){super();this.hoverStateChangeEvent=new Common.EventSource;this.newItemContainerEvent=new Common.EventSource}newItemContainer(){var e=new Common.Controls.ItemContainer;e.selectedTabIndex=1;e.hoverStateChangeEvent.addHandler(e=>{this.hoverStateChangeEvent.invoke(e)});this.newItemContainerEvent.invoke(e);return e}}e.NotifyingItemContainerGenerator=n;class a{constructor(e,i,n,a){this._autoscrollLastTimeStamp=0;e||t.failDebugOnly("DragDropController must have a domExplorer window");i||t.failDebugOnly("DragDropController must have a dataSource");n||t.failDebugOnly("DragDropController must have a root");a||t.failDebugOnly("DragDropController must have a generator");this._domExplorer=e;this._dataSource=i;this._root=n;this._generator=a;this._shimDragStart=(e=>this.handleDragStart(e));this._shimDragEnter=(e=>this.handleDragEnter(e));this._shimDragOver=(e=>this.handleDragOver(e));this._shimDragLeave=(e=>this.handleDragLeave(e));this._shimDragEnd=(e=>this.handleDragEnd(e));this._shimDrag=(e=>this.handleDrag(e));this._shimDrop=(e=>this.handleDrop(e));this._newItemContainerRegistration=this._generator.newItemContainerEvent.addHandler(e=>this.attachHandlers(e.rootElement))}attachHandlers(e){if(e){e.addEventListener("dragstart",this._shimDragStart,!1);e.addEventListener("dragenter",this._shimDragEnter,!1);e.addEventListener("dragover",this._shimDragOver,!1);e.addEventListener("dragleave",this._shimDragLeave,!1);e.addEventListener("dragend",this._shimDragEnd,!1);e.addEventListener("drag",this._shimDrag,!1);e.addEventListener("drop",this._shimDrop,!1)}}detachHandlers(e){if(e){e.removeEventListener("dragstart",this._shimDragStart,!1);e.removeEventListener("dragenter",this._shimDragEnter,!1);e.removeEventListener("dragover",this._shimDragOver,!1);e.removeEventListener("dragleave",this._shimDragLeave,!1);e.removeEventListener("dragend",this._shimDragEnd,!1);e.removeEventListener("drag",this._shimDrag,!1);e.removeEventListener("drop",this._shimDrop,!1)}}attachAllHandlers(){var e=this._root.querySelectorAll("DIV.BPT-listItemContainer");if(e)for(var t=0,i=e.length;t<i;t++){var n=e[t];this.attachHandlers(n)}}detachAllHandlers(){var e=this._root.querySelectorAll("DIV.BPT-listItemContainer");if(e)for(var t=0,i=e.length;t<i;t++){var n=e[t];this.detachHandlers(n)}}getDataId(e){var t=e.querySelector("DIV.BPT-HTML [data-id]");if(t)return t.getAttribute("data-id")}handleDragStart(e){var t=e.currentTarget;if("TEXTAREA"!==e.srcElement.tagName&&"INPUT"!==e.srcElement.tagName){this._dragDataId=this.getDataId(t);if(this._dragDataId){if(this._dataSource.getIndexChain(this._dragDataId)){this.beginDrag(t,this._dragDataId);e.stopPropagation();e.dataTransfer.setData("Text","");e.dataTransfer.effectAllowed="move";this._autoscrollLastTimeStamp=e.timeStamp}}}else e.preventDefault()}handleDragEnter(e){var t=e.currentTarget,n=this.calculateReparentAction(t);if(i.ReparentActionToString(n)){var a=1===n||4===n;this.removeAllHighlightHover();this.addHighlightHover(t,a);e.dataTransfer.dropEffect="move"}e.preventDefault();e.stopPropagation();return!1}handleDragOver(e){e.dataTransfer.dropEffect="move";this.autoExpand(e);e.preventDefault();e.stopPropagation();return!1}handleDragLeave(e){var t=e.currentTarget;this.removeHighlightHover(t);var i=this.getDataId(t);if(i){var n=this._dataSource.getItemByUid(i);n&&this._dataSource.domTree.removeForceExpand(n)&&this._domExplorer.domTree.invalidateItemRowSpan(n)}e.preventDefault();e.stopPropagation()}handleDragEnd(e){this.finishDrag();this.removeAllHighlightHover();this._dragDataId=void 0;this._autoscrollLastTimeStamp=0;e.preventDefault();e.stopPropagation()}handleDrag(e){var t=this._root.querySelector("DIV.BPT-stackPanel");if(!t)return!1;var n=e.timeStamp-this._autoscrollLastTimeStamp;this._autoscrollLastTimeStamp=e.timeStamp;var a=this.calcAbove(e,t),s=this.calcBelow(e,t),r=i.AUTOSCROLL_PIXELS_PER_SECOND,o=10;if(a){a>o&&(r+=(a-o)*i.AUTOSCROLL_ACCELERATION);r=Math.ceil(r*n/1e3);(r=Math.min(r,t.scrollTop))&&(t.scrollTop-=r)}else if(s){s>o&&(r+=(s-o)*i.AUTOSCROLL_ACCELERATION);r=Math.ceil(r*n/1e3);(r=Math.min(r,t.scrollHeight-t.scrollTop-t.offsetHeight))&&(t.scrollTop+=r)}return!1}calcAbove(e,t){if(!e||!t)return NaN;var i=t.offsetTop-e.clientY;i<0&&(i=0);return i}calcBelow(e,t){if(!e||!t)return NaN;var i=e.clientY-(t.offsetHeight+t.offsetTop);i<0&&(i=0);return i}handleDrop(e){var t=e.currentTarget;this.removeHighlightHover(t);e.stopPropagation();var n=this.calculateReparentAction(t),a=i.ReparentActionToString(n);if(a){var s=this.getDataId(t);this._dataSource.reparent(this._dragDataId,s,a);var r=this._dataSource.getItemByUid(s);r&&this._dataSource.domTree.removeForceExpand(r)}return!1}calculateReparentAction(e){var t=this.getDataId(e);if(!t)return 0;var n=this._dataSource.getIndexChain(this._dragDataId);if(!n)return 0;var a=this._dataSource.getItemByUid(t),s=this._dataSource.getIndexChain(t);if(!s)return 0;var r=i.isExpandableAndExpanded(a),o=i.isStandaloneClosingTag(e);return this.compareIndexChain(n,s,r,o)}compareIndexChain(e,t,i,n){var a;if(!e||!t)return 0;for(;e.length&&t.length&&e[0].index===t[0].index;){e.shift();t.shift()}if(0===e.length)return 5;for(a=0;a<e.length;++a)if(e[a].isDocumentBreak)return 5;for(a=0;a<t.length;++a)if(t[a].isDocumentBreak)return 5;return 0===t.length?n?2:1:t[0].index<e[0].index?n?4:1:i?3:2}addHighlightHover(e,t){e&&(t?e.classList.add("drag-hover-before"):e.classList.add("drag-hover"))}removeHighlightHover(e){if(e&&e.classList){e.classList.remove("drag-hover");e.classList.remove("drag-hover-before")}}removeAllHighlightHover(){var e=this._root.querySelectorAll("DIV.drag-hover");if(e&&e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];this.removeHighlightHover(n)}if((e=this._root.querySelectorAll("DIV.drag-hover-before"))&&e.length)for(t=0,i=e.length;t<i;t++){n=e[t];this.removeHighlightHover(n)}}beginDrag(e,t){if(!e)throw new Error("DragDropController.beginDrag must have an element");this._dragListItemContainer=e;this._dragListItemContainer.classList.add("drag-item");this._root.classList.add("drag-and-drop");this._dataSource.setDragUid(t)}finishDrag(){var e=this._root.querySelectorAll("DIV.drag-item");if(e&&e.length)for(var t=0,i=e.length;t<i;t++)e[t].classList.remove("drag-item");this._root.classList.remove("drag-and-drop");this._dragListItemContainer=void 0;this._dataSource.setDragUid(void 0)}autoExpand(e){var t=e.target;t&&t.classList.contains("BPT-listItemContainer")&&this.isWithinRoot(t)&&(this.autoExpandUpdate(e,t)||this.autoExpandIcon(e,t)||this.autoExpandNonExpandable(e,t))}autoExpandUpdate(e,t){if(!this._lastExpandIcon||this._lastExpandIcon.element!==t){this.autoExpandReset(e,t);return!0}var n=i.nearby,a=e.clientX,s=e.clientY,r=this._lastExpandIcon.clientX,o=this._lastExpandIcon.clientY,l=i.AUTOEXPAND_PIXEL_DRIFT;if(!n(a,r,l)||!n(s,o,l)){this.autoExpandReset(e,t);return!0}return!1}autoExpandReset(e,t){this._lastExpandIcon={element:t,timeStamp:e.timeStamp,clientX:e.clientX,clientY:e.clientY}}autoExpandIcon(e,t){if(e.timeStamp-this._lastExpandIcon.timeStamp<i.AUTOEXPAND_DISCLOSURE_TRIANGLE_MILLISECOND_DELAY)return!1;if(!t.querySelector("DIV."+Common.Controls.TreeItemDataTemplate.COLLAPSED_CSS_CLASS))return!1;var n=this.getDataId(t);if(!n)return!1;this._lastExpandIcon=void 0;this.removeAllHighlightHover();this._dataSource.expandUid(n);setTimeout(()=>{this._domExplorer.render()},1e3/60);return!0}autoExpandNonExpandable(e,t){if(e.timeStamp-this._lastExpandIcon.timeStamp<i.AUTOEXPAND_NONEXPANDABLE_MILLISECOND_DELAY)return!1;var n=this.getDataId(t);if(!n)return!1;if(!this._dataSource.potentiallyHasChildren(n))return!1;this.removeAllHighlightHover();this._dataSource.expandUid(n,!0).then(()=>{this._domExplorer.render();this.addHighlightHover(t,!1)});return!0}isWithinRoot(e){for(;e;){if(e===this._root)return!0;e=e.parentNode}return!1}}e.DragDropController=a}(DomTree||(DomTree={}));!function(e){"use strict";let t,i,n,a,s;!function(e){e[e.MenuTreeCut=0]="MenuTreeCut";e[e.MenuTreeCopy=1]="MenuTreeCopy";e[e.MenuTreePaste=2]="MenuTreePaste"}(t||(t={}));class r{constructor(e){this._textArea=e;this._menuId="TextControlContextMenu"+r.MenuUid++;this._menuItems=[{id:"menuTextControlCut",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/CutMenuText"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyCtrlX")},{id:"menuTextControlCopy",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/CopyMenuText"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyCtrlC")},{id:"menuTextControlPaste",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/PasteMenuText"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyCtrlV")}];this.initialize()}initialize(){this._contextMenuListener=(e=>this.onContextMenu(e));this._keydownListener=(e=>this.onKeydown(e));this._textArea.addEventListener("contextmenu",this._contextMenuListener);this._textArea.addEventListener("keydown",this._keydownListener)}uninitialize(){this._textArea.removeEventListener("contextmenu",this._contextMenuListener);this._textArea.removeEventListener("keydown",this._keydownListener)}onKeydown(e){let t=e.shiftKey&&!e.ctrlKey&&!e.altKey;if(e.keyCode===Common.KeyCodes.F10&&t){this._textArea=e.target;let t=this._textArea.getBoundingClientRect();this.showContextMenu(this._textArea,t.left,t.top);e.preventDefault();e.stopImmediatePropagation()}return!0}onContextMenu(e){this.showContextMenu(e.target,e.clientX,e.clientY);e.preventDefault();e.stopImmediatePropagation();return!1}onMenuItemClicked(e,i){if(e===this._menuId){switch(i){case this._menuItems[t.MenuTreeCut].id:this.onCut();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.CUT_TEXT,Common.TriggerType.ContextMenu);break;case this._menuItems[t.MenuTreeCopy].id:this.onCopy();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COPY_TEXT,Common.TriggerType.ContextMenu);break;case this._menuItems[t.MenuTreePaste].id:this.onPaste();F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PASTE_TEXT,Common.TriggerType.ContextMenu)}this.dismiss()}}onCopy(){let e=Common.ToolWindowHelpers.getSelection(this._textArea);const t=this._textArea.value.substring(e.start,e.end)||"";Common.ClipboardHelper.copyPlainText(t)}onCut(){this.onCopy();this.pasteInsert("")}async onPaste(){const e=await Common.ClipboardHelper.getPasteTextAsync();this.pasteInsert(e)}pasteInsert(e){let t=Common.ToolWindowHelpers.getSelection(this._textArea),i=document.queryCommandSupported("ms-beginundounit");i&&document.execCommand("ms-beginundounit");this._textArea.value=Common.ToolWindowHelpers.replaceTextInRange(this._textArea.value,t.start,t.end,e);let n=t.start+e.length;setImmediate(()=>this._textArea.setSelectionRange(n,n));i&&document.execCommand("ms-endundounit")}showContextMenu(e,i,n){this.dismiss();if(i<=0||n<=0){let t=e.getBoundingClientRect();i=t.left;n=t.top}if(!e||"TEXTAREA"!==e.tagName&&("INPUT"!==e.tagName||!e.hasAttribute("type")||"text"!==e.getAttribute("type")))return!0;let a=Common.ToolWindowHelpers.getSelection(this._textArea),s=e.value.substring(a.start,a.end);this._canCut=""!==s;this._canCopy=""!==s;this._canPaste=!0;if(!this._contextMenu){this._menuItems[t.MenuTreeCut].disabled=(()=>!this._canCut);this._menuItems[t.MenuTreeCopy].disabled=(()=>!this._canCopy);this._menuItems[t.MenuTreePaste].disabled=(()=>!this._canPaste);this._contextMenu=Microsoft.Plugin.ContextMenu.create(this._menuItems,this._menuId,null,null,(e,t)=>this.onMenuItemClicked(e,t.id));this._dismissHandler=(e=>{this.dismiss()})}e&&this._contextMenu.attach(e);this._contextMenu.show(parseInt(i.toFixed(0)),parseInt(n.toFixed(0)));this._contextMenu.addEventListener("dismiss",this._dismissHandler);Common.ToolWindowHelpers.contextMenuUp(!0);return!1}dismiss(){if(this._contextMenu){this._contextMenu.removeEventListener("dismiss",this._dismissHandler);this._contextMenu.dismiss();this._contextMenu.dispose();this._contextMenu=null}Common.ToolWindowHelpers.contextMenuUp(!1)}}r.MenuUid=0;e.TextControlMenuController=r;!function(e){e[e.MenuTreeDelete=0]="MenuTreeDelete";e[e.MenuTreeEditAsHtml=2]="MenuTreeEditAsHtml";e[e.MenuTreeCut=3]="MenuTreeCut";e[e.MenuTreeCopy=4]="MenuTreeCopy";e[e.PasteMenuItems=5]="PasteMenuItems";e[e.MenuTreeCopyElementWithStyles=6]="MenuTreeCopyElementWithStyles";e[e.PseudoStatesMenuItems=8]="PseudoStatesMenuItems";e[e.BreakOnMenuItems=10]="BreakOnMenuItems";e[e.MenuTreeAddAttribute=12]="MenuTreeAddAttribute";e[e.MenuTreeScrollIntoView=14]="MenuTreeScrollIntoView";e[e.MenuTreeOpenInNewTab=16]="MenuTreeOpenInNewTab"}(i||(i={}));!function(e){e[e.MenuTreeActive=0]="MenuTreeActive";e[e.MenuTreeFocus=1]="MenuTreeFocus";e[e.MenuTreeHover=2]="MenuTreeHover";e[e.MenuTreeVisited=3]="MenuTreeVisited"}(n||(n={}));!function(e){e[e.MenuTreeToggleDomMbpNodeRemoved=0]="MenuTreeToggleDomMbpNodeRemoved";e[e.MenuTreeToggleDomMbpSubtreeModified=1]="MenuTreeToggleDomMbpSubtreeModified";e[e.MenuTreeToggleDomMbpAttrModified=2]="MenuTreeToggleDomMbpAttrModified"}(a||(a={}));!function(e){e[e.MenuTreePasteAsChild=0]="MenuTreePasteAsChild";e[e.MenuTreePasteBefore=1]="MenuTreePasteBefore"}(s||(s={}));class o{constructor(e,t,i){this._domExplorer=e;this._remoteDom=t;this._htmlID=i;this._menuId="DomExplorerMenuTreeView";this._pseudoStatesMenuItems=[{id:"menuTreeActive",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:":active"},{id:"menuTreeFocus",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:":focus"},{id:"menuTreeHover",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:":hover"},{id:"menuTreeVisited",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:":visited"}];this._breakOnSubMenuItems=[{id:"menuTreeToggleDomMbpNodeRemoved",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:Microsoft.Plugin.Resources.getString("menuTextBreakOnNodeRemoved")},{id:"menuTreeToggleDomMbpSubtreeModified",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:Microsoft.Plugin.Resources.getString("menuTextBreakOnSubtreeModified")},{id:"menuTreeToggleDomMbpAttrModified",type:Microsoft.Plugin.ContextMenu.MenuItemType.checkbox,label:Microsoft.Plugin.Resources.getString("menuTextBreakOnAttrModified")}];this._pasteSubMenuItems=[{id:"menuTreePasteAsChild",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/PasteAsChildMenuText"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyCtrlV")},{id:"menuTreePasteBefore",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/PasteBeforeMenuText")}];this._menuItems=[{id:"menuTreeDelete",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/DeleteElement"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyDel")},{id:"separator",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"menuTreeEditAsHtml",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/EditAsHtmlMenuText")},{id:"menuTreeCut",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/CutMenuText"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyCtrlX")},{id:"menuTreeCopy",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/CopyMenuText"),accessKey:Microsoft.Plugin.Resources.getString("AccessKeyCtrlC")},{id:"pasteMenuItems",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/PasteMenuText"),submenu:this._pasteSubMenuItems},{id:"menuTreeCopyElementWithStyles",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/CopyElementWithStylesMenuText")},{id:"separator2",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"pseudoStatesMenuItems",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/StylesTabButtonText"),submenu:this._pseudoStatesMenuItems},{id:"separator3",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"breakOnMenuItems",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/DomMutationBreakpointsTabButtonText"),submenu:this._breakOnSubMenuItems},{id:"separator4",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"menuTreeAddAttribute",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/AddAttributeMenuText")},{id:"separator5",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"menuTreeScrollIntoView",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/ScrollIntoViewMenuText")}];this._menuItemsForLink=[{id:"separator",type:Microsoft.Plugin.ContextMenu.MenuItemType.separator},{id:"menuTreeOpenInNewTab",type:Microsoft.Plugin.ContextMenu.MenuItemType.command,label:Microsoft.Plugin.Resources.getString("/Common/OpenInNewTabMenuText")}];this.initialize()}initialize(){this._contextMenuListener=document.getElementById(this._htmlID);this._dmbpManager=this._domExplorer.dmbpManager;this._contextMenuListener.addEventListener("contextmenu",e=>this.onContextMenu(e))}get _domTreeDataSource(){return this._domExplorer.domTreeDataSource}onCopy(){const e=this._copyText;Common.ClipboardHelper.copyPlainText(e)}onContextMenu(e){this._domExplorer.onDomExplorerBeforeMenuLoaded();if($m(e.target).hasClass("BPT-HtmlTree-ChildCollection-ShowAll"))return;let t=this._domExplorer.getContextMenuTarget(e);this._selectedItem=t.target;if(this._selectedItem){this.showContextMenu(this._selectedItem,t.x,t.y);e.preventDefault();e.stopPropagation()}this._domExplorer.onDomExplorerMenuLoaded();return!1}hasDMBP(e,t){return this._dmbpManager.isBreakpointSet(e.uid,t)}toggleDMBP(e,t){return this._dmbpManager.toggleBreakpointForElement(e.uid,t)}onMenuItemClicked(e,t,r){if(e===this._menuId){let e=r.uid,n=e=>{this._domExplorer.focusToTree()};switch(t){case this._menuItems[i.MenuTreeAddAttribute].id:this._domExplorer&&this._domExplorer.editNewAttribute(r);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.ADD_ATTRIBUTE,Common.TriggerType.ContextMenu);break;case this._menuItems[i.MenuTreeDelete].id:this._domExplorer.deleteElement(e,r).then(e=>{n(e)});F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.DELETE_ELEMENT,Common.TriggerType.ContextMenu);break;case this._menuItems[i.MenuTreeCut].id:this._domExplorer.cut(r);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.CUT_ELEMENT,Common.TriggerType.ContextMenu);break;case this._menuItems[i.MenuTreeCopy].id:Common.ToolWindowHelpers.hasSelectedText()&&F12.Tools.Utility.Assert.failDebugOnly("There is selected text in the dom tree");this._domExplorer.copy(r);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COPY_TO_CLIPBOARD,Common.TriggerType.ContextMenu);break;case this._menuItems[i.MenuTreeEditAsHtml].id:if(this._domExplorer){this._domExplorer.setupEditText(e,!0);this._domExplorer.focusToTree()}F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.EDIT_AS_HTML,Common.TriggerType.ContextMenu);break;case this._menuItems[i.MenuTreeCopyElementWithStyles].id:this.copySelectedElementWithStyles(e);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.COPY_ELEMENT_WITH_STYLES,Common.TriggerType.ContextMenu);break;case this._menuItems[i.PseudoStatesMenuItems].id:case this._menuItems[i.BreakOnMenuItems].id:break;case this._menuItems[i.MenuTreeScrollIntoView].id:this._domExplorer.scrollElementIntoView(e);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.SCROLL_INTO_VIEW,Common.TriggerType.ContextMenu);break;case this._menuItems[i.MenuTreeOpenInNewTab].id:this._domExplorer.openLinkInNewTab(this._linkToOpen);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.OPEN_IN_NEW_TAB,Common.TriggerType.ContextMenu);break;default:this._domExplorer.focusToTree()}this.dismiss()}else if(this.subMenuItemClicked(e)){switch(t){case this._pasteSubMenuItems[s.MenuTreePasteAsChild].id:this._domExplorer.paste(r,null);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PASTE_AS_CHILD,Common.TriggerType.ContextMenu);break;case this._pasteSubMenuItems[s.MenuTreePasteBefore].id:this._domExplorer.paste(this._parentOfSelected,r);F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PASTE_BEFORE,Common.TriggerType.ContextMenu);this._domExplorer.focusToTree();break;case this._pseudoStatesMenuItems[n.MenuTreeActive].id:this._remoteDom.setPseudoStyling(this._selectedItem.uid,"active",!this._isPseudoStateActiveOn).then(()=>{this._domExplorer.refreshCSSView();this._selectedItem.toggleGutterGlyph("BPT-pseudoStateActive");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer()});F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PSEUDO_STATE_ACTIVE,Common.TriggerType.ContextMenu);break;case this._pseudoStatesMenuItems[n.MenuTreeFocus].id:this._remoteDom.setPseudoStyling(this._selectedItem.uid,"focus",!this._isPseudoStateFocusOn).then(()=>{this._domExplorer.refreshCSSView();this._selectedItem.toggleGutterGlyph("BPT-pseudoStateFocus");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer()});F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PSEUDO_STATE_FOCUS,Common.TriggerType.ContextMenu);break;case this._pseudoStatesMenuItems[n.MenuTreeHover].id:this._remoteDom.setPseudoStyling(this._selectedItem.uid,"hover",!this._isPseudoStateHoverOn).then(()=>{this._domExplorer.refreshCSSView();this._selectedItem.toggleGutterGlyph("BPT-pseudoStateHover");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer()});F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PSEUDO_STATE_HOVER,Common.TriggerType.ContextMenu);break;case this._pseudoStatesMenuItems[n.MenuTreeVisited].id:this._remoteDom.setPseudoStyling(this._selectedItem.uid,"visited",!this._isPseudoStateVisitedOn).then(()=>{this._domExplorer.refreshCSSView();this._selectedItem.toggleGutterGlyph("BPT-pseudoStateVisited");this._domExplorer.getSelectedTreeItemDataTemplate().updateGutterGlyphContainer()});F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.PSEUDO_STATE_VISITED,Common.TriggerType.ContextMenu);break;case this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpSubtreeModified].id:this._domExplorer.activateTab("dmbp");this.toggleDMBP(r,"subtree-modified");F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_DMBP_SUBTREE_MODIFIED,Common.TriggerType.ContextMenu);break;case this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpAttrModified].id:this._domExplorer.activateTab("dmbp");this.toggleDMBP(r,"attribute-modified");F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_DMBP_ATTR_MODIFIED,Common.TriggerType.ContextMenu);break;case this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpNodeRemoved].id:this._domExplorer.activateTab("dmbp");this.toggleDMBP(r,"node-removed");F12.DomExplorer.Telemetry.analytics.logExecuteCommand(F12.DomExplorer.Telemetry.CommandName.TOGGLE_DMBP_NODE_REMOVED,Common.TriggerType.ContextMenu);break;default:this._domExplorer.focusToTree()}this.dismiss()}else this._domExplorer.focusToTree()}subMenuItemClicked(e){return"plugin-contextsubmenu"===e.substr(0,21)}dismiss(){if(this._contextMenu){this._contextMenu.removeEventListener("dismiss",this._dismissHandler);this._contextMenu.dismiss();this._contextMenu.dispose();this._contextMenu=null}Common.ToolWindowHelpers.contextMenuUp(!1)}copySelectedElementWithStyles(e){this._remoteDom.copyElementWithStyle(e).then(e=>{if(e){this._copyText=e;Common.ClipboardHelper.copyPlainText(e)}})}showContextMenu(e,t,r){this.dismiss();this._selectedItem=e;let o,l,m,d=null!=this._selectedItem;if(!d)return;o=this._selectedItem.node.type;l=this._selectedItem.tag;m=this._selectedItem.attributes.getInternalArray()||[];this._isTextNode=5===o;let h=3===o,u=4===o,c="script"===l,p="style"===l,g="body"===l||d&&this._selectedItem.node.isParentTagName("body"),y="a"===l,C="iframe"===l;this._parentOfSelected=d?this._selectedItem.parentItem:null;let E=null!=this._parentOfSelected&&this._domExplorer.domTreeDataSource&&this._domExplorer.domTreeDataSource.isUnderEditableItem(this._selectedItem),T=this._domExplorer.capabilities.canPasteElements,b=!1,_=!1;for(let e of m)if(!_||!b){if("src"===e.name){b=!0;this._linkToOpen=e.value}if("href"===e.name){_=!0;this._linkToOpen=e.value}}let f=this._domExplorer.capabilities;this._canAddAttribute=f.canEditAttributes&&d&&E&&!this._isTextNode&&!h&&!u&&!c&&!p;this._canDelete=f.canDeleteNodes&&this._domExplorer.canDeleteItem(this._selectedItem)&&d;this._canHide=this._canDelete;this._canEditAsHtml=this._canDelete;this._canCut=this._canDelete;this._canCopy=Common.ToolWindowHelpers.hasSelectedText()||d;this._canCopyWithStyles=this._domExplorer.capabilities.canCopyElementsWithStyle&&d&&!this._isTextNode&&!h&&g;this._canPaste=T&&d&&E&&this._domExplorer.canPasteAsChild(this._selectedItem);this._canPasteBefore=T&&d&&E&&(this._isTextNode||this._domExplorer.isEditableElement(l))&&!u;this._isPseudoStateActiveEnable=d;this._isPseudoStateFocusEnable=d;this._isPseudoStateHoverEnable=d;this._isPseudoStateVisitedEnable=d&&E&&y;this._canScrollIntoView=d;this._canOpenInNewTab=d&&(c&&b||y&&_||C&&b);let S=this._menuItems.indexOf(this._menuItemsForLink[1])>-1;if(this._canOpenInNewTab&&!S)this._menuItems=this._menuItems.concat(this._menuItemsForLink);else if(!this._canOpenInNewTab&&S){let e=this._menuItems.indexOf(this._menuItemsForLink[1]);this._menuItems.splice(e-1,2)}if(!this._contextMenu){this._menuItems[i.MenuTreeAddAttribute].disabled=(()=>!this._canAddAttribute);this._menuItems[i.MenuTreeDelete].disabled=(()=>!this._canDelete);this._menuItems[i.MenuTreeEditAsHtml].disabled=(()=>!this._canEditAsHtml);this._menuItems[i.MenuTreeCut].disabled=(()=>!this._canCut);this._menuItems[i.MenuTreeCopy].disabled=(()=>!this._canCopy);this._menuItems[i.PasteMenuItems].disabled=(()=>!this._canPasteBefore&&!this._canPaste);this._menuItems[i.MenuTreeCopyElementWithStyles].disabled=(()=>!this._canCopyWithStyles);this._menuItems[i.PseudoStatesMenuItems].disabled=(()=>!(this._isPseudoStateActiveEnable||this._isPseudoStateFocusEnable||this._isPseudoStateHoverEnable||this._isPseudoStateVisitedEnable));this._menuItems[i.MenuTreeScrollIntoView].disabled=(()=>!this._canScrollIntoView);this._pasteSubMenuItems[s.MenuTreePasteAsChild].disabled=(()=>!this._canPaste);this._pasteSubMenuItems[s.MenuTreePasteBefore].disabled=(()=>!this._canPasteBefore);this._pseudoStatesMenuItems[n.MenuTreeActive].disabled=(()=>!this._isPseudoStateActiveEnable);this._pseudoStatesMenuItems[n.MenuTreeFocus].disabled=(()=>!this._isPseudoStateFocusEnable);this._pseudoStatesMenuItems[n.MenuTreeHover].disabled=(()=>!this._isPseudoStateHoverEnable);this._pseudoStatesMenuItems[n.MenuTreeVisited].disabled=(()=>!this._isPseudoStateVisitedEnable);this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpSubtreeModified].checked=(()=>this.hasDMBP(e,"subtree-modified"));this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpAttrModified].checked=(()=>this.hasDMBP(e,"attribute-modified"));this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpNodeRemoved].checked=(()=>this.hasDMBP(e,"node-removed"));this._breakOnSubMenuItems[a.MenuTreeToggleDomMbpNodeRemoved].disabled=(()=>"html"===e.node.tag.toLowerCase());this._remoteDom.getPseudoStyling(this._selectedItem.uid).then(e=>{this._isPseudoStateActiveOn=e.active;this._pseudoStatesMenuItems[n.MenuTreeActive].checked=(()=>this._isPseudoStateActiveOn);this._isPseudoStateFocusOn=e.focus;this._pseudoStatesMenuItems[n.MenuTreeFocus].checked=(()=>this._isPseudoStateFocusOn);this._isPseudoStateHoverOn=e.hover;this._pseudoStatesMenuItems[n.MenuTreeHover].checked=(()=>this._isPseudoStateHoverOn);this._isPseudoStateVisitedOn=e.visited;this._pseudoStatesMenuItems[n.MenuTreeVisited].checked=(()=>this._isPseudoStateVisitedOn);this._contextMenu=Microsoft.Plugin.ContextMenu.create(this._menuItems,this._menuId,null,null,(e,t)=>{this._selectedItem&&this._domExplorer.selectedItem&&this._selectedItem.uid===this._domExplorer.selectedItem.uid&&this.onMenuItemClicked(e,t.id,this._domExplorer.selectedItem)});this._dismissHandler=(e=>{this.dismiss()});if(d){this._domExplorer.domTree.scrollToItem(this._selectedItem);this._contextMenu.attach(this._selectedItem.getElement().get(0))}this._contextMenu.show(parseInt(t.toFixed(0)),parseInt(r.toFixed(0)));Common.ToolWindowHelpers.contextMenuUp(!0);this._contextMenu.addEventListener("dismiss",this._dismissHandler)})}}}e.DomTreeContextMenuController=o}(Dom||(Dom={}));!function(e){!function(e){!function(e){"use strict";e.analytics=new Common.DoNothingAnalyticsProxy;class t{}t.DMBP_SET="DmbpSet";t.LOAD_DOCUMENT="LoadDocument";t.LOAD_STYLES_TAB="LoadStylesTab";t.GROUP_BY_SELECTION_CHANGED="GroupBySelectionChanged";e.EventName=t;class i{}i.ADD_ATTRIBUTE="AddAttribute";i.ADD_PROPERTY="AddProperty";i.ADD_RULE="AddRule";i.ATTACH_COLOR_PICKER="AttachColorPicker";i.CHANGE_VALUE_EDITOR_NUMERIC_VALUE="ChangeValueEditorNumericValue";i.COLLAPSE_ALL_EVENTS="CollapseAllEvents";i.COPY_ELEMENT_WITH_STYLES="CopyElementWithStyles";i.COPY_PROPERTY="CopyProperty";i.COPY_RULE="CopyRule";i.COPY_STYLES_VIEW_SELECTION_TO_CLIPBOARD="CopyStylesViewSelectionToClipboard";i.COPY_TEXT="CopyText";i.COPY_TO_CLIPBOARD="CopyToClipboard";i.CUT_ELEMENT="CutElement";i.CUT_TEXT="CutText";i.DELETE_ELEMENT="DeleteElement";i.DELETE_ITEM="DeleteItem";i.DISPLAY_ANCESTOR_EVENT_LISTENER="DisplayAncestorEventListener";i.DMBP_MANUAL_REBIND_ALL="DmbpManualRebindAll";i.EDIT_AS_HTML="EditAsHtml";i.EDIT_PROPERTY_NAME="EditPropertyName";i.EDIT_PROPERTY_VALUE="EditPropertyValue";i.EDIT_RULE_SELECTOR="EditRuleSelector";i.EDIT_SUBPROPERTY_VALUE="EditSubpropertyValue";i.EXIT_VALUE_EDIT_CANCELLED="ExitValueEditCancelled";i.EXIT_VALUE_EDIT_COMMITTED="ExitValueEditCommitted";i.EXIT_VALUE_EDIT_DISMISSED="ExitValueEditDismissed";i.EXPAND_TO_REMOTE_SELECTED_ELEMENT="ExpandToRemoteSelectedElement";i.FIND="Find";i.FIND_NEXT="FindNext";i.FIND_PREV="FindPrev";i.HIDE_COLOR_PICKER="HideColorPicker";i.HIDE_ELEMENT="HideElement";i.MOVE_SELECTION_FIRST="MoveSelectionFirst";i.MOVE_SELECTION_IN="MoveSelectionIn";i.MOVE_SELECTION_LAST="MoveSelectionLast";i.MOVE_SELECTION_NEXT="MoveSelectionNext";i.MOVE_SELECTION_OUT="MoveSelectionOut";i.MOVE_SELECTION_PREV="MoveSelectionPrev";i.OPEN_IN_NEW_TAB="OpenInNewTab";i.PASTE_AS_CHILD="PasteAsChild";i.PASTE_BEFORE="PasteBefore";i.PASTE_TEXT="PasteText";i.REDO="Redo";i.REFRESH="Refresh";i.REFRESH_STYLES="RefreshStyles";i.REVERT_ITEM="RevertItem";i.SELECT_INHERITED_FROM_TARGET="SelectInheritedFromTarget";i.SELECTED_ITEM_CHANGED="SelectedItemChanged";i.SHOW_CHANGES_TAB="ShowChangesTab";i.SHOW_COLOR_PICKER="ShowColorPicker";i.SHOW_COMPUTED_TAB="ShowComputedTab";i.SHOW_DMBP_TAB="ShowDomExpDMBPTab";i.SHOW_EVENTS_TAB="ShowEventsTab";i.SHOW_FONTS_TAB="ShowFontsTab";i.SHOW_STYLES_TAB="ShowStylesTab";i.START_SELECT_ELEMENT="StartSelectElement";i.START_SHOW_LAYOUT="StartShowLayout";i.STOP_SELECT_ELEMENT="StopSelectElement";i.STOP_SHOW_LAYOUT="StopShowLayout";i.TOGGLE_GROUP="ToggleGroup";i.TOGGLE_PROPERTY_CHECKBOX="TogglePropertyCheckbox";i.TOGGLE_DMBP_ATTR_MODIFIED="ToggleDmbpAttrModified";i.TOGGLE_DMBP_NODE_REMOVED="ToggleDmbpNodeRemoved";i.TOGGLE_DMBP_SUBTREE_MODIFIED="ToggleDmbpSubtreeModified";i.UNDO="Undo";i.VIEW_SOURCE="ViewSource";i.SHOW_ACCESSIBILITY_TREE="ShowAccessibilityTree";i.HIDE_ACCESSIBILITY_TREE="HideAccessibilityTree";i.SHOW_ACCESSIBILITY_TAB="ShowAccessibilityTab";i.PSEUDO_STATE_ACTIVE="PseudoStateActive";i.PSEUDO_STATE_FOCUS="PseudoStateFocus";i.PSEUDO_STATE_HOVER="PseudoStateHover";i.PSEUDO_STATE_VISITED="PseudoStateVisited";i.SCROLL_INTO_VIEW="ScrollIntoView";i.QUICK_EDIT_TAG_COMMIT="QuickEditTagCommitted";i.QUICK_EDIT_TAG_CANCELLED="QuickEditTagCancelled";i.IMAGE_PREVIEW="ImagePreview";e.CommandName=i;function n(){e.analytics=new Common.F12AnalyticsProxy(Common.ToolName.DOM_EXPLORER)}e.initializeAnalytics=n}(e.Telemetry||(e.Telemetry={}))}(e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){class t{}t.domExplorerButtonPanel='<div class="buttons">            <div data-name="selectElementByClick" data-control="Common.Controls.ToggleButton" data-control-templateid="Common.iconButton" data-binding="isEnabled:domExplorerIsReady, isChecked:selectElementIsEnabled; mode=twoway, isVisible:selectElementIsVisible" data-options="className:selectElementButton, tooltip:SelectElementButtonTooltip; converter=Common.CommonConverters.ResourceConverter"></div>            <div data-name="showLayoutButton" data-control="Common.Controls.ToggleButton" data-control-templateid="Common.iconButton" data-binding="isEnabled:domExplorerIsReady, isChecked:showLayoutIsEnabled; mode=twoway, isVisible:showLayoutIsVisible" data-options="className:showLayoutButton, tooltip:ShowLayoutButtonTooltipWithShortcut; converter=Common.CommonConverters.ResourceConverter"></div>            <div data-name="colorPickerButton" data-control="Common.Controls.Button" data-control-templateid="Common.iconButton" data-binding="isEnabled:domExplorerIsReady" data-options="className:colorPickerButton, tooltip:DomColorPickerButtonTooltip; converter=Common.CommonConverters.ResourceConverter"></div>            <div data-name="accessibilityButton" data-control="Common.Controls.ToggleButton" data-control-templateid="Common.iconButton" data-binding="isEnabled:domExplorerIsReady, isChecked:showAccessibilityIsEnabled; mode=twoway, isVisible:showAccessibilityIsVisible" data-options="className:accessibilityButton, tooltip:DomAccessibilityButtonButtonTooltip; converter=Common.CommonConverters.ResourceConverter"></div>        </div>';t.colorPickerHost='<div>            <div data-name="colorPicker" data-control="Common.Controls.ColorPickerControl" data-control-templateid="Common.defaultColorPickerTemplate" data-binding="color:color; mode=twoway,                                cancellationColor: cancellationColor; mode=twoway,                                paletteColors: palette.colors,                                isPaletteLoading: palette.isLoading,                                isVisible: isVisible; mode=twoway,                                isSlidersShown: isSlidersShown; mode=twoway,                                targetButtonElement: dockElement; converter=Common.CommonConverters.NullPermittedConverter"></div>        </div>';t.debugUidTemplate='<span class="BPT-HTML-Debug-Uid" data-controlbinding="textContent:model"></span>';t.domTreeEmptyItemTemplate='<div class="domTreeItemDataTemplate">            <div class="domTreeItemDataTemplateNameCell">                <div class="BPT-gutterGlyphContainer" data-name="gutterGlyph"></div>                <div data-name="expander"></div>                <div data-name="domTreeItemDataTemplateName" class="domTreeItemDataTemplateName">                </div>            </div>        </div>';t.domTreeElementTemplate='<div class="domTreeItemDataTemplate">                <div class="domTreeItemDataTemplateNameCell">                <div class="BPT-gutterGlyphContainer" data-name="gutterGlyph"></div>                <div data-name="expander"></div>                <div data-name="domTreeItemDataTemplateName" class="domTreeItemDataTemplateName">                    <div class="BPT-HTML">                        <div class="element" data-binding="attr-data-id:uid">                            \x3c!-- The strange "empty" comments below allow us to format the tags without introducing whitespace into the template --\x3e                            <div class="BPT-HTML-HtmlElement BPT-HTML-OpeningTag" data-binding="class-BPT-HTML-ClosingTag:isClosingTag, class-BPT-HTML-SelfClosingTag:isSelfClosing" data-controlbinding="event-dblclick:onHTMLTagDblClickHandler">\x3c!--                             --\x3e<div class="BPT-HTML-NewTag" data-binding="textContent:tag" data-controlbinding="event-dblclick:onHTMLTagDblClickHandler"></div>\x3c!--                             --\x3e<div data-control="DomTree.NodeAttributeItemsControl" data-controlbinding="event-dblclick:onAttributeItemsDblClickHandler" data-binding="items:attributes"></div>\x3c!--                         --\x3e</div>\x3c!--                         --\x3e<div data-name="collapsedNodeClosingTag" data-controlbinding="className:collapsedNodeClosingTagClass">\x3c!--                             --\x3e<div class="BPT-HTML-Punctuation" data-binding="class-BPT-HTML-TextPreview:textPreview,                                                    class-BPT-HTML-No-TextContentPreview:isExpanded,                                                    class-BPT-HTML-No-TextContentPreview:hasChildren; converter=Common.CommonConverters.InvertBool" data-controlbinding="textContent:textContentPreview,                                                           event-dblclick:onTextDblClickHandler"></div>\x3c!--                             --\x3e<div class="BPT-HTML-NewTag BPT-HTML-ClosingTag" data-binding="textContent:tag"></div></div>                        </div>                    </div>                </div>            </div>        </div>';t.domTreeTextElementTemplate='<div class="domTreeItemDataTemplate">            <div class="domTreeItemDataTemplateNameCell">               <div class="BPT-gutterGlyphContainer" data-name="gutterGlyph"></div>                <div data-name="expander"></div>                <div data-name="domTreeItemDataTemplateName" class="domTreeItemDataTemplateName">                    <div class="BPT-HTML">                        <div class="element" data-binding="attr-data-id:uid">                            <span class="BPT-HTML-Text" data-binding="textContent:textNodeText" data-controlbinding="event-dblclick:onTextDblClickHandler">                            </span>                        </div>                    </div>                </div>            </div>        </div>';t.domTreeCDataTemplate='<div class="domTreeItemDataTemplate">            <div class="domTreeItemDataTemplateNameCell">                <div class="BPT-gutterGlyphContainer" data-name="gutterGlyph"></div>                <div data-name="expander"></div>                <div data-name="domTreeItemDataTemplateName" class="domTreeItemDataTemplateName">                    <div class="BPT-HTML">                        <div class="element" data-binding="attr-data-id:uid">                            <span class="BPT-HTML-CData" data-binding="textContent:cDataText">                            </span>                        </div>                    </div>                </div>            </div>        </div>';t.domTreeCommentTemplate='<div class="domTreeItemDataTemplate">            <div class="domTreeItemDataTemplateNameCell">                <div class="BPT-gutterGlyphContainer" data-name="gutterGlyph"></div>                <div data-name="expander"></div>                <div data-name="domTreeItemDataTemplateName" class="domTreeItemDataTemplateName">                    <div class="BPT-HTML">                        <div class="element" data-binding="attr-data-id:uid">                            <span class="BPT-HTML-Comment" data-binding="textContent:commentText"></span>                        </div>                    </div>                </div>            </div>        </div>';t.domTreeDocTypeTemplate='<div class="domTreeItemDataTemplate">            <div class="domTreeItemDataTemplateNameCell">                <div class="BPT-gutterGlyphContainer" data-name="gutterGlyph"></div>                <div data-name="expander"></div>                <div data-name="domTreeItemDataTemplateName" class="domTreeItemDataTemplateName">                    <div class="BPT-HTML">                        <div class="element&gt;" data-binding="attr-data-id:uid">                            \x3c!-- The strange "empty" comments below allow us to format the tags without introducing whitespace into the template --\x3e                            <span class="BPT-HTML-DocType"><span>DOCTYPE</span>                                <span data-binding="textContent:docTypeText"></span></span>                        </div>                    </div>                </div>            </div>        </div>';t.domTreeItemAttributeTemplate='<span class="BPT-HTML-Attribute-Section">            \x3c!-- The strange "empty" comments below allow us to format the tags without introducing whitespace into the template --\x3e            <span class="BPT-HTML-Attribute" data-binding="textContent:name"></span>\x3c!--         --\x3e<span class="BPT-HTML-Value" data-binding="textContent:value" data-controlbinding="class-BPT-HTML-Mutation:valueGleaming.isGleaming"></span></span>';e.DomExplorer=t}(ControlTemplates||(ControlTemplates={}));!function(e){"use strict";let t;!function(e){class t extends Common.Observable{constructor(){super();this.showLayoutIsEnabledChanged=new Common.EventSource;this.showAccessibilityIsEnabledChanged=new Common.EventSource;this.showAccessibilityIsVisibleChanged=new Common.EventSource;this.selectElementIsEnabledChanged=new Common.EventSource}static initialize(){Common.ObservableHelpers.defineProperty(t,"domExplorerIsReady",!1);Common.ObservableHelpers.defineProperty(t,"showLayoutIsVisible",!0);Common.ObservableHelpers.defineProperty(t,"showLayoutIsEnabled",!0,(e,t,i)=>e.showLayoutIsEnabledChanged.invoke(i));Common.ObservableHelpers.defineProperty(t,"showAccessibilityIsEnabled",!1,(e,t,i)=>e.showAccessibilityIsEnabledChanged.invoke(i));Common.ObservableHelpers.defineProperty(t,"showAccessibilityIsVisible",!0);Common.ObservableHelpers.defineProperty(t,"selectElementIsVisible",!0);Common.ObservableHelpers.defineProperty(t,"selectElementIsEnabled",!1,(e,t,i)=>e.selectElementIsEnabledChanged.invoke(i))}}e.DomExplorerModel=t;t.initialize()}(t=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";var t=Microsoft.Plugin.F12.externalApis;let i;!function(i){class n{constructor(e){this.domExplorerWindow=e;Microsoft.Plugin.F12.Communications.getRpcClient().listen("notificationFromRemote|ms:dom",e=>{const{event:t,params:i}=e;this.jsonRpcNotificationReceive(t,i)})}get onRefreshTree(){return this._onRefreshTree}set onRefreshTree(e){this._onRefreshTree=e}onAttach(){Microsoft.Plugin.F12.externalApis.notifyOnToolActivated(Microsoft.Plugin.F12.PluginId.dom);Microsoft.Plugin.F12.F12Host.loadScripts(n.SCRIPTS,n.PORT_NAME)}setUndoCallback(e){this._undoCallback=e}setEditCallback(e){this._editCallback=e}abortPaletteCollection(){return this.methodCall("abortPaletteCollection",[])}addDocumentModifiedListener(e){return this.methodCall("addDocumentModifiedListener",[e])}addElement(e,t,i){return this.methodCall("addElement",[e,t,i])}addElementWithNewTag(e,t,i){return this.methodCall("addElementWithNewTag",[e,t,i])}allowProcessToTakeForeground(){return this.methodCall("allowProcessToTakeForeground",[])}attachMediaQueryEvents(){return this.methodCall("attachMediaQueryEvents",[])}cancelSelectElementByClick(){return this.methodCall("cancelSelectElementByClick",[])}clearCurrentEventProxy(){return this.methodCall("clearCurrentEventProxy",[])}clearStyleCache(){return this.methodCall("clearStyleCache",[])}collectEvents(e,t){return this.methodCall("collectEvents",[e,t])}copyElementWithStyle(e){return this.methodCall("copyElementWithStyle",[e])}deleteElement(e){return this.methodCall("deleteElement",[e])}disableEditChaining(){return this.methodCall("disableEditChaining",[])}editAttribute(e,t,i){return this.methodCall("editAttribute",[e,t,i])}editStylePropertyAdd(e,t,i,n,a){return this.methodCall("editStylePropertyAdd",[e,t,i,n,a])}editStylePropertyEnable(e,t){return this.methodCall("editStylePropertyEnable",[e,t])}editStylePropertyName(e,t){return this.methodCall("editStylePropertyName",[e,t])}editStylePropertyValue(e,t,i){return this.methodCall("editStylePropertyValue",[e,t,i])}editStyleRuleAdd(e,t,i,n,a){return this.methodCall("editStyleRuleAdd",[e,t,i,n,a])}editStyleRuleRemove(e){return this.methodCall("editStyleRuleRemove",[e])}editStyleRuleSelector(e,t){return this.methodCall("editStyleRuleSelector",[e,t])}editText(e,t){return this.methodCall("editText",[e,t])}enableEditChaining(){return this.methodCall("enableEditChaining",[])}endSingleEdit(){return this.methodCall("endSingleEdit",[])}findTerm(e,t,i,n){return this.methodCall("findTerm",[e,t,i,n])}getBulkChildNodesDetails(e,t){return this.methodCall("getBulkChildNodesDetails",[e],t)}getChangedStyles(e){return this.methodCall("getChangedStyles",[e])}getComputedBox(e){return this.methodCall("getComputedBox",[e])}getComputedStyles(e){return this.methodCall("getComputedStyles",[e])}getRenderedFonts(e){return this.methodCall("getRenderedFonts",[e])}getCssClassesUsedInCurrentDocument(e){return this.methodCall("getCssClassesUsedInCurrentDocument",[e])}getLoadDocumentData(){return this.methodCall("getLoadDocumentData",[])}getHTMLString(e,t,i){return this.methodCall("getHTMLString",[e,t,i])}getParentChainForElement(e){return this.methodCall("getParentChainForElement",[e])}getParentChainForSelectedElement(){return this.methodCall("getParentChainForSelectedElement",[])}getDomNodeDetails(e){return this.methodCall("getDomNodeDetails",[e])}getDomNodesDetails(e){return this.methodCall("getDomNodesDetails",[e])}getParentChainForStyle(e){return this.methodCall("getParentChainForStyle",[e])}getPseudoStyling(e){return this.methodCall("getPseudoStyling",[e])}getRootElement(){return this.methodCall("getRootElement",[])}getSelectedElement(){return this.methodCall("getSelectedElement",[])}getStyles(e){return this.methodCall("getStyles",[e])}getWinningProperties(e,t){return this.methodCall("getWinningProperties",[e,t])}hideElement(e){return this.methodCall("hideElement",[e])}hideHoverItem(){return this.methodCall("hideHoverItem",[])}hoverItem(e){return this.methodCall("hoverItem",[e])}initializeHost(e){return this.methodCall("initializeHost",[e])}inspectElementById(e){return this.methodCall("inspectElementById",[e])}getOriginURL(){return this.methodCall("getOriginURL",[])}performNextEdit(){return this.methodCall("performNextEdit",[])}querySelector(e,t,i){return this.methodCall("querySelector",[e,t])}removeAttribute(e,t){return this.methodCall("removeAttribute",[e,t])}removeStyleProperty(e){return this.methodCall("removeStyleProperty",[e])}reparentNode(e,t,i){return this.methodCall("reparentNode",[e,t,i])}replaceElement(e,t){return this.methodCall("replaceElement",[e,t])}revertProperty(e){return this.methodCall("revertProperty",[e])}revertRule(e){return this.methodCall("revertRule",[e])}runPaletteCollection(){return this.methodCall("runPaletteCollection",[])}scrollElementIntoView(e){return this.methodCall("scrollElementIntoView",[e])}selectElement(e){return Promise.resolve()}selectElementByClick(){return this.methodCall("selectElementByClick",[])}setPseudoStyling(e,t,i){return this.methodCall("setPseudoStyling",[e,t,i])}startSingleEdit(){return this.methodCall("startSingleEdit",[])}storeElementForConsole(e){return this.methodCall("storeElementForConsole",[e])}takeForeground(){return this.methodCall("takeForeground",[])}undoLastEdit(){return this.methodCall("undoLastEdit",[])}getRootAccessibilityNodeId(){return this.methodCall("getRootAccessibilityNodeId",[])}getAccessibilityNodeById(t){e.Tools.Utility.Assert.hasValue(t,"");return this.methodCall("getAccessibilityNodeById",[t])}getAccessibilityProperties(e){return this.methodCall("getAccessibilityProperties",[e])}getChildrenOfAccessibilityNode(e){return this.methodCall("getChildrenOfAccessibilityNode",[e])}registerAccessibilityStructureChangedListener(){return this.methodCall("registerAccessibilityStructureChangedListener",[])}unregisterAccessibilityStructureChangedListener(){return this.methodCall("unregisterAccessibilityStructureChangedListener",[])}registerAccessibilityPropertyChangedListener(){return this.methodCall("registerAccessibilityPropertyChangedListener",[])}getAccessibilityNodeIdByDomElementId(e){return this.methodCall("getAccessibilityNodeIdByDomElementId",[e])}getDomNodeIdByAccessibilityId(e){return this.methodCall("getDomNodeIdByAccessibilityId",[e])}addEventListener(e,i){switch(e){case"attach":case"detach":case"connect":case"switchTab":case"activated":case"deactivated":case"break":case"run":case"load":break;case"toolMessage":Microsoft.Plugin.F12.Communications.getRpcClient().listen("toolMessage",i);return;case"onSourceMapStateChanged":Microsoft.Plugin.F12.Communications.getRpcClient().listen("onSourceMapStateChanged",i);return;default:throw new Error("Invalid eventName: "+e)}t.addEventListener(e,i);"attach"===e&&this.trySendAttachEventRundown(i)}trySendAttachEventRundown(t){if(t){var i={isDesignerConnected:!1},n=t;e.Host.ExternalApis.isAttached&&n(i)}}selectElementByClickCallback(e){this.domExplorerWindow.domExplorerModel.selectElementIsEnabled=!1;this.domExplorerWindow.giveHostForeground();this.getParentChainForSelectedElement().then(e=>{this.domExplorerWindow.selectElementFromUidChain(e,!1)})}handleRefreshTree(e){var t=e;this.domExplorerWindow.pageUri=t.contextInfo;this.domExplorerWindow.populateTree();if(Microsoft.Plugin.F12){this.domExplorerWindow.isColorPickerReady&&this.domExplorerWindow.paletteViewModel.runColorCollection();this.domExplorerWindow.accessibilityViewModel&&(this.domExplorerWindow.accessibilityViewModel.isGridInitialized()?this.domExplorerWindow.accessibilityViewModel.resetDataView():this.domExplorerWindow.accessibilityViewModel.initializeSlickGrid())}this.onRefreshTree&&this._onRefreshTree()}startSelectElementByClickCallback(e){this.domExplorerWindow.startSelectElementByClick()}stopSelectElementByClickCallback(e){this.domExplorerWindow.stopSelectElementByClick()}expandToRemoteSelectedElementCallback(e){this.domExplorerWindow.expandToRemoteSelectedElement()}attachMediaQueryEventsCallback(e){var t=e;t?this.domExplorerWindow.tabPanes.applyRemoteStyleChanges(t):this.domExplorerWindow.refreshCSSView()}registerAccessibilityPropertyChangedListenerCallback(e){this.domExplorerWindow.tabPanes.accessibilityView.registerAccessibilityPropertyChangedListenerCallback()}registerAccessibilityStructureChangedListenerCallback(e){this.domExplorerWindow.accessibilityViewModel.registerAccessibilityStructureChangedListenerCallback(e)}runPaletteCollectionCallback(e){var t=JSON.stringify(e);this.domExplorerWindow.paletteViewModel.runPaletteCollectionCallback(t)}addDocumentModifiedListenerCallback(e){var t=JSON.stringify(e);this.domExplorerWindow.domTreeDataSource&&this.domExplorerWindow.domTreeDataSource.domTree.addDocumentModifiedListenerCallback(t)}callTestUndoCallback(e){this._undoCallback&&this._undoCallback(e)}callTestEditCallback(e){this._editCallback&&this._editCallback(e)}eventListenerModification(e){let t=JSON.stringify(e);this.domExplorerWindow.tabPanes.eventsModel.refreshOnModifiedEvent(t)}toggleElementGlyph(e){this.domExplorerWindow.selectItemByUid(e);let t=this.domExplorerWindow.getSelectedDomTreeItem();t.updateIsHiddenProperty();t.toggleGutterGlyph("BPT-hiddenElement")}methodCall(e,t,i){return Microsoft.Plugin.F12.F12Host.callRemote(n.PORT_NAME,e,t).then(e=>i?i(e):e)}jsonRpcMethodReceive(e,t,i){}jsonRpcNotificationReceive(t,i){switch(t){case"SelectElementByClick":this.selectElementByClickCallback();break;case"StartSelectElementByClickCallback":this.startSelectElementByClickCallback();break;case"StopSelectElementByClickCallback":this.stopSelectElementByClickCallback();break;case"ExpandToRemoteSelectedElementCallback":this.expandToRemoteSelectedElementCallback();break;case"AttachMediaQueryEvents":this.attachMediaQueryEventsCallback(i[0]);break;case"EventListenerModification":this.eventListenerModification(i[0]);break;case"RefreshTree":this.handleRefreshTree(i[0]);break;case"RegisterAccessibilityPropertyChangedListener":this.registerAccessibilityPropertyChangedListenerCallback(i[0]);break;case"RegisterAccessibilityStructureChangedListener":this.registerAccessibilityStructureChangedListenerCallback(i[0]);break;case"RunPaletteCollection":this.runPaletteCollectionCallback(i[0]);break;case"AddDocumentModifiedListener":this.addDocumentModifiedListenerCallback(i[0]);break;case"SendTestEventEditWorked":this.callTestEditCallback(i[0]);break;case"SendTestEventUndoWorked":this.callTestUndoCallback(i[0]);break;case"ToggleElementGlyph":this.toggleElementGlyph(i[0]);break;default:e.Tools.Utility.Assert.failDebugOnly("Unknown message:"+t)}}}n.SCRIPTS=["../dom/DomExplorerRemote.js"];n.PORT_NAME="domExplorerPort";i.RemoteDom=n}(i=e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){"use strict";class t{constructor(e,i,n){this.selectorText=e;this.changeState=i;this.isSelectorChanged=n;t.AriaChangeStateRemoveString||(t.AriaChangeStateRemoveString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateRemove"):"");t.AriaChangeStateAddString||(t.AriaChangeStateAddString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateAdd"):"")}get ariaChangeStateString(){switch(this.changeState){case e.StyleChangeNotifier.CHANGE_BAR_REMOVE:return t.AriaChangeStateRemoveString;case e.StyleChangeNotifier.CHANGE_BAR_ADD:return t.AriaChangeStateAddString}return""}}e.ChangedSelector=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,i,n,a,s=!1,r=!1,o=!1){this.name=e;this.value=i;this.isImportant=n;this.changeState=a;this.isNameChanged=s;this.isValueChanged=r;this.isPriorityChanged=o;t.AriaChangeStateRemoveString||(t.AriaChangeStateRemoveString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateRemove"):"");t.AriaChangeStateAddString||(t.AriaChangeStateAddString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateAdd"):"")}get priority(){return this.isImportant?" !important":""}get ariaChangeStateString(){switch(this.changeState){case e.StyleChangeNotifier.CHANGE_BAR_REMOVE:return t.AriaChangeStateRemoveString;case e.StyleChangeNotifier.CHANGE_BAR_ADD:return t.AriaChangeStateAddString}return""}}e.ChangedProperty=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(t,i,n){this.source=t;this._rule=i;this._url=n;this._selectors=[];this._properties=[];var a=this._rule.changeState===e.StyleChangeNotifier.CHANGE_BAR_UPDATE;if(a){this._selectors.push(new e.ChangedSelector(this._rule.originalSelectorText,e.StyleChangeNotifier.CHANGE_BAR_REMOVE,a));this._selectors.push(new e.ChangedSelector(this._rule.selectorText,e.StyleChangeNotifier.CHANGE_BAR_ADD,a))}else{var s=this._rule.isDeleted?this._rule.originalSelectorText:this._rule.selectorText;this._selectors.push(new e.ChangedSelector(s,this._rule.changeState,a))}this._displayedColumn=this._rule.fileColumn;this._displayedLine=this._rule.fileLine;var r=[];this._rule.properties.forEach(t=>{if(!t.wasCreatedInSession||t.isEnabled||1!==t.status)if(t.isDeleted||!t.isEnabled&&1===t.status)this._properties.push(new e.ChangedProperty(t.originalName,t.originalValue,t.originalIsImportant,e.StyleChangeNotifier.CHANGE_BAR_REMOVE,i,n,a));else if(t.changeState===e.StyleChangeNotifier.CHANGE_BAR_UPDATE)if(t.isShorthand&&t.isEnabledIndeterminate){this._properties.push(new e.ChangedProperty(t.originalName,t.originalValue,t.originalIsImportant,e.StyleChangeNotifier.CHANGE_BAR_REMOVE));t.properties.forEach(t=>{t.isEnabled&&r.push(new e.ChangedProperty(t.name,t.value,t.isImportant,e.StyleChangeNotifier.CHANGE_BAR_ADD))})}else{var i=t.name!==t.originalName,n=t.value!==t.originalValue,a=t.isImportant!==t.originalIsImportant;this._properties.push(new e.ChangedProperty(t.originalName,t.originalValue,t.originalIsImportant,e.StyleChangeNotifier.CHANGE_BAR_REMOVE,i,n,a));r.push(new e.ChangedProperty(t.name,t.value,t.isImportant,e.StyleChangeNotifier.CHANGE_BAR_ADD,i,n,a))}else{var s=new e.ChangedProperty(t.name,t.value,t.isImportant,t.changeState);if(t.changeState===e.StyleChangeNotifier.CHANGE_BAR_NONE){if(r.length){this._properties=this._properties.concat(r);r=[]}this._properties.push(s)}else t.changeState===e.StyleChangeNotifier.CHANGE_BAR_ADD&&t.isShorthand&&t.isEnabledIndeterminate?t.properties.forEach(t=>{t.isEnabled&&r.push(new e.ChangedProperty(t.name,t.value,t.isImportant,e.StyleChangeNotifier.CHANGE_BAR_ADD))}):r.push(s)}});r.length&&(this._properties=this._properties.concat(r))}get uid(){return this._rule.uid}get url(){return this._url}set url(e){this._url=e}get isInline(){return this._rule.isInlined}get isDeleted(){return this._rule.isDeleted}get line(){return this._displayedLine}set line(e){this._displayedLine=e}get column(){return this._displayedColumn}set column(e){this._displayedColumn=e}get hasFileLink(){return this._rule.isInlined||!this._rule.wasCreatedInSession&&this._rule.fileLine>0}get fileLink(){return this._rule.isInlined?this._rule.target.description:Common.ToolWindowHelpers.createFileLinkText(null,this._rule.fileLine,this._rule.fileColumn)}get selectors(){return this._selectors}get properties(){return this._properties}get parent(){return this._rule.parent}get tooltip(){return this.source.displaySourceTooltip}get footerState(){var t=this._rule.changeState;return t===e.StyleChangeNotifier.CHANGE_BAR_ADD||t===e.StyleChangeNotifier.CHANGE_BAR_REMOVE?t:e.StyleChangeNotifier.CHANGE_BAR_NONE}get textForCopy(){return this._rule.formatForCopy}revert(){return this._rule.revert()}matches(e){return this._rule===e}static compare(e,t){if(e._rule.isInlined){if(t._rule.isInlined){var i=e._rule.target.description,n=t._rule.target.description;return i===n?0:i>n?1:-1}return-1}return t._rule.isInlined?1:e.line===t.line?e.column-t.column:e.line-t.line}}e.ChangedRule=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,i,n){this.source=e;this._model=i;this.children=[];var a=t.ID_MAP[this.source];if(!a){a="changeId"+t.NEXT_UNIQUE_ID++;t.ID_MAP[this.source]=a}this.uniqueId=a;this._tooltip=e}get displaySource(){return Common.ToolWindowHelpers.getTruncatedFileName(this.source,50)}get displaySourceTooltip(){return this._tooltip}get expanded(){return!this._model.isCollapsed(this.source)}get textForCopy(){var e=!0,t="";this.children.forEach(i=>{e||(t+="\r\n");t+="/* ";i.isDeleted&&(t+=Common.ToolWindowHelpers.loadString("RemoveStyleMenuText")+" ");i.hasFileLink?i.isInline?t+=i.url+" "+i.fileLink:t+=Common.ToolWindowHelpers.createFileLinkText(i.url,i.line,i.column,Number.MAX_VALUE):t+=i.url;t+=" */\r\n";i.isDeleted||(t+=i.textForCopy);e=!1});return t}add(e){this.children.push(e)}sort(){this.children.sort(e.ChangedRule.compare)}updateTooltip(e,t){for(var i=0;i<this.children.length;i++)if(this.children[i].matches(e)){this._tooltip=t;break}}}t.NEXT_UNIQUE_ID=0;t.ID_MAP={};e.ChangedSource=t}(Dom||(Dom={}));!function(e){"use strict";class t{constructor(e,t){this._remoteDom=e;this.capabilities=t;this._ruleMap={};this._propertyMap={};this._inheritedTargets={};this._parentGrayedStyles={};this._pseudoElementGrayedStyle=[];this._inlinedStyleName=Common.ToolWindowHelpers.loadString("InlineStyleSelector");this._listeners=[];this.rules=[]}static create(e,n,a,s){i.instance.begin();var r,o,l=new t(e,a);if(n){r=e.getStyles;o=[n]}else{r=e.getChangedStyles;o=[]}r.apply(e,o).then(e=>{if(e){for(var t=0;t<e.length;t++)l.processRawStyle(e[t],t);s(l)}});Microsoft.Plugin.F12.Communications.getRpcClient().listen("onSourceMapStateChanged",l.onSourceMapStateChanged.bind(l))}static createNewId(){return t.NewUidTag+t.NextUid++}addUpdateListener(e){this._listeners.indexOf(e)<0&&this._listeners.push(e)}removeUpdateListener(e){var t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}updateWinningRules(e,t){this._remoteDom.getWinningProperties(e,t).then(i=>{this.rules.forEach(n=>{e===n.pseudoElementType&&n.updateWinningProperties(t,i)})})}togglePropertyEnable(e,t,i){this._remoteDom.editStylePropertyEnable(e.uid,t).then(i)}editRuleSelector(e,t,i){this._remoteDom.editStyleRuleSelector(e,t).then(i)}editRuleDelete(e,t){this._remoteDom.editStyleRuleRemove(e).then(t)}editRuleRevert(e,t){this._remoteDom.revertRule(e).then(t)}addRule(e,t,i,n,a,s){this._remoteDom.editStyleRuleAdd(e,t,i,n,a).then(s)}addProperty(e,t,i,n,a,s){this._remoteDom.editStylePropertyAdd(e,t,i,n,a).then(s)}editPropertyName(e,t,i){this._remoteDom.editStylePropertyName(e,t).then(i)}editPropertyValue(e,t,i,n){this._remoteDom.editStylePropertyValue(e,t,i).then(n)}editPropertyRevert(e,t){this._remoteDom.revertProperty(e).then(t)}editPropertyDelete(e,t){this._remoteDom.removeStyleProperty(e).then(t)}applyChanges(e){var t;e.forEach(e=>{switch(e.event){case"updateProperty":if(i=this.getPropertyById(e.uid)){i.updateFromRemote(e.obj);e.isDynamic||i.select()}break;case"updatePropertyUid":(i=this.getPropertyById(e.uid))&&(i.uid=e.obj.uid);break;case"removeProperty":(i=this.getPropertyById(e.uid))&&i.remove(!e.isDynamic);break;case"addProperty":if(t=this.getRuleById(e.uid)){var i=t.addProperty(e.obj,!0,this.getPropertyById(e.beforeUid));i.recalculateWinning();e.isDynamic||i.select()}break;case"updateRule":if(t=this.getRuleById(e.uid)){t.updateFromRemote(e.obj);e.isDynamic||t.select()}break;case"revertRule":if(t=this.getRuleById(e.uid))if(e.obj){t.removeNewProperties();t.updateFromRemote(e.obj)}else t.remove();break;case"removeRule":(t=this.getRuleById(e.uid))&&t.remove();break;case"addRule":var n=this.rules.length;if(e.beforeUid)for(var a=0;a<this.rules.length;a++)if(this.rules[a].uid===e.beforeUid){n=a;break}t=this.processRawStyle(e.obj,n,!0);e.isDynamic||t.select()}})}getRuleById(e){return this._ruleMap[e]}getPropertyById(e){return this._propertyMap[e]}remapPropertyId(e,t,i){t&&delete this._propertyMap[t];i&&(this._propertyMap[i]=e)}remapRuleId(e,t,i){delete this._ruleMap[t];this._ruleMap[i]=e}removeProperty(e){delete this._propertyMap[e.uid]}createNewRule(i){var n=new e.StyleRule(this,this._listeners,t.createNewId(),!0,!1,"",i);this._ruleMap[n.uid]=n;this.rules.splice(1,0,n);return n}removeRule(e){if(e.isInlined)return!1;delete this._ruleMap[e.uid];for(var t=this.rules,i=0;i<t.length;i++)if(t[i]===e){t.splice(i,1);return!0}return!1}setInlineProperty(e,t,i){for(var n=0;n<this.rules.length;n++){var a=this.rules[n];if(a.isInlined&&!a.isInherited){a.setExistingOrAddNewProperty(e,t,i);return!0}}return!1}static isNew(e){return e.substr(0,t.NewUidTagLength)===t.NewUidTag}onSourceMapStateChanged(e){var t=e.url;if(this.rules)for(var i=0,n=this.rules.length;i<n;i++){var a=this.rules[i];a.fileUrl===t&&this.generateRuleLink(a)}}processRawStyle(t,i,n=!1){var a=t.uid,s=new e.StyleRule(this,this._listeners,a,t.wasCreatedInSession,t.isDeleted,t.pseudoElementType,t.isInlined?this._inlinedStyleName:t.selector,t.hasEditableSelector);if(t.declarationLocation){s.fileUrl=t.declarationLocation.uri;s.fileLine=t.declarationLocation.line+1;s.fileColumn=t.declarationLocation.column+1}else s.fileUrl=t.styleHref;this.generateRuleLink(s);s.styleHref=t.styleHref;s.target=t.target;s.isInherited=t.isInherited;s.isInlined=t.isInlined;s.parent=t.parent;s.isFirstRuleInTargetGroup=t.isInherited&&t.target&&!this._inheritedTargets[t.target.uid];s.isGrayedStyleRule=t.isGrayedStyle;let r=2===t.ruleType;s.isFirstRuleInGrayedStyle=t.isGrayedStyle&&(!r&&!this._parentGrayedStyles[t.grayedStyleUid]||r&&-1===this._pseudoElementGrayedStyle.indexOf(t.grayedStyleText));if(r){s.grayedStyleText=Microsoft.Plugin.Resources.getString("/Common/PseudoElement",t.grayedStyleText);this._pseudoElementGrayedStyle.push(t.grayedStyleText)}else s.grayedStyleText=t.grayedStyleText;s.setOriginal(t.originalSelector);this.rules.splice(i,0,s);this._ruleMap[a]=s;if(t.properties)for(var o=0;o<t.properties.length;o++)s.addProperty(t.properties[o]);s.isFirstRuleInTargetGroup&&s.target&&(this._inheritedTargets[s.target.uid]=s.target);s.isFirstRuleInGrayedStyle&&(this._parentGrayedStyles[t.grayedStyleUid]=t.parent);if(n){s.notifyRuleChange(3,s);s.recalculateWinning()}return s}generateRuleLink(e){e.fileUrl?Microsoft.Plugin.F12.Debugger.getTranslatedLocation(e.fileUrl,e.fileLine,e.fileColumn,!0).then(t=>{if(t){e.fileLinkText=Common.ToolWindowHelpers.createFileLinkText(t.documentPath,t.oneBasedLine);e.sourceResolutionComplete=!0;e.notifyRuleChange(8,e,t);e.tooltip=Common.ToolWindowHelpers.loadString("StyleRuleFileTooltip",[Common.EncodingUtilities.escapeHtml(t.documentPath),t.oneBasedLine,t.oneBasedColumn]);e.notifyRuleChange(7,e,e.tooltip)}else e.sourceResolutionComplete=!0;this.checkForAllCompletedRules()}):e.sourceResolutionComplete=!0}checkForAllCompletedRules(){i.instance.checkResolved(()=>this.rules.every(e=>e.sourceResolutionComplete))}}t.VALID_STATUS="Valid";t.UNRECOGNIZED_STATUS="UnrecognizedProperty";t.INVALID_VALUE_STATUS="InvalidValue";t.NewUidTag="new-";t.NewUidTagLength=t.NewUidTag.length;t.NextUid=0;e.ElementStyleModel=t;class i{constructor(){this.hasResolved=!1}static get instance(){i._instance||(i._instance=new i);return i._instance}begin(){if(!this.hasResolved&&!this.hasStarted){this.hasStarted=!0;F12.DomExplorer.Telemetry.analytics.logPerformance("Dom_ResolveStyleUrls_Start")}}checkResolved(e){if(!this.hasResolved&&e()){this.hasResolved=!0;F12.DomExplorer.Telemetry.analytics.logPerformance("Dom_ResolveStyleUrls_Stop",null,!0)}}resolve(){if(!this.hasResolved){this.hasResolved=!0;F12.DomExplorer.Telemetry.analytics.logPerformance("Dom_ResolveStyleUrls_Stop",null,!0)}}}}(Dom||(Dom={}));!function(e){"use strict"}(Dom||(Dom={}));!function(e){"use strict";class t extends e.StyleChangeNotifier{constructor(i,n,a,s,r,o,l,m,d,h,u,c){super(n);this._model=i;this._listeners=n;this.wasCreatedInSession=a;this.original=r;this.originalLonghand=o;this._isApplied=l;this._isWinning=m;this.isDeleted=d;this._uid=u;this.rule=c;this._changeState=e.StyleChangeNotifier.CHANGE_BAR_NONE;this._extendedChangeState=e.StyleChangeNotifier.CHANGE_BAR_NONE;this.properties=[];this._status=t.convertStatusStringToStatus(h);this.owner=this;this._name=s.name;this._value=s.value;this._isImportant=s.isImportant;this._isEnabled=s.isEnabled;t.AriaOverriddenString||(t.AriaOverriddenString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaOverridden"):"");t.AriaInvalidString||(t.AriaInvalidString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("SingleError",[""])+":":"");t.AriaChangeStateRemoveString||(t.AriaChangeStateRemoveString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateRemove"):"");t.AriaChangeStateAddString||(t.AriaChangeStateAddString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateAdd"):"");t.AriaChangeStateUpdateString||(t.AriaChangeStateUpdateString="undefined"!=typeof Plugin&&void 0!==Microsoft.Plugin.Resources?Common.ToolWindowHelpers.loadString("AriaChangeStateUpdate"):"");this.updateChangeState()}get isApplied(){return this._isApplied}set isApplied(e){if(e!==this._isApplied){this._isApplied=e;this.notifyPropertyChange(5,this,e)}}get isEnabled(){return this._isEnabled}set isEnabled(e){if(e!==this._isEnabled){this._isEnabled=e;this.notifyPropertyChange(4,this,e);if(this.isSubProperty){var t=this.owner;t._isEnabled=t._isEnabled||this.isEnabledIndeterminate;var i=this.isEnabledIndeterminate?void 0:this._isEnabled;this.notifyPropertyChange(4,t,i)}else this.isShorthand&&this.properties.forEach(t=>{t._isEnabled=e;this.notifyPropertyChange(4,t,e)})}}get isWinning(){return this._isWinning}set isWinning(e){this._isWinning=e;this.notifyPropertyChange(3,this,e)}get name(){return this._name}set name(e){if(e!==this._name){this._name=e;this.notifyPropertyChange(1,this,e)}}get originalName(){return this.original?this.original.name:""}get value(){return this._value}get originalValue(){return this.original?this.original.value:""}get isImportant(){return this._isImportant}get originalIsImportant(){return!!this.original&&this.original.isImportant}get uid(){return this._uid}set uid(e){if(e!==this._uid){this.owner.uid;var t=this._uid;this._model.remapPropertyId(this,t,e);this.notifyPropertyChange(0,this,e);this._uid=e}}get status(){return this._status}set status(e){if(e!==this._status){this._status=e;this.notifyPropertyChange(6,this,e)}}get isRule(){return!1}get isProperty(){return this.owner===this}get isSubProperty(){return this.owner!==this}get isEditable(){return this.isProperty}get container(){return this.owner===this?this.rule:this.owner}get isNew(){return e.ElementStyleModel.isNew(this._uid)}get isDisplayableColor(){return this.isColor&&1===this._status&&!t.isNonDisplayableColorValue(this._value)||this.isSupPropertyDisplayableColor}get colorForDisplay(){if(this.isDisplayableColor){if(!this.isShorthand)return this._value;for(var e=0;e<this.properties.length;e++){var t=this.properties[e];if(t.isDisplayableColor)return t.value}return""}}get valueForDisplay(){var e=this.valueWithPriority;return e.length?e:" "}get isEnabledIndeterminate(){for(var e=this.isSubProperty?this.owner.properties:this.properties,t=0,i=0;i<e.length;i++){e[i].isEnabled&&t++}return!!t&&t!==e.length}get enabledMixedState(){return this.isEnabledIndeterminate?"mixed":""+this._isEnabled}get isShorthand(){return this.properties.length>0}get isNameDisplayedAsInvalid(){var e=/^([^-]|-ms)/;return!this.isValidName&&e.test(this.name)}get isValidName(){return 1===this._status||3===this._status}get isValidValue(){return 1===this._status||2===this._status}get isInvalid(){return 1!==this._status}get isStrikeThrough(){return!this._isWinning&&1===this._status}get isOriginal(){if(this.isDeleted||!this.original||this._name!==this.original.name||this._value!==this.original.value||this._isImportant!==this.original.isImportant||this._isEnabled!==this.original.isEnabled)return!1;if(this.isShorthand)for(var e=0;e<this.properties.length;e++)if(!this.properties[e].isOriginal)return!1;return!0}get formatForCopy(){return this.name+": "+this.valueWithPriority+";"}get ariaOverriddenString(){return this.isStrikeThrough?t.AriaOverriddenString:""}get ariaInvalidNameString(){return this.isValidName?"":t.AriaInvalidString}get ariaInvalidValueString(){return this.isValidValue?"":t.AriaInvalidString}get ariaChangeStateString(){switch(this.changeState){case e.StyleChangeNotifier.CHANGE_BAR_REMOVE:return t.AriaChangeStateRemoveString;case e.StyleChangeNotifier.CHANGE_BAR_ADD:return t.AriaChangeStateAddString;case e.StyleChangeNotifier.CHANGE_BAR_UPDATE:return t.AriaChangeStateUpdateString}return""}get isColor(){return this.name.indexOf("color")>-1}get valueWithPriority(){return this._value+(this._isImportant?" !important":"")}get changeState(){return this._changeState}set changeState(e){if(this._changeState!==e){this._changeState=e;this.container.updateChangeState();this.notifyPropertyChange(11,this)}}get extendedChangeState(){return this._extendedChangeState}set extendedChangeState(e){if(this._extendedChangeState!==e){this._extendedChangeState=e;this.container.updateChangeState();this.notifyPropertyChange(11,this)}}static isNonDisplayableColorValue(e){return""===e||"inherit"===e||"currentColor"===e||"flavor"===e||"invert"===e||"transparent"===e||this.isCssVariableValue(e)}static isCssVariableValue(e){return/var\(.+?\)/i.test(e)||/calc\(.+?\)/i.test(e)}addSubproperty(e,t){e.original=this.getLonghandOriginal(this.properties.length);e.updateChangeState();this.properties.push(e);e.owner=this;this._model.remapPropertyId(e,null,e.uid);t&&this.notifyPropertyChange(8,this,e)}clearSubproperties(){this.properties.forEach(e=>{this._model.remapPropertyId(e,e.uid,null)});this.properties=[];this.notifyPropertyChange(7,this)}select(){this.notifyPropertyChange(9,this)}updateWinning(e,t){var i=!1,n=0;this.properties.forEach(a=>{if(t.indexOf(a.uid)>=0){a.isWinning=!0;i=!0}else if(a.name===e){a.isWinning=!1;i=!0}a._isWinning&&n++});i?this.isWinning=n>0:t.indexOf(this.uid)>=0?this.isWinning=!0:this.name!==e||this.isShorthand||(this.isWinning=!1)}recalculateWinning(){this.isShorthand?this.properties.forEach(e=>{this._model.updateWinningRules(this.rule.pseudoElementType,e.name)}):this._model.updateWinningRules(this.rule.pseudoElementType,this.name)}toggleEnable(){return new Promise(e=>{var t=!this._isEnabled;this._model.togglePropertyEnable(this,t,()=>{this.isEnabled=t;this.recalculateWinning();this.updateChangeState();this.isShorthand&&this.properties.forEach(e=>{e.updateChangeState()});e()})})}commitName(e){return new Promise((t,i)=>{if(this._name!==e){var n=this._name;this._name=e;this.isNew?this.commitNewProperty().then(t,()=>{this._name=n;i()}):this._model.editPropertyName(this._uid,this._name,e=>{this._name=n;if(e){this.recalculateWinning();this.updateFromRemote(e);t()}else{this.refreshNameDisplay();i()}})}else t()})}commitValue(e,t=!1){return new Promise((i,n)=>{e.endsWith(";")&&(e=e.replace(/;$/,""));if(e.match(/!important$/)){e=e.substring(0,e.length-10).trim();t=!0}if(this._value!==e||this._isImportant!==t){var a=this._value,s=this._isImportant;this._value=e;this._isImportant=t;this.isNew?this.commitNewProperty().then(i,n):this._model.editPropertyValue(this._uid,this._value,this._isImportant,e=>{if(e){this.updateFromRemote(e);i()}else{this._value=a;this._isImportant=s;this.refreshValueDisplay();n()}})}else i()})}revert(){return this.wasCreatedInSession?this.commitDelete(!0):new Promise((e,t)=>{this._model.editPropertyRevert(this._uid,i=>{if(i){this.recalculateWinning();this.updateFromRemote(i);e()}else t()})})}lookupLonghandOriginals(){for(var e=0;e<this.properties.length;e++){var t=this.properties[e];t.original=this.getLonghandOriginal(e);t.updateChangeState()}}updateFromRemote(e){this.remoteUpdateProperty(e);var i,n;if(this.properties.length===e.longhand.length)for(i=0;i<this.properties.length;i++){n=this.properties[i];var a=e.longhand[i];a.original=this.getLonghandOriginal(i);n.remoteUpdateProperty(a)}else{this.clearSubproperties();e.longhand.forEach(e=>{n=new t(this._model,this._listeners,!1,e.current,null,null,e.isApplied,!0,!1,e.status,e.uid,this.rule);this.addSubproperty(n,!0)});this.lookupLonghandOriginals()}this.recalculateWinning()}remove(e){this.recalculateWinning();var t,i=this.rule.removeProperty(this);e&&(t=i<this.rule.properties.length?this.rule.properties[i]:i>0?this.rule.properties[i-1]:this.rule);this.notifyPropertyChange(10,this,t)}commitDelete(e){return new Promise((t,i)=>{this._model.editPropertyDelete(this.uid,i=>{if(i){this.recalculateWinning();this.updateFromRemote(i)}else{this.remove(e);this._model.remapPropertyId(this,this.uid,null)}t()})})}refreshNameDisplay(){this.notifyPropertyChange(1,this,this._name);this.notifyPropertyChange(6,this,this._status)}setValue(e,t){this._value=e;this._isImportant=t;this.notifyPropertyChange(2,this,this.valueForDisplay)}refreshValueDisplay(){this.notifyPropertyChange(2,this,this.valueForDisplay);this.notifyPropertyChange(6,this,this._status)}updateChangeState(){if(this._model.capabilities.showChangeBars)if(this.isDeleted||this.container.isDeleted)this.changeState=e.StyleChangeNotifier.CHANGE_BAR_REMOVE;else if(this.wasCreatedInSession||this.container.wasCreatedInSession)this.changeState=e.StyleChangeNotifier.CHANGE_BAR_ADD;else if(this.isOriginal){this.changeState=e.StyleChangeNotifier.CHANGE_BAR_NONE;for(var t=0;t<this.properties.length;t++)this.properties[t].changeState&&(this.changeState=e.StyleChangeNotifier.CHANGE_BAR_UPDATE)}else this.changeState=e.StyleChangeNotifier.CHANGE_BAR_UPDATE;this.extendedChangeState=this.changeState}get isSupPropertyDisplayableColor(){if(this.isShorthand)for(var e=0;e<this.properties.length;e++){if(this.properties[e].isDisplayableColor)return!0}return!1}static convertStatusStringToStatus(e){switch(e){case"Valid":return 1;case"UnrecognizedProperty":return 2;case"InvalidValue":return 3}return 0}getLonghandOriginal(e){return this.originalLonghand&&this.originalLonghand.length===this.properties.length?this.originalLonghand[e]:{name:"",value:"",isImportant:!1,isEnabled:!1}}commitNewProperty(){if(this.rule.isNew)return this.rule.commitNewRule(this);for(var e=-1,t=0;t<this.rule.properties.length;t++)if(this.rule.properties[t]===this){e=t;break}var i=e<this.rule.properties.length-1?this.rule.properties[e+1].uid:null;return new Promise((e,t)=>{this._model.addProperty(this.rule.uid,this._name,this._value,this._isImportant,i,i=>{if(i){this.updateFromRemote(i);e()}else t()})})}remoteUpdateProperty(e){var i=e.current;this.uid=e.uid;this.wasCreatedInSession=e.wasCreatedInSession;this.original=e.original;this.originalLonghand=e.originalLonghand;this.name=i.name;this.status=t.convertStatusStringToStatus(e.status);this.isEnabled=i.isEnabled;this.isApplied=e.isApplied;this.isDeleted=e.isDeleted;this.setValue(i.value,i.isImportant);this.updateChangeState()}}e.StyleProperty=t}(Dom||(Dom={}));!function(e){!function(e){e.ACCESSIBILITY_PROPERTIES_FILTER={AcceleratorKey:{DisplayName:"Shortcut Key",DefaultDisplay:!0,Description:"",AriaEquivalent:""},AccessKey:{DisplayName:"Access Key",DefaultDisplay:!0,Description:"",AriaEquivalent:""},AriaProperties:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},AriaRole:{DisplayName:"Role",DefaultDisplay:!0,Description:"",AriaEquivalent:"role"},AutomationId:{DisplayName:"AutomationId",DefaultDisplay:!1,Description:"",AriaEquivalent:""},BoundingRectangle:{DisplayName:"Bounding Rectangle",DefaultDisplay:!0,Description:"",AriaEquivalent:""},ClassName:{DisplayName:"Class Name",DefaultDisplay:!0,Description:"",AriaEquivalent:""},ClickablePoint:{DisplayName:"Clickable Point",DefaultDisplay:!0,Description:"",AriaEquivalent:""},Controltype:{DisplayName:"Control type",DefaultDisplay:!1,Description:"",AriaEquivalent:""},ControllerFor:{DisplayName:"Controller For",DefaultDisplay:"",Description:"",AriaEquivalent:"aria-controls"},Culture:{DisplayName:"Culture",DefaultDisplay:!0,Description:"",AriaEquivalent:""},DescribedBy:{DisplayName:"Described By",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"ExpandCollapse.ExpandCollapseState":{DisplayName:"Expanded State",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-expanded"},FlowsFrom:{DisplayName:"Flows From",DefaultDisplay:!0,Description:"",AriaEquivalent:""},FlowsTo:{DisplayName:"Flows To",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-flowto"},FrameworkId:{DisplayName:"Framework Id",DefaultDisplay:!1,Description:"",AriaEquivalent:""},"Grid.ColumnCount":{DisplayName:"Column Count",Description:"",AriaEquivalent:""},"Grid.RowCount":{DisplayName:"Row Count",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"GridItem.Column":{DisplayName:"Column",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"GridItem.ColumnSpan":{DisplayName:"Column Span",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"GridItem.ContainingGrid":{DisplayName:"Containing Grid",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"GridItem.Row":{DisplayName:"Row",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"GridItem.RowSpan":{DisplayName:"Row Span",DefaultDisplay:!0,Description:"",AriaEquivalent:""},HasKeyboardFocus:{DisplayName:"Has Keyboard Focus",DefaultDisplay:!0,Description:"",AriaEquivalent:""},HelpText:{DisplayName:"Help Text",DefaultDisplay:!0,Description:"",AriaEquivalent:""},IsContentElement:{DisplayName:"Is Content Element",DefaultDisplay:!0,Description:"",AriaEquivalent:""},IsControlElement:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},IsDataValidForForm:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},IsEnabled:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-disabled"},IsKeyboardFocusable:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},IsOffscreen:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-hidden"},IsPassword:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-secret"},IsPeripheral:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},IsRequiredForForm:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},ItemStatus:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},Itemtype:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},LabeledBy:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},Level:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},LiveSetting:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},LocalizedControltype:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},Name:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},NativeWindowHandle:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},OptimizeForVisualContent:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},Orientation:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},PositionInSet:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},ProcessId:{DisplayName:"",DefaultDisplay:!1,Description:"",AriaEquivalent:""},Providerdescription:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"RangeValue.IsReadOnly":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-readonly"},"RangeValue.LargeChange":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"RangeValue.Maximum":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-valuemax"},"RangeValue.Minimum":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-valuemin"},"RangeValue.SmallChange":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"RangeValue.Value":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-valuenow"},RuntimeId:{DisplayName:"",DefaultDisplay:!1,Description:"",AriaEquivalent:""},"Scroll.HorizontalScrollPercent":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Scroll.HorizontalViewSize":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Scroll.HorizontallyScrollable":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Scroll.VerticalScrollPercent":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Scroll.VerticalViewSize":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Scroll.VerticallyScrollable":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Selection.CanSelectMultiple":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-multiselect"},"Selection.IsSelectionRequired":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"SelectionItem.IsSelected":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"SelectionItem.SelectionContainer":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},SizeOfSet:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Table.RowOrColumnMajor":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Toggle.ToggleState":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},"Value.IsReadOnly":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:"aria-readonly"},"Value.Value":{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},LocalizedLandmarkType:{DisplayName:"",DefaultDisplay:!0,Description:"",AriaEquivalent:""},LandmarkType:{DisplayName:"",DefaultDisplay:!1,Description:"",AriaEquivalent:""}}}(e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){!function(t){"use strict";var i=e.Tools.Utility.Assert;class n extends Common.Observable{constructor(e,t,i){super();this._remoteDom=e;this._domExplorer=t;this._container=document.getElementById("accessibilityTreeViewContainer");Common.ObservableHelpers.defineProperty(n,n.IS_VISIBLE_PROPERTY_NAME,i,e=>e.onIsVisibleChanged())}selectAccessibilityNodeByDomElement(e){for(;e&&e.parentItem&&e.uid&&e.uid.startsWith("dm11_");)e=e.parentItem;this.selectAccessibilityNodeByDomElementUid(e?e.uid:null)}onPaneResize(e,t,i){this._grid.resizeCanvas()}isGridInitialized(){return!!this._grid}async getRootAccessibilityNodeId(t=0){let i=await this._remoteDom.getRootAccessibilityNodeId();if(i)return i;if(t>5){e.Tools.Utility.Assert.fail("Attempted to get root accessibility node ID but failed within the timeout period.");throw new ReferenceError("Attempted to get root accessibility node ID but failed within the timeout period.")}await Common.Async.sleep(25);return i=await this.getRootAccessibilityNodeId(t+1)}initializeSlickGrid(){let e={editable:!1,enableCellNavigation:!0,enableColumnReorder:!1,forceFitColumns:!0,rowHeight:18,tabNavigate:!1};return this.getRootAccessibilityNodeId().then(t=>this._remoteDom.getAccessibilityNodeById(t).then(t=>{this._dataView=new Common.SlickTreeDataProvider;this._dataView.addNode(t);const a=[{formatter:this.rowFormatter.bind(this),width:n.TREE_WIDTH,headerCssClass:"slickHeaderHidden"}];this._grid=new Slick.Grid(this._container,this._dataView,a,e);this._grid.onDblClick.subscribe((e,t)=>{this.handleCollapseExpand(e,t)});this._grid.onClick.subscribe((e,t)=>{e.target.classList.contains("accessibilityToggle")&&this.handleCollapseExpand(e,t)});this._grid.onKeyDown.subscribe((e,t)=>{if(null==t.row)return;const i=this._dataView.getItem(t.row);(i.collapsed&&e.keyCode===Common.KeyCodes.Plus||i.collapsed&&e.keyCode===Common.KeyCodes.ArrowRight||!i.collapsed&&e.keyCode===Common.KeyCodes.Minus||!i.collapsed&&e.keyCode===Common.KeyCodes.ArrowLeft)&&this.handleCollapseExpand(e,t)});this._grid.onActiveCellChanged.subscribe((e,t)=>{if(null==t.row){const e=this._grid.getViewport().top;let t=this._grid.getCellNode(e,0);if(t){t.tabIndex=1;t.onfocus=(e=>{const i=this._grid.getCellFromEvent(e);(t=this._grid.getCellNode(i.row,i.cell)).onfocus=null;t.tabIndex=-1;this._grid.gotoCell(i.row,i.cell)});this._domExplorer.showAccessibilityPropertiesForNode(null)}}else{i.hasValue(t.row,"must specify which row is selected");this.onActiveCellChanged(t.row)}});this._dataView.onDataChanged.subscribe(()=>{const e=this._grid.getActiveCell();this._grid.invalidate();e&&this._grid.gotoCell(e.row,e.cell)});$("#accessibilityTreeViewContainer").on("mouseenter",".slick-row",e=>{const t=this._grid.getCellFromEvent(e);if(t){const e=this._dataView.getItem(t.row),i=e.name.replace(/\s+/g," ");Microsoft.Plugin.Tooltip.show({content:e.role+": "+i})}});this._grid.resizeCanvas();this._domExplorer.horizontalPane.addResizeListener(this);return this.addChildren(this._dataView.getItemById(this._dataView.getRootNodeId())).then(()=>{this._ignoreNextSelectDomElementByAccessibilityNode=!1;this._ignoreNextSelectAccessibilityNodeByDomElement=!1;const e=this._domExplorer.getSelectedDomTreeItem();e&&this.selectAccessibilityNodeByDomElement(e)}).catch(e=>{this._domExplorer.log.push("An error ocurred while changing accessibility tree structure: "+e)})}))}async resetDataView(){this._dataView.deleteNode(this._dataView.getRootNodeId());const e=await this.getRootAccessibilityNodeId(),t=await this._remoteDom.getAccessibilityNodeById(e);this._dataView.addNode(t);const i=await this._remoteDom.getChildrenOfAccessibilityNode(e);this._dataView.addNodes(i);this._dataView.expandNode(e)}registerAccessibilityStructureChangedListenerCallback(e){this.treeMutatedCallback(e)}gainDefaultFocus(){const e=this._grid.getActiveCellNode();e&&e.focus()}selectAccessibilityNodeByDomElementUid(e){this.isGridInitialized()&&!this._ignoreNextSelectAccessibilityNodeByDomElement&&e?this._remoteDom.getAccessibilityNodeIdByDomElementId(e).then(e=>{if(e){if(!this.getSelectedElement()||this.getSelectedElement().id!==e){this._ignoreNextSelectDomElementByAccessibilityNode=!0;const t=document.activeElement;this.selectNode(e).then(()=>{t.focus()})}}else this._grid.resetActiveCell()}):this._ignoreNextSelectAccessibilityNodeByDomElement=!1}handleCollapseExpand(e,t){if(null==t.row)return;const i=this._dataView.getItem(t.row);i&&(i.collapsed&&!i.childrenRequested?this.addChildren(i):i.collapsed?this._dataView.expandNode(i.id):this._dataView.collapseNode(i.id));e.stopImmediatePropagation()}async selectNode(e){if(this._dataView.getItemById(e))this.selectNodeInTree(e);else try{const t=await this.fetchAncestorIds(e,[]);this._dataView.beginUpdate();await this.expandAncestors(t);this.selectNodeInTree(e)}finally{this._dataView.endUpdate()}}async expandAncestors(e){if(0===e.length)return;const t=this._dataView.getItemById(e.pop());try{await this.addChildren(t);await this.expandAncestors(e)}catch(e){this._domExplorer.log.push("An error happened while expanding ancestors for node id:"+t.id)}}fetchAncestorIds(e,t){return this._remoteDom.getAccessibilityNodeById(e).then(e=>{t.push(e.parentId);return!e.parentId||this._dataView.getItemById(e.parentId)?t:this.fetchAncestorIds(e.parentId,t)})}selectNodeInTree(e){if(!this._dataView.getItemById(e)){this._grid.resetActiveCell();this._ignoreNextSelectAccessibilityNodeByDomElement=!1;return}this._dataView.showNode(e);const t=this._dataView.getRowById(e),i=this._grid.getActiveCell();if(i&&i.row===t)this._domExplorer.showAccessibilityPropertiesForNode(e);else{this._grid.scrollCellIntoView(t,0,!1);this._grid.setActiveCell(t,0)}}async onIsVisibleChanged(){if(this.isVisible){await this._remoteDom.registerAccessibilityStructureChangedListener();if(this._grid){this._ignoreNextSelectDomElementByAccessibilityNode=!1;this._ignoreNextSelectAccessibilityNodeByDomElement=!1;this.selectAccessibilityNodeByDomElement(this._domExplorer.getSelectedDomTreeItem())}else this.initializeSlickGrid()}else await this.disconnectRemoteStructureListener()}async disconnectRemoteStructureListener(){await this._remoteDom.unregisterAccessibilityStructureChangedListener()}async addChildren(e){if(!e)return;e.childrenRequested=!0;e.collapsed&&this._dataView.expandNode(e.id);const t=await this._remoteDom.getChildrenOfAccessibilityNode(e.id);t.length&&this._dataView.getItemById(t[0].parentId)&&this._dataView.addNodes(t)}treeMutatedCallback(e){switch(e.structureChangeType){case 0:case 1:i.fail("unexpected StructureChangeType");break;case 2:this.onChildrenInvalidated(e.nodeId);break;case 3:this.updateName(e.nodeId,e.newName);break;default:i.fail("invalid structureChangeType")}}updateName(e,t){const i=this._dataView.getItemById(e);if(i){i.name=t;this._grid.invalidateRow(this._dataView.getRowById(e));this.executeMutationCallbackForTestContract()}}onChildrenInvalidated(e){const t=this._dataView.getItemById(e);t&&t.childrenRequested?this._remoteDom.getChildrenOfAccessibilityNode(e).then(e=>{this._dataView.beginUpdate();let i=t.firstChild;for(;i;){this._dataView.deleteNode(i.id);i=i.nextSibling}this._dataView.addNodes(e);this._dataView.endUpdate();this.executeMutationCallbackForTestContract()}):this.executeMutationCallbackForTestContract()}getSelectedElement(){if(!this._grid)return null;const e=this._grid.getActiveCell();return e?this._dataView.getItem(e.row):null}rowFormatter(e,t,i,a,s){let r;return`<span style='display:inline-block;height:0px;width:${n.INDENT_WIDTH*s.indent}px'></span>`+(r=!1===s.hasChildren?" <span class='accessibilityNodeChildless'></span>&nbsp;":s.collapsed?" <span class='accessibilityToggle nodeCollapsed'></span>&nbsp;":" <span class='accessibilityToggle nodeExpanded'></span>&nbsp;")+`<span class='accessibilityTreeData accessibilityRole'>${Common.EncodingUtilities.escapeHtml(s.role)||"div"}: </span>`+`<span class='accessibilityTreeData accessibilityName'>${Common.EncodingUtilities.escapeHtml(s.name)}</span>`}onActiveCellChanged(e){const t=this._dataView.getItem(e);this._domExplorer.showAccessibilityPropertiesForNode(t.id);if(!this._ignoreNextSelectDomElementByAccessibilityNode)return this._remoteDom.getDomNodeIdByAccessibilityId(t.id).then(e=>{if(e&&this._domExplorer.getSelectedDomTreeItem()&&this._domExplorer.getSelectedDomTreeItem().uid!==e)return this._remoteDom.getParentChainForElement(e)}).then(e=>{if(e){this._ignoreNextSelectAccessibilityNodeByDomElement=!0;this._domExplorer.selectElementFromUidChain(e,!0)}});this._ignoreNextSelectDomElementByAccessibilityNode=!1}getItemByIdForTestContract(e){return this._dataView.getItemById(e)}expandChildrenForTestContract(e){return this.addChildren(e)}addMutationCallbackListenerForTestContract(e){this._mutationCompletedCallbackForTestContract=e}getSelectedNodeForTestContract(){const e=this._grid.getActiveCell();return e?this._dataView.getItem(e.row):null}getRemoteDomForTestContract(){return this._remoteDom}selectNodeForTestContract(e){return this.selectNode(e)}executeMutationCallbackForTestContract(){if(this._mutationCompletedCallbackForTestContract){this._mutationCompletedCallbackForTestContract();this._mutationCompletedCallbackForTestContract=null}}}n.IS_VISIBLE_PROPERTY_NAME="isVisible";n.TREE_WIDTH=240;n.INDENT_WIDTH=15;t.AccessibilityViewModel=n}(e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));!function(e){!function(t){"use strict";class i extends Common.Observable{constructor(n,a){super();this._remoteDom=n;this._unfilteredAccessibilityProperties=[];this._filteredAccessibilityProperties=[];this._shouldDisplayNodeId=null;this._displayedNodeId=null;this._container=document.getElementById("accessibilityPropertiesGridContainer");this._domExplorer=a;this._isFilterActive=!0;this._filterButton=document.getElementById("accessibilityPropertiesFilterButton");this._filters=e.DomExplorer.ACCESSIBILITY_PROPERTIES_FILTER;if(this._filterButton){this._filterButton.onclick=this.onFilterButtonClicked.bind(this);this._filterButton.onkeydown=(e=>{if(e.keyCode===Common.KeyCodes.Enter){this.onFilterButtonClicked();return!1}return!0});let e=Common.ToolWindowHelpers.loadString("FilteredPropertiesToolTip");this._filterButton.classList.add("filterActive");$m("#accessibilityPropertiesFilterButton").bind("mouseover",i=>t.DomExplorerWindow.showToolTip(e));this._filterButton.setAttribute("aria-label",e)}Common.ObservableHelpers.defineProperty(i,i.IS_VISIBLE_PROPERTY_NAME,!1,e=>e.onIsVisibleChanged())}setSelectedNode(e){this._shouldDisplayNodeId=e;if(this.isVisible)if(e){this._displayedNodeId||this.makePropertiesPaneBlank();this._remoteDom.getAccessibilityProperties(e).then(t=>{this._displayedNodeId=e;this.setDisplayedProperties(t)})}else{var t=[{displayName:"",name:"",id:"ID_0",value:Common.ToolWindowHelpers.loadString("NoAccessibilityNodeSelected")}];this._unfilteredAccessibilityProperties=this._filteredAccessibilityProperties=t;this._dataView.setItems(t);this._displayedNodeId=e}}onPaneResize(e,t,i){this._grid.resizeCanvas()}toggleFilter(){this._isFilterActive=!this._isFilterActive;let e=this._grid.getActiveCell(),t=null;e&&(t=this._dataView.getItem(e.row).id);this._isFilterActive?this._dataView.setItems(this._filteredAccessibilityProperties):this._dataView.setItems(this._unfilteredAccessibilityProperties);this._grid.invalidate();if(t&&this._dataView.getItemById(t))this._grid.setActiveCell(this._dataView.getRowById(t),0);else{this._grid.resetActiveCell();this.setFocusHandler()}}setDisplayedProperties(e){this._unfilteredAccessibilityProperties=this.addIds(e);this._filteredAccessibilityProperties=this.applyFilter(this._unfilteredAccessibilityProperties);this._isFilterActive?this._dataView.setItems(this._filteredAccessibilityProperties):this._dataView.setItems(this._unfilteredAccessibilityProperties);this._grid.resetActiveCell();this._grid.invalidate();this.setFocusHandler()}onPropertyChanged(e){e.nodeId===this._displayedNodeId&&this.setDisplayedProperties(e.properties)}applyFilter(e){const t=[];for(let e of this._unfilteredAccessibilityProperties){const i=this._filters[e.name];if(i&&i.DefaultDisplay){e.displayName=""!==i.DisplayName?i.DisplayName:e.name;t.push(e)}}return t}onFilterButtonClicked(){let e,i;if(this._filterButton.classList.contains("filterActive")){this._filterButton.classList.remove("filterActive");e=Common.ToolWindowHelpers.loadString("UnfilteredPropertiesToolTip");i=Common.ToolWindowHelpers.loadString("UnfilteredPropertiesStatus")}else{this._filterButton.classList.add("filterActive");e=Common.ToolWindowHelpers.loadString("FilteredPropertiesToolTip");i=Common.ToolWindowHelpers.loadString("FilteredPropertiesStatus")}$m("#accessibilityPropertiesFilterButton").bind("mouseover",i=>t.DomExplorerWindow.showToolTip(e));this._filterButton.setAttribute("aria-label",e);this.toggleFilter();$("#accessibilityPropertiesFilterState")[0].innerText=i}makePropertiesPaneBlank(){var e=[{displayName:"",name:"",id:"ID_0",value:""}];this._grid.resetActiveCell();this.setFocusHandler();this._dataView.setItems(e)}addIds(e){for(var t=e,i=0;i<t.length;i++)t[i].id="ID_"+i;return t}onIsVisibleChanged(){if(this.isVisible){this._grid||this.initializeSlickGrid();this.isVisible&&this._shouldDisplayNodeId!==this._displayedNodeId&&this.setSelectedNode(this._shouldDisplayNodeId);this._grid.resizeCanvas()}}initializeSlickGrid(){var e={editable:!1,enableCellNavigation:!0,enableColumnReorder:!1,forceFitColumns:!0,rowHeight:18,tabNavigate:!1};this._domExplorer.accessibilityViewModel.isGridInitialized()||this._domExplorer.accessibilityViewModel.initializeSlickGrid();this._dataView=new Slick.Data.DataView;var t=[{id:"name",name:"",field:"name",width:i.COLUMN_WIDTH,formatter:this.rowFormatter.bind(this),headerCssClass:"slickHeaderHidden",alwaysEnableTooltip:!0}];this._grid=new Slick.Grid(this._container,this._dataView,t,e);this._dataView.onRowCountChanged.subscribe((e,t)=>{this._grid.invalidate()});this._dataView.onRowsChanged.subscribe((e,t)=>{this._grid.invalidate()});this._grid.onActiveCellChanged.subscribe((e,t)=>{null==t.row&&this.setFocusHandler()});$("#accessibilityPropertiesGridContainer").on("mouseenter",".accessibilityPropertyName",e=>{let t="";const i=this._grid.getCellFromEvent(e);if(i){const n=this._dataView.getItem(i.row);try{t=Common.ToolWindowHelpers.loadString("a11y_"+n.name+"_tooltip")}catch(e){t=n.displayName}Microsoft.Plugin.Tooltip.show({content:Common.EncodingUtilities.escapeHtml(t)})}});this.makePropertiesPaneBlank();this._domExplorer.horizontalPane.addResizeListener(this);this._grid.resizeCanvas();this._container.addEventListener("contextmenu",e=>this.showContextMenu(e));return this._remoteDom.registerAccessibilityPropertyChangedListener()}setFocusHandler(){let e=this._grid.getViewport().top,t=this._grid.getCellNode(e,0);if(t){t.tabIndex=1;t.onfocus=(e=>{let t=this._grid.getCellFromEvent(e),i=this._grid.getCellNode(t.row,t.cell);i.onfocus=null;i.tabIndex=-1;this._grid.gotoCell(t.row,t.cell)})}}onCopy(){let e="";var t=this._grid.getActiveCell();if(t){var i=this._dataView.getItem(t.row);e=`${i.displayName}: ${i.value}`}Common.ClipboardHelper.copyPlainText(e)}showContextMenu(e){if(this._contextMenu){this._contextMenu.dispose();this._contextMenu=null}var t=this._grid.getCellFromEvent(e);this._contextMenu=Microsoft.Plugin.ContextMenu.create(this.createContextMenuItems(),"resourceContextMenu");var i=0,n=0;if(e instanceof MouseEvent){i=e.pageX;n=e.pageY}if(i<=0&&n<=0){var a=this._grid.getCellNode(t.row,t.cell).getBoundingClientRect();i=a.left;n=a.top}this._contextMenu.show(i,n);e.preventDefault();e.stopImmediatePropagation()}createContextMenuItems(){var e=[];e.push({id:"menuItemCopySelected",callback:this.onCopyMenuItemClicked.bind(this),label:Microsoft.Plugin.Resources.getString("CopySelectedItem"),type:Microsoft.Plugin.ContextMenu.MenuItemType.command,disabled:()=>!1,accessKey:Microsoft.Plugin.Resources.getString("/Common/AccessKeyCtrlC")});return e}onCopyMenuItemClicked(){this.onCopy()}rowFormatter(e,t,i,n,a){if(""===a.displayName)return"<span class='accessibilityProperties accessibilityPropertyError'>"+a.value+"</span>";let s=Common.EncodingUtilities.escapeHtml(a.displayName),r=Common.EncodingUtilities.escapeHtml(a.value);return"<span class='accessibilityProperties accessibilityPropertyName'>"+s+"</span>:<span class='accessibilityProperties accessibilityPropertyValue' data-plugin-vs-tooltip =\""+r+'" > &nbsp;'+r+"</span>"}registerAccessibilityPropertyChangedListenerCallback(){this.onPropertyChanged.bind(this)}getItemsForTestContract(){return this._dataView.getItems()}clearFilters(){this._filters={}}}i.IS_VISIBLE_PROPERTY_NAME="isVisible";i.COLUMN_WIDTH=240;t.AccessibilityPropertiesPane=i}(e.DomExplorer||(e.DomExplorer={}))}(F12||(F12={}));
