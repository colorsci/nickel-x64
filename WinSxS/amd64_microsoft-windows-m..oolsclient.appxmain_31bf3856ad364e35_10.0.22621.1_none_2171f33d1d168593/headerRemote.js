!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=!0;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})};r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";r(r.s=12)}({0:function(e,t,r){"use strict";class n{static escapeRegExp(e){return String.prototype.replace.call(e,n.ESCAPE_USER_INPUT_REGEX,"\\$&")}static escapeRegExpWithWildCard(e){return String.prototype.replace.call(e,n.ESCAPE_USER_INPUT_REGEX,function(e){return"*"===e?".*":"\\"+e})}static wrapInQuotes(e){return'"'+String.prototype.replace.call(e,/\\"/g,'"')+'"'}static unescapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&gt;/g,">"),/&lt;/g,"<"),/&apos;/g,"'"),/&quot;/g,'"'),/&amp;/g,"&")}static escapeHtmlAndPreserveWhitespace(e){var t=[e],r=(e=String.prototype.replace.call(e,/(\r\n|\n\r|\r|\n)/g,"\r\n")).split("\r\n");if(r.length>0){t=[];for(var i=0;i<r.length;i++){var a=r[i];a="<pre>"+(a=n.escapeHtml(a))+"</pre>";t.push(a)}}return t}static escapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&/g,"&amp;"),/"/g,"&quot;"),/'/g,"&apos;"),/</g,"&lt;"),/>/g,"&gt;")}static replaceSpacesWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/ /g," ")}static replaceLineBreaksWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/[\r\n]/g," ")}}n.ESCAPE_USER_INPUT_REGEX=/([.+?^=!:${}()|\[\]\/\\])|(\*)/g;r.d(t,"a",function(){return i});r.d(t,"e",function(){return a});r.d(t,"d",function(){return s});r.d(t,"c",function(){return l});r.d(t,"b",function(){return c});var i;!function(e){e[e.Frame=0]="Frame";e[e.ExtensionContext=1]="ExtensionContext"}(i||(i={}));class a{static addListener(e,t,r,n){n?e.addEventListener(t,r,n):e.addEventListener(t,r)}static addSafeListener(e,t,r,n,i,o){var s=a.createSafeFunction(e,n,o);a.addListener(t,r,s,i);return s}static removeListener(e,t,r,n){n?e.removeEventListener(t,r,n):e.removeEventListener(t,r)}static getDefaultView(e){return e?void 0!==e.defaultView?e.defaultView:e.parentWindow:null}static isCrossSiteWindow(e,t){try{e.Object.getOwnPropertyNames(t)}catch(e){return!0}return!1}static getValidWindow(e,t,r){try{if(dom.isWindow(t)){let n=t;if(a.isCrossSiteWindow(e,t)){let i=dom.getCrossSiteWindow(e,t,r);i&&(n=i.document.defaultView)}if(n.document)return{isValid:!0,window:n.document.defaultView}}}catch(e){}return{isValid:!1,window:null}}static getValidContentWindow(e,t){try{return a.getValidWindow(e,t.contentWindow)}catch(e){return{isValid:!1}}}static originForWindow(e){return e&&e.location&&e.location.protocol&&e.location.host?n.escapeHtml(e.location.protocol+"//"+e.location.host):null}static createSafeFunction(e,t,r){return a.executeScript("(func) => { return (...args) => func(...args) }",e,!0)(browser.createSafeFunction(e,t,r))}static safeAsyncCall(e,t){let r,n;const i=new Promise((e,t)=>{r=e;n=t});let a=this.createSafeFunction(e,e=>{r(e)}),o=this.createSafeFunction(e,e=>{n(e)});t.then(a,o);return i}static executeScript(e,t,r){return diagnosticsScript.debugEval.bind(t)(e,r)}static getWindowIterator(e){return new o([e],e=>{for(var t=[],r=0;r<e.frames.length;r++){var n=a.getValidWindow(e,e.frames[r]);n.isValid&&t.push(n.window)}return t})}static getStyleSheetIterator(e,t){var r=[e];if(!t)for(var n=0;n<e.imports.length;n++)r.push(e.imports[n]);return new o(r,e=>{if(!t||!e.imports)return null;for(var r=[],n=0;n<e.imports.length;n++)r.push(e.imports[n]);return r})}static refreshBrowser(){try{browser.refresh()}catch(e){}}}class o{constructor(e,t){this._q=e;this._moreItems=t}hasNext(){return this._q.length>0}next(){if(!this.hasNext())return null;var e=this._q.pop(),t=this._moreItems(e);t&&(this._q=this._q.concat(t));return e}}class s{static propertyEvaluationFunction(e,t){var r,n;if(e.location.protocol.indexOf("http")>=0){r=s.HttpObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=s.HttpPropertyIgnorelist[r]}else if(e.location.protocol.indexOf("ms-appx")>=0){r=s.FileObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=s.FilePropertyIgnorelist[r]}return n?(e,t)=>{if(!(n.lastIndexOf(t)>=0))try{return e[t]}catch(e){return e.toString()}}:(e,t)=>e[t]}}s.HttpObjectWatchList=["[object Window]"];s.HttpPropertyIgnorelist=[["indexedDB","msIndexedDB"]];s.FileObjectWatchList=["[object Window]"];s.FilePropertyIgnorelist=[["clipboardData"]];class l{constructor(e){this._global=e;this._name=e.location.hostname+e.location.pathname}get name(){return this._name}get type(){return i.Frame}get global(){return this._global}set global(e){this._global=e}executeScript(e,t){return a.executeScript(e,browser.unwrapMirror(this._global),t)}createSafeFunction(e){return a.createSafeFunction(browser.unwrapMirror(this._global),e,!0)}addSafeListener(e,t,r,n){return a.addSafeListener(browser.unwrapMirror(this._global),e,t,r,n,!0)}}class c{constructor(e){this._extensionContext=e;let t=this._extensionContext.name;const r=t.lastIndexOf("_");r>=0&&(t=t.substr(0,r));this._name=t}get name(){return this._name}get type(){return i.ExtensionContext}get global(){return this._extensionContext.global}get extensionContext(){return this._extensionContext}executeScript(e,t){return a.executeScript(e,browser.unwrapMirror(this._extensionContext.global),t)}createSafeFunction(e){return this._extensionContext.createSafeFunction(browser.unwrapMirror(this.global),e)}addSafeListener(e,t,r,n){var i=this.createSafeFunction(r);a.addListener(e,t,i,n);return i}}},1:function(e,t,r){"use strict";r.d(t,"a",function(){return n});class n{static isTrue(e,t){if(!e){t=t?"Internal error. "+t:"Internal error. Unexpectedly false.";n.fail(t)}}static isFalse(e,t){if(e){t=t?"Internal error. "+t:"Internal error. Unexpectedly true.";n.fail(t)}}static isNull(e,t){if(null!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not null.";t+=" '"+e+"'";n.fail(t)}}static isUndefined(e,t){0;if(void 0!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not undefined.";t+=" '"+e+"'";n.fail(t)}}static hasValue(e,t){if(null===e||void 0===e){t=t?"Internal error. "+t:"Internal error. Unexpectedly "+(null===e?"null":"undefined")+".";n.fail(t)}}static areEqual(e,t,r){e!==t&&n.fail(`Error: ${r}, Unexpectedly not equal- Actual: '${e}', Expected: '${t}'`)}static areNotEqual(e,t,r){e===t&&n.fail(`Error: ${r}, Identical input passed to areNotEqual: '${e}'`)}static failDebugOnly(e){n.fail(e)}static fail(e){var t=new Error((e||"Assert failed.")+"\n");try{throw t}catch(e){e.stack&&(e.description=e.stack);throw e}}}},12:function(e,t,r){"use strict";r.r(t);r.d(t,"default",function(){return a});r.d(t,"remoteHeader",function(){return o});var n=r(2),i=r(0);class a{constructor(){this._port=toolUI.createPort("headerPort");toolUI.connect(this._port);this._rpc=new n.a("HEADER_REMOTE_0",(e,t,r)=>this.jsonRpcMethodReceive(e,t,r),(e,t)=>this.jsonRpcNotificationReceive(e,t),e=>{this._port.postMessage(e)},e=>{this._port.addEventListener("message",t=>{e(t)})});this.attach();var e=void 0;try{e=browser.document.location}catch(e){}this.onDocumentComplete(e);this.toggleAlwaysRefreshFromServer(!0)}methodCall(e,t,r,n){this._rpc.jsonRpcMethodCall(e,t,r,n)}notify(e,t){this._rpc.jsonRpcNotification(e,t)}handleSelfTestEvent(e,t){var r=this.getSelfTestIFrameWindow(e.hostType);if(!r)return!1;if(!r.handleSelfTestEvent)return!1;if("initPage"===e.eventType)return this.onInitSelfTestPage(r,e.hostType,t);r.handleSelfTestEvent(e);t(!0);return!0}onInitSelfTestPage(e,t,r){if(e.document.getElementById("selfTestPageUI"))r(!0);else{var n=e.document.createElement("script");n.onload=i.e.createSafeFunction(e,()=>r(!0));n.id="selfTestPageUI";n.src=1===t?"bhx_selfTestPageUI.js":"selfTestPageUI.js";e.document.head.appendChild(n);e.registerSelfTestEventListener&&e.registerSelfTestEventListener(i.e.createSafeFunction(e,e=>this.notify("onSelfTestPageEvent",[e])))}return!0}detach(){i.e.removeListener(toolUI,"detach",this._onDetach);i.e.removeListener(toolUI,"scripterror",this._onScriptError);i.e.removeListener(browser,"beforeScriptExecute",this._onBeforeScriptExecute);i.e.removeListener(browser,"inspectElement",this._onInspectElement);i.e.removeListener(browser,"viewSource",this._onViewSource)}attach(){i.e.addListener(toolUI,"detach",this._onDetach=this.detach.bind(this));i.e.addListener(toolUI,"scripterror",this._onScriptError=this.onScriptError.bind(this));i.e.addListener(browser,"beforeScriptExecute",this._onBeforeScriptExecute=this.onBeforeScriptExecute.bind(this));i.e.addListener(browser,"inspectElement",this._onInspectElement=this.onInspectElement.bind(this));i.e.addListener(browser,"viewSource",this._onViewSource=this.onViewSource.bind(this))}onScriptError(e){this.notify("onDiagnosticsOMScriptError",[JSON.stringify(e)])}getUid(e){return e?e===browser.document?"#root":e.nodeType===e.ELEMENT_NODE&&browser.getUniqueID?browser.getUniqueID(e):e.uniqueID:null}isAsyncMethod(e){return"handleSelfTestEvent"===e}jsonRpcMethodReceive(e,t,r){var n,i=!1;if(this.isAsyncMethod(e)){(t=t||[]).push(r);i=!0}n=t?this[e].apply(this,t):this[e].apply(this);i||r(n,void 0)}jsonRpcNotificationReceive(e,t){}onBeforeScriptExecute(e){e&&e.browserOrWindow&&(e=e.browserOrWindow);var t;try{t=i.e.getDefaultView(e.document)}catch(e){return}t===i.e.getDefaultView(browser.document)&&this.onDocumentComplete(t.location)}onInspectElement(e){if(e.target){var t=this.getUid(e.target);!t&&e.target.parent&&(t=this.getUid(e.target.parent));this.notify("onInspectElement",[t])}}onViewSource(e){this.notify("onViewSource",[e.url])}onDocumentComplete(e){this.notify("onDocumentComplete",[e?e.href:""])}refreshPage(){browser.refresh();return!0}toggleAlwaysRefreshFromServer(e){try{resources.alwaysRefreshFromServer=e}catch(e){}return!0}getSelfTestIFrameWindow(e){var t=i.e.getDefaultView(browser.document);if(1===e)return t;var r=t.document.getElementById("selftest-runner");if(!r)return null;var n=i.e.getValidContentWindow(t,r);return n.isValid?n.window:null}}const o=new a},2:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(1);class i{constructor(e,t,r,n,i){this._ourIdentifier=e;this._nextId=0;this._promiseTable={};this._jsonRpcMethodReceive=t;this._jsonRpcNotificationReceive=r;this._postMessage=n;Date.now||(Date.now=function(){return+new Date});i(e=>{this.onMessage(e)})}jsonRpcMethodCall(e,t,r,i,a){r||n.a.failDebugOnly("Trying to insert a promise into the queue without a completed function: The front end will have no way of knowing this promise completed");var s=this._ourIdentifier+"|"+this._nextId;this._nextId++;this._promiseTable[s]={completed:r,error:i};var l=JSON.stringify({id:s,method:e,params:t});if(o.RandomDelay){o.queueData(()=>{this._postMessage(l,a)},l);return!0}return this._postMessage(l,a)}jsonRpcNotification(e,t,r){var n=this._ourIdentifier+"|NULL",i=JSON.stringify({id:n,method:e,params:t});o.RandomDelay?o.queueData(()=>{this._postMessage(i,r)},i):this._postMessage(i,r)}onMessage(e){var t=JSON.parse(e.data),r=t.id.split("|");n.a.areEqual(r.length,2);"NULL"===r[1]?r[0]!==this._ourIdentifier&&this._jsonRpcNotificationReceive(t.method,t.params,t.id):r[0]!==this._ourIdentifier||t.method?o.RandomDelay?o.queueData(()=>{this.handleCall(t)},e.data):this.handleCall(t):o.RandomDelay?o.queueData(()=>{this.handleReply(t)},e.data):this.handleReply(t)}handleReply(e){if(this._promiseTable[e.id]&&this._promiseTable[e.id].completed){if(e.error){n.a.isUndefined(e.data,"Can't have both data and error");this._promiseTable[e.id].error(e.error)}else this._promiseTable[e.id].completed(e.data);delete this._promiseTable[e.id]}else n.a.failDebugOnly("Can't complete a promise that does not exist in the promise table. Probably a dup reply msg.")}handleCall(e){this._jsonRpcMethodReceive(e.method,e.params,(t,r)=>{var n;n=r?JSON.stringify({id:e.id,error:r}):JSON.stringify({id:e.id,data:t});this._postMessage(n)},e.id)}}class a{constructor(e,t){this.callback=e;this.message=t}}class o{static enableDelay(e,t){o.RandomDelay=!0;o.CalculateDelayTime=e;o.DelayedMessage=t}static disableDelay(){o.RandomDelay=!1;if(o.RandomDelayTimeout){clearTimeout(o.RandomDelayTimeout);o.RandomDelayTimeout=null;o.clearQueue()}}static queueData(e,t){var r=new a(e,t);o.DelayedQueue.push(r);if(!o.RandomDelayTimeout){var n=o.CalculateDelayTime(t);o.RandomDelayTimeout=setTimeout(o.fireRandomly,n)}}static fireRandomly(){var e=o.DelayedQueue.shift();o.DelayedMessage(e.message);e.callback();if(o.DelayedQueue.length>0){var t=o.CalculateDelayTime(o.DelayedQueue[0].message);o.RandomDelayTimeout=setTimeout(o.fireRandomly,t)}else o.RandomDelayTimeout=null}static clearQueue(){for(var e=0;e<o.DelayedQueue.length;e++){var t=o.DelayedQueue[e];o.DelayedMessage(t.message);t.callback()}o.DelayedQueue=[]}}o.RandomDelay=!1;o.DelayedQueue=[]}});
