!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};e[n].call(r.exports,r,r.exports,i);r.l=!0;return r.exports}i.m=e;i.c=t;i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})};i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})};i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";i(i.s=8)}([function(e,t,i){"use strict";class n{static escapeRegExp(e){return String.prototype.replace.call(e,n.ESCAPE_USER_INPUT_REGEX,"\\$&")}static escapeRegExpWithWildCard(e){return String.prototype.replace.call(e,n.ESCAPE_USER_INPUT_REGEX,function(e){return"*"===e?".*":"\\"+e})}static wrapInQuotes(e){return'"'+String.prototype.replace.call(e,/\\"/g,'"')+'"'}static unescapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&gt;/g,">"),/&lt;/g,"<"),/&apos;/g,"'"),/&quot;/g,'"'),/&amp;/g,"&")}static escapeHtmlAndPreserveWhitespace(e){var t=[e],i=(e=String.prototype.replace.call(e,/(\r\n|\n\r|\r|\n)/g,"\r\n")).split("\r\n");if(i.length>0){t=[];for(var r=0;r<i.length;r++){var o=i[r];o="<pre>"+(o=n.escapeHtml(o))+"</pre>";t.push(o)}}return t}static escapeHtml(e){if("string"!=typeof e){if(null===e||void 0===e)return"";e=""+e}return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,/&/g,"&amp;"),/"/g,"&quot;"),/'/g,"&apos;"),/</g,"&lt;"),/>/g,"&gt;")}static replaceSpacesWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/ /g," ")}static replaceLineBreaksWithNonBreakingSpaceEntities(e){return String.prototype.replace.call(e,/[\r\n]/g," ")}}n.ESCAPE_USER_INPUT_REGEX=/([.+?^=!:${}()|\[\]\/\\])|(\*)/g;i.d(t,"a",function(){return r});i.d(t,"e",function(){return o});i.d(t,"d",function(){return a});i.d(t,"c",function(){return l});i.d(t,"b",function(){return d});var r;!function(e){e[e.Frame=0]="Frame";e[e.ExtensionContext=1]="ExtensionContext"}(r||(r={}));class o{static addListener(e,t,i,n){n?e.addEventListener(t,i,n):e.addEventListener(t,i)}static addSafeListener(e,t,i,n,r,s){var a=o.createSafeFunction(e,n,s);o.addListener(t,i,a,r);return a}static removeListener(e,t,i,n){n?e.removeEventListener(t,i,n):e.removeEventListener(t,i)}static getDefaultView(e){return e?void 0!==e.defaultView?e.defaultView:e.parentWindow:null}static isCrossSiteWindow(e,t){try{e.Object.getOwnPropertyNames(t)}catch(e){return!0}return!1}static getValidWindow(e,t,i){try{if(dom.isWindow(t)){let n=t;if(o.isCrossSiteWindow(e,t)){let r=dom.getCrossSiteWindow(e,t,i);r&&(n=r.document.defaultView)}if(n.document)return{isValid:!0,window:n.document.defaultView}}}catch(e){}return{isValid:!1,window:null}}static getValidContentWindow(e,t){try{return o.getValidWindow(e,t.contentWindow)}catch(e){return{isValid:!1}}}static originForWindow(e){return e&&e.location&&e.location.protocol&&e.location.host?n.escapeHtml(e.location.protocol+"//"+e.location.host):null}static createSafeFunction(e,t,i){return o.executeScript("(func) => { return (...args) => func(...args) }",e,!0)(browser.createSafeFunction(e,t,i))}static safeAsyncCall(e,t){let i,n;const r=new Promise((e,t)=>{i=e;n=t});let o=this.createSafeFunction(e,e=>{i(e)}),s=this.createSafeFunction(e,e=>{n(e)});t.then(o,s);return r}static executeScript(e,t,i){return diagnosticsScript.debugEval.bind(t)(e,i)}static getWindowIterator(e){return new s([e],e=>{for(var t=[],i=0;i<e.frames.length;i++){var n=o.getValidWindow(e,e.frames[i]);n.isValid&&t.push(n.window)}return t})}static getStyleSheetIterator(e,t){var i=[e];if(!t)for(var n=0;n<e.imports.length;n++)i.push(e.imports[n]);return new s(i,e=>{if(!t||!e.imports)return null;for(var i=[],n=0;n<e.imports.length;n++)i.push(e.imports[n]);return i})}static refreshBrowser(){try{browser.refresh()}catch(e){}}}class s{constructor(e,t){this._q=e;this._moreItems=t}hasNext(){return this._q.length>0}next(){if(!this.hasNext())return null;var e=this._q.pop(),t=this._moreItems(e);t&&(this._q=this._q.concat(t));return e}}class a{static propertyEvaluationFunction(e,t){var i,n;if(e.location.protocol.indexOf("http")>=0){i=a.HttpObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=a.HttpPropertyIgnorelist[i]}else if(e.location.protocol.indexOf("ms-appx")>=0){i=a.FileObjectWatchList.lastIndexOf(Object.prototype.toString.call(t));n=a.FilePropertyIgnorelist[i]}return n?(e,t)=>{if(!(n.lastIndexOf(t)>=0))try{return e[t]}catch(e){return e.toString()}}:(e,t)=>e[t]}}a.HttpObjectWatchList=["[object Window]"];a.HttpPropertyIgnorelist=[["indexedDB","msIndexedDB"]];a.FileObjectWatchList=["[object Window]"];a.FilePropertyIgnorelist=[["clipboardData"]];class l{constructor(e){this._global=e;this._name=e.location.hostname+e.location.pathname}get name(){return this._name}get type(){return r.Frame}get global(){return this._global}set global(e){this._global=e}executeScript(e,t){return o.executeScript(e,browser.unwrapMirror(this._global),t)}createSafeFunction(e){return o.createSafeFunction(browser.unwrapMirror(this._global),e,!0)}addSafeListener(e,t,i,n){return o.addSafeListener(browser.unwrapMirror(this._global),e,t,i,n,!0)}}class d{constructor(e){this._extensionContext=e;let t=this._extensionContext.name;const i=t.lastIndexOf("_");i>=0&&(t=t.substr(0,i));this._name=t}get name(){return this._name}get type(){return r.ExtensionContext}get global(){return this._extensionContext.global}get extensionContext(){return this._extensionContext}executeScript(e,t){return o.executeScript(e,browser.unwrapMirror(this._extensionContext.global),t)}createSafeFunction(e){return this._extensionContext.createSafeFunction(browser.unwrapMirror(this.global),e)}addSafeListener(e,t,i,n){var r=this.createSafeFunction(i);o.addListener(e,t,r,n);return r}}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});class n{static isTrue(e,t){if(!e){t=t?"Internal error. "+t:"Internal error. Unexpectedly false.";n.fail(t)}}static isFalse(e,t){if(e){t=t?"Internal error. "+t:"Internal error. Unexpectedly true.";n.fail(t)}}static isNull(e,t){if(null!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not null.";t+=" '"+e+"'";n.fail(t)}}static isUndefined(e,t){0;if(void 0!==e){t=t?"Internal error. "+t:"Internal error. Unexpectedly not undefined.";t+=" '"+e+"'";n.fail(t)}}static hasValue(e,t){if(null===e||void 0===e){t=t?"Internal error. "+t:"Internal error. Unexpectedly "+(null===e?"null":"undefined")+".";n.fail(t)}}static areEqual(e,t,i){e!==t&&n.fail(`Error: ${i}, Unexpectedly not equal- Actual: '${e}', Expected: '${t}'`)}static areNotEqual(e,t,i){e===t&&n.fail(`Error: ${i}, Identical input passed to areNotEqual: '${e}'`)}static failDebugOnly(e){n.fail(e)}static fail(e){var t=new Error((e||"Assert failed.")+"\n");try{throw t}catch(e){e.stack&&(e.description=e.stack);throw e}}}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1);class r{constructor(e,t,i,n,r){this._ourIdentifier=e;this._nextId=0;this._promiseTable={};this._jsonRpcMethodReceive=t;this._jsonRpcNotificationReceive=i;this._postMessage=n;Date.now||(Date.now=function(){return+new Date});r(e=>{this.onMessage(e)})}jsonRpcMethodCall(e,t,i,r,o){i||n.a.failDebugOnly("Trying to insert a promise into the queue without a completed function: The front end will have no way of knowing this promise completed");var a=this._ourIdentifier+"|"+this._nextId;this._nextId++;this._promiseTable[a]={completed:i,error:r};var l=JSON.stringify({id:a,method:e,params:t});if(s.RandomDelay){s.queueData(()=>{this._postMessage(l,o)},l);return!0}return this._postMessage(l,o)}jsonRpcNotification(e,t,i){var n=this._ourIdentifier+"|NULL",r=JSON.stringify({id:n,method:e,params:t});s.RandomDelay?s.queueData(()=>{this._postMessage(r,i)},r):this._postMessage(r,i)}onMessage(e){var t=JSON.parse(e.data),i=t.id.split("|");n.a.areEqual(i.length,2);"NULL"===i[1]?i[0]!==this._ourIdentifier&&this._jsonRpcNotificationReceive(t.method,t.params,t.id):i[0]!==this._ourIdentifier||t.method?s.RandomDelay?s.queueData(()=>{this.handleCall(t)},e.data):this.handleCall(t):s.RandomDelay?s.queueData(()=>{this.handleReply(t)},e.data):this.handleReply(t)}handleReply(e){if(this._promiseTable[e.id]&&this._promiseTable[e.id].completed){if(e.error){n.a.isUndefined(e.data,"Can't have both data and error");this._promiseTable[e.id].error(e.error)}else this._promiseTable[e.id].completed(e.data);delete this._promiseTable[e.id]}else n.a.failDebugOnly("Can't complete a promise that does not exist in the promise table. Probably a dup reply msg.")}handleCall(e){this._jsonRpcMethodReceive(e.method,e.params,(t,i)=>{var n;n=i?JSON.stringify({id:e.id,error:i}):JSON.stringify({id:e.id,data:t});this._postMessage(n)},e.id)}}class o{constructor(e,t){this.callback=e;this.message=t}}class s{static enableDelay(e,t){s.RandomDelay=!0;s.CalculateDelayTime=e;s.DelayedMessage=t}static disableDelay(){s.RandomDelay=!1;if(s.RandomDelayTimeout){clearTimeout(s.RandomDelayTimeout);s.RandomDelayTimeout=null;s.clearQueue()}}static queueData(e,t){var i=new o(e,t);s.DelayedQueue.push(i);if(!s.RandomDelayTimeout){var n=s.CalculateDelayTime(t);s.RandomDelayTimeout=setTimeout(s.fireRandomly,n)}}static fireRandomly(){var e=s.DelayedQueue.shift();s.DelayedMessage(e.message);e.callback();if(s.DelayedQueue.length>0){var t=s.CalculateDelayTime(s.DelayedQueue[0].message);s.RandomDelayTimeout=setTimeout(s.fireRandomly,t)}else s.RandomDelayTimeout=null}static clearQueue(){for(var e=0;e<s.DelayedQueue.length;e++){var t=s.DelayedQueue[e];s.DelayedMessage(t.message);t.callback()}s.DelayedQueue=[]}}s.RandomDelay=!1;s.DelayedQueue=[]},,,,,,function(e,t,i){"use strict";i.r(t);var n=i(1),r=i(0);class o{constructor(e){this._context=e}static evaluateProperty(e,t,i,n){var r=(e,t)=>{if(e)try{var n=o.getPagePropertyDescriptor(i,e,t);return n||r(Object.getPrototypeOf(e),t)}catch(e){return"TypeError"===e.name?{}:void 0}return e},s=(e,t,r)=>{if(r){if(void 0!==r.value&&null!==r.value)return r.value;var o=typeof e;"object"!==o&&"function"!==o&&(e=new i.Object(e));if(r.isSafeGet)return n(e,t)}};return e&&s(e,t,r(e,t))}static getObjectContextPropertiesNames(e){var t=[];if(null!==e.object&&void 0!==e.object){var i=typeof e.object;"object"!==i&&"function"!==i&&(e.object=new e.windowContext.Object(e.object));var n=r.e.getValidWindow(e.windowContext,e.object,!0);n.isValid&&(e.object=e.windowContext=n.window);var o=Object.getOwnPropertyNames(e.object);o&&(t=o);for(var s=Object.getPrototypeOf(e.object);s;){var a=Object.getOwnPropertyNames(s);t=Array.prototype.concat.call(t,a);s=Object.getPrototypeOf(s)}}return t}getIntellisenseItemsForExpression(e){const t=browser.unwrapMirror(this._context.currentWindowContext.global);return this.getIntellisenseItemsForExpressionUsingWindowContext(e,t,t.window,[])}getIntellisenseItemsForExpressionUsingWindowContext(e,t,i,n){var r=this.getObjectContextForExpressionUsingEvaluator(e,t,i);let o=[];t===i&&0===e.length&&(o=o.concat(this.getConsoleGlobals(),n));return this.getIntellisenseItemsForObjectContext(r,o)}static getPagePropertyDescriptor(e,t,i){var n=function(e,t){try{window.__BROWSERTOOLS_CONSOLE_INTELLISENSE_DESCRIPTOR=null;var i=Object.getOwnPropertyDescriptor(e,t);if(i){var n=!1;i.get&&/\[native code\]/.test(i.get.toString())?n=!0:void 0===i.get&&(n=!0);window.__BROWSERTOOLS_CONSOLE_INTELLISENSE_DESCRIPTOR={value:i.value,isSafeGet:n}}}catch(e){}};try{r.e.executeScript("window.__BROWSERTOOLS_CONSOLE_INTELLISENSE_GET_DESCRIPTOR = "+n.toString(),e,!0);e.__BROWSERTOOLS_CONSOLE_INTELLISENSE_GET_DESCRIPTOR(t,i);return e.__BROWSERTOOLS_CONSOLE_INTELLISENSE_DESCRIPTOR}catch(t){return new e.Object(null)}}getObjectContextForExpressionUsingEvaluator(e,t,i){var n=e.split(".");const s=this.getConsoleGlobals();for(var a=0;a<n.length&&n[a].length>0;++a){var l=r.d.propertyEvaluationFunction(t,i);i=o.evaluateProperty(i,n[a],t,l);var d=r.e.getValidWindow(t,i,!0);d.isValid&&(i=t=d.window)}if(!i&&n.length&&n[0].length){if(s.indexOf(n[0])>=0)return{object:this.getConsoleGlobalValue(n[0]),windowContext:t}}return{object:i,windowContext:t}}getIntellisenseItemsForObjectContext(e,t){for(var i=o.getObjectContextPropertiesNames(e),n=[],r=0,s=(i=Array.prototype.concat.call(i,t)).length;r<s;r++)String.prototype.match.call(i[r],/^\d/)||n.push({name:i[r],info:""});var a=(e,t)=>e<t?-1:e>t?1:0;n=Array.prototype.sort.call(n,function(e,t){var i=a(e.name.toLowerCase(),t.name.toLowerCase());return 0===i?a(t.name,e.name):i});for(r=1;r<n.length;)n[r-1].name===n[r].name?n.splice(r,1):r++;return{choices:n}}getConsoleGlobals(){const e=diagnosticsScript.getConsoleScope();return Object.keys(e)}getConsoleGlobalValue(e){return diagnosticsScript.getConsoleScope()[e]}}class s{static reinitialize(){this._initialized=!1;this.initialize()}static getCanonicalMediaType(e){this.initialize();if(!e)return e;e=this.normalizeMediaType(e);return this.getCanonicalMediaTypeCommon(e)}static isEditableMediaType(e){this.initialize();if(!e)return!1;e=this.normalizeMediaType(e);return this.isEditableMediaTypeCommon(e)}static mediaTypeSupportsFindRefs(e){this.initialize();if(!e)return!1;e=this.normalizeMediaType(e);return this.mediaTypeSupportsFindRefsCommon(e)}static isJMCEnabledForMediaType(e){this.initialize();if(!e)return!1;e=this.normalizeMediaType(e);return this.isJMCEnabledForMediaTypeCommon(e)}static getMediaTypeForFileExtension(e,t){this.initialize();if(e){e=this.normalizeFileExtension(e);return this.getMediaTypeForFileExtensionCommon(e,t)}return this.getCanonicalFallbackMediaType(t)}static getSortedMediaTypes(e){this.initialize();if(!e)return[];var t=new Set,i=(e=e.filter(e=>{if(!e||t.has(e))return!1;t.add(e);return!0})).length;if(i<=0)return[];for(var n=new Array(i),r=new Array(i),o=0;o<i;o++){n[o]=o;var s=this.normalizeMediaType(e[o]);r[o]=this.getCanonicalMediaTypeCommon(s)}n.sort((e,t)=>{var i=this.getRank(r[e]),n=this.getRank(r[t]);return i<n?-1:i>n?1:e-t});var a=new Array(i);for(o=0;o<i;o++)a[o]=e[n[o]];return a}static registerMediaTypes(e){if(e)for(var t in e)this.registerMediaType(t,e[t])}static registerMediaType(e,t){if(e){e=this.normalizeMediaType(e);this.registerMediaTypeCommon(e,t)}}static setEditableMediaType(e,t){if(e){e=this.normalizeMediaType(e);this.setEditableMediaTypeCommon(e,t)}}static setJMCEnabledMediaType(e,t){if(e){e=this.normalizeMediaType(e);this.setJMCEnabledMediaTypeCommon(e,t)}}static registerAlternateMediaTypes(e,t){if(e&&t&&!(t.length<=0)){e=this.normalizeMediaType(e);this.registerAlternateMediaTypesCommon(e,t)}}static registerAlternateMediaType(e,t){if(e&&t){e=this.normalizeMediaType(e);t=this.normalizeMediaType(t);this.registerAlternateMediaTypeCommon(e,t)}}static registerMediaTypeFileExtensions(e,t){if(e&&t&&!(t.length<=0)){e=this.normalizeMediaType(e);this.registerMediaTypeFileExtensionsCommon(e,t)}}static registerMediaTypeFileExtension(e,t){if(t&&e){e=this.normalizeMediaType(e);t=this.normalizeFileExtension(t);this.registerMediaTypeFileExtensionCommon(e,t)}}static initialize(){if(!this._initialized){this.registerMediaTypes(this._defaultMediaTypes);this.setEditableMediaType("text/css",!0);this.setEditableMediaType("text/javascript",!0);this._initialized=!0}}static getCanonicalMediaTypeCommon(e){for(;;){var t=this._canonicalMap.get(e);if(!t)break;e=t}return e}static getMediaTypeForFileExtensionCommon(e,t){var i=this._extensionMap.get(e);return i?this.getCanonicalMediaTypeCommon(i):this.getCanonicalFallbackMediaType(t)}static isEditableMediaTypeCommon(e){for(;e;){if(this._editableMediaTypes.has(e))return!0;e=this._canonicalMap.get(e)}return!1}static isJMCEnabledForMediaTypeCommon(e){for(;e;){if(this._jmcMediaTypes.has(e))return!0;e=this._canonicalMap.get(e)}return!1}static mediaTypeSupportsFindRefsCommon(e){for(;e;){if(this._findRefsMediaTypes.has(e))return!0;e=this._canonicalMap.get(e)}return!1}static registerMediaTypeCommon(e,t){if(t){t.alternates&&t.alternates.length>0&&this.registerAlternateMediaTypesCommon(e,t.alternates);t.extensions&&t.extensions.length>0&&this.registerMediaTypeFileExtensionsCommon(e,t.extensions);"editable"in t&&this.setEditableMediaTypeCommon(e,t.editable);"canFindRefs"in t&&this.setMediaTypeCanFindRefsCommon(e,t.canFindRefs);"jmcEnabled"in t&&this.setJMCEnabledMediaTypeCommon(e,t.jmcEnabled)}}static registerAlternateMediaTypesCommon(e,t){t.forEach(t=>{if(t){t=this.normalizeMediaType(t);this.registerAlternateMediaTypeCommon(e,t)}})}static registerAlternateMediaTypeCommon(e,t){if(e!==t){for(var i=this._canonicalMap.get(e);i;){n.a.areNotEqual(i,t,"Invalid attempt to add a cyclical reference to a media type.");i=this._canonicalMap.get(i)}this._canonicalMap.set(t,e)}}static registerMediaTypeFileExtensionsCommon(e,t){t.forEach(t=>{if(t){t=this.normalizeFileExtension(t);this.registerMediaTypeFileExtensionCommon(e,t)}})}static registerMediaTypeFileExtensionCommon(e,t){this._extensionMap.set(t,e)}static setEditableMediaTypeCommon(e,t){t?this._editableMediaTypes.add(e):this._editableMediaTypes.delete(e)}static setMediaTypeCanFindRefsCommon(e,t){t?this._findRefsMediaTypes.add(e):this._findRefsMediaTypes.delete(e)}static setJMCEnabledMediaTypeCommon(e,t){t?this._jmcMediaTypes.add(e):this._jmcMediaTypes.delete(e)}static normalizeMediaType(e){var t=(e=(e=e.trim()).toLowerCase()).indexOf(";");t>-1&&(e=e.substr(0,t));return e}static normalizeFileExtension(e){"."!==(e=(e=e.trim()).toLowerCase()).charAt(0)&&(e="."+e);return e}static getRank(e){switch(e){case"text/plain":return 3;case"text/javascript":case"text/html":case"text/css":case"text/xml":return 2;case"text/typescript":case"text/coffeescript":case"text/x-csharp":case"text/less":case"text/scss":return 1;default:return 0}}static getCanonicalFallbackMediaType(e){if(e){e=this.normalizeMediaType(e);return this.getCanonicalMediaTypeCommon(e)}return"text/plain"}}s._initialized=!1;s._defaultMediaTypes={"text/html":{alternates:["text/x-jshtm","text/x.jshtm"],extensions:[".html",".htm"],jmcEnabled:!0},"text/xml":{alternates:["application/xml"],extensions:[".xml",".xsl",".svg"]},"text/javascript":{alternates:["text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-javascript","text/x-ecmascript","text/x.javascript","text/x.ecmascript","application/javascript","application/ecmascript","application/x-javascript","application/x-ecmascript","application/x.javascript","application/x.ecmascript"],extensions:[".js"],jmcEnabled:!0,canFindRefs:!0},"text/typescript":{alternates:["video/vnd.dlna.mpeg-tts","text/x.typescript","text/vnd.ms.typescript","application/typescript","application/x.typescript","application/vnd.ms.typescript"],extensions:[".ts",".str"],jmcEnabled:!0,canFindRefs:!0},"text/coffeescript":{alternates:["text/x-coffeescript","text/x.coffeescript","application/coffeescript","application/x-coffeescript","application/x.coffeescript"],extensions:[".coffee"],jmcEnabled:!0},"text/x-csharp":{alternates:[],extensions:[".cs"],jmcEnabled:!0},"text/css":{alternates:[],extensions:[".css"]},"text/less":{alternates:["text/x-less","text/x.less"],extensions:[".less"]},"text/scss":{alternates:["text/x-scss","text/x.scss"],extensions:[".sass",".scss"]}};s._extensionMap=new Map;s._canonicalMap=new Map;s._editableMediaTypes=new Set;s._findRefsMediaTypes=new Set;s._jmcMediaTypes=new Set;var a=i(2);const l="/Common/DOMExplorerMissingElementError";class d{constructor(e){this.narratorHelper=e;this._breakpoints=new Map;this._idsToUids=new Map;this._uidsToIds=new Map;this._pendingBreakpoints=new Map;this._unbounds=[];this._bpSet=[];this._bpEnabledChanged=[];this._bindFailed=[];this._pageChanged=[];this._bindPending=[];this._bindingMetrics=[];this._pendingRemoved=[]}addBreakpoint(e,t,i,n,r,o,s){this._breakpoints.set(e,{types:i,isEnabled:n,selector:r,documentUrl:o,elementUniqueId:e,breakpointId:t});this._idsToUids.set(t,e);this._uidsToIds.set(e,t);s&&this._pendingBreakpoints.delete(s);this.onDmbpSet(e,t,i,n,r,o)}unbindBreakpoint(e,t){let i=this._idsToUids.get(e);if(i){let n=this._breakpoints.get(i);this._breakpoints.delete(i);this._idsToUids.delete(e);this._uidsToIds.delete(i);this.onDmbpUnbound(i,n?n.selector:"",t)}}changeEnabledState(e,t){let i=this._idsToUids.get(e);if(i){let e=this._breakpoints.get(i);if(e){e.isEnabled=t;this.onDmbpEnabledChanged(i,t)}}}addPendingBreakpoints(e){for(let t of e)this._pendingBreakpoints.set(t.pendingId,t)}removePendingBreakpoint(e){this._pendingBreakpoints.delete(e);this.onPendingBreakpointRemoved(e)}unloadDocument(e,t=!1){if(t){this._pendingBreakpoints.clear();this._uidsToIds.clear();this._idsToUids.clear();this._breakpoints.clear()}else{let t=[];this._pendingBreakpoints.forEach(i=>{i.documentUrl===e&&t.push(i.pendingId)});for(let e of t)this._pendingBreakpoints.delete(e);let i=[],n=[];this._breakpoints.forEach(t=>{if(t.documentUrl===e){i.push(t.breakpointId);n.push(t.elementUniqueId)}});for(let e of i)this._idsToUids.delete(e);for(let e of n){this._uidsToIds.delete(e);this._breakpoints.delete(e)}}}onDmbpSet(e,t,i,n,r,o){}onDmbpUnbound(e,t,i){}onDmbpEnabledChanged(e,t){}onPendingBreakpointRemoved(e){this.fireEvent("domMutationPendingBreakpointRemoved",e)}isBreakpointSet(e,t){let i=this._breakpoints.get(e);return!!i&&i.types.indexOf(t)>-1}getBreakpointState(e){return this._breakpoints.get(e)}getBreakpointsTypesForElement(e){let t=this._breakpoints.get(e);return t?t.types.slice():[]}getDomMutationBreakpointEnabledState(e){let t=this.getBreakpointById(e);return!!t&&t.isEnabled}getBreakpointById(e){let t=this._idsToUids.get(e);return t?this._breakpoints.get(t):null}toggleBreakpointForElement(e,t){var i=this.getBreakpointsTypesForElement(e);if(-1===i.indexOf(t)){let n=i.slice();n.push(t);this.setDomMutationBreakpoint(e,n).catch(()=>{this.showError(this.getResourceString(l))});return!0}if(1===i.length){let t=this._uidsToIds.get(e);t&&this.removeDomMutationBreakpoint(t).catch(()=>{this.showError(this.getResourceString(l))})}else{i.splice(i.indexOf(t),1);this.setDomMutationBreakpoint(e,i).catch(()=>{this.showError(this.getResourceString(l))})}return!1}getBreakpoints(){let e=[];this._breakpoints.forEach(t=>{e.push(t)});return e}getPendingBreakpoints(){let e=[];this._pendingBreakpoints.forEach(t=>{e.push(t)});return e}getPendingBreakpointById(e){return this._pendingBreakpoints.get(e)}addEventListener(e,t){switch(e){case"domMutationBreakpointSet":this._bpSet.push(t);break;case"domMutationBreakpointUnbound":this._unbounds.push(t);break;case"domMutationBreakpointEnabledChanged":this._bpEnabledChanged.push(t);break;case"domMutationBreakpointBindingFailed":this._bindFailed.push(t);break;case"domMutationBreakpointPageChanged":this._pageChanged.push(t);break;case"domMutationBreakpointPendingRegistration":this._bindPending.push(t);break;case"domMutationBreakpointBindingMetrics":this._bindingMetrics.push(t);break;case"domMutationPendingBreakpointRemoved":this._pendingRemoved.push(t)}}removeEventListener(e,t){let i=-1;switch(e){case"domMutationBreakpointSet":(i=this._bpSet.indexOf(t))>-1&&this._bpSet.splice(i,1);break;case"domMutationBreakpointUnbound":(i=this._unbounds.indexOf(t))>-1&&this._unbounds.splice(i,1);break;case"domMutationBreakpointEnabledChanged":(i=this._bpEnabledChanged.indexOf(t))>-1&&this._bpEnabledChanged.splice(i,1);break;case"domMutationBreakpointBindingFailed":(i=this._bindFailed.indexOf(t))>-1&&this._bpEnabledChanged.splice(i,1);break;case"domMutationBreakpointPageChanged":(i=this._pageChanged.indexOf(t))>-1&&this._pageChanged.splice(i,1);break;case"domMutationBreakpointPendingRegistration":(i=this._bindPending.indexOf(t))>-1&&this._bindPending.splice(i,1);break;case"domMutationBreakpointBindingMetrics":(i=this._bindingMetrics.indexOf(t))>-1&&this._bindingMetrics.splice(i,1);break;case"domMutationPendingBreakpointRemoved":(i=this._pendingRemoved.indexOf(t))>-1&&this._pendingRemoved.splice(i,1)}}fireEvent(e,t){switch(e){case"domMutationBreakpointSet":this.triggerCallbacks(this._bpSet,t);break;case"domMutationBreakpointUnbound":this.triggerCallbacks(this._unbounds,t);break;case"domMutationBreakpointEnabledChanged":this.triggerCallbacks(this._bpEnabledChanged,t);break;case"domMutationBreakpointBindingFailed":this.triggerCallbacks(this._bindFailed,t);break;case"domMutationBreakpointPageChanged":this.triggerCallbacks(this._pageChanged,t);break;case"domMutationBreakpointPendingRegistration":this.triggerCallbacks(this._bindPending,t);break;case"domMutationBreakpointBindingMetrics":this.triggerCallbacks(this._bindingMetrics,t);break;case"domMutationPendingBreakpointRemoved":this.triggerCallbacks(this._pendingRemoved,t)}}tryAnnounce(e){this.narratorHelper&&this.narratorHelper.tryNarratorAnnounce(e)}showError(e){}triggerCallbacks(e,t){for(const i of e)i(t)}}class c{constructor(e,t=1e3){this.onReady=e;this.timerLength=t;this._timeout=!1}eventObserved(e){this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(()=>{this.onReady(e)},this.timerLength)}}const p=100;class h extends d{constructor(e,t,i){super(null);this.dom=e;this.remote=t;this.browser=i;this._currentNavigationCookie=0;this._wasBSEHitRecently=!1;this._bse=this._beforeScriptExecute.bind(this);this._docComplete=this._documentComplete.bind(this);this._bpUnbound=this._breakpointUnbound.bind(this);this._handleNavigate=new c(e=>{this.notifyPageChanged(e.oldUrl,e.newUrl,e.isTopLevel,e.navigationCookie)});i.addEventListener("beforeScriptExecute",this._bse);i.addEventListener("documentComplete",this._docComplete);e.addEventListener("domMutationBreakpointUnbound",this._bpUnbound)}static selectorFromElement(e){let t=e.tagName.toLowerCase(),i=!1;if(e.id){t+=`#${e.id}`;i=!0}else if(e.classList.length>0)for(let i=0;i<e.classList.length;i++)t+=`.${e.classList.item(i)}`;if(!i){const i=e.parentElement;if(i){let n=1,r=!1,o=!1;for(const t of Array.from(i.children))if(t.tagName===e.tagName)if(t===e){if(r)break;o=!0}else{o||n++;r=!0}t=r?`${this.selectorFromElement(i)} > ${t}:nth-of-type(${n})`:`${this.selectorFromElement(i)} > ${t}`}}return t}static getDomMutationBreakpointPageUrlFromLocation(e){let t=e.toString();const i=t.indexOf("#");i>-1&&(t=t.substring(0,i));return t}setDomMutationBreakpoint(e,t){return this.setDomMutationBreakpointWithPendingId(e,t)}breakpointWasUnbound(e){if(this.getBreakpointById(e)){this.unbindBreakpoint(e,!1);this.notifyBreakpointUnbound(e,!1)}}removeDomMutationBreakpoint(e){this.dom.removeDomMutationBreakpoint(e);this.notifyBreakpointUnbound(e,!0);super.unbindBreakpoint(e,!0);return Promise.resolve()}setDomMutationBreakpointEnabledState(e,t){const i=this.getBreakpointById(e);if(!i)return Promise.reject(new Error("No DOM breakpoint with that ID exists."));this.dom.setDomMutationBreakpointEnabledState(e,t);this.notifyEnabledChanged(e,t);i.isEnabled=t;return Promise.resolve()}attemptRebind(e){const t=this.getPendingBreakpointById(e);return t?this.remoteAttemptRebind(t.documentUrl,t.selector,t.types,t.wasPreviouslyEnabled,t.pendingId):Promise.reject(new Error("No such pending breakpoint found."))}remoteAttemptRebind(e,t,i,n,r){const o=this.getAllFrames().get(e);if(!o){this.notifyBindingFailed(r,"noElementsMatchedSelector");return Promise.reject(new Error("noElementsMatchedSelector"))}const s=o.document.querySelectorAll(t);if(1!==s.length){const e=0===s.length?"noElementsMatchedSelector":"tooManyElementsMatchedSelector";this.notifyBindingFailed(r,e);return Promise.reject(new Error(e))}const a=this.browser.getUniqueID(s[0]);return this.setDomMutationBreakpointWithPendingId(a,i,r).then(e=>{n||this.setDomMutationBreakpointEnabledState(e,!1);return e})}deletePendingBreakpoint(e){this.removePendingBreakpoint(e);return Promise.resolve()}disconnect(){this.browser.removeEventListener("beforeScriptExecute",this._bse);this.browser.removeEventListener("documentComplete",this._docComplete);this.dom.removeEventListener("domMutationBreakpointUnbound",this._bpUnbound);return Promise.resolve()}remoteRehydrate(e){const t=JSON.parse(e);if(t.navigationCookie!==this._currentNavigationCookie)return;if(!t.urls)return;const i=this.getAllFrames();Object.keys(t.urls).forEach(e=>{const n=i.get(e);n&&("complete"===n.document.readyState?this.hydrateBreakpointList(n,e,t.urls[e],t.navigationCookie):r.e.addSafeListener(n,n.document,"load",()=>{this.hydrateBreakpointList(n,e,t.urls[e],t.navigationCookie)}))})}clearOnUnload(){this.getBreakpoints().forEach(e=>{this.dom.removeDomMutationBreakpoint(e.breakpointId);this.notifyBreakpointUnbound(e.breakpointId,!1);super.unbindBreakpoint(e.breakpointId,!1)});return Promise.resolve()}queryDocuments(){const e=[];this.getAllFrames().forEach((t,i)=>{e.push(i)});return{navigationCookie:this._currentNavigationCookie,documents:e}}getResourceString(e,t){return""}_beforeScriptExecute(e){this._wasBSEHitRecently=!0;this.onNavigationEvent(e.browserOrWindow)}_documentComplete(e){this._wasBSEHitRecently?this._wasBSEHitRecently=!1:this.onNavigationEvent(e.browserOrWindow)}_breakpointUnbound(e){this.breakpointWasUnbound(e)}notifyBreakpointSet(e,t,i,n,r,o,s){this.remote.notify("onDomMutationBreakpointSet",[e,t,i,n,r,o,s])}notifyBreakpointUnbound(e,t){this.remote.notify("onDomMutationBreakpointUnbound",[e,t])}notifyEnabledChanged(e,t){this.remote.notify("onDomMutationBreakpointEnabledChanged",[e,t])}notifyBindingFailed(e,t){this.remote.notify("onDomMutationBreakpointBindingFailed",[e,t])}notifyPageChanged(e,t,i,n){this.remote.notify("onDomMutationBreakpointPageChanged",[e,t,i,n])}notifyBindingSuccessMetrics(e,t){this.remote.notify("onDomMutationBreakpointBindingMetrics",[e,t])}setDomMutationBreakpointWithPendingId(e,t,i){const n=this.getBreakpointState(e),r=this.dom.findElementByUniqueId(e);if(!r)return Promise.reject(new Error("No such element found."));let o=!0,s=null;i&&(s=this.getPendingBreakpointById(i))&&(o=s.wasPreviouslyEnabled);if(n){const a=this.dom.setDomMutationBreakpoint(r,t);s||(o=n.isEnabled);n.types=t;n.isEnabled=o;s&&this.removePendingBreakpoint(s.pendingId);this.notifyBreakpointSet(n.selector,e,a,t,o,n.documentUrl,i);o||this.setDomMutationBreakpointEnabledState(a,!1);return Promise.resolve(a)}{const n=h.selectorFromElement(r),a=h.getDomMutationBreakpointPageUrlFromLocation(r.ownerDocument.location),l=this.dom.setDomMutationBreakpoint(r,t);s&&this.removePendingBreakpoint(s.pendingId);this.addBreakpoint(e,l,t,o,n,a);this.notifyBreakpointSet(n,e,l,t,o,a,i);o||this.setDomMutationBreakpointEnabledState(l,!1);return Promise.resolve(l)}}hydrateBreakpointList(e,t,i,n){setTimeout(()=>{let r=0,o=0;const s=[];if(n===this._currentNavigationCookie){i.forEach(i=>{o++;const n=e.document.querySelectorAll(i.selector);if(1!==n.length){const e=0===n.length?"noElementsMatchedSelector":"tooManyElementsMatchedSelector";this.notifyBindingFailed(i.pendingBreakpointId,e);r++}else s.push(this.remoteAttemptRebind(t,i.selector,i.types,i.isEnabled,i.pendingBreakpointId))});this.logHydrationStats(s,r,o)}},p)}logHydrationStats(e,t,i){let n=0;for(const r of e){if("pending"===r.toString()){setTimeout(()=>{this.logHydrationStats(e,t,i)},500);return}"rejected"===r.toString()&&n++}this.notifyBindingSuccessMetrics(i,n+t)}getAllFrames(){const e=new Map,t=this.browser.document.defaultView;e.set(h.getDomMutationBreakpointPageUrlFromLocation(t.location),t);for(let i=1;i<t.length;i++){const n=t.frames[i];if(dom.isWindow(n)){const n=dom.getCrossSiteWindow(t,t.frames[i]),r=h.getDomMutationBreakpointPageUrlFromLocation(n.location);e.has(r)||e.set(r,n)}}return e}onNavigationEvent(e){const t=browser.document.defaultView===e;let i;const n=h.getDomMutationBreakpointPageUrlFromLocation(e.location);let r=this._currentNavigationCookie;if(t){i=this._lastObservedUrl;this._lastObservedUrl=n;r=++this._currentNavigationCookie}this._handleNavigate.eventObserved({oldUrl:i,newUrl:n,isTopLevel:t,navigationCookie:r})}}i.d(t,"default",function(){return u});i.d(t,"diagOMProvider",function(){return m});class u{constructor(){this._isInitialLoad=!0;this.onStyleSheetAdded=((e,t=!1)=>{const i=e;i.key=u.keyForStyleSheet(e);let n=this._linkElementById[e.uniqueId];if(n&&!n.parentElement&&"about:blank"===i.parentId)return;if(i.url===i.parentId)return;if(this._styleSheetInfoByKey[i.key])return;if(!(n=this._linkElementById[i.uniqueId]||this.getLinkElementForUniqueID(i.uniqueId))){if(t||"about:blank"===i.parentId)return;this._delayedStyleSheetInfos.push(i);return}const r=this._styleSheetKeysByUrl[i.url];let o=!1;for(let e=0;r&&e<r.length;e++)if(r[e]&&this._styleSheetInfoByKey[r[e]].parentId===i.parentId){o=!0;break}i.isImported=!(n&&n.href===i.url);i.parentKey=u.parentKeyForStyleSheet(i);this._linkElementById[i.uniqueId]=n;u.addToKeyedList(this._styleSheetKeysById,i.uniqueId,i.key);u.addToKeyedList(this._styleSheetKeysByUrl,i.url,i.key);this._styleSheetInfoByKey[i.key]=i;o||this.notify("styleSheetAdded",[i])});this.onStyleSheetRemoved=(e=>{if(!this._linkElementById[e.uniqueId])return;delete this._linkElementById[e.uniqueId];const t=this._styleSheetKeysById[e.uniqueId];if(t)for(const e of t){const t=this._styleSheetInfoByKey[e];u.removeFromKeyedList(this._styleSheetKeysById,t.uniqueId,t.key);u.removeFromKeyedList(this._styleSheetKeysByUrl,t.url,t.key);delete this._styleSheetInfoByKey[t.key];this.notify("styleSheetRemoved",[t])}});this._port=toolUI.createPort("debuggerDiagOMPort");this._styleSheetKeysByUrl={};this._styleSheetKeysById={};this._styleSheetInfoByKey={};this._linkElementById={};this._delayedStyleSheetInfos=[];toolUI.connect(this._port);r.e.addListener(toolUI,"detach",this.onDetach.bind(this));this._rpc=new a.a("DEBUGGER_REMOTE_3",(e,t,i)=>this.jsonRpcMethodReceive(e,t,i),(e,t)=>this.jsonRpcNotificationReceive(e,t),e=>{this._port.postMessage(e)},e=>{this._port.addEventListener("message",t=>{e(t)})});r.e.addListener(browser,"beforeScriptExecute",e=>this.onBeforeScriptExecute(e));r.e.addListener(browser,"styleSheetAdded",this.onStyleSheetAdded);r.e.addListener(browser,"styleSheetRemoved",this.onStyleSheetRemoved);browser.enumerateStyleSheets();this.onBeforeScriptExecute(null)}static keyForStyleSheet(e){return e.uniqueId+"/"+e.url}static parentKeyForStyleSheet(e){return e.isImported?e.uniqueId+"/"+e.parentId:e.parentId}static addToKeyedList(e,t,i){const n=e[t]||[];n.push(i);e[t]=n}static removeFromKeyedList(e,t,i){const n=e[t]||[],r=n.indexOf(i);if(r>=0){delete n[r];e[t]=n}}notify(e,t){this._rpc.jsonRpcNotification(e,t)}executeOnTargetPage(e,t){try{let i;if(t){if(!browser.extensionContexts.length)return!1;i=browser.unwrapMirror(browser.extensionContexts[0].global).eval(e)}else{i=r.e.getDefaultView(browser.document).eval(e)}return void 0===i||null===i||i}catch(e){return!1}}editSource(e,t,i){let o=browser.unwrapMirror(r.e.getDefaultView(browser.document));if(i.length>0)for(const e of i)o=o[e];try{n.a.hasValue(e);return diagnosticsScript.editSource(o,e,t)}catch(e){return{error:{message:e.message}}}}setEditCSSEnabled(e){if(!e){r.e.removeListener(browser,"styleSheetAdded",this.onStyleSheetAdded);r.e.removeListener(browser,"styleSheetRemoved",this.onStyleSheetRemoved)}return!0}editCSSSource(e,t){const i=this._styleSheetInfoByKey[e];if(!i)return[];const n=this._styleSheetKeysByUrl[i.url];if(!n)return[];n.map(e=>this._styleSheetInfoByKey[e]).forEach(e=>{const i=this._linkElementById[e.uniqueId],n=this.findStyleSheet(i,e);n&&(n.cssText=t)});return n.filter(t=>t!==e)}downloadUrl(e,t,i,n=null,r=null){const o=new XMLHttpRequest;try{if(i){o.onreadystatechange=(()=>{4===o.readyState&&this.onXHRComplete(!0,o,e,t,null,n,r)});o.onerror=(()=>{this.onXHRComplete(!1,o,e,t,null,n,r)});o.open("GET",e,!0);n&&o.overrideMimeType(n);o.send(null)}else{o.open("GET",e,!1);n&&o.overrideMimeType(n);try{o.send(null);this.onXHRComplete(!0,o,e,t,null,n,r)}catch(i){this.onXHRComplete(!1,o,e,t,i.message,n,r)}}}catch(i){this.onXHRComplete(!1,o,e,t,i.message,n,r)}return!0}refreshBrowser(){r.e.refreshBrowser();return!0}getWindowForOrigin(e){if(!e)return null;const t=[r.e.getDefaultView(browser.document)];for(;t.length>0;){const i=t.pop();if(r.e.originForWindow(i)===e)return i;for(let e=0;e<i.frames.length;e++){const n=r.e.getValidWindow(i,i.frames[e]);n.isValid&&t.push(n.window)}}return null}setDomMutationBreakpoint(e,t){return this._dmbpManager.setDomMutationBreakpoint(e,t)}removeDomMutationBreakpoint(e){return this._dmbpManager.removeDomMutationBreakpoint(e)}setDomMutationBreakpointEnabledState(e,t){return this._dmbpManager.setDomMutationBreakpointEnabledState(e,t)}rehydrateDomMutationBreakpoints(e){this._dmbpManager.remoteRehydrate(e);return Promise.resolve()}dmbpQueryDocuments(){return this._dmbpManager.queryDocuments()}attemptDomMutationBreakpointRebind(e,t,i,n,r){return this._dmbpManager.remoteAttemptRebind(e,t,i,n,r)}dmbpClearOnUnload(){return this._dmbpManager.clearOnUnload()}onDetach(){this._dmbpManager&&this._dmbpManager.disconnect()}onExtensionContextCreated(e){this.addIntellisenseHelper(new r.b(e))}getLinkElementForUniqueID(e){const t=dom.getElementByUniqueId(e);if(t)return t;const i=r.e.getWindowIterator(r.e.getDefaultView(browser.document));for(;i.hasNext();){const t=i.next();for(const i of Array.from(t.document.styleSheets)){const t=i.ownerNode;if(this.getUid(t)===e)return t}}return null}getUid(e){return e?browser.getUniqueID(e):null}findStyleSheet(e,t){if(!e||!e.sheet)return null;if(e.href===t.url)return e.sheet;let i,n=r.e.getStyleSheetIterator(e.sheet,!0);for(;n.hasNext();){const e=n.next();if(e.href===t.parentId){i=e;break}}if(i){n=r.e.getStyleSheetIterator(i,!1);for(;n.hasNext();){const e=n.next();if(e.href===t.url)return void 0!==e.cssText&&e}}return null}onBeforeScriptExecute(e){let t=e;const i=r.e.getDefaultView(browser.document);this.addIntellisenseHelper(new r.c(i));this._dmbpManager||(this._dmbpManager=new h(dom,this,browser));if(this._isInitialLoad){browser.extensionContexts.forEach(e=>this.onExtensionContextCreated(e));this._isInitialLoad=!1}if(!t)return;t.browserOrWindow&&(t=t.browserOrWindow);let n;try{n=r.e.getDefaultView(t.document)}catch(e){return}if(n===r.e.getDefaultView(browser.document)){this._delayedStyleSheetInfos.forEach(e=>this.onStyleSheetAdded(e,!0));this._delayedStyleSheetInfos=[]}}onXHRComplete(e,t,i,n,r,o=null,a=null){const l=e&&(this.isLocalUrl(i)||200===t.status);let d=r,c=n;if(!n)if(l)c=(c=t.getResponseHeader("content-type"))?s.getCanonicalMediaType(c):null;else{c=null;d=r||String(t.status)}let p=404!==t.status&&"unknown"!=typeof t.responseText?t.responseText:"";const h=p.toLowerCase();let u="";if(this.isLocalUrl(i)&&-1!==h.indexOf("charset=")&&-1===h.indexOf("charset=utf-8")&&null===o){let e=h.indexOf("charset=")+"charset=".length;e<p.length&&'"'===p.charAt(e)&&"'"===p.charAt(e)&&e++;u="charset=";for(;e<p.length&&'"'!==p.charAt(e)&&"'"!==p.charAt(e);){u+=p.charAt(e);e++}}else if(0===h.indexOf("@charset")&&null===o){const e=h.indexOf("@charset")+"@charset".length;u="charset="+h.substr(e,h.indexOf(";"))}if(u)this.downloadUrl(i,n,!1,u,p);else{""===p&&a&&(p=a);this.notify("onDownloadUrlComplete",[l,i,p,c,d])}}jsonRpcMethodReceive(e,t,i){let n;(n=t?this[e].apply(this,t):this[e].apply(this)).then&&"function"==typeof n.then?n.then(i).catch(e=>{i(void 0,e)}):i(n,void 0)}jsonRpcNotificationReceive(e,t){}isLocalUrl(e){return e&&(0===e.indexOf("file://")||0===e.indexOf("ms-browser-extension://"))}getIntellisenseItemsForExpression(e,t,i,n){const s=r.e.getDefaultView(browser.document),a=new o({currentWindowContext:new r.c(s)});let l;return l=t?a.getIntellisenseItemsForExpressionUsingWindowContext(e,t,i,n):a.getIntellisenseItemsForExpression(e)}performBreakmodeIntellisense(e,t,i,n,r){const o=Array.prototype.map.call(r,e=>String(e)),s=this.getIntellisenseItemsForExpression(t,i,n,o);this.notify("onIntellisenseRequestComplete",[e,s])}addIntellisenseHelperOnFrames(e){const t=e.global;if(t.frames)for(let e=0,i=t.frames.length;e<i;e++){const i=t.frames[e],n=r.e.getValidWindow(t,i);n.isValid&&this.addIntellisenseHelper(new r.c(n.window))}}addIntellisenseHelper(e){const t=browser.unwrapMirror(e.global);let i=!0;if(e.type===r.a.Frame&&t&&!t.Object)try{e.executeScript("",!0)}catch(e){i=!1}if(i){const i=new t.Object;t.__BROWSERTOOLS_DEBUGGER=i;const n=(e,t,i,n,r)=>{this.performBreakmodeIntellisense(e,t,i,n,r)};e.type===r.a.Frame?i.performBreakmodeIntellisense=browser.createSafeFunction(t,n,!0):i.performBreakmodeIntellisense=e.createSafeFunction(n)}e.type===r.a.Frame&&this.addIntellisenseHelperOnFrames(e)}}const m=new u}]);
