USB4View.SidebarDeviceRouter=(class{constructor(n,t,i){this._konvaDeviceRouter=i;this._deviceRouter=n;this._sidebarDivId=t;this._sidebarDivElement=document.getElementById(t);this._sidebarDivElement.innerHTML="";this._deviceRouterTableProperties={domainId:" Domain ID",topologyId:"Topology ID",vendorName:"Vendor Name",modelName:"Model Name",productId:"Product ID"};this._portTableProperties={"connectedDeviceRouter.connectedPort":"Connected Port","connectedDeviceRouter.domainId":"Connected DomainId","connectedDeviceRouter.topologyId":"Connected TopologyId",isLaneAdaptersBonded:"Lane Bonded?",lane0Adapter:"Lane 0",lane1Adapter:"Lane 1",currentLinkSpeed:"Current Link Speed",negotiatedLinkWidth:"Negotiated Link Width",targetLinkSpeed:"Target Link Speed",targetLinkWidth:"Target Link Width"};this._toggledAdapters=new Set;this._componentTables={}}render(){this._generateDeviceRouterInfoBox();this._generatePortInfoBoxes();this._generateAdapterInfoBoxes();this._deviceRouter.onPortInfoChange=n=>{let i=this._componentTables["port"+n.portNumber+"Table"],t=[];Object.keys(this._portTableProperties).forEach(i=>{USB4View.appendPropertyValue(t,i,this._portTableProperties[i],n)});i.view.setItems(t)}}destroy(){this._sidebarDivElement.innerHTML=""}_generateDeviceRouterInfoBox(){let n=$(document.createElement("div")).addClass("info-box").attr("tabindex",0).attr("aria-label",this._deviceRouter.pnpDeviceDescription).appendTo(this._sidebarDivElement);$(document.createElement("div")).addClass("collapsible-header main-info sidebar-center").append("<a>"+this._deviceRouter.pnpDeviceDescription+"<\/a>").on("click",USB4View.onCollapsibleHeaderClick).appendTo(n);$(document.createElement("div")).addClass("info-table commonTable collapsible-content").attr("style","display: block;").attr("id","deviceRouterTable").appendTo(n);let t=[];Object.keys(this._deviceRouterTableProperties).forEach(n=>{USB4View.appendPropertyValue(t,n,this._deviceRouterTableProperties[n],this._deviceRouter)});USB4View.createSlickGridTable("deviceRouterTable",t,this)}_generatePortInfoBoxes(){let n=$(document.createElement("div")).addClass("info-container").appendTo(this._sidebarDivElement).append('<div class="info-separator"><span>Ports<\/span><\/div>');this._deviceRouter.ufp&&this._addPortInfoBox(this._deviceRouter.ufp,n,!1);this._deviceRouter.dfps.forEach(t=>{this._addPortInfoBox(t,n,!0)})}_addPortInfoBox(n,t,i){let r=$(document.createElement("div")).addClass("info-box").attr("tabindex",0).attr("aria-label","Port "+n.portNumber+" "+(i?"DFP":"UFP")).appendTo(t);$(document.createElement("div")).addClass("collapsible-header main-info").on("click",USB4View.onCollapsibleHeaderClick).append("<a>"+(i?"DFP":"UFP")+": "+n.portNumber+"<\/a>").appendTo(r);$(document.createElement("div")).addClass("info-table commonTable collapsible-content").attr("style","display: block;").attr("id","port"+n.portNumber+"Table").appendTo(r);let u=[];Object.keys(this._portTableProperties).forEach(t=>{USB4View.appendPropertyValue(u,t,this._portTableProperties[t],n)});USB4View.createSlickGridTable("port"+n.portNumber+"Table",u,this)}_generateAdapterInfoBoxes(){let n=$(document.createElement("div")).addClass("info-container").appendTo(this._sidebarDivElement).append('<div class="info-separator"><span>Adapters<\/span><\/div>');this._deviceRouter.adapters.forEach(t=>{let i=t.kind+this._adapterDirection(t)+" Adapter "+t.adapterNumber,r=$(document.createElement("div")).addClass("main-info").attr("style",this._adapterBoxColor(t)).addClass(()=>this._toggledAdapters.has(t.adapterNumber)?"selected":"").append("<a>"+i+"<\/a>");$(document.createElement("div")).addClass("info-box").attr("tabindex",0).attr("aria-label",i).on("click",()=>{this._konvaDeviceRouter.toggleAdapterHighlight(t),r.toggleClass("selected"),this._toggledAdapters.has(t.adapterNumber)?this._toggledAdapters.delete(t.adapterNumber):this._toggledAdapters.add(t.adapterNumber)}).append(r).appendTo(n)})}_adapterBoxColor(n){switch(n.kind){case USB4View.Lane:return null;case USB4View.USB3:return"background-color: "+USB4View.KonvaProtocolUSB3Color+";";case USB4View.PCIe:return"background-color: "+USB4View.KonvaProtocolPCIeColor+";";case USB4View.DP:return"background-color: "+USB4View.KonvaProtocolDPColor+";";default:return console.log("AdapterKind: "+adapterKind+" does not exists"),null}}_adapterDirection(n){switch(n.kind){case USB4View.Lane:return"";case USB4View.USB3:case USB4View.PCIe:return n.isDownstream?" DN":" UP";case USB4View.DP:return n.isDownstream?" OUT":" IN";default:return console.log("AdapterKind: "+adapterKind+" does not exists"),""}}})