var USB4View=USB4View?USB4View:{};USB4View.UFPBaseHeight=75;USB4View.UFPBaseWidth=375;USB4View.UFPLaneAdapterPad=5;USB4View.UFPPortNumberBoxHeight=40;USB4View.UFPPortNumberBoxWidth=20;USB4View.KonvaUFP=(class{constructor(n,t){this._container=t;this.port=n;this._group=new Konva.Group;this._boundingRect=new Konva.Rect({width:USB4View.UFPBaseWidth,height:USB4View.UFPBaseHeight,stroke:"black",strokeWidth:USB4View.STROKEWIDTH,fill:"grey"});this._group.add(this._boundingRect);this._portNumberGroup=new Konva.Group({x:USB4View.DefaultPad,y:USB4View.UFPBaseHeight/2-USB4View.UFPPortNumberBoxHeight/2});this._portNumberBox=new Konva.Rect({width:USB4View.UFPPortNumberBoxWidth,height:USB4View.UFPPortNumberBoxHeight,stroke:"black",fill:"white",strokeWidth:3});this._portNumberText=new Konva.Text({width:this._portNumberBox.width(),height:this._portNumberBox.height(),text:n.portNumber,fontSize:20,fontFamily:"Consolas",align:"center",verticalAlign:"middle"});this._portNumberGroup.add(this._portNumberBox,this._portNumberText);this._group.add(this._portNumberGroup);const i=USB4View.DefaultPad+this._portNumberBox.width()+USB4View.DefaultPad;this._lane0AdapterGroup=this._drawLaneAdapter(n.lane0Adapter,i,USB4View.UFPLaneAdapterPad);this._lane1AdapterGroup=this._drawLaneAdapter(n.lane1Adapter,i,USB4View.UFPBaseHeight-USB4View.UFPLaneAdapterPad-USB4View.LaneAdapterBoundingCircleRadius*2);this._dpOutGroup=new USB4View.KonvaDPGroup(this._group,!1);this._dpOutGroup.setPosition(this._boundingRect.width()-USB4View.DefaultPad-this._dpOutGroup.width,USB4View.DefaultPad);this._konvaPCIeUSB3Adapters={};this._lane0Toggled=!1;this._lane1Toggled=!1;this.konvaObject=null}static get baseWidth(){return USB4View.UFPBaseWidth}static get baseHeight(){return USB4View.UFPBaseHeight}containsPCIeUSB3DownOrDPAdapter(n){return this._dpOutGroup.containsDPAdapter(n)}toggleAdapterHighlight(n){this.port.lane0Adapter==n.adapterNumber?this._toggleLaneAdapterHighlight(!0):this.port.lane1Adapter==n.adapterNumber?this._toggleLaneAdapterHighlight(!1):this._dpOutGroup.containsDPAdapter(n.adapterNumber)?this._dpOutGroup.toggleDPAdapterHighlight(n.adapterNumber):n.adapterNumber in this._konvaPCIeUSB3Adapters&&this._konvaPCIeUSB3Adapters[n.adapterNumber].toggleHighlight()}setPosition(n,t){this._group.setAttrs({x:n,y:t});this.konvaObject==null&&(this.konvaObject=this._group,this._container.add(this.konvaObject))}addAdapter(n){n&&!n.isDrawn()&&(n.adapter.kind==USB4View.USB3||n.adapter.kind==USB4View.PCIe?this._addPCIeUSBAdapter(n):n.adapter.kind==USB4View.DP&&this._addDPAdapter(n))}removeAdapter(n){return this.containsPCIeUSB3DownOrDPAdapter(n)?this._dpOutGroup.containsDPAdapter(n)?this._removeDPAdapter(n):void 0:null}_addPCIeUSBAdapter(n){const t=this._lane0AdapterGroup.x()+USB4View.LaneAdapterBoundingCircleRadius*2+USB4View.DefaultPad,i=Object.keys(this._konvaPCIeUSB3Adapters).length*(USB4View.KonvaProtocolAdapter.baseWidth+USB4View.DefaultPad),r=(this._boundingRect.height()-USB4View.KonvaProtocolAdapter.baseHeight)/2;n.setPosition(t+i,r,this._group);this._konvaPCIeUSB3Adapters[n.adapter.adapterNumber]=n}_addDPAdapter(n){n&&this._dpOutGroup.addDPAdapter(n)}_removeDPAdapter(n){return this._dpOutGroup.removeDPAdapter(n)}_drawLaneAdapter(n,t,i){let r=new Konva.Group({x:t,y:i});const u=new Konva.Circle({x:USB4View.LaneAdapterBoundingCircleRadius,y:USB4View.LaneAdapterBoundingCircleRadius,radius:USB4View.LaneAdapterBoundingCircleRadius,stroke:"black",fill:"black",strokeWidth:USB4View.STROKEWIDTH}),f=new Konva.Text({width:u.radius()*2,height:u.radius()*2,text:n,fontSize:20,fontFamily:"Consolas",fill:"white",align:"center",verticalAlign:"middle"});return r.add(u,f),this._group.add(r),r}_toggleLaneAdapterHighlight(n){if(n){let n=this._lane0AdapterGroup.children[0];this._lane0Toggled?(this._lane0Toggled=!1,n.setAttrs(USB4View.KonvaUntoggledProperty)):(this._lane0Toggled=!0,n.setAttrs(USB4View.KonvaToggledProperty))}else{let n=this._lane1AdapterGroup.children[0];this._lane1Toggled?(this._lane1Toggled=!1,n.setAttrs(USB4View.KonvaUntoggledProperty)):(this._lane1Toggled=!0,n.setAttrs(USB4View.KonvaToggledProperty))}}})