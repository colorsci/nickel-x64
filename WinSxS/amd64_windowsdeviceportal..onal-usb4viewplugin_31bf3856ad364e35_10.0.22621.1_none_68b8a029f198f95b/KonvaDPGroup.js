var USB4View=USB4View?USB4View:{};USB4View.DPAdapterHeight=30;USB4View.DPAdapterWidth=30;USB4View.DPGroupDPAdapterColor="#c44a26";USB4View.DPGroupDPAdapterToggledProperty={fill:"rgb(20, 42, 104)"};USB4View.DPGroupDPAdapterUntoggledProperty={fill:USB4View.DPGroupDPAdapterColor};USB4View.DPGroupHorizontalOuterPad=5;USB4View.DPGroupInnerPad=5;USB4View.DPGroupLandspaceGridSize=4;USB4View.DPGroupPortraitGridSize=2;USB4View.DPGroupVerticalOuterPad=5;USB4View.DPInGroupBaseHeight=100;USB4View.DPInGroupBaseWidth=75;USB4View.DPInTextBoxHeight=20;USB4View.DPOutGroupBaseHeight=65;USB4View.DPOutGroupBaseWidth=145;USB4View.DPOutTextBoxHeight=15;USB4View.DPGroupMaxAdapters=4;USB4View.KonvaDPGroup=(class{constructor(n,t){this._container=n;this._dpAdaptersInGroup={};this._dpAdapters={};this._portBaseWidth=t?USB4View.DPInGroupBaseWidth:USB4View.DPOutGroupBaseWidth;this._portBaseHeight=t?USB4View.DPInGroupBaseHeight:USB4View.DPOutGroupBaseHeight;this._textBoxHeight=t?USB4View.DPInTextBoxHeight:USB4View.DPOutTextBoxHeight;this._dpAdaptersGridWidth=t?USB4View.DPGroupPortraitGridSize:USB4View.DPGroupLandspaceGridSize;this._group=new Konva.Group;this._boundingRect=new Konva.Rect({width:this._portBaseWidth,height:this._portBaseHeight,stroke:"black",strokeWidth:USB4View.STROKEWIDTH,fill:"black"});this._group.add(this._boundingRect);this._descText=new Konva.Text({y:USB4View.DefaultPad,text:USB4View.DP+" "+(t?USB4View.IN:USB4View.OUT),width:this._boundingRect.width(),height:this._textBoxHeight,fontFamily:"Consolas",fontSize:22,align:"center",verticalAlign:"middle",fill:"white"});this._group.add(this._descText);this._adaptersGroup=new Konva.Group({y:this._descText.height()+USB4View.DefaultPad});this._group.add(this._adaptersGroup);this.konvaObject=null}setPosition(n,t){this._group.setAttrs({x:n,y:t});this.konvaObject==null&&(this.konvaObject=this._group,this._container.add(this.konvaObject))}remove(){this.konvaObject.remove();this.konvaObject=null}isDrawn(){return this.konvaObject!=null&&this.konvaObject.getParent()!=null}addDPAdapter(n){if(n&&!n.isDrawn()){this._dpAdapters[n.adapter.adapterNumber]=n;let t=this._generateDPAdapterInGroup(n.adapter);const i=Object.keys(this._dpAdaptersInGroup).length,{xPos:r,yPos:u}=this._calculateDPAdapterInDPGroupPos(i);t.setAttrs({x:r,y:u});this._adaptersGroup.add(t);this._dpAdaptersInGroup[n.adapter.adapterNumber]=t;this._setDPAdapterInDPGroupToggleProperty(n.adapter.adapterNumber)}}removeDPAdapter(n){if(!this.containsDPAdapter(n))return null;let t=this._dpAdapters[n];delete this._dpAdapters[n];let i=this._dpAdaptersInGroup[n];return i.remove(),delete this._dpAdaptersInGroup[n],Object.values(this._dpAdaptersInGroup).forEach((n,t)=>{const{xPos:i,yPos:r}=this._calculateDPAdapterInDPGroupPos(t);n.setAttrs({x:i,y:r})}),t}get height(){return this._portBaseHeight}get width(){return this._portBaseWidth}get size(){return Object.keys(this._dpAdaptersInGroup).length}static get maxDPAdapters(){return USB4View.DPGroupMaxAdapters}containsDPAdapter(n){return n in this._dpAdapters}toggleDPAdapterHighlight(n){this._dpAdapters[n].toggleHighlight();this._setDPAdapterInDPGroupToggleProperty(n)}_calculateDPAdapterInDPGroupPos(n){const t=n%this._dpAdaptersGridWidth,i=Math.floor(n/this._dpAdaptersGridWidth),r=USB4View.DPGroupHorizontalOuterPad+t*(USB4View.DPAdapterWidth+USB4View.DPGroupInnerPad),u=USB4View.DPGroupVerticalOuterPad+i*(USB4View.DPAdapterHeight+USB4View.DPGroupInnerPad);return{xPos:r,yPos:u}}_generateDPAdapterInGroup(n){let i=new Konva.Group,t=new Konva.Rect({width:USB4View.DPAdapterWidth,height:USB4View.DPAdapterHeight,stroke:"black",fill:USB4View.DPGroupDPAdapterColor,strokeWidth:USB4View.STROKEWIDTH}),r=new Konva.Text({text:n.adapterNumber,width:t.width(),height:t.height(),fontFamily:"Consolas",fontSize:18,align:"center",verticalAlign:"middle",fill:"white"});return i.add(t,r),i}_setDPAdapterInDPGroupToggleProperty(n){let t=this._dpAdaptersInGroup[n].children[0];this._dpAdapters[n].isToggled?t.setAttrs(USB4View.DPGroupDPAdapterToggledProperty):t.setAttrs(USB4View.DPGroupDPAdapterUntoggledProperty)}})