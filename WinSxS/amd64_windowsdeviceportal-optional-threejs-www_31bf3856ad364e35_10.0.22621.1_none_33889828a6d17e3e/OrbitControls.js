"use strict";THREE.OrbitControls=function(n,t,i){function g(){return Math.PI/1800*r.autoRotateSpeed}function it(){return Math.pow(.95,r.zoomSpeed)}function rt(n){if(r.enabled!==!1){if(n.preventDefault(),n.button===0){if(r.noRotate===!0)return;f=u.ROTATE;e.set(n.clientX,n.clientY)}else if(n.button===1){if(r.noZoom===!0)return;f=u.DOLLY;l.set(n.clientX,n.clientY)}else if(n.button===2){if(r.noPan===!0)return;f=u.PAN;h.set(n.clientX,n.clientY)}r.domElement.addEventListener("mousemove",ut,!1);r.domElement.addEventListener("mouseup",ft,!1)}}function ut(n){if(r.enabled!==!1){n.preventDefault();var t=r.domElement===document?r.domElement.body:r.domElement;if(f===u.ROTATE){if(r.noRotate===!0)return;o.set(n.clientX,n.clientY);s.subVectors(o,e);r.rotateLeft(2*Math.PI*s.x/t.clientWidth*r.rotateSpeed);r.rotateUp(2*Math.PI*s.y/t.clientHeight*r.rotateSpeed);e.copy(o)}else if(f===u.DOLLY){if(r.noZoom===!0)return;a.set(n.clientX,n.clientY);y.subVectors(a,l);y.y>0?r.dollyIn():r.dollyOut();l.copy(a)}else if(f===u.PAN){if(r.noPan===!0)return;c.set(n.clientX,n.clientY);v.subVectors(c,h);r.pan(v);h.copy(c)}r.update()}}function ft(){r.enabled!==!1&&(r.domElement.removeEventListener("mousemove",ut,!1),r.domElement.removeEventListener("mouseup",ft,!1),f=u.NONE)}function b(n){if(n.stopPropagation(),n.preventDefault(),r.enabled!==!1&&r.noZoom!==!0){var t=0;n.wheelDelta?t=n.wheelDelta:n.detail&&(t=-n.detail);t>0?r.dollyOut():r.dollyIn()}}function et(n){if(r.enabled!==!1&&r.noKeys!==!0&&r.noPan!==!0){n.preventDefault();switch(n.keyCode){case r.keys.UP:r.keyControlState.Up=!0;break;case r.keys.BOTTOM:r.keyControlState.Down=!0;break;case r.keys.LEFT:r.keyControlState.Left=!0;break;case r.keys.RIGHT:r.keyControlState.Right=!0;break;case r.keys.W:r.keyControlState.W=!0;break;case r.keys.A:r.keyControlState.A=!0;break;case r.keys.S:r.keyControlState.S=!0;break;case r.keys.D:r.keyControlState.D=!0;break;case r.keys.PgUp:r.keyControlState.PgUp=!0;break;case r.keys.PgDown:r.keyControlState.PgDown=!0}}}function ot(n){switch(n.keyCode){case r.keys.UP:r.keyControlState.Up=!1;break;case r.keys.BOTTOM:r.keyControlState.Down=!1;break;case r.keys.LEFT:r.keyControlState.Left=!1;break;case r.keys.RIGHT:r.keyControlState.Right=!1;break;case r.keys.W:r.keyControlState.W=!1;break;case r.keys.A:r.keyControlState.A=!1;break;case r.keys.S:r.keyControlState.S=!1;break;case r.keys.D:r.keyControlState.D=!1;break;case r.keys.PgUp:r.keyControlState.PgUp=!1;break;case r.keys.PgDown:r.keyControlState.PgDown=!1}}function st(n){if(r.enabled!==!1)switch(n.touches.length){case 1:if(r.noRotate===!0)return;f=u.TOUCH_ROTATE;e.set(n.touches[0].pageX,n.touches[0].pageY);break;case 2:if(r.noZoom===!0)return;f=u.TOUCH_DOLLY;var t=n.touches[0].pageX-n.touches[1].pageX,i=n.touches[0].pageY-n.touches[1].pageY,o=Math.sqrt(t*t+i*i);l.set(0,o);break;case 3:if(r.noPan===!0)return;f=u.TOUCH_PAN;h.set(n.touches[0].pageX,n.touches[0].pageY);break;default:f=u.NONE}}function ht(n){var t;if(r.enabled!==!1){n.preventDefault();n.stopPropagation();t=r.domElement===document?r.domElement.body:r.domElement;switch(n.touches.length){case 1:if(r.noRotate===!0)return;if(f!==u.TOUCH_ROTATE)return;o.set(n.touches[0].pageX,n.touches[0].pageY);s.subVectors(o,e);r.rotateLeft(2*Math.PI*s.x/t.clientWidth*r.rotateSpeed);r.rotateUp(2*Math.PI*s.y/t.clientHeight*r.rotateSpeed);e.copy(o);break;case 2:if(r.noZoom===!0)return;if(f!==u.TOUCH_DOLLY)return;var i=n.touches[0].pageX-n.touches[1].pageX,p=n.touches[0].pageY-n.touches[1].pageY,w=Math.sqrt(i*i+p*p);a.set(0,w);y.subVectors(a,l);y.y>0?r.dollyOut():r.dollyIn();l.copy(a);break;case 3:if(r.noPan===!0)return;if(f!==u.TOUCH_PAN)return;c.set(n.touches[0].pageX,n.touches[0].pageY);v.subVectors(c,h);r.pan(v);h.copy(c);break;default:f=u.NONE}}}function ct(){r.enabled!==!1&&(f=u.NONE)}this.object=n;this.domElement=t!==undefined?t:document;this.localElement=i!==undefined?i:document;this.enabled=!0;this.target=new THREE.Vector3;this.center=this.target;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=7;this.keyRotateSpeed=.01;this.keyZoomSpeed=.01;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,W:87,A:65,S:83,D:68,PgUp:33,PgDown:34};this.keyControlState={Left:!1,Right:!1,Up:!1,Down:!1,W:!1,A:!1,S:!1,D:!1,PgUp:!1,PgDown:!1};this.keysDown=0;var r=this,nt=1e-6,e=new THREE.Vector2,o=new THREE.Vector2,s=new THREE.Vector2,h=new THREE.Vector2,c=new THREE.Vector2,v=new THREE.Vector2,l=new THREE.Vector2,a=new THREE.Vector2,y=new THREE.Vector2,k=0,d=0,p=1,w=new THREE.Vector3,tt=new THREE.Vector3,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},f=u.NONE,lt={type:"change"};this.rotateLeft=function(n){n===undefined&&(n=g());d-=n};this.rotateUp=function(n){n===undefined&&(n=g());k-=n};this.panLeft=function(n){var t=new THREE.Vector3,i=this.object.matrix.elements;t.set(i[0],i[1],i[2]);t.multiplyScalar(-n);w.add(t)};this.panUp=function(n){var t=new THREE.Vector3,i=this.object.matrix.elements;t.set(i[4],i[5],i[6]);t.multiplyScalar(n);w.add(t)};this.pan=function(n){var t=r.domElement===document?r.domElement.body:r.domElement;if(r.object.fov!==undefined){var u=r.object.position,f=u.clone().sub(r.target),i=f.length();i*=Math.tan(r.object.fov/2*Math.PI/180);r.panLeft(2*n.x*i/t.clientHeight);r.panUp(2*n.y*i/t.clientHeight)}else r.object.top!==undefined?(r.panLeft(n.x*(r.object.right-r.object.left)/t.clientWidth),r.panUp(n.y*(r.object.top-r.object.bottom)/t.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(n){n===undefined&&(n=it());p/=n};this.dollyOut=function(n){n===undefined&&(n=it());p*=n};this.update=function(){var u=new THREE.Vector2,e,o,i;u.x=r.keyControlState.Left*r.keyPanSpeed+r.keyControlState.Right*-r.keyPanSpeed;u.y=r.keyControlState.Down*-r.keyPanSpeed+r.keyControlState.Up*r.keyPanSpeed;r.pan(u);e=r.keyControlState.W*r.keyRotateSpeed+r.keyControlState.S*-r.keyRotateSpeed;r.rotateUp(e);o=r.keyControlState.A*r.keyRotateSpeed+r.keyControlState.D*-r.keyRotateSpeed;r.rotateLeft(o);r.dollyIn(1+r.keyControlState.PgUp*r.keyZoomSpeed);r.dollyOut(1+r.keyControlState.PgDown*r.keyZoomSpeed);var s=this.object.position,n=s.clone().sub(this.target),f=Math.atan2(n.x,n.z),t=Math.atan2(Math.sqrt(n.x*n.x+n.z*n.z),n.y);this.autoRotate&&this.rotateLeft(g());f+=d;t+=k;t=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,t));t=Math.max(nt,Math.min(Math.PI-nt,t));i=n.length()*p;i=Math.max(this.minDistance,Math.min(this.maxDistance,i));this.target.add(w);n.x=i*Math.sin(t)*Math.sin(f);n.y=i*Math.cos(t);n.z=i*Math.sin(t)*Math.cos(f);s.copy(this.target).add(n);this.object.lookAt(this.target);d=0;k=0;p=1;w.set(0,0,0);tt.distanceTo(this.object.position)>0&&(this.dispatchEvent(lt),tt.copy(this.object.position))};this.dispose=function(){this.localElement.removeEventListener("mousedown",rt,!1);this.localElement.removeEventListener("mousewheel",b,!1);this.localElement.removeEventListener("DOMMouseScroll",b,!1);this.domElement.removeEventListener("keydown",et,!1);this.domElement.removeEventListener("keyup",ot,!1);this.localElement.removeEventListener("touchstart",st,!1);this.domElement.removeEventListener("touchend",ct,!1);this.domElement.removeEventListener("touchmove",ht,!1)};this.localElement.addEventListener("contextmenu",function(n){n.preventDefault()},!1);this.localElement.addEventListener("mousedown",rt,!1);this.localElement.addEventListener("mousewheel",b,!1);this.localElement.addEventListener("DOMMouseScroll",b,!1);this.domElement.addEventListener("keydown",et,!1);this.domElement.addEventListener("keyup",ot,!1);this.localElement.addEventListener("touchstart",st,!1);this.domElement.addEventListener("touchend",ct,!1);this.domElement.addEventListener("touchmove",ht,!1)};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype)