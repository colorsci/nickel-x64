function AppDeploymentControl(n){function pt(n){$("#wdp-launcher-deploycommand").prop("disabled",n)}function wt(n){n.wrap("<form>").parent("form").trigger("reset");n.unwrap()}function bt(n){ti(n)===null&&(t.push(n),ft())}function kt(n){for(var i=0;i<t.length;++i)if(t[i].name===n){t.splice(i,1);break}ft()}function dt(n){var t=n.target,i=t.getAttribute(tt);t.id==="wdp-deploynewapp-sg-remove"&&kt(i)}function gt(n,t,i,r,u){return u.name}function ni(n,t,i,r,u){return'<span id="wdp-deploynewapp-sg-remove" class="wdp-deploynewapp-clickable-text" role="button" tabindex="0" '+tt+'="'+u.name+'" aria-label="Remove this dependency and certificate file, if one has been added.">remove<\/span>'}function ft(){var u=document.querySelector("#wdp-deploynewapp-content"),n=u.querySelector("#wdp-deploynewapp-getdependencies-appdependencies"),i,r;t.length?(c||(i=[{id:"name",name:"Dependency Name",field:"Dependency Name",width:242,cssClass:"tableCell tableTextColumn",headerCssClass:"tableHeader",formatter:gt},{id:"remove",name:"Remove",field:"Remove",width:96,cssClass:"tableCell",headerCssClass:"tableHeader tableTextColumn",formatter:ni}],r={selectedCellCssClass:"rowSelected",enableCellNavigation:!0,enableColumnReorder:!1,enableTextSelectionOnCells:!0,showHeaderRow:!0,syncColumnCellResize:!0,autoHeight:!0,rowHeight:36.5,headerRowHeight:40.45},k=new Slick.Data.DataView,c=new Slick.Grid(n,k,i,r),c.onClick.subscribe(dt),enableSlickGridTabbing("wdp-deploynewapp-getdependencies-appdependencies",!0)),k.setItems(t,"name"),c.invalidate(),c.render()):(c=null,n.innerHTML="")}function ti(n){for(var i=0;i<t.length;++i)if(t[i].name===n)return t[i];return null}function et(n){for(var t=0;t<r.length;++t)if(r[t].appFile.name===n)return r[t];return null}function ii(n,t){var i=et(n);i!==null&&(i.certFile=t,it())}function ot(n){et(n.name)===null&&(r.push({appFile:n,certFile:null,name:n.name}),it())}function ri(n){for(var t=0;t<r.length;++t)if(r[t].appFile.name===n){r.splice(t,1);break}it()}function ui(n){var t=n.target,r=t.getAttribute(g),i;return t.id==="wdp-deploynewapp-sg-remove"?(ri(r),!1):t.id==="wdp-deploynewapp-sg-certfile-add"?($("#wdp-deploynewapp-sg-certificate-certfile").trigger("click"),i=$("#wdp-deploynewapp-sg-certificate-certfile").prop("files")[0],i&&ii(r,i),!1):void 0}function fi(n,t,i,r,u){return u.appFile.name}function ei(n,t,i,r,u){return'<span id="wdp-deploynewapp-sg-remove" class="wdp-deploynewapp-clickable-text" role="button" tabindex="0" '+g+'="'+u.appFile.name+'" aria-label="Remove this optional package and certificate file, if one has been added.">remove<\/span>'}function oi(n,t,i,r,u){return u.certFile?u.certFile.name:'<input id="wdp-deploynewapp-sg-certificate-certfile" type="file" accept=".cer" style="display: none"/><span id="wdp-deploynewapp-sg-certfile-add" class="wdp-deploynewapp-clickable-text" role="button" tabindex="0" '+g+'="'+u.appFile.name+'" aria-label="Add a certificate for this optional package.">add<\/span>'}function it(){var u=document.querySelector("#"+o),t=u.querySelector("#wdp-deploynewapp-getoptionalpackages-optionalpackages"),n,i;r.length?(l||(n=[{id:"name",name:"Optional Package Name",field:"Optional Package Name",width:242,cssClass:"tableCell tableTextColumn",headerCssClass:"tableHeader",formatter:fi},{id:"remove",name:"Remove",field:"Remove",width:96,cssClass:"tableCell",headerCssClass:"tableHeader tableTextColumn",formatter:ei}],h&&window.DeviceSettings&&!window.DeviceSettings.NoAppInstallCertificate&&n.splice(1,0,{id:"certificate",name:"Certificate",field:"Certificate",width:96,cssClass:"tableCell",headerCssClass:"tableHeader tableTextColumn",formatter:oi}),i={selectedCellCssClass:"rowSelected",enableCellNavigation:!0,enableColumnReorder:!1,enableTextSelectionOnCells:!0,showHeaderRow:!0,syncColumnCellResize:!0,autoHeight:!0,rowHeight:36.5,headerRowHeight:40.45},d=new Slick.Data.DataView,l=new Slick.Grid(t,d,n,i),l.onClick.subscribe(ui),enableSlickGridTabbing("wdp-deploynewapp-getoptionalpackages-optionalpackages",!0)),d.setItems(r,"name"),l.invalidate(),l.render()):(l=null,t.innerHTML="")}function y(){if(document.getElementById("wdp-deploynewapp-optionalpackages")){w(["wdp-deploynewapp-installoptions","wdp-deploynewapp-install-or-cancel-section"]);return}h=null;f=null;k=null;c=null;t=[];d=null;l=null;r=[];var i=document.getElementById(o),n='<div class="wdp-deploynewapp-options" id="wdp-deploynewapp-options" role="tablist" aria-label="Deploy new app">                 <ul role="presentation">                     <li role="presentation">                         <a href="#" role="tab" id="wdp-deploynewapp-localstorageoption" aria-controls="wdp-deploynewapp-localstorageoption-tabpanel" title="Download and install the app package.">Local Storage<\/a>                     <\/li >                     <li role="presentation">                         <a href="#" role="tab" id="wdp-deploynewapp-UNCoption" aria-controls="wdp-deploynewapp-UNCoption-tabpanel" title="Download only the parts of the app package that are applicable to the device’s architecture and locale (faster and uses less storage space).">Network<\/a>                     <\/li >';window.DeviceSettings&&!window.DeviceSettings.NoRegisterNetworkShare&&(n+='<li role="presentation">                         <a href="#" role="tab" id="wdp-deploynewapp-registeroption" aria-controls="wdp-deploynewapp-registeroption-tabpanel" title="Register an app on the device by associating its network location with the device (does not actually download the package)">Run from Network<\/a>                     <\/li >');n+='<li role="presentation">                         <a href="#" role="tab" id="wdp-deploynewapp-certificateoption" aria-controls="wdp-deploynewapp-certificateoption-tabpanel" >Install Certificate<\/a>                     <\/li >                 <\/ul>             <\/div>             <div id="wdp-deploynewapp-content"><\/div>';i.innerHTML=n;$("#wdp-deploynewapp-localstorageoption").on("click",function(){return p("installpackage"),!1});$("#wdp-deploynewapp-UNCoption").on("click",function(){return p("pullinstallfromnetwork"),!1});$("#wdp-deploynewapp-registeroption").on("click",function(){return p("networkshare"),!1});$("#wdp-deploynewapp-certificateoption").on("click",function(){return p("certificate"),!1});p("installpackage")}function p(n){var t,i;$("#wdp-deploynewapp-localstorageoption").parent().removeClass("wdp-active");$("#wdp-deploynewapp-localstorageoption").attr("aria-selected",!1);$("#wdp-deploynewapp-UNCoption").parent().removeClass("wdp-active");$("#wdp-deploynewapp-UNCoption").attr("aria-selected",!1);$("#wdp-deploynewapp-registeroption").parent().removeClass("wdp-active");$("#wdp-deploynewapp-registeroption").attr("aria-selected",!1);$("#wdp-deploynewapp-certificateoption").parent().removeClass("wdp-active");$("#wdp-deploynewapp-certificateoption").attr("aria-selected",!1);t="";n=="installpackage"?($("#wdp-deploynewapp-localstorageoption").parent().addClass("wdp-active"),$("#wdp-deploynewapp-localstorageoption").attr("aria-selected",!0),t+='<div id="wdp-deploynewapp-localstorageoption-tabpanel" role="tabpanel" aria-labelledby="wdp-deploynewapp-localstorageoption">                     <div class="form-group" id="wdp-deploynewapp-installoptions">                         <div id="wdp-deploynewapp-installoptions-error" role="alert" aria-atomic="true" class="warning"><\/div>                         <label for="wdp-deploynewapp-packagefile" aria-hidden="true" title="Select the app package">Select the application package<\/label>                         <input id="wdp-deploynewapp-packagefile" type="file" accept=".appx,.appxbundle,.eappx,.eappxbundle,.appinstaller,.msix,.msixbundle,.emsix,.emsixbundle" aria-label="Select the application package" aria-required="true" />',window.DeviceSettings&&!window.DeviceSettings.NoAppInstallCertificate&&(t+='<label for="wdp-deploynewapp-certificatefile" title="Select certificate file (.cer) used to sign app package">Select certificate file (.cer) used to sign app package<\/label>                         <input id="wdp-deploynewapp-certificatefile" type="file" accept=".cer" />'),t+='<div id="wdp-deploynewapp-installoptions-checkboxes">                             <input type="checkbox" id="wdp-deploynewapp-installoptions-optpackagefiles" class="wdp-deploynewapp-checkboxes" aria-label="Allow me to select optional packages" />                             <label for="wdp-deploynewapp-installoptions-optpackagefiles" aria-hidden="true">Allow me to select optional packages<\/label>                             <br/>                             <input type="checkbox" id="wdp-deploynewapp-installoptions-deppackagefiles" class="wdp-deploynewapp-checkboxes" aria-label="Allow me to select framework packages" />                             <label for="wdp-deploynewapp-installoptions-deppackagefiles" aria-hidden="true">Allow me to select framework packages<\/label>                         <\/div>                     <\/div>                     <div class="form-group" id="wdp-deploynewapp-install-or-cancel-section">                         <button id="wdp-deploynewapp-nextpage" class="'+cssClassPrimaryCommand+'" type="button" disabled>Install<\/button>                     <\/div>                 <\/div>'):n=="pullinstallfromnetwork"?($("#wdp-deploynewapp-UNCoption").parent().addClass("wdp-active"),$("#wdp-deploynewapp-UNCoption").attr("aria-selected",!0),t+='<div id="wdp-deploynewapp-UNCoption-tabpanel" role="tabpanel" aria-labelledby="wdp-deploynewapp-UNCoption">                     <div class="form-group" id="wdp-deploynewapp-installoptions">                         <div id="wdp-deploynewapp-installoptions-error" role="alert" aria-atomic="true" class="warning"><\/div>                         <label for="wdp-deploynewapp-packagefile" aria-hidden="true" title="Specify URI for application package or appinstaller file">Specify URI for application package or appinstaller file<\/label>                         <input id="wdp-deploynewapp-packagefile" type="text" aria-invalid="false" aria-required="true" placeholder="\\\\package\\path.appx or http://package/path.appinstaller" />',window.DeviceSettings&&!window.DeviceSettings.NoAppInstallCertificate&&(t+='<label for="wdp-deploynewapp-certificatefile" aria-hidden="true" title="Specify URI for the certificate file (.cer) used to sign app package">Specify URI for the certificate file (.cer) used to sign app package<\/label>                         <input id="wdp-deploynewapp-certificatefile" type="text" placeholder="\\\\certificate\\path.cer or http://certificate/path.cer" />'),t+='<\/div>                     <div class="form-group" id="wdp-deploynewapp-install-or-cancel-section">                         <button id="wdp-deploynewapp-nextpage" class="'+cssClassPrimaryCommand+'" type="button" disabled>Install<\/button>                     <\/div>                 <\/div>'):n=="networkshare"?($("#wdp-deploynewapp-registeroption").parent().addClass("wdp-active"),$("#wdp-deploynewapp-registeroption").attr("aria-selected",!0),t+='<div id="wdp-deploynewapp-registeroption-tabpanel" role="tabpanel" aria-labelledby="wdp-deploynewapp-registeroption">                     <div class="form-group" id="wdp-deploynewapp-installoptions">                         <div id="wdp-deploynewapp-installoptions-error" role="alert" aria-atomic="true" class="warning"><\/div>                         <label for="wdp-deploynewapp-packagefile" aria-hidden="true" title="Register an app on the device by associating its network location with the device (does not actually download the package).">Specify URI to the application files<\/label>                         <input type="text" id="wdp-deploynewapp-packagefile" aria-invalid="false" aria-required="true" placeholder="\\\\application\\path" />                         <div id="wdp-deploynewapp-installoptions-checkboxes">                             <input type="checkbox" id="wdp-deploynewapp-installoptions-optpackagefiles" class="wdp-deploynewapp-checkboxes" aria-label="Allow me to select optional packages" />                             <label for="wdp-deploynewapp-installoptions-optpackagefiles" aria-hidden="true">Allow me to select optional packages<\/label>                             <br/>                             <input type="checkbox" id="wdp-deploynewapp-installoptions-deppackagefiles" class="wdp-deploynewapp-checkboxes" aria-label="Allow me to select framework packages" />                             <label for="wdp-deploynewapp-installoptions-deppackagefiles" aria-hidden="true">Allow me to select framework packages<\/label>                         <\/div>                     <\/div>                     <div class="form-group" id="wdp-deploynewapp-install-or-cancel-section">                         <button id="wdp-deploynewapp-nextpage" class="'+cssClassPrimaryCommand+'" type="button" disabled>Register<\/button>                     <\/div>                 <\/div>'):n=="certificate"&&($("#wdp-deploynewapp-certificateoption").parent().addClass("wdp-active"),$("#wdp-deploynewapp-certificateoption").attr("aria-selected",!0),t+='<div id="wdp-deploynewapp-certificateoption-tabpanel" role="tabpanel" aria-labelledby="wdp-deploynewapp-certificateoption">                 <div class="form-group" id="wdp-deploynewapp-installoptions">                         <div id="wdp-deploynewapp-installoptions-error" role="alert" aria-atomic="true" class="warning"><\/div>                         <label for="wdp-deploynewapp-certificatefile" aria-hidden="true" title="Select certificate file (.cer) used to sign an app package">Select certificate file (.cer) used to sign an app package<\/label>                         <input id="wdp-deploynewapp-certificatefile" type="file" accept=".cer" aria-required="true" />                     <\/div>                     <div class="form-group" id="wdp-deploynewapp-install-or-cancel-section">                         <button id="wdp-deploynewapp-nextpage" class="'+cssClassPrimaryCommand+'" type="button" disabled>Install<\/button>                     <\/div>                 <\/div>');i=document.getElementById("wdp-deploynewapp-content");i.innerHTML=t;i.querySelector("#wdp-deploynewapp-nextpage").addEventListener("click",li,!1);i.querySelector("#wdp-deploynewapp-installoptions-optpackagefiles")&&(i.querySelector("#wdp-deploynewapp-installoptions-optpackagefiles").addEventListener("change",st,!1),i.querySelector("#wdp-deploynewapp-installoptions-deppackagefiles").addEventListener("change",st,!1));n!="certificate"&&i.querySelector("#wdp-deploynewapp-packagefile").addEventListener("input",function(){si(n)},!1);(n=="installpackage"||n=="certificate")&&i.querySelector("#wdp-deploynewapp-certificatefile").addEventListener("input",function(){hi(n)},!1)}function si(){var n=document.getElementById("wdp-deploynewapp-packagefile");document.getElementById("wdp-deploynewapp-nextpage").disabled=n.value==""}function hi(n){var t=document.getElementById("wdp-deploynewapp-certificatefile");n=="certificate"&&(document.getElementById("wdp-deploynewapp-nextpage").disabled=t.value=="")}function st(){var n=document.getElementById(o),t=n.querySelector("#wdp-deploynewapp-installoptions-optpackagefiles").checked,i=n.querySelector("#wdp-deploynewapp-installoptions-deppackagefiles").checked,r=n.querySelector("#wdp-deploynewapp-nextpage"),u=$("wdp-deploynewapp-registeroption").parent().hasClass("wdp-active");r.innerHTML=t||i?"Next":u?"Register":"Install"}function ci(n){var t=n.toLowerCase();return t.indexOf(".appx")===-1&&t.indexOf(".eappx")===-1&&t.indexOf(".appinstaller")===-1&&t.indexOf(".msix")===-1&&t.indexOf(".emsix")===-1?!1:!0}function li(){var n=document.querySelector("#"+o),y=n.querySelector("#wdp-deploynewapp-registernetworkshare"),p=n.querySelector("#wdp-deploynewapp-appinstaller"),t,r,i;if($("#wdp-deploynewapp-localstorageoption").parent().hasClass("wdp-active")){var e=n.querySelector("#wdp-deploynewapp-packagefile"),t=n.querySelector("#wdp-deploynewapp-certificatefile"),v=n.querySelector("#wdp-deploynewapp-installoptions-optpackagefiles").checked,l=n.querySelector("#wdp-deploynewapp-installoptions-deppackagefiles").checked,r=n.querySelector("#wdp-deploynewapp-installoptions-error");r.innerHTML="";e&&e.files&&e.files.length>0?h=e.files[0]:e&&e.packageFile&&(h=e.packageFile);t&&t.files&&t.files.length>0?f=t.files[0]:t&&t.certificateFile&&(f=t.certificateFile);h&&ci(h.name)?(i={isPackaged:!0,installDependencies:l},v?ht(i):l?rt(i):s(i)):r.innerHTML="Please specify an application package."}else if($("#wdp-deploynewapp-UNCoption").parent().hasClass("wdp-active")){var i={networkSharePullInstall:!0},a=n.querySelector("#wdp-deploynewapp-packagefile"),r=n.querySelector("#wdp-deploynewapp-installoptions-error");a.setAttribute("aria-invalid","false");u=a.value;u&&(u.startsWith("\\\\")&&u.length>2||u.startsWith("http://")||u.startsWith("https://"))?s(i):(r.innerHTML="Specify a valid network share or web server path to install.",a.setAttribute("aria-invalid","true"),a.focus())}else if($("#wdp-deploynewapp-registeroption").parent().hasClass("wdp-active")){var c=n.querySelector("#wdp-deploynewapp-packagefile"),v=n.querySelector("#wdp-deploynewapp-installoptions-optpackagefiles").checked,l=n.querySelector("#wdp-deploynewapp-installoptions-deppackagefiles").checked;c.setAttribute("aria-invalid","false");c.setAttribute("aria-hidden","false");r=n.querySelector("#wdp-deploynewapp-installoptions-error");r.innerHTML="";u=c.value;u&&u.startsWith("\\\\")&&u.length>2?(i={networkShare:!0,installDependencies:l},v?ht(i):l?rt(i):s(i)):(r.innerHTML="Specify a valid network location to register.",c.setAttribute("aria-invalid","true"),c.focus())}else $("#wdp-deploynewapp-certificateoption").parent().hasClass("wdp-active")&&(t=n.querySelector("#wdp-deploynewapp-certificatefile"),r=n.querySelector("#wdp-deploynewapp-installoptions-error"),r.innerHTML="",f=null,t&&t.files&&t.files.length>0?f=t.files[0]:t&&t.certificateFile&&(f=t.certificateFile),f?(i={certificateInstall:!0},s(i)):r.innerHTML="Specify an application package to install.")}function ht(n){var f,t,i,u,e,o,h;if(document.getElementById("wdp-deploynewapp-optionalpackages")){w(["wdp-deploynewapp-optionalpackages"]);return}n.isPackaged?(innerHtml='<form>                     <div class="form-group" id="wdp-deploynewapp-getoptionalpackages-addoptionalpackagesection">                         <label>Choose any optional packages:<\/label>                         <input id="wdp-deploynewapp-getoptionalpackages-packagefile" type="file" accept=".appx,.appxbundle,.eappx,.eappxbundle,.msix,.msixbundle,.emsix,.emsixbundle" placeholder="Point to optional package"/>                     <\/div>',f=n.installDependencies?"Next":"Install"):(innerHtml='<form>                     <div class="form-group" id="wdp-deploynewapp-getoptionalpackages-addnetworksharesection">                             <label>Specify a URI to the loose files of optional package:<\/label>                             <input type="text" id="wdp-deploynewapp-getoptionalpackages-networkshare" style="width: 75%;display:inline"/>                             <button id="wdp-deploynewapp-getoptionalpackages-networkshare-add" class="'+cssClassPrimaryCommand+'" type="button">Add<\/button>                     <\/div>',f=n.installDependencies?"Next":"Register");innerHtml+='<div id="wdp-deploynewapp-getoptionalpackages-optionalpackages" class="commonTable"><\/div>                     <div class="form-group">                         <button id="wdp-deploynewapp-getoptionalpackages-nextpage" class="'+cssClassPrimaryCommand+'" type="button" aria-label="App deploy next button.">'+f+'<\/button>                         <button id="wdp-deploynewapp-getoptionalpackages-cancel" class="'+cssClassPrimaryCommand+'" type="button" aria-label="App deploy cancel button.">Cancel<\/button>                     <\/div>                 <\/form>';t=document.getElementById("wdp-deploynewapp-content");i=document.createElement("form");i.id="wdp-deploynewapp-optionalpackages";i.innerHTML=innerHtml;t.appendChild(i);w(["wdp-deploynewapp-optionalpackages"]);r=[];n.isPackaged?(u=t.querySelector("#wdp-deploynewapp-getoptionalpackages-packagefile"),u.addEventListener("change",function(){ct(u.files,u,ot)})):(e=t.querySelector("#wdp-deploynewapp-getoptionalpackages-networkshare-add"),e.addEventListener("click",function(){var n=t.querySelector("#wdp-deploynewapp-getoptionalpackages-networkshare");n.value.length>0&&(ot({name:n.value}),n.value="");n.focus()}));o=t.querySelector("#wdp-deploynewapp-getoptionalpackages-nextpage");o.addEventListener("click",function(){n.installDependencies?rt(n):s(n)});h=t.querySelector("#wdp-deploynewapp-getoptionalpackages-cancel");h.addEventListener("click",y)}function ct(n,t,i){var r=t.packageFile;n.length>0&&(r=n[0]);wt($(t));r&&i(r)}function rt(n){var r,f,e;if(document.getElementById("wdp-deploynewapp-frameworkpackages")){w(["wdp-deploynewapp-frameworkpackages"]);return}var o=n.networkShare?"Register":"Install",h='<form>                 <div id="wdp-deploynewapp-getdependencies-adddependencysection">                     <label for="wdp-deploynewapp-getdependencies-packagefile">Choose any necessary dependencies:<\/label>                     <input id="wdp-deploynewapp-getdependencies-packagefile" type="file" accept=".appx,.appxbundle,.eappx,.eappxbundle,.msix,.msixbundle,.emsix,.emsixbundle" placeholder="Point to framework packages" />                 <\/div>                 <div id="wdp-deploynewapp-getdependencies-appdependencies" class="commonTable"><\/div>                 <div class="form-group">                     <button id="wdp-deploynewapp-getdependencies-start" class="'+cssClassPrimaryCommand+'" type="button" aria-label="App deploy start button.">'+o+'<\/button>                     <button id="wdp-deploynewapp-getdependencies-cancel" class="'+cssClassPrimaryCommand+'" type="button" aria-label="App deploy cancel button.">Cancel<\/button>                 <\/div>             <\/form>',i=document.getElementById("wdp-deploynewapp-content"),u=document.createElement("form");u.id="wdp-deploynewapp-frameworkpackages";u.innerHTML=h;i.appendChild(u);w(["wdp-deploynewapp-frameworkpackages"]);t=[];r=i.querySelector("#wdp-deploynewapp-getdependencies-packagefile");r.addEventListener("change",function(){ct(r.files,r,bt)});f=i.querySelector("#wdp-deploynewapp-getdependencies-start");f.addEventListener("click",function(){s(n)});e=i.querySelector("#wdp-deploynewapp-getdependencies-cancel");e.addEventListener("click",y)}function w(n){for(var i,r=document.getElementById("wdp-deploynewapp-content"),t=0;t<r.children.length;t++)i=r.children[t],i.style.display=n.includes(i.id)?"":"None"}function ai(n){var t=document.getElementById("wdp-deploynewapp-content"),r=t.querySelector("#wdp-deploynewapp-getnetworkcreds-networkuser"),u=t.querySelector("#wdp-deploynewapp-getnetworkcreds-networkpassword"),i={sharePath:n.target.sharePath,username:r.value,password:u.value};n.target.networkShare?s({networkShare:!0,networkShareCredentialsProvided:i}):n.target.networkSharePullInstall&&s({networkSharePullInstall:!0,networkShareCredentialsProvided:i})}function lt(n,t,i){var f='<h4>The provided network share "'+n+'" requires login credentials.<\/h4>',e,o,u,r,s;t&&(f='<h4>The provided credentials for network share "'+n+'" were invalid. Please try again.<\/h4>');e="Please enter the username for the network share"+n;o="Please enter the password for the network share"+n;f+='<form id="wdp-credentials-dialog">                 <label>Enter your username<\/label>                 <div id="wdp-deploynewapp-getnetworkcreds-networkusersection">                     <input id="wdp-deploynewapp-getnetworkcreds-networkuser" tabindex="0" aria-label="'+e+'" />                 <\/div>                 <label>Enter your password<\/label>                 <div id="wdp-deploynewapp-getnetworkcreds-networkpasswordsection">                     <input id="wdp-deploynewapp-getnetworkcreds-networkpassword" tabindex="0" type="password"  aria-label="'+o+'"/>                 <\/div>                 <div class="form-group">                     <button id="wdp-deploynewapp-getnetworkcreds-startdeploy" class="'+cssClassPrimaryCommand+'" type="button" aria-label="App deploy start button.">Start<\/button>                     <button id="wdp-deploynewapp-getnetworkcreds-cancel" class="'+cssClassPrimaryCommand+'" type="button" aria-label="App deploy cancel button.">Cancel<\/button>                 <\/div>             <\/form>';u=document.getElementById("wdp-deploynewapp-content");u.innerHTML=f;r=u.querySelector("#wdp-deploynewapp-getnetworkcreds-startdeploy");r.addEventListener("click",ai,!1);s=u.querySelector("#wdp-deploynewapp-getnetworkcreds-cancel");s.addEventListener("click",y);i.networkShare?r.networkShare=!0:i.networkSharePullInstall&&(r.networkSharePullInstall=!0);r.sharePath=n}function at(n){var t=document.querySelector("#"+o),i=t.querySelector("#wdp-deploynewapp-showinstallationprogress-headertext");i.innerHTML=n}function a(n){var t=document.querySelector("#"+o),i=t.querySelector("#wdp-deploynewapp-showinstallationprogress-statustext");i.innerHTML=n}function vi(){var n=document.querySelector("#"+o),t=n.querySelector("#wdp-deploynewapp-showinstallationprogress-statusbar");t.style.display="none"}function vt(n){var t=document.querySelector("#"+o),i=t.querySelector("#wdp-deploynewapp-showinstallationprogress-statusbar");i.value=n}function e(n,t){n?(at("Installation Complete"),t.certificateInstall?a("Certificate Successfully Installed"):a("Package Successfully Registered"),vt(100),triggerPackageInstalledCallback()):(at("Installation Failed"),a(WebManagement.ErrorStringFromStatus(t||{})),vi());var i=document.querySelector("#"+o),r=i.querySelector("#wdp-deploynewapp-showinstallationprogress-done");r.style.display="block"}function nt(n,t,i,r,u){var s=2,h=0,e,o,f;u&&(s=u+1);r>0&&(h=r);e=100/s;o=h*e+e*(i/100);u?(f=u-r+" folder(s) remaining",f+="<br>",f+=o.toFixed(2)+"% complete",a(f)):a("Upload "+i+"% complete");vt(o)}function b(){var n=new WebbRest;n.getInstallationState().done(function(n){n.installRunning===!1?e(n.Success,n):v=setTimeout(b,1e3)}).fail(function(){v=setTimeout(b,1e3)})}function ut(n,t){t.getInstallationState().done(function(i){i.installRunning===!1?(a("Registering..."),yt(n,t)):v=setTimeout(function(){ut(n,t)},1e3)}).fail(function(){v=setTimeout(function(){ut(n,t)},1e3)})}function s(n){var y='<h4 id="wdp-deploynewapp-showinstallationprogress-headertext">Installation Progress<\/h4>             <form>                 <div class="form-group">                     <span id="wdp-deploynewapp-showinstallationprogress-statustext" role="alert" aria-live="assertive" style="display: block; word-wrap:break-word" aria-automic="true"/>                 <\/div>                 <div class="form-group">                     <progress value="0" max="100" id="wdp-deploynewapp-showinstallationprogress-statusbar">                     <\/progress                 <\/div>                 <div class="form-group">                     <button id="wdp-deploynewapp-showinstallationprogress-done" class="'+cssClassPrimaryCommand+'" type="button" style="display: none">Done<\/button>                 <\/div>             <\/form>',l=document.getElementById("wdp-deploynewapp-content"),s,u,v,c;if(l.innerHTML=y,s=l.querySelector("#wdp-deploynewapp-showinstallationprogress-done"),s.addEventListener("click",pi,!1),s.focus(),u=new WebbRest,n.isPackaged)try{u.installApp({appFile:h,certificateFile:f,dependencyFiles:t,optionalAppAndCertFiles:r},nt).done(function(){b()}).fail(function(n){e(!1,n)})}catch(o){if(o.number===-2147024362)e(!1,{Reason:"Your current browser does not support packages larger than 4 GB in size. Please try another browser."});else throw o;}else if(n.networkShare)if(t.length>0){for(a("Installing dependencies..."),v=t[0],c=[],i=1;i<t.length;i++)c.push(t[i]);u.installApp({appFile:v,certificateFiles:f,dependencyFiles:c},nt).done(function(){ut(n,u)}).fail(function(n){e(!1,n)})}else yt(n,u);else if(n.networkSharePullInstall)try{yi(n,u)}catch(o){throw o;}else if(n.certificateInstall)try{u.installCertificate({certificateFile:f},nt).done(function(){e(!0,{certificateInstall:!0})}).fail(function(n){e(!1,n)})}catch(o){throw o;}}function yi(n,t){var i={networkshare:u},r=n.networkShareCredentialsProvided;r&&i.networkshare.startsWith(r.sharePath)&&(i.username=r.username,i.password=r.password);t.pullinstallFromNetwork({mainpackage:i},nt).done(function(){b()}).fail(function(t){var i,o,r,u,f;if(t&&t.responseText)if(i=JSON.parse(t.responseText),i&&i.Code&&(o=i.Code>>>32),o===2147942405)r=i.details[0].target,lt(r,n.networkShareCredentialsProvided&&n.networkShareCredentialsProvided.sharePath===r,n);else{if(u=[],i.details&&i.details.length>0){for(f in i.details)u[f]='"'+i.details[f].target+'"';i.Reason=i.Reason+" "+u.join(", ")}e(!1,i)}else t&&e(!1,t)})}function yt(n,t){var s={networkshare:u},i=n.networkShareCredentialsProvided,f,o;i&&s.networkshare.startsWith(i.sharePath)&&(s.username=i.username,s.password=i.password);f=[];for(o in r)f.push({networkshare:r[o].appFile.name}),i&&i.sharePath===f[o].networkshare&&(f[o].username=i.username,f[o].password=i.password);t.registerNetworkShareApp({mainpackage:s,optionalpackages:f}).done(function(){b()}).fail(function(t){var i,o,r,u,f;if(t&&t.responseText)if(i=JSON.parse(t.responseText),i&&i.Code&&(o=i.Code>>>32),o===2147942405)r=i.details[0].target,lt(r,n.networkShareCredentialsProvided&&n.networkShareCredentialsProvided.sharePath===r,n);else{if(u=[],i.details&&i.details.length>0){for(f in i.details)u[f]='"'+i.details[f].target+'"';i.Reason=i.Reason+" "+u.join(", ")}e(!1,i)}else t&&e(!1,t)})}function pi(){clearTimeout(v);y()}var h,u,f,k,c,t=[],d,l,r=[],v,o=n,tt,g;cssClassPrimaryCommand="btn-primary";tt="data-dependency-name";g="data-optionalpackage-name";this.setAddPackageEnabledButton=pt;y()}var WebbRest,AppDeploymentControl;$(function(){function u(){n?$("#NoSignedInUserWarning").hide():$("#NoSignedInUserWarning").show();$("#InstalledAppsSignedInUserLabel").text("Current user: "+t);f.setAddPackageEnabledButton(!n)}function o(){if(window.DeviceSettings&&window.DeviceSettings.DeviceFamily&&window.DeviceSettings.DeviceFamily===e)r=setInterval(s,1e3)}function s(){var r=n&&!!t,f=i;n=!1;t="";i="";Wdp.Utils._getSignedInUserAsync().then(function(e){e.UserDisplayName&&(n=!0,t=e.UserDisplayName,i=e.UserSID);(n!==r||i!==f)&&u()}).fail(function(){u()})}function h(){clearInterval(r)}var e="Windows.Desktop",f;if(!window.DeviceSettings||!window.DeviceSettings.DeviceFamily||window.DeviceSettings.DeviceFamily!=="Windows.IoT"){var r=null,n=!0,t,i;f=new AppDeploymentControl("wdp-deploynewapp",!n);o();window.addEventListener("beforeunload",h,!1)}});
/*!
//@ sourceURL=tools/DeployApp/DeployApp.js
*/
