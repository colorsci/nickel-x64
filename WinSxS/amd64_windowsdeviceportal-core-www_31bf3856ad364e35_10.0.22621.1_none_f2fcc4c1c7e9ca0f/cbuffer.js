(function(n){function t(){if(!(this instanceof t))return arguments.length>1||typeof arguments[0]!="number"?t.apply(new t(arguments.length),arguments):new t(arguments[0]);if(arguments.length===0)throw new Error("Missing Argument: You must pass a valid buffer length");return this.size=this.start=0,this.overflow=null,arguments.length>1||typeof arguments[0]!="number"?(this.data=new Array(arguments.length),this.end=(this.length=arguments.length)-1,this.push.apply(this,arguments)):(this.data=new Array(arguments[0]),this.end=(this.length=arguments[0])-1),this}function i(n,t){return n==t?0:n>t?1:-1}t.prototype={constructor:t,pop:function(){var n;if(this.size!==0)return n=this.data[this.end],delete this.data[this.end],this.end=(this.end-1+this.length)%this.length,this.size--,n},push:function(){var n=0;if(this.overflow&&this.size+arguments.length>this.length)for(;n<this.size+arguments.length-this.length;n++)this.overflow(this.data[(this.end+n+1)%this.length],this);for(n=0;n<arguments.length;n++)this.data[(this.end+n+1)%this.length]=arguments[n];return this.size<this.length&&(this.size+n>this.length?this.size=this.length:this.size+=n),this.end=(this.end+n)%this.length,this.start=(this.length+this.end-this.size+1)%this.length,this.size},reverse:function(){for(var n=0,t;n<~~(this.size/2);n++)t=this.data[(this.start+n)%this.length],this.data[(this.start+n)%this.length]=this.data[(this.start+(this.size-n-1))%this.length],this.data[(this.start+(this.size-n-1))%this.length]=t;return this},rotateLeft:function(n){if(typeof n=="undefined"&&(n=1),typeof n!="number")throw new Error("Argument must be a number");while(--n>=0)this.push(this.shift());return this},rotateRight:function(n){if(typeof n=="undefined"&&(n=1),typeof n!="number")throw new Error("Argument must be a number");while(--n>=0)this.unshift(this.pop());return this},shift:function(){var n;if(this.size!==0)return n=this.data[this.start],this.start=(this.start+1)%this.length,this.size--,n},sort:function(n){return this.data.sort(n||i),this.start=0,this.end=this.size-1,this},unshift:function(){var n=0;if(this.overflow&&this.size+arguments.length>this.length)for(;n<this.size+arguments.length-this.length;n++)this.overflow(this.data[this.end-n%this.length],this);for(n=0;n<arguments.length;n++)this.data[(this.length+this.start-n%this.length-1)%this.length]=arguments[n];return this.length-this.size-n<0&&(this.end+=this.length-this.size-n,this.end<0&&(this.end=this.length+this.end%this.length)),this.size<this.length&&(this.size+n>this.length?this.size=this.length:this.size+=n),this.start-=arguments.length,this.start<0&&(this.start=this.length+this.start%this.length),this.size},indexOf:function(n,t){for(t||(t=0);t<this.size;t++)if(this.data[(this.start+t)%this.length]===n)return t;return-1},lastIndexOf:function(n,t){for(t||(t=this.size-1);t>=0;t--)if(this.data[(this.start+t)%this.length]===n)return t;return-1},sortedIndex:function(n,t,r){var u,f,e;for(t=t||i,u=this.start,f=this.size-1,u&&t.call(r,n,this.data[f])>0&&(u=0,f=this.end);u<f;)e=u+f>>>1,t.call(r,n,this.data[e])>0?u=e+1:f=e;return((u-this.start)%this.size+this.size)%this.size},every:function(n,t){for(var i=0;i<this.size;i++)if(!n.call(t,this.data[(this.start+i)%this.length],i,this))return!1;return!0},forEach:function(n,t){for(var i=0;i<this.size;i++)n.call(t,this.data[(this.start+i)%this.length],i,this)},some:function(n,t){for(var i=0;i<this.size;i++)if(n.call(t,this.data[(this.start+i)%this.length],i,this))return!0;return!1},avg:function(){return this.size==0?0:this.sum()/this.size},sum:function(){for(var n=this.size,t=0;n--;)t+=this.data[n];return t},median:function(){if(this.size===0)return 0;var n=this.toArray().sort(),t=Math.floor(n.length/2);return n.length%2?n[t]:(n[t-1]+n[t])/2},empty:function(){return this.size=this.start=0,this.end=this.length-1,this},fill:function(n){var t=0;if(typeof n=="function")while(this.data[t]=n(),++t<this.length);else while(this.data[t]=n,++t<this.length);return this.start=0,this.end=this.length-1,this.size=this.length,this},first:function(){return this.data[this.start]},last:function(){return this.data[this.end]},get:function(n){return this.data[(this.start+n)%this.length]},isFull:function(){return this.length===this.size},set:function(n,t){return this.data[(this.start+n)%this.length]=t},toArray:function(){for(var t=new Array(this.size),n=0;n<this.size;n++)t[n]=this.data[(this.start+n)%this.length];return t}};typeof module=="object"&&module.exports?module.exports=t:n.CBuffer=t})(this)